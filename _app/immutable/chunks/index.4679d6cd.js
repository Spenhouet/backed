import{n as K}from"./index.d06fb743.js";var Q=X,W=K;function X(i){if(i=i||{},"uniqueLinkId"in i&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n",`
`,`Note: there is also change in default behavior: From now on each graph
is considered to be not a multigraph by default (each edge is unique).`),i.multigraph=i.uniqueLinkId),i.multigraph===void 0&&(i.multigraph=!1),typeof Map!="function")throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var o=new Map,d=[],a={},v=0,h=i.multigraph?G:_,g=[],c=w,L=w,p=w,k=w,l={addNode:N,addLink:R,removeLink:q,removeNode:C,getNode:s,getNodeCount:O,getLinkCount:x,getLinksCount:x,getNodesCount:O,getLinks:z,forEachNode:M,forEachLinkedNode:J,forEachLink:B,beginUpdate:p,endUpdate:k,clear:A,hasLink:m,hasNode:s,getLink:m};return W(l),I(),l;function I(){var e=l.on;l.on=n;function n(){return l.beginUpdate=p=$,l.endUpdate=k=D,c=b,L=F,l.on=e,e.apply(l,arguments)}}function b(e,n){g.push({link:e,changeType:n})}function F(e,n){g.push({node:e,changeType:n})}function N(e,n){if(e===void 0)throw new Error("Invalid node identifier");p();var r=s(e);return r?(r.data=n,L(r,"update")):(r=new Z(e,n),L(r,"add")),o.set(e,r),k(),r}function s(e){return o.get(e)}function C(e){var n=s(e);if(!n)return!1;p();var r=n.links;if(r){n.links=null;for(var t=0;t<r.length;++t)q(r[t])}return o.delete(e),L(n,"remove"),k(),!0}function R(e,n,r){p();var t=s(e)||N(e),f=s(n)||N(n),u=h(e,n,r);return d.push(u),P(t,u),e!==n&&P(f,u),c(u,"add"),k(),u}function _(e,n,r){var t=y(e,n);return new S(e,n,r,t)}function G(e,n,r){var t=y(e,n),f=a.hasOwnProperty(t);if(f||m(e,n)){f||(a[t]=0);var u="@"+ ++a[t];t=y(e+u,n+u)}return new S(e,n,r,t)}function O(){return o.size}function x(){return d.length}function z(e){var n=s(e);return n?n.links:null}function q(e){if(!e)return!1;var n=E(e,d);if(n<0)return!1;p(),d.splice(n,1);var r=s(e.fromId),t=s(e.toId);return r&&(n=E(e,r.links),n>=0&&r.links.splice(n,1)),t&&(n=E(e,t.links),n>=0&&t.links.splice(n,1)),c(e,"remove"),k(),!0}function m(e,n){var r=s(e),t;if(!r||!r.links)return null;for(t=0;t<r.links.length;++t){var f=r.links[t];if(f.fromId===e&&f.toId===n)return f}return null}function A(){p(),M(function(e){C(e.id)}),k()}function B(e){var n,r;if(typeof e=="function")for(n=0,r=d.length;n<r;++n)e(d[n])}function J(e,n,r){var t=s(e);if(t&&t.links&&typeof n=="function")return r?Y(t.links,e,n):V(t.links,e,n)}function V(e,n,r){for(var t,f=0;f<e.length;++f){var u=e[f],H=u.fromId===n?u.toId:u.fromId;if(t=r(o.get(H),u),t)return!0}}function Y(e,n,r){for(var t,f=0;f<e.length;++f){var u=e[f];if(u.fromId===n&&(t=r(o.get(u.toId),u),t))return!0}}function w(){}function $(){v+=1}function D(){v-=1,v===0&&g.length>0&&(l.fire("changed",g),g.length=0)}function M(e){if(typeof e!="function")throw new Error("Function is expected to iterate over graph nodes. You passed "+e);for(var n=o.values(),r=n.next();!r.done;){if(e(r.value))return!0;r=n.next()}}}function E(i,o){if(!o)return-1;if(o.indexOf)return o.indexOf(i);var d=o.length,a;for(a=0;a<d;a+=1)if(o[a]===i)return a;return-1}function Z(i,o){this.id=i,this.links=null,this.data=o}function P(i,o){i.links?i.links.push(o):i.links=[o]}function S(i,o,d,a){this.fromId=i,this.toId=o,this.data=d,this.id=a}function y(i,o){return i.toString()+"ðŸ‘‰ "+o.toString()}var ne=T,j=Q;function T(i,o,d){var a;o=o||U,d=d||U,typeof i=="string"?a=JSON.parse(i):a=i;var v=j(),h;if(a.links===void 0||a.nodes===void 0)throw new Error("Cannot load graph without links and nodes");for(h=0;h<a.nodes.length;++h){var g=o(a.nodes[h]);if(!g.hasOwnProperty("id"))throw new Error("Graph node format is invalid: Node id is missing");v.addNode(g.id,g.data)}for(h=0;h<a.links.length;++h){var c=d(a.links[h]);if(!c.hasOwnProperty("fromId")||!c.hasOwnProperty("toId"))throw new Error("Graph link format is invalid. Both fromId and toId are required");v.addLink(c.fromId,c.toId,c.data)}return v}function U(i){return i}export{ne as n};
