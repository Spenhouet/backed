var Oa=Object.defineProperty;var Na=(i,t,e)=>t in i?Oa(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var Qi=(i,t,e)=>(Na(i,typeof t!="symbol"?t+"":t,e),e);import{S as Ve,i as Oe,s as Ne,G as Mi,V as He,a5 as vt,a6 as bt,m as z,h as w,n as b,a7 as Si,b as st,K as _,O as Kt,H as Ci,I as Ei,J as Ti,Y as Er,f as tt,t as nt,E as Tr,T as ki,W as kr,P as Jt,k as B,l as I,ae as Pr,af as Rr,C as Ie,o as zr,v as hn,a as lt,c as at,L as ln,N as $h,a1 as K,q,r as Y,u as At,e as ho,g as ti,d as ei,a2 as et,M as Da,p as Yt,x as re,y as oe,z as he,A as le}from"../../../../../chunks/index-17510b9a.js";import{b as bi}from"../../../../../chunks/paths-24bb4e9c.js";import{p as La}from"../../../../../chunks/stores-b978d586.js";import{c as ur,l as Ns}from"../../../../../chunks/lodash.default-76769d5d.js";import{m as lo,c as ao,i as tl,g as el,l as es,b as $e,f as Xt,d as an,e as un,h as Ds,j as uo}from"../../../../../chunks/graph-5ab05bb3.js";import{w as it,j as Mt}from"../../../../../chunks/singletons-4789530f.js";import{n as Fa,T as il}from"../../../../../chunks/table-84ea4c6b.js";import{P as co}from"../../../../../chunks/public-550f299c.js";import{S as Aa}from"../../../../../chunks/index-24193bbc.js";function Ba(i){let t,e,s,n,r;const o=i[2].default,h=Mi(o,i,i[1],null);let a=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{viewBox:"0 0 24 24"},{stroke:"currentColor"},{"aria-hidden":"true"},i[0]],l={};for(let u=0;u<a.length;u+=1)l=He(l,a[u]);return{c(){t=vt("svg"),h&&h.c(),e=vt("path"),this.h()},l(u){t=bt(u,"svg",{xmlns:!0,fill:!0,viewBox:!0,stroke:!0,"aria-hidden":!0});var c=z(t);h&&h.l(c),e=bt(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),z(e).forEach(w),c.forEach(w),this.h()},h(){b(e,"stroke-linecap","round"),b(e,"stroke-linejoin","round"),b(e,"stroke-width","2"),b(e,"d","M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"),Si(t,l)},m(u,c){st(u,t,c),h&&h.m(t,null),_(t,e),s=!0,n||(r=[Kt(t,"click",i[3]),Kt(t,"mouseover",i[4]),Kt(t,"mouseenter",i[5]),Kt(t,"mouseleave",i[6]),Kt(t,"keydown",i[7])],n=!0)},p(u,[c]){h&&h.p&&(!s||c&2)&&Ci(h,o,u,u[1],s?Ti(o,u[1],c,null):Ei(u[1]),null),Si(t,l=Er(a,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{viewBox:"0 0 24 24"},{stroke:"currentColor"},{"aria-hidden":"true"},c&1&&u[0]]))},i(u){s||(tt(h,u),s=!0)},o(u){nt(h,u),s=!1},d(u){u&&w(t),h&&h.d(u),n=!1,Tr(r)}}}function Ia(i,t,e){const s=[];let n=ki(t,s),{$$slots:r={},$$scope:o}=t;function h(f){Jt.call(this,i,f)}function a(f){Jt.call(this,i,f)}function l(f){Jt.call(this,i,f)}function u(f){Jt.call(this,i,f)}function c(f){Jt.call(this,i,f)}return i.$$set=f=>{t=He(He({},t),kr(f)),e(0,n=ki(t,s)),"$$scope"in f&&e(1,o=f.$$scope)},[n,o,r,h,a,l,u,c]}class Ua extends Ve{constructor(t){super(),Oe(this,t,Ia,Ba,Ne,{})}}function Ha(i){let t,e,s,n,r;const o=i[2].default,h=Mi(o,i,i[1],null);let a=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{viewBox:"0 0 24 24"},{stroke:"currentColor"},{"aria-hidden":"true"},i[0]],l={};for(let u=0;u<a.length;u+=1)l=He(l,a[u]);return{c(){t=vt("svg"),h&&h.c(),e=vt("path"),this.h()},l(u){t=bt(u,"svg",{xmlns:!0,fill:!0,viewBox:!0,stroke:!0,"aria-hidden":!0});var c=z(t);h&&h.l(c),e=bt(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),z(e).forEach(w),c.forEach(w),this.h()},h(){b(e,"stroke-linecap","round"),b(e,"stroke-linejoin","round"),b(e,"stroke-width","2"),b(e,"d","M10 14H5.236a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.736 3h4.018a2 2 0 01.485.06l3.76.94m-7 10v5a2 2 0 002 2h.096c.5 0 .905-.405.905-.904 0-.715.211-1.413.608-2.008L17 13V4m-7 10h2m5-10h2a2 2 0 012 2v6a2 2 0 01-2 2h-2.5"),Si(t,l)},m(u,c){st(u,t,c),h&&h.m(t,null),_(t,e),s=!0,n||(r=[Kt(t,"click",i[3]),Kt(t,"mouseover",i[4]),Kt(t,"mouseenter",i[5]),Kt(t,"mouseleave",i[6]),Kt(t,"keydown",i[7])],n=!0)},p(u,[c]){h&&h.p&&(!s||c&2)&&Ci(h,o,u,u[1],s?Ti(o,u[1],c,null):Ei(u[1]),null),Si(t,l=Er(a,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{viewBox:"0 0 24 24"},{stroke:"currentColor"},{"aria-hidden":"true"},c&1&&u[0]]))},i(u){s||(tt(h,u),s=!0)},o(u){nt(h,u),s=!1},d(u){u&&w(t),h&&h.d(u),n=!1,Tr(r)}}}function ja(i,t,e){const s=[];let n=ki(t,s),{$$slots:r={},$$scope:o}=t;function h(f){Jt.call(this,i,f)}function a(f){Jt.call(this,i,f)}function l(f){Jt.call(this,i,f)}function u(f){Jt.call(this,i,f)}function c(f){Jt.call(this,i,f)}return i.$$set=f=>{t=He(He({},t),kr(f)),e(0,n=ki(t,s)),"$$scope"in f&&e(1,o=f.$$scope)},[n,o,r,h,a,l,u,c]}class Wa extends Ve{constructor(t){super(),Oe(this,t,ja,Ha,Ne,{})}}function Ga(i){let t,e,s,n,r;const o=i[2].default,h=Mi(o,i,i[1],null);let a=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{viewBox:"0 0 24 24"},{stroke:"currentColor"},{"aria-hidden":"true"},i[0]],l={};for(let u=0;u<a.length;u+=1)l=He(l,a[u]);return{c(){t=vt("svg"),h&&h.c(),e=vt("path"),this.h()},l(u){t=bt(u,"svg",{xmlns:!0,fill:!0,viewBox:!0,stroke:!0,"aria-hidden":!0});var c=z(t);h&&h.l(c),e=bt(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),z(e).forEach(w),c.forEach(w),this.h()},h(){b(e,"stroke-linecap","round"),b(e,"stroke-linejoin","round"),b(e,"stroke-width","2"),b(e,"d","M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"),Si(t,l)},m(u,c){st(u,t,c),h&&h.m(t,null),_(t,e),s=!0,n||(r=[Kt(t,"click",i[3]),Kt(t,"mouseover",i[4]),Kt(t,"mouseenter",i[5]),Kt(t,"mouseleave",i[6]),Kt(t,"keydown",i[7])],n=!0)},p(u,[c]){h&&h.p&&(!s||c&2)&&Ci(h,o,u,u[1],s?Ti(o,u[1],c,null):Ei(u[1]),null),Si(t,l=Er(a,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{viewBox:"0 0 24 24"},{stroke:"currentColor"},{"aria-hidden":"true"},c&1&&u[0]]))},i(u){s||(tt(h,u),s=!0)},o(u){nt(h,u),s=!1},d(u){u&&w(t),h&&h.d(u),n=!1,Tr(r)}}}function qa(i,t,e){const s=[];let n=ki(t,s),{$$slots:r={},$$scope:o}=t;function h(f){Jt.call(this,i,f)}function a(f){Jt.call(this,i,f)}function l(f){Jt.call(this,i,f)}function u(f){Jt.call(this,i,f)}function c(f){Jt.call(this,i,f)}return i.$$set=f=>{t=He(He({},t),kr(f)),e(0,n=ki(t,s)),"$$scope"in f&&e(1,o=f.$$scope)},[n,o,r,h,a,l,u,c]}class Ya extends Ve{constructor(t){super(),Oe(this,t,qa,Ga,Ne,{})}}function fo(i,t=0){var e=Math.pow(10,t),s=i*e*(1+Number.EPSILON);return Math.round(s)/e}function _i(i,t){return i==null||t==null?NaN:i<t?-1:i>t?1:i>=t?0:NaN}function Ka(i,t){return i==null||t==null?NaN:t<i?-1:t>i?1:t>=i?0:NaN}function sl(i){let t,e,s;i.length!==2?(t=_i,e=(h,a)=>_i(i(h),a),s=(h,a)=>i(h)-a):(t=i===_i||i===Ka?i:Ja,e=i,s=i);function n(h,a,l=0,u=h.length){if(l<u){if(t(a,a)!==0)return u;do{const c=l+u>>>1;e(h[c],a)<0?l=c+1:u=c}while(l<u)}return l}function r(h,a,l=0,u=h.length){if(l<u){if(t(a,a)!==0)return u;do{const c=l+u>>>1;e(h[c],a)<=0?l=c+1:u=c}while(l<u)}return l}function o(h,a,l=0,u=h.length){const c=n(h,a,l,u-1);return c>l&&s(h[c-1],a)>-s(h[c],a)?c-1:c}return{left:n,center:o,right:r}}function Ja(){return 0}function Xa(i){return i===null?NaN:+i}function*Qa(i,t){if(t===void 0)for(let e of i)e!=null&&(e=+e)>=e&&(yield e);else{let e=-1;for(let s of i)(s=t(s,++e,i))!=null&&(s=+s)>=s&&(yield s)}}const Za=sl(_i),$a=Za.right;sl(Xa).center;const tu=$a;function eu(i=_i){if(i===_i)return nl;if(typeof i!="function")throw new TypeError("compare is not a function");return(t,e)=>{const s=i(t,e);return s||s===0?s:(i(e,e)===0)-(i(t,t)===0)}}function nl(i,t){return(i==null||!(i>=i))-(t==null||!(t>=t))||(i<t?-1:i>t?1:0)}const iu=Math.sqrt(50),su=Math.sqrt(10),nu=Math.sqrt(2);function cn(i,t,e){const s=(t-i)/Math.max(0,e),n=Math.floor(Math.log10(s)),r=s/Math.pow(10,n),o=r>=iu?10:r>=su?5:r>=nu?2:1;let h,a,l;return n<0?(l=Math.pow(10,-n)/o,h=Math.round(i*l),a=Math.round(t*l),h/l<i&&++h,a/l>t&&--a,l=-l):(l=Math.pow(10,n)*o,h=Math.round(i/l),a=Math.round(t/l),h*l<i&&++h,a*l>t&&--a),a<h&&.5<=e&&e<2?cn(i,t,e*2):[h,a,l]}function ru(i,t,e){if(t=+t,i=+i,e=+e,!(e>0))return[];if(i===t)return[i];const s=t<i,[n,r,o]=s?cn(t,i,e):cn(i,t,e);if(!(r>=n))return[];const h=r-n+1,a=new Array(h);if(s)if(o<0)for(let l=0;l<h;++l)a[l]=(r-l)/-o;else for(let l=0;l<h;++l)a[l]=(r-l)*o;else if(o<0)for(let l=0;l<h;++l)a[l]=(n+l)/-o;else for(let l=0;l<h;++l)a[l]=(n+l)*o;return a}function cr(i,t,e){return t=+t,i=+i,e=+e,cn(i,t,e)[2]}function ou(i,t,e){t=+t,i=+i,e=+e;const s=t<i,n=s?cr(t,i,e):cr(i,t,e);return(s?-1:1)*(n<0?1/-n:n)}function rl(i,t,e=0,s=1/0,n){if(t=Math.floor(t),e=Math.floor(Math.max(0,e)),s=Math.floor(Math.min(i.length-1,s)),!(e<=t&&t<=s))return i;for(n=n===void 0?nl:eu(n);s>e;){if(s-e>600){const a=s-e+1,l=t-e+1,u=Math.log(a),c=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*c*(a-c)/a)*(l-a/2<0?-1:1),m=Math.max(e,Math.floor(t-l*c/a+f)),d=Math.min(s,Math.floor(t+(a-l)*c/a+f));rl(i,t,m,d,n)}const r=i[t];let o=e,h=s;for(Zi(i,e,t),n(i[s],r)>0&&Zi(i,e,s);o<h;){for(Zi(i,o,h),++o,--h;n(i[o],r)<0;)++o;for(;n(i[h],r)>0;)--h}n(i[e],r)===0?Zi(i,e,h):(++h,Zi(i,h,s)),h<=t&&(e=h+1),t<=h&&(s=h-1)}return i}function Zi(i,t,e){const s=i[t];i[t]=i[e],i[e]=s}function hu(i,t,e){if(i=Float64Array.from(Qa(i,e)),!(!(s=i.length)||isNaN(t=+t))){if(t<=0||s<2)return lo(i);if(t>=1)return ao(i);var s,n=(s-1)*t,r=Math.floor(n),o=ao(rl(i,r).subarray(0,r+1)),h=lo(i.subarray(r+1));return o+(h-o)*(n-r)}}function lu(i,t){return hu(i,.5,t)}function Vr(i,t,e){i.prototype=t.prototype=e,e.constructor=i}function ol(i,t){var e=Object.create(i.prototype);for(var s in t)e[s]=t[s];return e}function gs(){}var as=.7,fn=1/as,wi="\\s*([+-]?\\d+)\\s*",us="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Re="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",au=/^#([0-9a-f]{3,8})$/,uu=new RegExp(`^rgb\\(${wi},${wi},${wi}\\)$`),cu=new RegExp(`^rgb\\(${Re},${Re},${Re}\\)$`),fu=new RegExp(`^rgba\\(${wi},${wi},${wi},${us}\\)$`),du=new RegExp(`^rgba\\(${Re},${Re},${Re},${us}\\)$`),mu=new RegExp(`^hsl\\(${us},${Re},${Re}\\)$`),pu=new RegExp(`^hsla\\(${us},${Re},${Re},${us}\\)$`),mo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Vr(gs,cs,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:po,formatHex:po,formatHex8:gu,formatHsl:vu,formatRgb:go,toString:go});function po(){return this.rgb().formatHex()}function gu(){return this.rgb().formatHex8()}function vu(){return hl(this).formatHsl()}function go(){return this.rgb().formatRgb()}function cs(i){var t,e;return i=(i+"").trim().toLowerCase(),(t=au.exec(i))?(e=t[1].length,t=parseInt(t[1],16),e===6?vo(t):e===3?new ne(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?Ls(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?Ls(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=uu.exec(i))?new ne(t[1],t[2],t[3],1):(t=cu.exec(i))?new ne(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=fu.exec(i))?Ls(t[1],t[2],t[3],t[4]):(t=du.exec(i))?Ls(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=mu.exec(i))?_o(t[1],t[2]/100,t[3]/100,1):(t=pu.exec(i))?_o(t[1],t[2]/100,t[3]/100,t[4]):mo.hasOwnProperty(i)?vo(mo[i]):i==="transparent"?new ne(NaN,NaN,NaN,0):null}function vo(i){return new ne(i>>16&255,i>>8&255,i&255,1)}function Ls(i,t,e,s){return s<=0&&(i=t=e=NaN),new ne(i,t,e,s)}function bu(i){return i instanceof gs||(i=cs(i)),i?(i=i.rgb(),new ne(i.r,i.g,i.b,i.opacity)):new ne}function fr(i,t,e,s){return arguments.length===1?bu(i):new ne(i,t,e,s??1)}function ne(i,t,e,s){this.r=+i,this.g=+t,this.b=+e,this.opacity=+s}Vr(ne,fr,ol(gs,{brighter(i){return i=i==null?fn:Math.pow(fn,i),new ne(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=i==null?as:Math.pow(as,i),new ne(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new ne(si(this.r),si(this.g),si(this.b),dn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bo,formatHex:bo,formatHex8:yu,formatRgb:yo,toString:yo}));function bo(){return`#${ii(this.r)}${ii(this.g)}${ii(this.b)}`}function yu(){return`#${ii(this.r)}${ii(this.g)}${ii(this.b)}${ii((isNaN(this.opacity)?1:this.opacity)*255)}`}function yo(){const i=dn(this.opacity);return`${i===1?"rgb(":"rgba("}${si(this.r)}, ${si(this.g)}, ${si(this.b)}${i===1?")":`, ${i})`}`}function dn(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function si(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function ii(i){return i=si(i),(i<16?"0":"")+i.toString(16)}function _o(i,t,e,s){return s<=0?i=t=e=NaN:e<=0||e>=1?i=t=NaN:t<=0&&(i=NaN),new ve(i,t,e,s)}function hl(i){if(i instanceof ve)return new ve(i.h,i.s,i.l,i.opacity);if(i instanceof gs||(i=cs(i)),!i)return new ve;if(i instanceof ve)return i;i=i.rgb();var t=i.r/255,e=i.g/255,s=i.b/255,n=Math.min(t,e,s),r=Math.max(t,e,s),o=NaN,h=r-n,a=(r+n)/2;return h?(t===r?o=(e-s)/h+(e<s)*6:e===r?o=(s-t)/h+2:o=(t-e)/h+4,h/=a<.5?r+n:2-r-n,o*=60):h=a>0&&a<1?0:o,new ve(o,h,a,i.opacity)}function _u(i,t,e,s){return arguments.length===1?hl(i):new ve(i,t,e,s??1)}function ve(i,t,e,s){this.h=+i,this.s=+t,this.l=+e,this.opacity=+s}Vr(ve,_u,ol(gs,{brighter(i){return i=i==null?fn:Math.pow(fn,i),new ve(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?as:Math.pow(as,i),new ve(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+(this.h<0)*360,t=isNaN(i)||isNaN(this.s)?0:this.s,e=this.l,s=e+(e<.5?e:1-e)*t,n=2*e-s;return new ne(In(i>=240?i-240:i+120,n,s),In(i,n,s),In(i<120?i+240:i-120,n,s),this.opacity)},clamp(){return new ve(wo(this.h),Fs(this.s),Fs(this.l),dn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const i=dn(this.opacity);return`${i===1?"hsl(":"hsla("}${wo(this.h)}, ${Fs(this.s)*100}%, ${Fs(this.l)*100}%${i===1?")":`, ${i})`}`}}));function wo(i){return i=(i||0)%360,i<0?i+360:i}function Fs(i){return Math.max(0,Math.min(1,i||0))}function In(i,t,e){return(i<60?t+(e-t)*i/60:i<180?e:i<240?t+(e-t)*(240-i)/60:t)*255}const Or=i=>()=>i;function wu(i,t){return function(e){return i+e*t}}function xu(i,t,e){return i=Math.pow(i,e),t=Math.pow(t,e)-i,e=1/e,function(s){return Math.pow(i+s*t,e)}}function Mu(i){return(i=+i)==1?ll:function(t,e){return e-t?xu(t,e,i):Or(isNaN(t)?e:t)}}function ll(i,t){var e=t-i;return e?wu(i,e):Or(isNaN(i)?t:i)}const xo=function i(t){var e=Mu(t);function s(n,r){var o=e((n=fr(n)).r,(r=fr(r)).r),h=e(n.g,r.g),a=e(n.b,r.b),l=ll(n.opacity,r.opacity);return function(u){return n.r=o(u),n.g=h(u),n.b=a(u),n.opacity=l(u),n+""}}return s.gamma=i,s}(1);function Su(i,t){t||(t=[]);var e=i?Math.min(t.length,i.length):0,s=t.slice(),n;return function(r){for(n=0;n<e;++n)s[n]=i[n]*(1-r)+t[n]*r;return s}}function Cu(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function Eu(i,t){var e=t?t.length:0,s=i?Math.min(e,i.length):0,n=new Array(s),r=new Array(e),o;for(o=0;o<s;++o)n[o]=Nr(i[o],t[o]);for(;o<e;++o)r[o]=t[o];return function(h){for(o=0;o<s;++o)r[o]=n[o](h);return r}}function Tu(i,t){var e=new Date;return i=+i,t=+t,function(s){return e.setTime(i*(1-s)+t*s),e}}function mn(i,t){return i=+i,t=+t,function(e){return i*(1-e)+t*e}}function ku(i,t){var e={},s={},n;(i===null||typeof i!="object")&&(i={}),(t===null||typeof t!="object")&&(t={});for(n in t)n in i?e[n]=Nr(i[n],t[n]):s[n]=t[n];return function(r){for(n in e)s[n]=e[n](r);return s}}var dr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Un=new RegExp(dr.source,"g");function Pu(i){return function(){return i}}function Ru(i){return function(t){return i(t)+""}}function zu(i,t){var e=dr.lastIndex=Un.lastIndex=0,s,n,r,o=-1,h=[],a=[];for(i=i+"",t=t+"";(s=dr.exec(i))&&(n=Un.exec(t));)(r=n.index)>e&&(r=t.slice(e,r),h[o]?h[o]+=r:h[++o]=r),(s=s[0])===(n=n[0])?h[o]?h[o]+=n:h[++o]=n:(h[++o]=null,a.push({i:o,x:mn(s,n)})),e=Un.lastIndex;return e<t.length&&(r=t.slice(e),h[o]?h[o]+=r:h[++o]=r),h.length<2?a[0]?Ru(a[0].x):Pu(t):(t=a.length,function(l){for(var u=0,c;u<t;++u)h[(c=a[u]).i]=c.x(l);return h.join("")})}function Nr(i,t){var e=typeof t,s;return t==null||e==="boolean"?Or(t):(e==="number"?mn:e==="string"?(s=cs(t))?(t=s,xo):zu:t instanceof cs?xo:t instanceof Date?Tu:Cu(t)?Su:Array.isArray(t)?Eu:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?ku:mn)(i,t)}function Vu(i,t){return i=+i,t=+t,function(e){return Math.round(i*(1-e)+t*e)}}function Ou(i){return function(){return i}}function Nu(i){return+i}var Mo=[0,1];function Te(i){return i}function mr(i,t){return(t-=i=+i)?function(e){return(e-i)/t}:Ou(isNaN(t)?NaN:.5)}function Du(i,t){var e;return i>t&&(e=i,i=t,t=e),function(s){return Math.max(i,Math.min(t,s))}}function Lu(i,t,e){var s=i[0],n=i[1],r=t[0],o=t[1];return n<s?(s=mr(n,s),r=e(o,r)):(s=mr(s,n),r=e(r,o)),function(h){return r(s(h))}}function Fu(i,t,e){var s=Math.min(i.length,t.length)-1,n=new Array(s),r=new Array(s),o=-1;for(i[s]<i[0]&&(i=i.slice().reverse(),t=t.slice().reverse());++o<s;)n[o]=mr(i[o],i[o+1]),r[o]=e(t[o],t[o+1]);return function(h){var a=tu(i,h,1,s)-1;return r[a](n[a](h))}}function al(i,t){return t.domain(i.domain()).range(i.range()).interpolate(i.interpolate()).clamp(i.clamp()).unknown(i.unknown())}function ul(){var i=Mo,t=Mo,e=Nr,s,n,r,o=Te,h,a,l;function u(){var f=Math.min(i.length,t.length);return o!==Te&&(o=Du(i[0],i[f-1])),h=f>2?Fu:Lu,a=l=null,c}function c(f){return f==null||isNaN(f=+f)?r:(a||(a=h(i.map(s),t,e)))(s(o(f)))}return c.invert=function(f){return o(n((l||(l=h(t,i.map(s),mn)))(f)))},c.domain=function(f){return arguments.length?(i=Array.from(f,Nu),u()):i.slice()},c.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},c.rangeRound=function(f){return t=Array.from(f),e=Vu,u()},c.clamp=function(f){return arguments.length?(o=f?!0:Te,u()):o!==Te},c.interpolate=function(f){return arguments.length?(e=f,u()):e},c.unknown=function(f){return arguments.length?(r=f,c):r},function(f,m){return s=f,n=m,u()}}function Au(){return ul()(Te,Te)}function Bu(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function pn(i,t){if((e=(i=t?i.toExponential(t-1):i.toExponential()).indexOf("e"))<0)return null;var e,s=i.slice(0,e);return[s.length>1?s[0]+s.slice(2):s,+i.slice(e+1)]}function Pi(i){return i=pn(Math.abs(i)),i?i[1]:NaN}function Iu(i,t){return function(e,s){for(var n=e.length,r=[],o=0,h=i[0],a=0;n>0&&h>0&&(a+h+1>s&&(h=Math.max(1,s-a)),r.push(e.substring(n-=h,n+h)),!((a+=h+1)>s));)h=i[o=(o+1)%i.length];return r.reverse().join(t)}}function Uu(i){return function(t){return t.replace(/[0-9]/g,function(e){return i[+e]})}}var Hu=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function gn(i){if(!(t=Hu.exec(i)))throw new Error("invalid format: "+i);var t;return new Dr({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}gn.prototype=Dr.prototype;function Dr(i){this.fill=i.fill===void 0?" ":i.fill+"",this.align=i.align===void 0?">":i.align+"",this.sign=i.sign===void 0?"-":i.sign+"",this.symbol=i.symbol===void 0?"":i.symbol+"",this.zero=!!i.zero,this.width=i.width===void 0?void 0:+i.width,this.comma=!!i.comma,this.precision=i.precision===void 0?void 0:+i.precision,this.trim=!!i.trim,this.type=i.type===void 0?"":i.type+""}Dr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ju(i){t:for(var t=i.length,e=1,s=-1,n;e<t;++e)switch(i[e]){case".":s=n=e;break;case"0":s===0&&(s=e),n=e;break;default:if(!+i[e])break t;s>0&&(s=0);break}return s>0?i.slice(0,s)+i.slice(n+1):i}var cl;function Wu(i,t){var e=pn(i,t);if(!e)return i+"";var s=e[0],n=e[1],r=n-(cl=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,o=s.length;return r===o?s:r>o?s+new Array(r-o+1).join("0"):r>0?s.slice(0,r)+"."+s.slice(r):"0."+new Array(1-r).join("0")+pn(i,Math.max(0,t+r-1))[0]}function So(i,t){var e=pn(i,t);if(!e)return i+"";var s=e[0],n=e[1];return n<0?"0."+new Array(-n).join("0")+s:s.length>n+1?s.slice(0,n+1)+"."+s.slice(n+1):s+new Array(n-s.length+2).join("0")}const Co={"%":(i,t)=>(i*100).toFixed(t),b:i=>Math.round(i).toString(2),c:i=>i+"",d:Bu,e:(i,t)=>i.toExponential(t),f:(i,t)=>i.toFixed(t),g:(i,t)=>i.toPrecision(t),o:i=>Math.round(i).toString(8),p:(i,t)=>So(i*100,t),r:So,s:Wu,X:i=>Math.round(i).toString(16).toUpperCase(),x:i=>Math.round(i).toString(16)};function Eo(i){return i}var To=Array.prototype.map,ko=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Gu(i){var t=i.grouping===void 0||i.thousands===void 0?Eo:Iu(To.call(i.grouping,Number),i.thousands+""),e=i.currency===void 0?"":i.currency[0]+"",s=i.currency===void 0?"":i.currency[1]+"",n=i.decimal===void 0?".":i.decimal+"",r=i.numerals===void 0?Eo:Uu(To.call(i.numerals,String)),o=i.percent===void 0?"%":i.percent+"",h=i.minus===void 0?"−":i.minus+"",a=i.nan===void 0?"NaN":i.nan+"";function l(c){c=gn(c);var f=c.fill,m=c.align,d=c.sign,p=c.symbol,E=c.zero,C=c.width,k=c.comma,M=c.precision,L=c.trim,F=c.type;F==="n"?(k=!0,F="g"):Co[F]||(M===void 0&&(M=12),L=!0,F="g"),(E||f==="0"&&m==="=")&&(E=!0,f="0",m="=");var G=p==="$"?e:p==="#"&&/[boxX]/.test(F)?"0"+F.toLowerCase():"",H=p==="$"?s:/[%p]/.test(F)?o:"",X=Co[F],j=/[defgprs%]/.test(F);M=M===void 0?6:/[gprs]/.test(F)?Math.max(1,Math.min(21,M)):Math.max(0,Math.min(20,M));function W(A){var N=G,Z=H,R,y,T;if(F==="c")Z=X(A)+Z,A="";else{A=+A;var x=A<0||1/A<0;if(A=isNaN(A)?a:X(Math.abs(A),M),L&&(A=ju(A)),x&&+A==0&&d!=="+"&&(x=!1),N=(x?d==="("?d:h:d==="-"||d==="("?"":d)+N,Z=(F==="s"?ko[8+cl/3]:"")+Z+(x&&d==="("?")":""),j){for(R=-1,y=A.length;++R<y;)if(T=A.charCodeAt(R),48>T||T>57){Z=(T===46?n+A.slice(R+1):A.slice(R))+Z,A=A.slice(0,R);break}}}k&&!E&&(A=t(A,1/0));var O=N.length+A.length+Z.length,g=O<C?new Array(C-O+1).join(f):"";switch(k&&E&&(A=t(g+A,g.length?C-Z.length:1/0),g=""),m){case"<":A=N+A+Z+g;break;case"=":A=N+g+A+Z;break;case"^":A=g.slice(0,O=g.length>>1)+N+A+Z+g.slice(O);break;default:A=g+N+A+Z;break}return r(A)}return W.toString=function(){return c+""},W}function u(c,f){var m=l((c=gn(c),c.type="f",c)),d=Math.max(-8,Math.min(8,Math.floor(Pi(f)/3)))*3,p=Math.pow(10,-d),E=ko[8+d/3];return function(C){return m(p*C)+E}}return{format:l,formatPrefix:u}}var As,fl,dl;qu({thousands:",",grouping:[3],currency:["$",""]});function qu(i){return As=Gu(i),fl=As.format,dl=As.formatPrefix,As}function Yu(i){return Math.max(0,-Pi(Math.abs(i)))}function Ku(i,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Pi(t)/3)))*3-Pi(Math.abs(i)))}function Ju(i,t){return i=Math.abs(i),t=Math.abs(t)-i,Math.max(0,Pi(t)-Pi(i))+1}function Xu(i,t,e,s){var n=ou(i,t,e),r;switch(s=gn(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(i),Math.abs(t));return s.precision==null&&!isNaN(r=Ku(n,o))&&(s.precision=r),dl(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(r=Ju(n,Math.max(Math.abs(i),Math.abs(t))))&&(s.precision=r-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(r=Yu(n))&&(s.precision=r-(s.type==="%")*2);break}}return fl(s)}function ml(i){var t=i.domain;return i.ticks=function(e){var s=t();return ru(s[0],s[s.length-1],e??10)},i.tickFormat=function(e,s){var n=t();return Xu(n[0],n[n.length-1],e??10,s)},i.nice=function(e){e==null&&(e=10);var s=t(),n=0,r=s.length-1,o=s[n],h=s[r],a,l,u=10;for(h<o&&(l=o,o=h,h=l,l=n,n=r,r=l);u-- >0;){if(l=cr(o,h,e),l===a)return s[n]=o,s[r]=h,t(s);if(l>0)o=Math.floor(o/l)*l,h=Math.ceil(h/l)*l;else if(l<0)o=Math.ceil(o*l)/l,h=Math.floor(h*l)/l;else break;a=l}return i},i}function Fe(){var i=Au();return i.copy=function(){return al(i,Fe())},tl.apply(i,arguments),ml(i)}function Po(i){return function(t){return t<0?-Math.pow(-t,i):Math.pow(t,i)}}function Qu(i){return i<0?-Math.sqrt(-i):Math.sqrt(i)}function Zu(i){return i<0?-i*i:i*i}function $u(i){var t=i(Te,Te),e=1;function s(){return e===1?i(Te,Te):e===.5?i(Qu,Zu):i(Po(e),Po(1/e))}return t.exponent=function(n){return arguments.length?(e=+n,s()):e},ml(t)}function pl(){var i=$u(ul());return i.copy=function(){return al(i,pl()).exponent(i.exponent())},tl.apply(i,arguments),i}function tc(){return pl.apply(null,arguments).exponent(.5)}function yt(i){var t=i.width,e=i.height;if(t<0)throw new Error("Negative width is not allowed for Size");if(e<0)throw new Error("Negative height is not allowed for Size");return{width:t,height:e}}function ni(i,t){return i.width===t.width&&i.height===t.height}var ec=function(){function i(t){var e=this;this._resolutionListener=function(){return e._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return i.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(i.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),i.prototype.subscribe=function(t){var e=this,s={next:t};return this._observers.push(s),{unsubscribe:function(){e._observers=e._observers.filter(function(n){return n!==s})}}},i.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},i.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},i.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},i.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach(function(e){return e.next(t._window.devicePixelRatio)}),this._reinstallResolutionListener()},i}();function ic(i){return new ec(i)}var sc=function(){function i(t,e,s){var n;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=yt({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=e??function(r){return r},this._allowResizeObserver=(n=s==null?void 0:s.allowResizeObserver)!==null&&n!==void 0?n:!0,this._chooseAndInitObserver()}return i.prototype.dispose=function(){var t,e;if(this._canvasElement===null)throw new Error("Object is disposed");(t=this._canvasElementResizeObserver)===null||t===void 0||t.disconnect(),this._canvasElementResizeObserver=null,(e=this._devicePixelRatioObservable)===null||e===void 0||e.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(i.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bitmapSize",{get:function(){return yt({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),i.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=yt(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},i.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},i.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(e){return e!==t})},Object.defineProperty(i.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),i.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},i.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(e){return e!==t})},i.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},i.prototype._resizeBitmap=function(t){var e=this.bitmapSize;ni(e,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(e,t))},i.prototype._emitBitmapSizeChanged=function(t,e){var s=this;this._bitmapSizeChangedListeners.forEach(function(n){return n.call(s,t,e)})},i.prototype._suggestNewBitmapSize=function(t){var e=this._suggestedBitmapSize,s=yt(this._transformBitmapSize(t,this._canvasElementClientSize)),n=ni(this.bitmapSize,s)?null:s;e===null&&n===null||e!==null&&n!==null&&ni(e,n)||(this._suggestedBitmapSize=n,this._emitSuggestedBitmapSizeChanged(e,n))},i.prototype._emitSuggestedBitmapSizeChanged=function(t,e){var s=this;this._suggestedBitmapSizeChangedListeners.forEach(function(n){return n.call(s,t,e)})},i.prototype._chooseAndInitObserver=function(){var t=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}rc().then(function(e){return e?t._initResizeObserver():t._initDevicePixelRatioObservable()})},i.prototype._initDevicePixelRatioObservable=function(){var t=this;if(this._canvasElement!==null){var e=Ro(this._canvasElement);if(e===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=ic(e),this._devicePixelRatioObservable.subscribe(function(){return t._invalidateBitmapSize()}),this._invalidateBitmapSize()}},i.prototype._invalidateBitmapSize=function(){var t,e;if(this._canvasElement!==null){var s=Ro(this._canvasElement);if(s!==null){var n=(e=(t=this._devicePixelRatioObservable)===null||t===void 0?void 0:t.value)!==null&&e!==void 0?e:s.devicePixelRatio,r=this._canvasElement.getClientRects(),o=r[0]!==void 0?oc(r[0],n):yt({width:this._canvasElementClientSize.width*n,height:this._canvasElementClientSize.height*n});this._suggestNewBitmapSize(o)}}},i.prototype._initResizeObserver=function(){var t=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(e){var s=e.find(function(o){return o.target===t._canvasElement});if(!(!s||!s.devicePixelContentBoxSize||!s.devicePixelContentBoxSize[0])){var n=s.devicePixelContentBoxSize[0],r=yt({width:n.inlineSize,height:n.blockSize});t._suggestNewBitmapSize(r)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},i}();function nc(i,t){if(t.type==="device-pixel-content-box")return new sc(i,t.transform,t.options);throw new Error("Unsupported binding target")}function Ro(i){return i.ownerDocument.defaultView}function rc(){return new Promise(function(i){var t=new ResizeObserver(function(e){i(e.every(function(s){return"devicePixelContentBoxSize"in s})),t.disconnect()});t.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function oc(i,t){return yt({width:Math.round(i.left*t+i.width*t)-Math.round(i.left*t),height:Math.round(i.top*t+i.height*t)-Math.round(i.top*t)})}var hc=function(){function i(t,e,s){if(e.width===0||e.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=e,s.width===0||s.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=s,this._context=t}return i.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},i.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(i.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),i}();function ri(i,t){var e=i.canvasElementClientSize;if(e.width===0||e.height===0)return null;var s=i.bitmapSize;if(s.width===0||s.height===0)return null;var n=i.canvasElement.getContext("2d",t);return n===null?null:new hc(n,e,s)}/*!
 * @license
 * TradingView Lightweight Charts v4.0.0
 * Copyright (c) 2023 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */var zo,Vo;function oi(i,t){const e={0:[],1:[i.lineWidth,i.lineWidth],2:[2*i.lineWidth,2*i.lineWidth],3:[6*i.lineWidth,6*i.lineWidth],4:[i.lineWidth,4*i.lineWidth]}[t];i.setLineDash(e)}function gl(i,t,e,s){i.beginPath();const n=i.lineWidth%2?.5:0;i.moveTo(e,t+n),i.lineTo(s,t+n),i.stroke()}function li(i,t){if(!i)throw new Error("Assertion failed"+(t?": "+t:""))}function ge(i){if(i===void 0)throw new Error("Value is undefined");return i}function V(i){if(i===null)throw new Error("Value is null");return i}function is(i){return V(ge(i))}(function(i){i[i.Simple=0]="Simple",i[i.WithSteps=1]="WithSteps",i[i.Curved=2]="Curved"})(zo||(zo={})),function(i){i[i.Solid=0]="Solid",i[i.Dotted=1]="Dotted",i[i.Dashed=2]="Dashed",i[i.LargeDashed=3]="LargeDashed",i[i.SparseDotted=4]="SparseDotted"}(Vo||(Vo={}));const Oo={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function pe(i){return i<0?0:i>255?255:Math.round(i)||0}function vl(i){return i<=0||i>0?i<0?0:i>1?1:Math.round(1e4*i)/1e4:0}const lc=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,ac=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,uc=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,cc=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/;function vn(i){(i=i.toLowerCase())in Oo&&(i=Oo[i]);{const t=cc.exec(i)||uc.exec(i);if(t)return[pe(parseInt(t[1],10)),pe(parseInt(t[2],10)),pe(parseInt(t[3],10)),vl(t.length<5?1:parseFloat(t[4]))]}{const t=ac.exec(i);if(t)return[pe(parseInt(t[1],16)),pe(parseInt(t[2],16)),pe(parseInt(t[3],16)),1]}{const t=lc.exec(i);if(t)return[pe(17*parseInt(t[1],16)),pe(17*parseInt(t[2],16)),pe(17*parseInt(t[3],16)),1]}throw new Error(`Cannot parse color: ${i}`)}function Sn(i){const t=vn(i);return{t:`rgb(${t[0]}, ${t[1]}, ${t[2]})`,i:(e=t,.199*e[0]+.687*e[1]+.114*e[2]>160?"black":"white")};var e}class Ht{constructor(){this.h=[]}l(t,e,s){const n={o:t,_:e,u:s===!0};this.h.push(n)}p(t){const e=this.h.findIndex(s=>t===s.o);e>-1&&this.h.splice(e,1)}v(t){this.h=this.h.filter(e=>e._!==t)}m(t,e,s){const n=[...this.h];this.h=this.h.filter(r=>!r.u),n.forEach(r=>r.o(t,e,s))}g(){return this.h.length>0}M(){this.h=[]}}function ze(i,...t){for(const e of t)for(const s in e)e[s]!==void 0&&(typeof e[s]!="object"||i[s]===void 0?i[s]=e[s]:ze(i[s],e[s]));return i}function ke(i){return typeof i=="number"&&isFinite(i)}function fs(i){return typeof i=="number"&&i%1==0}function Lr(i){return typeof i=="string"}function Bs(i){return typeof i=="boolean"}function Ae(i){const t=i;if(!t||typeof t!="object")return t;let e,s,n;for(s in e=Array.isArray(t)?[]:{},t)t.hasOwnProperty(s)&&(n=t[s],e[s]=n&&typeof n=="object"?Ae(n):n);return e}function fc(i){return i!==null}function bn(i){return i===null?void 0:i}const Fr="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Ri(i,t,e){return t===void 0&&(t=Fr),`${e=e!==void 0?`${e} `:""}${i}px ${t}`}class dc{constructor(t){this.S={k:1,C:5,T:NaN,P:"",R:"",D:"",B:"",O:0,A:0,L:0,I:0,V:0},this.N=t}F(){const t=this.S,e=this.W(),s=this.j();return t.T===e&&t.R===s||(t.T=e,t.R=s,t.P=Ri(e,s),t.I=2.5/12*e,t.O=t.I,t.A=e/12*t.C,t.L=e/12*t.C,t.V=0),t.D=this.$(),t.B=this.H(),this.S}$(){return this.N.F().layout.textColor}H(){return this.N.U()}W(){return this.N.F().layout.fontSize}j(){return this.N.F().layout.fontFamily}}class Ar{constructor(){this.q=[]}Y(t){this.q=t}X(t,e,s){this.q.forEach(n=>{n.X(t,e,s)})}}class vs{X(t,e,s){t.useMediaCoordinateSpace(n=>this.Z(n,e,s))}K(t,e,s){t.useMediaCoordinateSpace(n=>this.G(n,e,s))}G(t,e,s){}}class mc extends vs{constructor(){super(...arguments),this.J=null}tt(t){this.J=t}Z({context:t}){if(this.J===null||this.J.it===null)return;const e=this.J.it,s=this.J,n=r=>{t.beginPath();for(let o=e.to-1;o>=e.from;--o){const h=s.nt[o];t.moveTo(h.st,h.et),t.arc(h.st,h.et,r,0,2*Math.PI)}t.fill()};s.rt>0&&(t.fillStyle=s.ht,n(s.lt+s.rt)),t.fillStyle=s.ot,n(s.lt)}}function pc(){return{nt:[{st:0,et:0,_t:0,ut:0}],ot:"",ht:"",lt:0,rt:0,it:null}}const gc={from:0,to:1};class vc{constructor(t,e){this.ct=new Ar,this.dt=[],this.ft=[],this.vt=!0,this.N=t,this.bt=e,this.ct.Y(this.dt)}gt(t){const e=this.N.wt();e.length!==this.dt.length&&(this.ft=e.map(pc),this.dt=this.ft.map(s=>{const n=new mc;return n.tt(s),n}),this.ct.Y(this.dt)),this.vt=!0}Mt(){return this.vt&&(this.St(),this.vt=!1),this.ct}St(){const t=this.N.wt(),e=this.bt.xt(),s=this.N.yt();t.forEach((n,r)=>{var o;const h=this.ft[r],a=n.kt(e);if(a===null||!n.Ct())return void(h.it=null);const l=V(n.Tt());h.ot=a.Pt,h.lt=a.lt,h.rt=a.Rt,h.nt[0].ut=a.ut,h.nt[0].et=n.Bt().Dt(a.ut,l.Ot),h.ht=(o=a.At)!==null&&o!==void 0?o:this.N.Lt(h.nt[0].et/n.Bt().It()),h.nt[0]._t=e,h.nt[0].st=s.Et(e),h.it=gc})}}class ai{X(t,e,s){t.useBitmapCoordinateSpace(n=>this.Z(n,e,s))}}class bc extends ai{constructor(t){super(),this.Vt=t}Z({context:t,bitmapSize:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.Vt===null)return;const r=this.Vt.zt.Ct,o=this.Vt.Nt.Ct;if(!r&&!o)return;const h=Math.round(this.Vt.st*s),a=Math.round(this.Vt.et*n);t.lineCap="butt",r&&h>=0&&(t.lineWidth=Math.floor(this.Vt.zt.rt*s),t.strokeStyle=this.Vt.zt.D,t.fillStyle=this.Vt.zt.D,oi(t,this.Vt.zt.Ft),function(l,u,c,f){l.beginPath();const m=l.lineWidth%2?.5:0;l.moveTo(u+m,c),l.lineTo(u+m,f),l.stroke()}(t,h,0,e.height)),o&&a>=0&&(t.lineWidth=Math.floor(this.Vt.Nt.rt*n),t.strokeStyle=this.Vt.Nt.D,t.fillStyle=this.Vt.Nt.D,oi(t,this.Vt.Nt.Ft),gl(t,a,0,e.width))}}class yc{constructor(t){this.vt=!0,this.Wt={zt:{rt:1,Ft:0,D:"",Ct:!1},Nt:{rt:1,Ft:0,D:"",Ct:!1},st:0,et:0},this.jt=new bc(this.Wt),this.$t=t}gt(){this.vt=!0}Mt(){return this.vt&&(this.St(),this.vt=!1),this.jt}St(){const t=this.$t.Ct(),e=V(this.$t.Ht()),s=e.Ut().F().crosshair,n=this.Wt;n.Nt.Ct=t&&this.$t.qt(e),n.zt.Ct=t&&this.$t.Yt(),n.Nt.rt=s.horzLine.width,n.Nt.Ft=s.horzLine.style,n.Nt.D=s.horzLine.color,n.zt.rt=s.vertLine.width,n.zt.Ft=s.vertLine.style,n.zt.D=s.vertLine.color,n.st=this.$t.Xt(),n.et=this.$t.Zt()}}function _c(i,t,e,s,n,r){i.fillRect(t+r,e,s-2*r,r),i.fillRect(t+r,e+n-r,s-2*r,r),i.fillRect(t,e,r,n),i.fillRect(t+s-r,e,r,n)}function Cn(i,t,e,s,n,r){i.save(),i.globalCompositeOperation="copy",i.fillStyle=r,i.fillRect(t,e,s,n),i.restore()}function No(i,t){return Array.isArray(i)?i.map(e=>e===0?e:e+t):i+t}function Hn(i,t,e,s,n,r){let o,h,a,l;if(Array.isArray(r))if(r.length===2){const u=Math.max(0,r[0]),c=Math.max(0,r[1]);o=u,h=u,a=c,l=c}else{if(r.length!==4)throw new Error("Wrong border radius - it should be like css border radius");o=Math.max(0,r[0]),h=Math.max(0,r[1]),a=Math.max(0,r[2]),l=Math.max(0,r[3])}else{const u=Math.max(0,r);o=u,h=u,a=u,l=u}i.beginPath(),i.moveTo(t+o,e),i.lineTo(t+s-h,e),h!==0&&i.arcTo(t+s,e,t+s,e+h,h),i.lineTo(t+s,e+n-a),a!==0&&i.arcTo(t+s,e+n,t+s-a,e+n,a),i.lineTo(t+l,e+n),l!==0&&i.arcTo(t,e+n,t,e+n-l,l),i.lineTo(t,e+o),o!==0&&i.arcTo(t,e,t+o,e,o)}function Do(i,t,e,s,n,r,o=0,h=0,a=""){if(i.save(),!o||!a||a===r)return Hn(i,t,e,s,n,h),i.fillStyle=r,i.fill(),void i.restore();const l=o/2;r!=="transparent"&&(Hn(i,t+o,e+o,s-2*o,n-2*o,No(h,-o)),i.fillStyle=r,i.fill()),a!=="transparent"&&(Hn(i,t+l,e+l,s-o,n-o,No(h,-l)),i.lineWidth=o,i.strokeStyle=a,i.closePath(),i.stroke()),i.restore()}function bl(i,t,e,s,n,r,o){i.save(),i.globalCompositeOperation="copy";const h=i.createLinearGradient(0,0,0,n);h.addColorStop(0,r),h.addColorStop(1,o),i.fillStyle=h,i.fillRect(t,e,s,n),i.restore()}class Lo{constructor(t,e){this.tt(t,e)}tt(t,e){this.Vt=t,this.Kt=e}It(t,e){return this.Vt.Ct?t.T+t.I+t.O:0}X(t,e,s,n){if(!this.Vt.Ct||this.Vt.Gt.length===0)return;const r=this.Vt.D||this.Kt.D,o=this.Kt.t,h=t.useBitmapCoordinateSpace(a=>{const l=a.context;l.font=e.P;const u=this.Jt(a,e,s,n),c=u.Qt,f=(m,d)=>{u.ti?Do(l,c.ii,c.ni,c.si,c.ei,m,c.ri,[c.lt,0,0,c.lt],d):Do(l,c.hi,c.ni,c.si,c.ei,m,c.ri,[0,c.lt,c.lt,0],d)};return f(o,"transparent"),this.Vt.li&&(l.fillStyle=r,l.fillRect(c.hi,c.ai,c.oi-c.hi,c._i)),f("transparent",o),this.Vt.ui&&(l.fillStyle=e.B,l.fillRect(u.ti?c.ci-c.ri:0,c.ni,c.ri,c.di-c.ni)),u});t.useMediaCoordinateSpace(({context:a})=>{const l=h.fi;a.font=e.P,a.textAlign=h.ti?"right":"left",a.textBaseline="middle",a.fillStyle=r,a.fillText(this.Vt.Gt,l.pi,(l.ni+l.di)/2+l.vi)})}Jt(t,e,s,n){var r;const{context:o,bitmapSize:h,mediaSize:a,horizontalPixelRatio:l,verticalPixelRatio:u}=t,c=this.Vt.li||!this.Vt.mi?e.C:0,f=this.Vt.bi?e.k:0,m=e.I+this.Kt.gi,d=e.O+this.Kt.wi,p=e.A,E=e.L,C=this.Vt.Gt,k=e.T,M=s.Mi(o,C),L=Math.ceil(s.Si(o,C)),F=k+m+d,G=e.k+p+E+L+c,H=Math.max(1,Math.floor(u));let X=Math.round(F*u);X%2!=H%2&&(X+=1);const j=f>0?Math.max(1,Math.floor(f*l)):0,W=Math.round(G*l),A=Math.round(c*l),N=(r=this.Kt.xi)!==null&&r!==void 0?r:this.Kt.yi,Z=Math.round(N*u)-Math.floor(.5*u),R=Math.floor(Z+H/2-X/2),y=R+X,T=n==="right",x=T?a.width-f:f,O=T?h.width-j:j;let g,P,U;return T?(g=O-W,P=O-A,U=x-c-p-f):(g=O+W,P=O+A,U=x+c+p),{ti:T,Qt:{ni:R,ai:Z,di:y,si:W,ei:X,lt:2*l,ri:j,ii:g,hi:O,oi:P,_i:H,ci:h.width},fi:{ni:R/u,di:y/u,pi:U,vi:M}}}}class Br{constructor(t){this.ki={yi:0,D:"#FFF",t:"#000",wi:0,gi:0},this.Ci={Gt:"",Ct:!1,li:!0,mi:!1,At:"",D:"#FFF",ui:!1,bi:!1},this.Ti={Gt:"",Ct:!1,li:!1,mi:!0,At:"",D:"#FFF",ui:!0,bi:!0},this.vt=!0,this.Pi=new(t||Lo)(this.Ci,this.ki),this.Ri=new(t||Lo)(this.Ti,this.ki)}Gt(){return this.Di(),this.Ci.Gt}yi(){return this.Di(),this.ki.yi}gt(){this.vt=!0}It(t,e=!1){return Math.max(this.Pi.It(t,e),this.Ri.It(t,e))}Bi(){return this.ki.xi||0}Oi(t){this.ki.xi=t}Ai(){return this.Di(),this.Ci.Ct||this.Ti.Ct}Li(){return this.Di(),this.Ci.Ct}Mt(t){return this.Di(),this.Ci.li=this.Ci.li&&t.F().ticksVisible,this.Ti.li=this.Ti.li&&t.F().ticksVisible,this.Pi.tt(this.Ci,this.ki),this.Ri.tt(this.Ti,this.ki),this.Pi}Ii(){return this.Di(),this.Pi.tt(this.Ci,this.ki),this.Ri.tt(this.Ti,this.ki),this.Ri}Di(){this.vt&&(this.Ci.li=!0,this.Ti.li=!1,this.Ei(this.Ci,this.Ti,this.ki))}}class wc extends Br{constructor(t,e,s){super(),this.$t=t,this.Vi=e,this.zi=s}Ei(t,e,s){t.Ct=!1;const n=this.$t.F().horzLine;if(!n.labelVisible)return;const r=this.Vi.Tt();if(!this.$t.Ct()||this.Vi.Ni()||r===null)return;const o=Sn(n.labelBackgroundColor);s.t=o.t,s.D=o.i;const h=2/12*this.Vi.T();s.gi=h,s.wi=h;const a=this.zi(this.Vi);s.yi=a.yi,t.Gt=this.Vi.Fi(a.ut,r),t.Ct=!0}}const xc=/[1-9]/g;class Mc{constructor(){this.Vt=null}tt(t){this.Vt=t}X(t,e){if(this.Vt===null||this.Vt.Ct===!1||this.Vt.Gt.length===0)return;const s=t.useMediaCoordinateSpace(({context:f})=>(f.font=e.P,Math.round(e.Wi.Si(f,V(this.Vt).Gt,xc))));if(s<=0)return;const n=e.ji,r=s+2*n,o=r/2,h=this.Vt.$i;let a=this.Vt.yi,l=Math.floor(a-o)+.5;l<0?(a+=Math.abs(0-l),l=Math.floor(a-o)+.5):l+r>h&&(a-=Math.abs(h-(l+r)),l=Math.floor(a-o)+.5);const u=l+r,c=Math.ceil(0+e.k+e.C+e.I+e.T+e.O);t.useBitmapCoordinateSpace(({context:f,horizontalPixelRatio:m,verticalPixelRatio:d})=>{const p=V(this.Vt);f.fillStyle=p.t;const E=Math.round(l*m),C=Math.round(0*d),k=Math.round(u*m),M=Math.round(c*d),L=Math.round(2*m);if(f.beginPath(),f.moveTo(E,C),f.lineTo(E,M-L),f.arcTo(E,M,E+L,M,L),f.lineTo(k-L,M),f.arcTo(k,M,k,M-L,L),f.lineTo(k,C),f.fill(),p.li){const F=Math.round(p.yi*m),G=C,H=Math.round((G+e.C)*d);f.fillStyle=p.D;const X=Math.max(1,Math.floor(m)),j=Math.floor(.5*m);f.fillRect(F-j,G,X,H-G)}}),t.useMediaCoordinateSpace(({context:f})=>{const m=V(this.Vt),d=0+e.k+e.C+e.I+e.T/2;f.font=e.P,f.textAlign="left",f.textBaseline="middle",f.fillStyle=m.D;const p=e.Wi.Mi(f,"Apr0");f.translate(l+n,d+p),f.fillText(m.Gt,0,0)})}}class Sc{constructor(t,e,s){this.vt=!0,this.jt=new Mc,this.Wt={Ct:!1,t:"#4c525e",D:"white",Gt:"",$i:0,yi:NaN,li:!0},this.bt=t,this.Hi=e,this.zi=s}gt(){this.vt=!0}Mt(){return this.vt&&(this.St(),this.vt=!1),this.jt.tt(this.Wt),this.jt}St(){const t=this.Wt;t.Ct=!1;const e=this.bt.F().vertLine;if(!e.labelVisible)return;const s=this.Hi.yt();if(s.Ni())return;t.$i=s.$i();const n=this.zi();if(n===null)return;t.yi=n.yi;const r=s.Ui(this.bt.xt());t.Gt=s.qi(V(r)),t.Ct=!0;const o=Sn(e.labelBackgroundColor);t.t=o.t,t.D=o.i,t.li=s.F().ticksVisible}}class Ir{constructor(){this.Yi=null,this.Xi=0}Zi(){return this.Xi}Ki(t){this.Xi=t}Bt(){return this.Yi}Gi(t){this.Yi=t}Ji(t){return[]}Qi(){return[]}Ct(){return!0}}var Fo;(function(i){i[i.Normal=0]="Normal",i[i.Magnet=1]="Magnet"})(Fo||(Fo={}));class Cc extends Ir{constructor(t,e){super(),this.tn=null,this.nn=NaN,this.sn=0,this.en=!0,this.rn=new Map,this.hn=!1,this.ln=NaN,this.an=NaN,this.on=NaN,this._n=NaN,this.Hi=t,this.un=e,this.cn=new vc(t,this),this.dn=((n,r)=>o=>{const h=r(),a=n();if(o===V(this.tn).fn())return{ut:a,yi:h};{const l=V(o.Tt());return{ut:o.pn(h,l),yi:h}}})(()=>this.nn,()=>this.an);const s=((n,r)=>()=>{const o=this.Hi.yt().vn(n()),h=r();return o&&Number.isFinite(h)?{_t:o,yi:h}:null})(()=>this.sn,()=>this.Xt());this.mn=new Sc(this,t,s),this.bn=new yc(this)}F(){return this.un}gn(t,e){this.on=t,this._n=e}wn(){this.on=NaN,this._n=NaN}Mn(){return this.on}Sn(){return this._n}xn(t,e,s){this.hn||(this.hn=!0),this.en=!0,this.yn(t,e,s)}xt(){return this.sn}Xt(){return this.ln}Zt(){return this.an}Ct(){return this.en}kn(){this.en=!1,this.Cn(),this.nn=NaN,this.ln=NaN,this.an=NaN,this.tn=null,this.wn()}Tn(t){return this.tn!==null?[this.bn,this.cn]:[]}qt(t){return t===this.tn&&this.un.horzLine.visible}Yt(){return this.un.vertLine.visible}Pn(t,e){this.en&&this.tn===t||this.rn.clear();const s=[];return this.tn===t&&s.push(this.Rn(this.rn,e,this.dn)),s}Qi(){return this.en?[this.mn]:[]}Ht(){return this.tn}Dn(){this.bn.gt(),this.rn.forEach(t=>t.gt()),this.mn.gt(),this.cn.gt()}Bn(t){return t&&!t.fn().Ni()?t.fn():null}yn(t,e,s){this.On(t,e,s)&&this.Dn()}On(t,e,s){const n=this.ln,r=this.an,o=this.nn,h=this.sn,a=this.tn,l=this.Bn(s);this.sn=t,this.ln=isNaN(t)?NaN:this.Hi.yt().Et(t),this.tn=s;const u=l!==null?l.Tt():null;return l!==null&&u!==null?(this.nn=e,this.an=l.Dt(e,u)):(this.nn=NaN,this.an=NaN),n!==this.ln||r!==this.an||h!==this.sn||o!==this.nn||a!==this.tn}Cn(){const t=this.Hi.wt().map(s=>s.Ln().An()).filter(fc),e=t.length===0?null:Math.max(...t);this.sn=e!==null?e:NaN}Rn(t,e,s){let n=t.get(e);return n===void 0&&(n=new wc(this,e,s),t.set(e,n)),n}}function En(i){return i==="left"||i==="right"}class Ut{constructor(t){this.In=new Map,this.En=[],this.Vn=t}zn(t,e){const s=function(n,r){return n===void 0?r:{Nn:Math.max(n.Nn,r.Nn),Fn:n.Fn||r.Fn}}(this.In.get(t),e);this.In.set(t,s)}Wn(){return this.Vn}jn(t){const e=this.In.get(t);return e===void 0?{Nn:this.Vn}:{Nn:Math.max(this.Vn,e.Nn),Fn:e.Fn}}$n(){this.Hn(),this.En=[{Un:0}]}qn(t){this.Hn(),this.En=[{Un:1,Ot:t}]}Yn(t){this.Xn(),this.En.push({Un:5,Ot:t})}Hn(){this.Xn(),this.En.push({Un:6})}Zn(){this.Hn(),this.En=[{Un:4}]}Kn(t){this.Hn(),this.En.push({Un:2,Ot:t})}Gn(t){this.Hn(),this.En.push({Un:3,Ot:t})}Jn(){return this.En}Qn(t){for(const e of t.En)this.ts(e);this.Vn=Math.max(this.Vn,t.Vn),t.In.forEach((e,s)=>{this.zn(s,e)})}static ns(){return new Ut(2)}static ss(){return new Ut(3)}ts(t){switch(t.Un){case 0:this.$n();break;case 1:this.qn(t.Ot);break;case 2:this.Kn(t.Ot);break;case 3:this.Gn(t.Ot);break;case 4:this.Zn();break;case 5:this.Yn(t.Ot);break;case 6:this.Xn()}}Xn(){const t=this.En.findIndex(e=>e.Un===5);t!==-1&&this.En.splice(t,1)}}const Ao=".";function Be(i,t){if(!ke(i))return"n/a";if(!fs(t))throw new TypeError("invalid length");if(t<0||t>16)throw new TypeError("invalid length");return t===0?i.toString():("0000000000000000"+i.toString()).slice(-t)}class Tn{constructor(t,e){if(e||(e=1),ke(t)&&fs(t)||(t=100),t<0)throw new TypeError("invalid base");this.Vi=t,this.es=e,this.rs()}format(t){const e=t<0?"−":"";return t=Math.abs(t),e+this.hs(t)}rs(){if(this.ls=0,this.Vi>0&&this.es>0){let t=this.Vi;for(;t>1;)t/=10,this.ls++}}hs(t){const e=this.Vi/this.es;let s=Math.floor(t),n="";const r=this.ls!==void 0?this.ls:NaN;if(e>1){let o=+(Math.round(t*e)-s*e).toFixed(this.ls);o>=e&&(o-=e,s+=1),n=Ao+Be(+o.toFixed(this.ls)*this.es,r)}else s=Math.round(s*e)/e,r>0&&(n=Ao+Be(0,r));return s.toFixed(0)+n}}class yl extends Tn{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}}class Ec{constructor(t){this.os=t}format(t){let e="";return t<0&&(e="-",t=-t),t<995?e+this._s(t):t<999995?e+this._s(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),e+this._s(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this._s(t/1e9)+"B")}_s(t){let e;const s=Math.pow(10,this.os);return e=(t=Math.round(t*s)/s)>=1e-15&&t<1?t.toFixed(this.os).replace(/\.?0+$/,""):String(t),e.replace(/(\.[1-9]*)0+$/,(n,r)=>r)}}function _l(i,t,e,s,n,r,o){if(t.length===0||s.from>=t.length)return;const h=i.context,a=t[s.from];let l=r(i,a),u=a;if(s.to-s.from<2){const m=n/2;h.beginPath();const d={st:a.st-m,et:a.et},p={st:a.st+m,et:a.et};return h.moveTo(d.st,d.et),h.lineTo(p.st,p.et),void o(h,l,d,p)}const c=(m,d)=>{o(h,l,u,d),h.beginPath(),l=m,u=d};let f=u;h.beginPath(),h.moveTo(a.st,a.et);for(let m=s.from+1;m<s.to;++m){f=t[m];const d=r(i,f);switch(e){case 0:h.lineTo(f.st,f.et);break;case 1:h.lineTo(f.st,t[m-1].et),d!==l&&(c(d,f),h.lineTo(f.st,t[m-1].et)),h.lineTo(f.st,f.et);break;case 2:{const[p,E]=Tc(t,m-1,m);h.bezierCurveTo(p.st,p.et,E.st,E.et,f.st,f.et);break}}e!==1&&d!==l&&(c(d,f),h.moveTo(f.st,f.et))}(u!==f||u===f&&e===1)&&o(h,l,u,f)}function jn(i,t){return{st:i.st-t.st,et:i.et-t.et}}function Bo(i,t){return{st:i.st/t,et:i.et/t}}function Tc(i,t,e){const s=Math.max(0,t-1),n=Math.min(i.length-1,e+1);var r,o;return[(r=i[t],o=Bo(jn(i[e],i[s]),6),{st:r.st+o.st,et:r.et+o.et}),jn(i[e],Bo(jn(i[n],i[t]),6))]}function kc(i,t,e,s,n){t.lineTo(n.st,i),t.lineTo(s.st,i),t.closePath(),t.fillStyle=e,t.fill()}class wl extends vs{constructor(){super(...arguments),this.J=null}tt(t){this.J=t}Z(t){var e;if(this.J===null)return;const{nt:s,it:n,us:r,rt:o,Ft:h,cs:a}=this.J,l=(e=this.J.ds)!==null&&e!==void 0?e:this.J.fs?0:t.mediaSize.height;if(n===null)return;const u=t.context;u.lineCap="butt",u.lineJoin="round",u.lineWidth=o,oi(u,h),u.lineWidth=1,_l(t,s,a,n,r,this.ps.bind(this),kc.bind(null,l))}}class Pc extends wl{constructor(){super(...arguments),this.vs=null}ps(t,e){const{context:s,mediaSize:n}=t,{bs:r,gs:o}=e,h=n.height;if(this.vs!==null&&this.vs.topColor===r&&this.vs.bottomColor===o&&this.vs.bottom===h)return this.vs.fillStyle;const a=s.createLinearGradient(0,0,0,h);return a.addColorStop(0,r),a.addColorStop(1,o),this.vs={topColor:r,bottomColor:o,fillStyle:a,bottom:h},a}}function Rc(i,t){i.strokeStyle=t,i.stroke()}class xl extends vs{constructor(){super(...arguments),this.J=null}tt(t){this.J=t}Z(t){if(this.J===null)return;const{nt:e,it:s,us:n,cs:r,rt:o,Ft:h}=this.J;if(s===null)return;const a=t.context;a.lineCap="butt",a.lineWidth=o,oi(a,h),a.lineJoin="round",_l(t,e,r,s,n,this.ws.bind(this),Rc)}}class Ml extends xl{ws(t,e){return e.ot}}function bs(i,t,e,s=0,n=i.length){let r=n-s;for(;0<r;){const o=r>>1,h=s+o;e(i[h],t)?(s=h+1,r-=o+1):r=o}return s}function Sl(i,t,e,s=0,n=i.length){let r=n-s;for(;0<r;){const o=r>>1,h=s+o;e(t,i[h])?r=o:(s=h+1,r-=o+1)}return s}function zc(i,t){return i._t<t}function Vc(i,t){return i<t._t}function Cl(i,t,e){const s=t.Ms(),n=t.ci(),r=bs(i,s,zc),o=Sl(i,n,Vc);if(!e)return{from:r,to:o};let h=r,a=o;return r>0&&r<i.length&&i[r]._t>=s&&(h=r-1),o>0&&o<i.length&&i[o-1]._t<=n&&(a=o+1),{from:h,to:a}}class El{constructor(t,e,s){this.Ss=!0,this.xs=!0,this.ys=!0,this.ks=[],this.Cs=null,this.Ts=t,this.Ps=e,this.Rs=s}gt(t){this.Ss=!0,t==="data"&&(this.xs=!0),t==="options"&&(this.ys=!0)}Mt(){return this.Ts.Ct()?(this.Ds(),this.Cs===null?null:this.Bs):null}Os(){this.ks=this.ks.map(t=>Object.assign(Object.assign({},t),this.Ts.Ls().As(t._t)))}Is(){this.Cs=null}Ds(){this.xs&&(this.Es(),this.xs=!1),this.ys&&(this.Os(),this.ys=!1),this.Ss&&(this.Vs(),this.Ss=!1)}Vs(){const t=this.Ts.Bt(),e=this.Ps.yt();if(this.Is(),e.Ni()||t.Ni())return;const s=e.zs();if(s===null||this.Ts.Ln().Ns()===0)return;const n=this.Ts.Tt();n!==null&&(this.Cs=Cl(this.ks,s,this.Rs),this.Fs(t,e,n.Ot),this.Ws())}}class kn extends El{constructor(t,e){super(t,e,!0)}Fs(t,e,s){e.js(this.ks,bn(this.Cs)),t.$s(this.ks,s,bn(this.Cs))}Hs(t,e){return{_t:t,ut:e,st:NaN,et:NaN}}Es(){const t=this.Ts.Ls();this.ks=this.Ts.Ln().Us().map(e=>{const s=e.Ot[3];return this.qs(e.Ys,s,t)})}}class Oc extends kn{constructor(t,e){super(t,e),this.Bs=new Ar,this.Xs=new Pc,this.Zs=new Ml,this.Bs.Y([this.Xs,this.Zs])}qs(t,e,s){return Object.assign(Object.assign({},this.Hs(t,e)),s.As(t))}Ws(){const t=this.Ts.F();this.Xs.tt({cs:t.lineType,nt:this.ks,Ft:t.lineStyle,rt:t.lineWidth,ds:null,fs:t.invertFilledArea,it:this.Cs,us:this.Ps.yt().Ks()}),this.Zs.tt({cs:t.lineType,nt:this.ks,Ft:t.lineStyle,rt:t.lineWidth,it:this.Cs,us:this.Ps.yt().Ks()})}}class Nc extends ai{constructor(){super(...arguments),this.Vt=null,this.Gs=0,this.Js=0}tt(t){this.Vt=t}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:s}){if(this.Vt===null||this.Vt.Ln.length===0||this.Vt.it===null)return;this.Gs=this.Qs(e),this.Gs>=2&&Math.max(1,Math.floor(e))%2!=this.Gs%2&&this.Gs--,this.Js=this.Vt.te?Math.min(this.Gs,Math.floor(e)):this.Gs;let n=null;const r=this.Js<=this.Gs&&this.Vt.Ks>=Math.floor(1.5*e);for(let o=this.Vt.it.from;o<this.Vt.it.to;++o){const h=this.Vt.Ln[o];n!==h.ie&&(t.fillStyle=h.ie,n=h.ie);const a=Math.floor(.5*this.Js),l=Math.round(h.st*e),u=l-a,c=this.Js,f=u+c-1,m=Math.min(h.ne,h.se),d=Math.max(h.ne,h.se),p=Math.round(m*s)-a,E=Math.round(d*s)+a,C=Math.max(E-p,this.Js);t.fillRect(u,p,c,C);const k=Math.ceil(1.5*this.Gs);if(r){if(this.Vt.ee){const G=l-k;let H=Math.max(p,Math.round(h.re*s)-a),X=H+c-1;X>p+C-1&&(X=p+C-1,H=X-c+1),t.fillRect(G,H,u-G,X-H+1)}const M=l+k;let L=Math.max(p,Math.round(h.he*s)-a),F=L+c-1;F>p+C-1&&(F=p+C-1,L=F-c+1),t.fillRect(f+1,L,M-f,F-L+1)}}}Qs(t){const e=Math.floor(t);return Math.max(e,Math.floor(function(s,n){return Math.floor(.3*s*n)}(V(this.Vt).Ks,t)))}}class Tl extends El{constructor(t,e){super(t,e,!1)}Fs(t,e,s){e.js(this.ks,bn(this.Cs)),t.le(this.ks,s,bn(this.Cs))}ae(t,e,s){return{_t:t,oe:e.Ot[0],_e:e.Ot[1],ue:e.Ot[2],ce:e.Ot[3],st:NaN,re:NaN,ne:NaN,se:NaN,he:NaN}}Es(){const t=this.Ts.Ls();this.ks=this.Ts.Ln().Us().map(e=>this.qs(e.Ys,e,t))}}class Dc extends Tl{constructor(){super(...arguments),this.Bs=new Nc}qs(t,e,s){return Object.assign(Object.assign({},this.ae(t,e,s)),s.As(t))}Ws(){const t=this.Ts.F();this.Bs.tt({Ln:this.ks,Ks:this.Ps.yt().Ks(),ee:t.openVisible,te:t.thinBars,it:this.Cs})}}function yn(i,t,e){return Math.min(Math.max(i,t),e)}function Is(i,t,e){return t-i<=e}function kl(i){return i<=0?NaN:Math.log(i)/Math.log(10)}function Pl(i){const t=Math.ceil(i);return t%2==0?t-1:t}class Lc extends wl{constructor(){super(...arguments),this.vs=null}ps(t,e){var s;const{context:n,mediaSize:r}=t,o=this.J,{de:h,fe:a,pe:l,ve:u}=e,c=(s=o.ds)!==null&&s!==void 0?s:r.height,f=r.height;if(this.vs!==null&&this.vs.topFillColor1===h&&this.vs.topFillColor2===a&&this.vs.bottomFillColor1===l&&this.vs.bottomFillColor2===u&&this.vs.baseLevelCoordinate===c&&this.vs.bottom===f)return this.vs.fillStyle;const m=n.createLinearGradient(0,0,0,f),d=yn(c/f,0,1);return m.addColorStop(0,h),m.addColorStop(d,a),m.addColorStop(d,l),m.addColorStop(1,u),this.vs={topFillColor1:h,topFillColor2:a,bottomFillColor1:l,bottomFillColor2:u,fillStyle:m,baseLevelCoordinate:c,bottom:f},m}}class Fc extends xl{constructor(){super(...arguments),this.me=null}ws(t,e){const{context:s,mediaSize:n}=t,r=this.J,{be:o,ge:h}=e,{ds:a}=r,l=n.height;if(this.me!==null&&this.me.topLineColor===o&&this.me.bottomLineColor===h&&this.me.baseLevelCoordinate===a&&this.me.bottom===l)return this.me.strokeStyle;const u=s.createLinearGradient(0,0,0,l),c=yn(a/l,0,1);return u.addColorStop(0,o),u.addColorStop(c,o),u.addColorStop(c,h),u.addColorStop(1,h),this.me={topLineColor:o,bottomLineColor:h,strokeStyle:u,baseLevelCoordinate:a,bottom:l},u}}class Ac extends kn{constructor(t,e){super(t,e),this.Bs=new Ar,this.we=new Lc,this.Me=new Fc,this.Bs.Y([this.we,this.Me])}qs(t,e,s){return Object.assign(Object.assign({},this.Hs(t,e)),s.As(t))}Ws(){const t=this.Ts.Tt();if(t===null)return;const e=this.Ts.F(),s=this.Ts.Bt().Dt(e.baseValue.price,t.Ot),n=this.Ps.yt().Ks();this.we.tt({nt:this.ks,rt:e.lineWidth,Ft:e.lineStyle,cs:e.lineType,ds:s,fs:!1,it:this.Cs,us:n}),this.Me.tt({nt:this.ks,rt:e.lineWidth,Ft:e.lineStyle,cs:e.lineType,ds:s,it:this.Cs,us:n})}}class Bc extends ai{constructor(){super(...arguments),this.Vt=null,this.Gs=0}tt(t){this.Vt=t}Z(t){if(this.Vt===null||this.Vt.Ln.length===0||this.Vt.it===null)return;const{horizontalPixelRatio:e}=t;this.Gs=function(r,o){if(r>=2.5&&r<=4)return Math.floor(3*o);const h=1-.2*Math.atan(Math.max(4,r)-4)/(.5*Math.PI),a=Math.floor(r*h*o),l=Math.floor(r*o),u=Math.min(a,l);return Math.max(Math.floor(o),u)}(this.Vt.Ks,e),this.Gs>=2&&Math.floor(e)%2!=this.Gs%2&&this.Gs--;const s=this.Vt.Ln;this.Vt.Se&&this.xe(t,s,this.Vt.it),this.Vt.ui&&this.ye(t,s,this.Vt.it);const n=this.ke(e);(!this.Vt.ui||this.Gs>2*n)&&this.Ce(t,s,this.Vt.it)}xe(t,e,s){if(this.Vt===null)return;const{context:n,horizontalPixelRatio:r,verticalPixelRatio:o}=t;let h="",a=Math.min(Math.floor(r),Math.floor(this.Vt.Ks*r));a=Math.max(Math.floor(r),Math.min(a,this.Gs));const l=Math.floor(.5*a);let u=null;for(let c=s.from;c<s.to;c++){const f=e[c];f.Te!==h&&(n.fillStyle=f.Te,h=f.Te);const m=Math.round(Math.min(f.re,f.he)*o),d=Math.round(Math.max(f.re,f.he)*o),p=Math.round(f.ne*o),E=Math.round(f.se*o);let C=Math.round(r*f.st)-l;const k=C+a-1;u!==null&&(C=Math.max(u+1,C),C=Math.min(C,k));const M=k-C+1;n.fillRect(C,p,M,m-p),n.fillRect(C,d+1,M,E-d),u=k}}ke(t){let e=Math.floor(1*t);this.Gs<=2*e&&(e=Math.floor(.5*(this.Gs-1)));const s=Math.max(Math.floor(t),e);return this.Gs<=2*s?Math.max(Math.floor(t),Math.floor(1*t)):s}ye(t,e,s){if(this.Vt===null)return;const{context:n,horizontalPixelRatio:r,verticalPixelRatio:o}=t;let h="";const a=this.ke(r);let l=null;for(let u=s.from;u<s.to;u++){const c=e[u];c.Pe!==h&&(n.fillStyle=c.Pe,h=c.Pe);let f=Math.round(c.st*r)-Math.floor(.5*this.Gs);const m=f+this.Gs-1,d=Math.round(Math.min(c.re,c.he)*o),p=Math.round(Math.max(c.re,c.he)*o);if(l!==null&&(f=Math.max(l+1,f),f=Math.min(f,m)),this.Vt.Ks*r>2*a)_c(n,f,d,m-f+1,p-d+1,a);else{const E=m-f+1;n.fillRect(f,d,E,p-d+1)}l=m}}Ce(t,e,s){if(this.Vt===null)return;const{context:n,horizontalPixelRatio:r,verticalPixelRatio:o}=t;let h="";const a=this.ke(r);for(let l=s.from;l<s.to;l++){const u=e[l];let c=Math.round(Math.min(u.re,u.he)*o),f=Math.round(Math.max(u.re,u.he)*o),m=Math.round(u.st*r)-Math.floor(.5*this.Gs),d=m+this.Gs-1;if(u.ie!==h){const p=u.ie;n.fillStyle=p,h=p}this.Vt.ui&&(m+=a,c+=a,d-=a,f-=a),c>f||n.fillRect(m,c,d-m+1,f-c+1)}}}class Ic extends Tl{constructor(){super(...arguments),this.Bs=new Bc}qs(t,e,s){return Object.assign(Object.assign({},this.ae(t,e,s)),s.As(t))}Ws(){const t=this.Ts.F();this.Bs.tt({Ln:this.ks,Ks:this.Ps.yt().Ks(),Se:t.wickVisible,ui:t.borderVisible,it:this.Cs})}}class Uc extends ai{constructor(){super(...arguments),this.Vt=null,this.Re=[]}tt(t){this.Vt=t,this.Re=[]}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:s}){if(this.Vt===null||this.Vt.nt.length===0||this.Vt.it===null)return;this.Re.length||this.De(e);const n=Math.max(1,Math.floor(s)),r=Math.round(this.Vt.Be*s)-Math.floor(n/2),o=r+n;for(let h=this.Vt.it.from;h<this.Vt.it.to;h++){const a=this.Vt.nt[h],l=this.Re[h-this.Vt.it.from],u=Math.round(a.et*s);let c,f;t.fillStyle=a.ie,u<=r?(c=u,f=o):(c=r,f=u-Math.floor(n/2)+n),t.fillRect(l.Ms,c,l.ci-l.Ms+1,f-c)}}De(t){if(this.Vt===null||this.Vt.nt.length===0||this.Vt.it===null)return void(this.Re=[]);const e=Math.ceil(this.Vt.Ks*t)<=1?0:Math.max(1,Math.floor(t)),s=Math.round(this.Vt.Ks*t)-e;this.Re=new Array(this.Vt.it.to-this.Vt.it.from);for(let r=this.Vt.it.from;r<this.Vt.it.to;r++){const o=this.Vt.nt[r],h=Math.round(o.st*t);let a,l;if(s%2){const u=(s-1)/2;a=h-u,l=h+u}else{const u=s/2;a=h-u,l=h+u-1}this.Re[r-this.Vt.it.from]={Ms:a,ci:l,Oe:h,Ae:o.st*t,_t:o._t}}for(let r=this.Vt.it.from+1;r<this.Vt.it.to;r++){const o=this.Re[r-this.Vt.it.from],h=this.Re[r-this.Vt.it.from-1];o._t===h._t+1&&o.Ms-h.ci!==e+1&&(h.Oe>h.Ae?h.ci=o.Ms-e-1:o.Ms=h.ci+e+1)}let n=Math.ceil(this.Vt.Ks*t);for(let r=this.Vt.it.from;r<this.Vt.it.to;r++){const o=this.Re[r-this.Vt.it.from];o.ci<o.Ms&&(o.ci=o.Ms);const h=o.ci-o.Ms+1;n=Math.min(h,n)}if(e>0&&n<4)for(let r=this.Vt.it.from;r<this.Vt.it.to;r++){const o=this.Re[r-this.Vt.it.from];o.ci-o.Ms+1>n&&(o.Oe>o.Ae?o.ci-=1:o.Ms+=1)}}}class Hc extends kn{constructor(){super(...arguments),this.Bs=new Uc}qs(t,e,s){return Object.assign(Object.assign({},this.Hs(t,e)),s.As(t))}Ws(){const t={nt:this.ks,Ks:this.Ps.yt().Ks(),it:this.Cs,Be:this.Ts.Bt().Dt(this.Ts.F().base,V(this.Ts.Tt()).Ot)};this.Bs.tt(t)}}class jc extends kn{constructor(){super(...arguments),this.Bs=new Ml}qs(t,e,s){return Object.assign(Object.assign({},this.Hs(t,e)),s.As(t))}Ws(){const t=this.Ts.F(),e={nt:this.ks,Ft:t.lineStyle,cs:t.lineType,rt:t.lineWidth,it:this.Cs,us:this.Ps.yt().Ks()};this.Bs.tt(e)}}const Wc=/[2-9]/g;class ds{constructor(t=50){this.Le=0,this.Ie=1,this.Ee=1,this.Ve={},this.ze=new Map,this.Ne=t}Fe(){this.Le=0,this.ze.clear(),this.Ie=1,this.Ee=1,this.Ve={}}Si(t,e,s){return this.We(t,e,s).width}Mi(t,e,s){const n=this.We(t,e,s);return((n.actualBoundingBoxAscent||0)-(n.actualBoundingBoxDescent||0))/2}We(t,e,s){const n=s||Wc,r=String(e).replace(n,"0");if(this.ze.has(r))return ge(this.ze.get(r)).je;if(this.Le===this.Ne){const h=this.Ve[this.Ee];delete this.Ve[this.Ee],this.ze.delete(h),this.Ee++,this.Le--}t.save(),t.textBaseline="middle";const o=t.measureText(r);return t.restore(),o.width===0&&e.length||(this.ze.set(r,{je:o,$e:this.Ie}),this.Ve[this.Ie]=r,this.Le++,this.Ie++),o}}class Gc{constructor(t){this.He=null,this.S=null,this.Ue="right",this.qe=t}Ye(t,e,s){this.He=t,this.S=e,this.Ue=s}X(t){this.S!==null&&this.He!==null&&this.He.X(t,this.S,this.qe,this.Ue)}}class Rl{constructor(t,e,s){this.Xe=t,this.qe=new ds(50),this.Ze=e,this.N=s,this.W=-1,this.jt=new Gc(this.qe)}Mt(){const t=this.N.Ke(this.Ze);if(t===null)return null;const e=t.Ge(this.Ze)?t.Je():this.Ze.Bt();if(e===null)return null;const s=t.Qe(e);if(s==="overlay")return null;const n=this.N.tr();return n.T!==this.W&&(this.W=n.T,this.qe.Fe()),this.jt.Ye(this.Xe.Ii(),n,s),this.jt}}class qc extends ai{constructor(){super(...arguments),this.Vt=null}tt(t){this.Vt=t}ir(t,e){var s;if(!(!((s=this.Vt)===null||s===void 0)&&s.Ct))return null;const{et:n,rt:r,nr:o}=this.Vt;return e>=n-r-7&&e<=n+r+7?{sr:this.Vt,nr:o}:null}Z({context:t,bitmapSize:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.Vt===null||this.Vt.Ct===!1)return;const r=Math.round(this.Vt.et*n);r<0||r>e.height||(t.lineCap="butt",t.strokeStyle=this.Vt.D,t.lineWidth=Math.floor(this.Vt.rt*s),oi(t,this.Vt.Ft),gl(t,r,0,e.width))}}class Ur{constructor(t){this.er={et:0,D:"rgba(0, 0, 0, 0)",rt:1,Ft:0,Ct:!1},this.rr=new qc,this.vt=!0,this.Ts=t,this.Ps=t.Ut(),this.rr.tt(this.er)}gt(){this.vt=!0}Mt(){return this.Ts.Ct()?(this.vt&&(this.hr(),this.vt=!1),this.rr):null}}class Yc extends Ur{constructor(t){super(t)}hr(){this.er.Ct=!1;const t=this.Ts.Bt(),e=t.lr().lr;if(e!==2&&e!==3)return;const s=this.Ts.F();if(!s.baseLineVisible||!this.Ts.Ct())return;const n=this.Ts.Tt();n!==null&&(this.er.Ct=!0,this.er.et=t.Dt(n.Ot,n.Ot),this.er.D=s.baseLineColor,this.er.rt=s.baseLineWidth,this.er.Ft=s.baseLineStyle)}}class Kc extends ai{constructor(){super(...arguments),this.Vt=null}tt(t){this.Vt=t}ar(){return this.Vt}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:s}){const n=this.Vt;if(n===null)return;const r=Math.max(1,Math.floor(e)),o=r%2/2,h=Math.round(n.Ae.x*e)+o,a=n.Ae.y*s;t.fillStyle=n._r,t.beginPath();const l=Math.max(2,1.5*n.ur)*e;t.arc(h,a,l,0,2*Math.PI,!1),t.fill(),t.fillStyle=n.cr,t.beginPath(),t.arc(h,a,n.lt*e,0,2*Math.PI,!1),t.fill(),t.lineWidth=r,t.strokeStyle=n.dr,t.beginPath(),t.arc(h,a,n.lt*e+r/2,0,2*Math.PI,!1),t.stroke()}}const Jc=[{pr:0,vr:.25,mr:4,br:10,gr:.25,wr:0,Mr:.4,Sr:.8},{pr:.25,vr:.525,mr:10,br:14,gr:0,wr:0,Mr:.8,Sr:0},{pr:.525,vr:1,mr:14,br:14,gr:0,wr:0,Mr:0,Sr:0}];function Io(i,t,e,s){return function(n,r){if(n==="transparent")return n;const o=vn(n),h=o[3];return`rgba(${o[0]}, ${o[1]}, ${o[2]}, ${r*h})`}(i,e+(s-e)*t)}function Uo(i,t){const e=i%2600/2600;let s;for(const a of Jc)if(e>=a.pr&&e<=a.vr){s=a;break}li(s!==void 0,"Last price animation internal logic error");const n=(e-s.pr)/(s.vr-s.pr);return{cr:Io(t,n,s.gr,s.wr),dr:Io(t,n,s.Mr,s.Sr),lt:(r=n,o=s.mr,h=s.br,o+(h-o)*r)};var r,o,h}class Xc{constructor(t){this.jt=new Kc,this.vt=!0,this.yr=!0,this.kr=performance.now(),this.Cr=this.kr-1,this.Tr=t}Pr(){this.Cr=this.kr-1,this.gt()}Rr(){if(this.gt(),this.Tr.F().lastPriceAnimation===2){const t=performance.now(),e=this.Cr-t;if(e>0)return void(e<650&&(this.Cr+=2600));this.kr=t,this.Cr=t+2600}}gt(){this.vt=!0}Dr(){this.yr=!0}Ct(){return this.Tr.F().lastPriceAnimation!==0}Br(){switch(this.Tr.F().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Cr}}Mt(){return this.vt?(this.St(),this.vt=!1,this.yr=!1):this.yr&&(this.Or(),this.yr=!1),this.jt}St(){this.jt.tt(null);const t=this.Tr.Ut().yt(),e=t.zs(),s=this.Tr.Tt();if(e===null||s===null)return;const n=this.Tr.Ar(!0);if(n.Lr||!e.Ir(n.Ys))return;const r={x:t.Et(n.Ys),y:this.Tr.Bt().Dt(n.ut,s.Ot)},o=n.D,h=this.Tr.F().lineWidth,a=Uo(this.Er(),o);this.jt.tt({_r:o,ur:h,cr:a.cr,dr:a.dr,lt:a.lt,Ae:r})}Or(){const t=this.jt.ar();if(t!==null){const e=Uo(this.Er(),t._r);t.cr=e.cr,t.dr=e.dr,t.lt=e.lt}}Er(){return this.Br()?performance.now()-this.kr:2599}}function rs(i,t){return Pl(Math.min(Math.max(i,12),30)*t)}function ms(i,t){switch(i){case"arrowDown":case"arrowUp":return rs(t,1);case"circle":return rs(t,.8);case"square":return rs(t,.7)}}function zl(i){return function(t){const e=Math.ceil(t);return e%2!=0?e-1:e}(rs(i,1))}function Ho(i){return Math.max(rs(i,.1),3)}function Vl(i,t,e,s,n){const r=ms("square",e),o=(r-1)/2,h=i-o,a=t-o;return s>=h&&s<=h+r&&n>=a&&n<=a+r}function jo(i,t,e,s,n){const r=(ms("arrowUp",n)-1)/2,o=(Pl(n/2)-1)/2;t.beginPath(),i?(t.moveTo(e-r,s),t.lineTo(e,s-r),t.lineTo(e+r,s),t.lineTo(e+o,s),t.lineTo(e+o,s+r),t.lineTo(e-o,s+r),t.lineTo(e-o,s)):(t.moveTo(e-r,s),t.lineTo(e,s+r),t.lineTo(e+r,s),t.lineTo(e+o,s),t.lineTo(e+o,s-r),t.lineTo(e-o,s-r),t.lineTo(e-o,s)),t.fill()}function Qc(i,t,e,s,n,r){return Vl(t,e,s,n,r)}class Zc extends vs{constructor(){super(...arguments),this.Vt=null,this.qe=new ds,this.W=-1,this.j="",this.Vr=""}tt(t){this.Vt=t}Ye(t,e){this.W===t&&this.j===e||(this.W=t,this.j=e,this.Vr=Ri(t,e),this.qe.Fe())}ir(t,e){if(this.Vt===null||this.Vt.it===null)return null;for(let s=this.Vt.it.from;s<this.Vt.it.to;s++){const n=this.Vt.nt[s];if(tf(n,t,e))return{sr:n.zr,nr:n.nr}}return null}Z({context:t},e,s){if(this.Vt!==null&&this.Vt.it!==null){t.textBaseline="middle",t.font=this.Vr;for(let n=this.Vt.it.from;n<this.Vt.it.to;n++){const r=this.Vt.nt[n];r.Gt!==void 0&&(r.Gt.$i=this.qe.Si(t,r.Gt.Nr),r.Gt.It=this.W),$c(r,t)}}}}function $c(i,t){t.fillStyle=i.D,i.Gt!==void 0&&function(e,s,n,r){e.fillText(s,n,r)}(t,i.Gt.Nr,i.st-i.Gt.$i/2,i.Gt.et),function(e,s){if(e.Ns!==0){switch(e.Fr){case"arrowDown":return void jo(!1,s,e.st,e.et,e.Ns);case"arrowUp":return void jo(!0,s,e.st,e.et,e.Ns);case"circle":return void function(n,r,o,h){const a=(ms("circle",h)-1)/2;n.beginPath(),n.arc(r,o,a,0,2*Math.PI,!1),n.fill()}(s,e.st,e.et,e.Ns);case"square":return void function(n,r,o,h){const a=ms("square",h),l=(a-1)/2,u=r-l,c=o-l;n.fillRect(u,c,a,a)}(s,e.st,e.et,e.Ns)}e.Fr}}(i,t)}function tf(i,t,e){return!(i.Gt===void 0||!function(s,n,r,o,h,a){const l=o/2;return h>=s&&h<=s+r&&a>=n-l&&a<=n+l}(i.st,i.Gt.et,i.Gt.$i,i.Gt.It,t,e))||function(s,n,r){if(s.Ns===0)return!1;switch(s.Fr){case"arrowDown":case"arrowUp":return Qc(0,s.st,s.et,s.Ns,n,r);case"circle":return function(o,h,a,l,u){const c=2+ms("circle",a)/2,f=o-l,m=h-u;return Math.sqrt(f*f+m*m)<=c}(s.st,s.et,s.Ns,n,r);case"square":return Vl(s.st,s.et,s.Ns,n,r)}}(i,t,e)}function ef(i,t,e,s,n,r,o,h,a){const l=ke(e)?e:e.ce,u=ke(e)?e:e._e,c=ke(e)?e:e.ue,f=ke(t.size)?Math.max(t.size,0):1,m=zl(h.Ks())*f,d=m/2;switch(i.Ns=m,t.position){case"inBar":return i.et=o.Dt(l,a),void(i.Gt!==void 0&&(i.Gt.et=i.et+d+r+.6*n));case"aboveBar":return i.et=o.Dt(u,a)-d-s.Wr,i.Gt!==void 0&&(i.Gt.et=i.et-d-.6*n,s.Wr+=1.2*n),void(s.Wr+=m+r);case"belowBar":return i.et=o.Dt(c,a)+d+s.jr,i.Gt!==void 0&&(i.Gt.et=i.et+d+r+.6*n,s.jr+=1.2*n),void(s.jr+=m+r)}t.position}class sf{constructor(t,e){this.vt=!0,this.$r=!0,this.Hr=!0,this.Ur=null,this.jt=new Zc,this.Tr=t,this.Hi=e,this.Vt={nt:[],it:null}}gt(t){this.vt=!0,this.Hr=!0,t==="data"&&(this.$r=!0)}Mt(t){if(!this.Tr.Ct())return null;this.vt&&this.qr();const e=this.Hi.F().layout;return this.jt.Ye(e.fontSize,e.fontFamily),this.jt.tt(this.Vt),this.jt}Yr(){if(this.Hr){if(this.Tr.Xr().length>0){const t=this.Hi.yt().Ks(),e=Ho(t),s=1.5*zl(t)+2*e;this.Ur={above:s,below:s}}else this.Ur=null;this.Hr=!1}return this.Ur}qr(){const t=this.Tr.Bt(),e=this.Hi.yt(),s=this.Tr.Xr();this.$r&&(this.Vt.nt=s.map(u=>({_t:u.time,st:0,et:0,Ns:0,Fr:u.shape,D:u.color,zr:u.internalId,nr:u.id,Gt:void 0})),this.$r=!1);const n=this.Hi.F().layout;this.Vt.it=null;const r=e.zs();if(r===null)return;const o=this.Tr.Tt();if(o===null||this.Vt.nt.length===0)return;let h=NaN;const a=Ho(e.Ks()),l={Wr:a,jr:a};this.Vt.it=Cl(this.Vt.nt,r,!0);for(let u=this.Vt.it.from;u<this.Vt.it.to;u++){const c=s[u];c.time!==h&&(l.Wr=a,l.jr=a,h=c.time);const f=this.Vt.nt[u];f.st=e.Et(c.time),c.text!==void 0&&c.text.length>0&&(f.Gt={Nr:c.text,et:0,$i:0,It:0});const m=this.Tr.Zr(c.time);m!==null&&ef(f,c,m,l,n.fontSize,a,t,e,o.Ot)}this.vt=!1}}class nf extends Ur{constructor(t){super(t)}hr(){const t=this.er;t.Ct=!1;const e=this.Ts.F();if(!e.priceLineVisible||!this.Ts.Ct())return;const s=this.Ts.Ar(e.priceLineSource===0);s.Lr||(t.Ct=!0,t.et=s.yi,t.D=this.Ts.Kr(s.D),t.rt=e.priceLineWidth,t.Ft=e.priceLineStyle)}}class rf extends Br{constructor(t){super(),this.$t=t}Ei(t,e,s){t.Ct=!1,e.Ct=!1;const n=this.$t;if(!n.Ct())return;const r=n.F(),o=r.lastValueVisible,h=n.Gr()!=="",a=r.seriesLastValueMode===0,l=n.Ar(!1);if(l.Lr)return;o&&(t.Gt=this.Jr(l,o,a),t.Ct=t.Gt.length!==0),(h||a)&&(e.Gt=this.Qr(l,o,h,a),e.Ct=e.Gt.length>0);const u=n.Kr(l.D),c=Sn(u);s.t=c.t,s.D=c.i,s.yi=l.yi,e.At=n.Ut().Lt(l.yi/n.Bt().It()),t.At=u,t.D=s.D,e.D=s.D}Qr(t,e,s,n){let r="";const o=this.$t.Gr();return s&&o.length!==0&&(r+=`${o} `),e&&n&&(r+=this.$t.Bt().th()?t.ih:t.nh),r.trim()}Jr(t,e,s){return e?s?this.$t.Bt().th()?t.nh:t.ih:t.Gt:""}}let je=class tn{constructor(t,e){this.sh=t,this.eh=e}rh(t){return t!==null&&this.sh===t.sh&&this.eh===t.eh}hh(){return new tn(this.sh,this.eh)}lh(){return this.sh}ah(){return this.eh}oh(){return this.eh-this.sh}Ni(){return this.eh===this.sh||Number.isNaN(this.eh)||Number.isNaN(this.sh)}Qn(t){return t===null?this:new tn(Math.min(this.lh(),t.lh()),Math.max(this.ah(),t.ah()))}_h(t){if(!ke(t)||this.eh-this.sh===0)return;const e=.5*(this.eh+this.sh);let s=this.eh-e,n=this.sh-e;s*=t,n*=t,this.eh=e+s,this.sh=e+n}uh(t){ke(t)&&(this.eh+=t,this.sh+=t)}dh(){return{minValue:this.sh,maxValue:this.eh}}static fh(t){return t===null?null:new tn(t.minValue,t.maxValue)}};class _n{constructor(t,e){this.ph=t,this.mh=e||null}bh(){return this.ph}gh(){return this.mh}dh(){return this.ph===null?null:{priceRange:this.ph.dh(),margins:this.mh||void 0}}static fh(t){return t===null?null:new _n(je.fh(t.priceRange),t.margins)}}class of extends Ur{constructor(t,e){super(t),this.wh=e}hr(){const t=this.er;t.Ct=!1;const e=this.wh.F();if(!this.Ts.Ct()||!e.lineVisible)return;const s=this.wh.Mh();s!==null&&(t.Ct=!0,t.et=s,t.D=e.color,t.rt=e.lineWidth,t.Ft=e.lineStyle,t.nr=this.wh.F().id)}}class hf extends Br{constructor(t,e){super(),this.Tr=t,this.wh=e}Ei(t,e,s){t.Ct=!1,e.Ct=!1;const n=this.wh.F(),r=n.axisLabelVisible,o=n.title!=="",h=this.Tr;if(!r||!h.Ct())return;const a=this.wh.Mh();if(a===null)return;o&&(e.Gt=n.title,e.Ct=!0),e.At=h.Ut().Lt(a/h.Bt().It()),t.Gt=this.Sh(n.price),t.Ct=!0;const l=Sn(n.color);s.t=l.t,s.D=l.i,s.yi=a}Sh(t){const e=this.Tr.Tt();return e===null?"":this.Tr.Bt().Fi(t,e.Ot)}}class lf{constructor(t,e){this.Tr=t,this.un=e,this.xh=new of(t,this),this.Xe=new hf(t,this),this.yh=new Rl(this.Xe,t,t.Ut())}kh(t){ze(this.un,t),this.gt(),this.Tr.Ut().Ch()}F(){return this.un}Th(){return this.xh}Ph(){return this.yh}Rh(){return this.Xe}gt(){this.xh.gt(),this.Xe.gt()}Mh(){const t=this.Tr,e=t.Bt();if(t.Ut().yt().Ni()||e.Ni())return null;const s=t.Tt();return s===null?null:e.Dt(this.un.price,s.Ot)}}class af extends Ir{constructor(t){super(),this.Hi=t}Ut(){return this.Hi}}const uf={Bar:(i,t,e,s)=>{var n;const r=t.upColor,o=t.downColor,h=V(i(e,s)),a=is(h.Ot[0])<=is(h.Ot[3]);return{ie:(n=h.D)!==null&&n!==void 0?n:a?r:o}},Candlestick:(i,t,e,s)=>{var n,r,o;const h=t.upColor,a=t.downColor,l=t.borderUpColor,u=t.borderDownColor,c=t.wickUpColor,f=t.wickDownColor,m=V(i(e,s)),d=is(m.Ot[0])<=is(m.Ot[3]);return{ie:(n=m.D)!==null&&n!==void 0?n:d?h:a,Pe:(r=m.At)!==null&&r!==void 0?r:d?l:u,Te:(o=m.Dh)!==null&&o!==void 0?o:d?c:f}},Area:(i,t,e,s)=>{var n,r,o,h;const a=V(i(e,s));return{ie:(n=a.ot)!==null&&n!==void 0?n:t.lineColor,ot:(r=a.ot)!==null&&r!==void 0?r:t.lineColor,bs:(o=a.bs)!==null&&o!==void 0?o:t.topColor,gs:(h=a.gs)!==null&&h!==void 0?h:t.bottomColor}},Baseline:(i,t,e,s)=>{var n,r,o,h,a,l;const u=V(i(e,s));return{ie:u.Ot[3]>=t.baseValue.price?t.topLineColor:t.bottomLineColor,be:(n=u.be)!==null&&n!==void 0?n:t.topLineColor,ge:(r=u.ge)!==null&&r!==void 0?r:t.bottomLineColor,de:(o=u.de)!==null&&o!==void 0?o:t.topFillColor1,fe:(h=u.fe)!==null&&h!==void 0?h:t.topFillColor2,pe:(a=u.pe)!==null&&a!==void 0?a:t.bottomFillColor1,ve:(l=u.ve)!==null&&l!==void 0?l:t.bottomFillColor2}},Line:(i,t,e,s)=>{var n,r;const o=V(i(e,s));return{ie:(n=o.D)!==null&&n!==void 0?n:t.color,ot:(r=o.D)!==null&&r!==void 0?r:t.color}},Histogram:(i,t,e,s)=>{var n;return{ie:(n=V(i(e,s)).D)!==null&&n!==void 0?n:t.color}}};class cf{constructor(t){this.Bh=(e,s)=>s!==void 0?s.Ot:this.Tr.Ln().Oh(e),this.Tr=t,this.Ah=uf[t.Lh()]}As(t,e){return this.Ah(this.Bh,this.Tr.F(),t,e)}}var Wo;(function(i){i[i.NearestLeft=-1]="NearestLeft",i[i.None=0]="None",i[i.NearestRight=1]="NearestRight"})(Wo||(Wo={}));const Ye=30;class ff{constructor(){this.Ih=[],this.Eh=new Map,this.Vh=new Map}zh(){return this.Ns()>0?this.Ih[this.Ih.length-1]:null}Nh(){return this.Ns()>0?this.Fh(0):null}An(){return this.Ns()>0?this.Fh(this.Ih.length-1):null}Ns(){return this.Ih.length}Ni(){return this.Ns()===0}Ir(t){return this.Wh(t,0)!==null}Oh(t){return this.jh(t)}jh(t,e=0){const s=this.Wh(t,e);return s===null?null:Object.assign(Object.assign({},this.$h(s)),{Ys:this.Fh(s)})}Us(){return this.Ih}Hh(t,e,s){if(this.Ni())return null;let n=null;for(const r of s)n=Us(n,this.Uh(t,e,r));return n}tt(t){this.Vh.clear(),this.Eh.clear(),this.Ih=t}Fh(t){return this.Ih[t].Ys}$h(t){return this.Ih[t]}Wh(t,e){const s=this.qh(t);if(s===null&&e!==0)switch(e){case-1:return this.Yh(t);case 1:return this.Xh(t);default:throw new TypeError("Unknown search mode")}return s}Yh(t){let e=this.Zh(t);return e>0&&(e-=1),e!==this.Ih.length&&this.Fh(e)<t?e:null}Xh(t){const e=this.Kh(t);return e!==this.Ih.length&&t<this.Fh(e)?e:null}qh(t){const e=this.Zh(t);return e===this.Ih.length||t<this.Ih[e].Ys?null:e}Zh(t){return bs(this.Ih,t,(e,s)=>e.Ys<s)}Kh(t){return Sl(this.Ih,t,(e,s)=>s.Ys>e)}Gh(t,e,s){let n=null;for(let r=t;r<e;r++){const o=this.Ih[r].Ot[s];Number.isNaN(o)||(n===null?n={Jh:o,Qh:o}:(o<n.Jh&&(n.Jh=o),o>n.Qh&&(n.Qh=o)))}return n}Uh(t,e,s){if(this.Ni())return null;let n=null;const r=V(this.Nh()),o=V(this.An()),h=Math.max(t,r),a=Math.min(e,o),l=Math.ceil(h/Ye)*Ye,u=Math.max(l,Math.floor(a/Ye)*Ye);{const f=this.Zh(h),m=this.Kh(Math.min(a,l,e));n=Us(n,this.Gh(f,m,s))}let c=this.Eh.get(s);c===void 0&&(c=new Map,this.Eh.set(s,c));for(let f=Math.max(l+1,h);f<u;f+=Ye){const m=Math.floor(f/Ye);let d=c.get(m);if(d===void 0){const p=this.Zh(m*Ye),E=this.Kh((m+1)*Ye-1);d=this.Gh(p,E,s),c.set(m,d)}n=Us(n,d)}{const f=this.Zh(u),m=this.Kh(a);n=Us(n,this.Gh(f,m,s))}return n}}function Us(i,t){return i===null?t:t===null?i:{Jh:Math.min(i.Jh,t.Jh),Qh:Math.max(i.Qh,t.Qh)}}class Hr extends af{constructor(t,e,s){super(t),this.Vt=new ff,this.xh=new nf(this),this.tl=[],this.il=new Yc(this),this.nl=null,this.sl=null,this.el=[],this.rl=[],this.hl=null,this.un=e,this.ll=s;const n=new rf(this);this.rn=[n],this.yh=new Rl(n,this,t),s!=="Area"&&s!=="Line"&&s!=="Baseline"||(this.nl=new Xc(this)),this.al(),this.ol()}M(){this.hl!==null&&clearTimeout(this.hl)}Kr(t){return this.un.priceLineColor||t}Ar(t){const e={Lr:!0},s=this.Bt();if(this.Ut().yt().Ni()||s.Ni()||this.Vt.Ni())return e;const n=this.Ut().yt().zs(),r=this.Tt();if(n===null||r===null)return e;let o,h;if(t){const c=this.Vt.zh();if(c===null)return e;o=c,h=c.Ys}else{const c=this.Vt.jh(n.ci(),-1);if(c===null||(o=this.Vt.Oh(c.Ys),o===null))return e;h=c.Ys}const a=o.Ot[3],l=this.Ls().As(h,{Ot:o}),u=s.Dt(a,r.Ot);return{Lr:!1,ut:a,Gt:s.Fi(a,r.Ot),ih:s._l(a),nh:s.ul(a,r.Ot),D:l.ie,yi:u,Ys:h}}Ls(){return this.sl!==null||(this.sl=new cf(this)),this.sl}F(){return this.un}kh(t){const e=t.priceScaleId;e!==void 0&&e!==this.un.priceScaleId&&this.Ut().cl(this,e),ze(this.un,t),t.priceFormat!==void 0&&(this.al(),this.Ut().dl()),this.Ut().fl(this),this.Ut().pl(),this.bn.gt("options")}tt(t,e){this.Vt.tt(t),this.vl(),this.bn.gt("data"),this.cn.gt("data"),this.nl!==null&&(e&&e.ml?this.nl.Rr():t.length===0&&this.nl.Pr());const s=this.Ut().Ke(this);this.Ut().bl(s),this.Ut().fl(this),this.Ut().pl(),this.Ut().Ch()}gl(t){this.el=t,this.vl();const e=this.Ut().Ke(this);this.cn.gt("data"),this.Ut().bl(e),this.Ut().fl(this),this.Ut().pl(),this.Ut().Ch()}wl(){return this.el}Xr(){return this.rl}Ml(t){const e=new lf(this,t);return this.tl.push(e),this.Ut().fl(this),e}Sl(t){const e=this.tl.indexOf(t);e!==-1&&this.tl.splice(e,1),this.Ut().fl(this)}Lh(){return this.ll}Tt(){const t=this.xl();return t===null?null:{Ot:t.Ot[3],yl:t._t}}xl(){const t=this.Ut().yt().zs();if(t===null)return null;const e=t.Ms();return this.Vt.jh(e,1)}Ln(){return this.Vt}Zr(t){const e=this.Vt.Oh(t);return e===null?null:this.ll==="Bar"||this.ll==="Candlestick"?{oe:e.Ot[0],_e:e.Ot[1],ue:e.Ot[2],ce:e.Ot[3]}:e.Ot[3]}kl(t){const e=this.nl;return e!==null&&e.Ct()?(this.hl===null&&e.Br()&&(this.hl=setTimeout(()=>{this.hl=null,this.Ut().Cl()},0)),e.Dr(),[e]):[]}Tn(){const t=[];this.Tl()||t.push(this.il),t.push(this.bn,this.xh,this.cn);const e=this.tl.map(s=>s.Th());return t.push(...e),t}Ji(t){return[this.yh,...this.tl.map(e=>e.Ph())]}Pn(t,e){if(e!==this.Yi&&!this.Tl())return[];const s=[...this.rn];for(const n of this.tl)s.push(n.Rh());return s}Pl(t,e){if(this.un.autoscaleInfoProvider!==void 0){const s=this.un.autoscaleInfoProvider(()=>{const n=this.Rl(t,e);return n===null?null:n.dh()});return _n.fh(s)}return this.Rl(t,e)}Dl(){return this.un.priceFormat.minMove}Bl(){return this.Ol}Dn(){var t;this.bn.gt(),this.cn.gt();for(const e of this.rn)e.gt();for(const e of this.tl)e.gt();this.xh.gt(),this.il.gt(),(t=this.nl)===null||t===void 0||t.gt()}Bt(){return V(super.Bt())}kt(t){if(!((this.ll==="Line"||this.ll==="Area"||this.ll==="Baseline")&&this.un.crosshairMarkerVisible))return null;const e=this.Vt.Oh(t);return e===null?null:{ut:e.Ot[3],lt:this.Al(),At:this.Ll(),Rt:this.Il(),Pt:this.El(t)}}Gr(){return this.un.title}Ct(){return this.un.visible}Tl(){return!En(this.Bt().Vl())}Rl(t,e){if(!fs(t)||!fs(e)||this.Vt.Ni())return null;const s=this.ll==="Line"||this.ll==="Area"||this.ll==="Baseline"||this.ll==="Histogram"?[3]:[2,1],n=this.Vt.Hh(t,e,s);let r=n!==null?new je(n.Jh,n.Qh):null;if(this.Lh()==="Histogram"){const o=this.un.base,h=new je(o,o);r=r!==null?r.Qn(h):h}return new _n(r,this.cn.Yr())}Al(){switch(this.ll){case"Line":case"Area":case"Baseline":return this.un.crosshairMarkerRadius}return 0}Ll(){switch(this.ll){case"Line":case"Area":case"Baseline":{const t=this.un.crosshairMarkerBorderColor;if(t.length!==0)return t}}return null}Il(){switch(this.ll){case"Line":case"Area":case"Baseline":return this.un.crosshairMarkerBorderWidth}return 0}El(t){switch(this.ll){case"Line":case"Area":case"Baseline":{const e=this.un.crosshairMarkerBackgroundColor;if(e.length!==0)return e}}return this.Ls().As(t).ie}al(){switch(this.un.priceFormat.type){case"custom":this.Ol={format:this.un.priceFormat.formatter};break;case"volume":this.Ol=new Ec(this.un.priceFormat.precision);break;case"percent":this.Ol=new yl(this.un.priceFormat.precision);break;default:{const t=Math.pow(10,this.un.priceFormat.precision);this.Ol=new Tn(t,this.un.priceFormat.minMove*t)}}this.Yi!==null&&this.Yi.zl()}vl(){const t=this.Ut().yt();if(t.Ni()||this.Vt.Ns()===0)return void(this.rl=[]);const e=V(this.Vt.Nh());this.rl=this.el.map((s,n)=>{const r=V(t.Nl(s.time,!0)),o=r<e?1:-1;return{time:V(this.Vt.jh(r,o)).Ys,position:s.position,shape:s.shape,color:s.color,id:s.id,internalId:n,text:s.text,size:s.size}})}ol(){switch(this.cn=new sf(this,this.Ut()),this.ll){case"Bar":this.bn=new Dc(this,this.Ut());break;case"Candlestick":this.bn=new Ic(this,this.Ut());break;case"Line":this.bn=new jc(this,this.Ut());break;case"Area":this.bn=new Oc(this,this.Ut());break;case"Baseline":this.bn=new Ac(this,this.Ut());break;case"Histogram":this.bn=new Hc(this,this.Ut());break;default:throw Error("Unknown chart style assigned: "+this.ll)}}}class df{constructor(t){this.un=t}Fl(t,e,s){let n=t;if(this.un.mode===0)return n;const r=s.fn(),o=r.Tt();if(o===null)return n;const h=r.Dt(t,o),a=s.Wl().filter(u=>u instanceof Hr).reduce((u,c)=>{if(s.Ge(c)||!c.Ct())return u;const f=c.Bt(),m=c.Ln();if(f.Ni()||!m.Ir(e))return u;const d=m.Oh(e);if(d===null)return u;const p=is(c.Tt());return u.concat([f.Dt(d.Ot[3],p.Ot)])},[]);if(a.length===0)return n;a.sort((u,c)=>Math.abs(u-h)-Math.abs(c-h));const l=a[0];return n=r.pn(l,o),n}}class mf extends ai{constructor(){super(...arguments),this.Vt=null}tt(t){this.Vt=t}Z({context:t,bitmapSize:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.Vt===null)return;const r=Math.max(1,Math.floor(s));t.lineWidth=r,function(o,h){o.save(),o.lineWidth%2&&o.translate(.5,.5),h(),o.restore()}(t,()=>{const o=V(this.Vt);if(o.jl){t.strokeStyle=o.$l,oi(t,o.Hl),t.beginPath();for(const h of o.Ul){const a=Math.round(h.ql*s);t.moveTo(a,-r),t.lineTo(a,e.height+r)}t.stroke()}if(o.Yl){t.strokeStyle=o.Xl,oi(t,o.Zl),t.beginPath();for(const h of o.Kl){const a=Math.round(h.ql*n);t.moveTo(-r,a),t.lineTo(e.width+r,a)}t.stroke()}})}}class pf{constructor(t){this.jt=new mf,this.vt=!0,this.tn=t}gt(){this.vt=!0}Mt(){if(this.vt){const t=this.tn.Ut().F().grid,e={Yl:t.horzLines.visible,jl:t.vertLines.visible,Xl:t.horzLines.color,$l:t.vertLines.color,Zl:t.horzLines.style,Hl:t.vertLines.style,Kl:this.tn.fn().Gl(),Ul:this.tn.Ut().yt().Gl()||[]};this.jt.tt(e),this.vt=!1}return this.jt}}class gf{constructor(t){this.bn=new pf(t)}Th(){return this.bn}}const Wn={Jl:4,Ql:1e-4};function yi(i,t){const e=100*(i-t)/t;return t<0?-e:e}function vf(i,t){const e=yi(i.lh(),t),s=yi(i.ah(),t);return new je(e,s)}function os(i,t){const e=100*(i-t)/t+100;return t<0?-e:e}function bf(i,t){const e=os(i.lh(),t),s=os(i.ah(),t);return new je(e,s)}function wn(i,t){const e=Math.abs(i);if(e<1e-15)return 0;const s=kl(e+t.Ql)+t.Jl;return i<0?-s:s}function hs(i,t){const e=Math.abs(i);if(e<1e-15)return 0;const s=Math.pow(10,e-t.Jl)-t.Ql;return i<0?-s:s}function $i(i,t){if(i===null)return null;const e=wn(i.lh(),t),s=wn(i.ah(),t);return new je(e,s)}function Hs(i,t){if(i===null)return null;const e=hs(i.lh(),t),s=hs(i.ah(),t);return new je(e,s)}function Gn(i){if(i===null)return Wn;const t=Math.abs(i.ah()-i.lh());if(t>=1||t<1e-15)return Wn;const e=Math.ceil(Math.abs(Math.log10(t))),s=Wn.Jl+e;return{Jl:s,Ql:1/Math.pow(10,s)}}class qn{constructor(t,e){if(this.ta=t,this.ia=e,function(s){if(s<0)return!1;for(let n=s;n>1;n/=10)if(n%10!=0)return!1;return!0}(this.ta))this.na=[2,2.5,2];else{this.na=[];for(let s=this.ta;s!==1;){if(s%2==0)this.na.push(2),s/=2;else{if(s%5!=0)throw new Error("unexpected base");this.na.push(2,2.5),s/=5}if(this.na.length>100)throw new Error("something wrong with base")}}}sa(t,e,s){const n=this.ta===0?0:1/this.ta;let r=Math.pow(10,Math.max(0,Math.ceil(kl(t-e)))),o=0,h=this.ia[0];for(;;){const c=Is(r,n,1e-14)&&r>n+1e-14,f=Is(r,s*h,1e-14),m=Is(r,1,1e-14);if(!(c&&f&&m))break;r/=h,h=this.ia[++o%this.ia.length]}if(r<=n+1e-14&&(r=n),r=Math.max(1,r),this.na.length>0&&(a=r,l=1,u=1e-14,Math.abs(a-l)<u))for(o=0,h=this.na[0];Is(r,s*h,1e-14)&&r>n+1e-14;)r/=h,h=this.na[++o%this.na.length];var a,l,u;return r}}class Go{constructor(t,e,s,n){this.ea=[],this.Vi=t,this.ta=e,this.ra=s,this.ha=n}sa(t,e){if(t<e)throw new Error("high < low");const s=this.Vi.It(),n=(t-e)*this.la()/s,r=new qn(this.ta,[2,2.5,2]),o=new qn(this.ta,[2,2,2.5]),h=new qn(this.ta,[2.5,2,2]),a=[];return a.push(r.sa(t,e,n),o.sa(t,e,n),h.sa(t,e,n)),function(l){if(l.length<1)throw Error("array is empty");let u=l[0];for(let c=1;c<l.length;++c)l[c]<u&&(u=l[c]);return u}(a)}aa(){const t=this.Vi,e=t.Tt();if(e===null)return void(this.ea=[]);const s=t.It(),n=this.ra(s-1,e),r=this.ra(0,e),o=this.Vi.F().entireTextOnly?this.oa()/2:0,h=o,a=s-1-o,l=Math.max(n,r),u=Math.min(n,r);if(l===u)return void(this.ea=[]);let c=this.sa(l,u),f=l%c;f+=f<0?c:0;const m=l>=u?1:-1;let d=null,p=0;for(let E=l-f;E>u;E-=c){const C=this.ha(E,e,!0);d!==null&&Math.abs(C-d)<this.la()||C<h||C>a||(p<this.ea.length?(this.ea[p].ql=C,this.ea[p]._a=t.ua(E)):this.ea.push({ql:C,_a:t.ua(E)}),p++,d=C,t.ca()&&(c=this.sa(E*m,u)))}this.ea.length=p}Gl(){return this.ea}oa(){return this.Vi.T()}la(){return Math.ceil(2.5*this.oa())}}function Ol(i){return i.slice().sort((t,e)=>V(t.Zi())-V(e.Zi()))}var pr;(function(i){i[i.Normal=0]="Normal",i[i.Logarithmic=1]="Logarithmic",i[i.Percentage=2]="Percentage",i[i.IndexedTo100=3]="IndexedTo100"})(pr||(pr={}));const qo=new yl,Yo=new Tn(100,1);class yf{constructor(t,e,s,n){this.da=0,this.fa=null,this.ph=null,this.pa=null,this.va={ma:!1,ba:null},this.ga=0,this.wa=0,this.Ma=new Ht,this.Sa=new Ht,this.xa=[],this.ya=null,this.ka=null,this.Ca=null,this.Ta=null,this.Ol=Yo,this.Pa=Gn(null),this.Ra=t,this.un=e,this.Da=s,this.Ba=n,this.Oa=new Go(this,100,this.Aa.bind(this),this.La.bind(this))}Vl(){return this.Ra}F(){return this.un}kh(t){if(ze(this.un,t),this.zl(),t.mode!==void 0&&this.Ia({lr:t.mode}),t.scaleMargins!==void 0){const e=ge(t.scaleMargins.top),s=ge(t.scaleMargins.bottom);if(e<0||e>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${e}`);if(s<0||s>1||e+s>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${s}`);if(e+s>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${e+s}`);this.Ea(),this.ka=null}}Va(){return this.un.autoScale}ca(){return this.un.mode===1}th(){return this.un.mode===2}za(){return this.un.mode===3}lr(){return{Fn:this.un.autoScale,Na:this.un.invertScale,lr:this.un.mode}}Ia(t){const e=this.lr();let s=null;t.Fn!==void 0&&(this.un.autoScale=t.Fn),t.lr!==void 0&&(this.un.mode=t.lr,t.lr!==2&&t.lr!==3||(this.un.autoScale=!0),this.va.ma=!1),e.lr===1&&t.lr!==e.lr&&(function(r,o){if(r===null)return!1;const h=hs(r.lh(),o),a=hs(r.ah(),o);return isFinite(h)&&isFinite(a)}(this.ph,this.Pa)?(s=Hs(this.ph,this.Pa),s!==null&&this.Fa(s)):this.un.autoScale=!0),t.lr===1&&t.lr!==e.lr&&(s=$i(this.ph,this.Pa),s!==null&&this.Fa(s));const n=e.lr!==this.un.mode;n&&(e.lr===2||this.th())&&this.zl(),n&&(e.lr===3||this.za())&&this.zl(),t.Na!==void 0&&e.Na!==t.Na&&(this.un.invertScale=t.Na,this.Wa()),this.Sa.m(e,this.lr())}ja(){return this.Sa}T(){return this.Da.fontSize}It(){return this.da}$a(t){this.da!==t&&(this.da=t,this.Ea(),this.ka=null)}Ha(){if(this.fa)return this.fa;const t=this.It()-this.Ua()-this.qa();return this.fa=t,t}bh(){return this.Ya(),this.ph}Fa(t,e){const s=this.ph;(e||s===null&&t!==null||s!==null&&!s.rh(t))&&(this.ka=null,this.ph=t)}Ni(){return this.Ya(),this.da===0||!this.ph||this.ph.Ni()}Xa(t){return this.Na()?t:this.It()-1-t}Dt(t,e){return this.th()?t=yi(t,e):this.za()&&(t=os(t,e)),this.La(t,e)}$s(t,e,s){this.Ya();const n=this.qa(),r=V(this.bh()),o=r.lh(),h=r.ah(),a=this.Ha()-1,l=this.Na(),u=a/(h-o),c=s===void 0?0:s.from,f=s===void 0?t.length:s.to,m=this.Za();for(let d=c;d<f;d++){const p=t[d],E=p.ut;if(isNaN(E))continue;let C=E;m!==null&&(C=m(p.ut,e));const k=n+u*(C-o),M=l?k:this.da-1-k;p.et=M}}le(t,e,s){this.Ya();const n=this.qa(),r=V(this.bh()),o=r.lh(),h=r.ah(),a=this.Ha()-1,l=this.Na(),u=a/(h-o),c=s===void 0?0:s.from,f=s===void 0?t.length:s.to,m=this.Za();for(let d=c;d<f;d++){const p=t[d];let E=p.oe,C=p._e,k=p.ue,M=p.ce;m!==null&&(E=m(p.oe,e),C=m(p._e,e),k=m(p.ue,e),M=m(p.ce,e));let L=n+u*(E-o),F=l?L:this.da-1-L;p.re=F,L=n+u*(C-o),F=l?L:this.da-1-L,p.ne=F,L=n+u*(k-o),F=l?L:this.da-1-L,p.se=F,L=n+u*(M-o),F=l?L:this.da-1-L,p.he=F}}pn(t,e){const s=this.Aa(t,e);return this.Ka(s,e)}Ka(t,e){let s=t;return this.th()?s=function(n,r){return r<0&&(n=-n),n/100*r+r}(s,e):this.za()&&(s=function(n,r){return n-=100,r<0&&(n=-n),n/100*r+r}(s,e)),s}Wl(){return this.xa}Ga(){if(this.ya)return this.ya;let t=[];for(let e=0;e<this.xa.length;e++){const s=this.xa[e];s.Zi()===null&&s.Ki(e+1),t.push(s)}return t=Ol(t),this.ya=t,this.ya}Ja(t){this.xa.indexOf(t)===-1&&(this.xa.push(t),this.zl(),this.Qa())}io(t){const e=this.xa.indexOf(t);if(e===-1)throw new Error("source is not attached to scale");this.xa.splice(e,1),this.xa.length===0&&(this.Ia({Fn:!0}),this.Fa(null)),this.zl(),this.Qa()}Tt(){let t=null;for(const e of this.xa){const s=e.Tt();s!==null&&(t===null||s.yl<t.yl)&&(t=s)}return t===null?null:t.Ot}Na(){return this.un.invertScale}Gl(){const t=this.Tt()===null;if(this.ka!==null&&(t||this.ka.no===t))return this.ka.Gl;this.Oa.aa();const e=this.Oa.Gl();return this.ka={Gl:e,no:t},this.Ma.m(),e}so(){return this.Ma}eo(t){this.th()||this.za()||this.Ca===null&&this.pa===null&&(this.Ni()||(this.Ca=this.da-t,this.pa=V(this.bh()).hh()))}ro(t){if(this.th()||this.za()||this.Ca===null)return;this.Ia({Fn:!1}),(t=this.da-t)<0&&(t=0);let e=(this.Ca+.2*(this.da-1))/(t+.2*(this.da-1));const s=V(this.pa).hh();e=Math.max(e,.1),s._h(e),this.Fa(s)}ho(){this.th()||this.za()||(this.Ca=null,this.pa=null)}lo(t){this.Va()||this.Ta===null&&this.pa===null&&(this.Ni()||(this.Ta=t,this.pa=V(this.bh()).hh()))}ao(t){if(this.Va()||this.Ta===null)return;const e=V(this.bh()).oh()/(this.Ha()-1);let s=t-this.Ta;this.Na()&&(s*=-1);const n=s*e,r=V(this.pa).hh();r.uh(n),this.Fa(r,!0),this.ka=null}oo(){this.Va()||this.Ta!==null&&(this.Ta=null,this.pa=null)}Bl(){return this.Ol||this.zl(),this.Ol}Fi(t,e){switch(this.un.mode){case 2:return this.Bl().format(yi(t,e));case 3:return this.Bl().format(os(t,e));default:return this.Sh(t)}}ua(t){switch(this.un.mode){case 2:case 3:return this.Bl().format(t);default:return this.Sh(t)}}_l(t){return this.Sh(t,V(this._o()).Bl())}ul(t,e){return t=yi(t,e),qo.format(t)}uo(){return this.xa}co(t){this.va={ba:t,ma:!1}}Dn(){this.xa.forEach(t=>t.Dn())}zl(){this.ka=null;const t=this._o();let e=100;t!==null&&(e=Math.round(1/t.Dl())),this.Ol=Yo,this.th()?(this.Ol=qo,e=100):this.za()?(this.Ol=new Tn(100,1),e=100):t!==null&&(this.Ol=t.Bl()),this.Oa=new Go(this,e,this.Aa.bind(this),this.La.bind(this)),this.Oa.aa()}Qa(){this.ya=null}_o(){return this.xa[0]||null}Ua(){return this.Na()?this.un.scaleMargins.bottom*this.It()+this.wa:this.un.scaleMargins.top*this.It()+this.ga}qa(){return this.Na()?this.un.scaleMargins.top*this.It()+this.ga:this.un.scaleMargins.bottom*this.It()+this.wa}Ya(){this.va.ma||(this.va.ma=!0,this.do())}Ea(){this.fa=null}La(t,e){if(this.Ya(),this.Ni())return 0;t=this.ca()&&t?wn(t,this.Pa):t;const s=V(this.bh()),n=this.qa()+(this.Ha()-1)*(t-s.lh())/s.oh();return this.Xa(n)}Aa(t,e){if(this.Ya(),this.Ni())return 0;const s=this.Xa(t),n=V(this.bh()),r=n.lh()+n.oh()*((s-this.qa())/(this.Ha()-1));return this.ca()?hs(r,this.Pa):r}Wa(){this.ka=null,this.Oa.aa()}do(){const t=this.va.ba;if(t===null)return;let e=null;const s=this.uo();let n=0,r=0;for(const a of s){if(!a.Ct())continue;const l=a.Tt();if(l===null)continue;const u=a.Pl(t.Ms(),t.ci());let c=u&&u.bh();if(c!==null){switch(this.un.mode){case 1:c=$i(c,this.Pa);break;case 2:c=vf(c,l.Ot);break;case 3:c=bf(c,l.Ot)}if(e=e===null?c:e.Qn(V(c)),u!==null){const f=u.gh();f!==null&&(n=Math.max(n,f.above),r=Math.max(n,f.below))}}}if(n===this.ga&&r===this.wa||(this.ga=n,this.wa=r,this.ka=null,this.Ea()),e!==null){if(e.lh()===e.ah()){const a=this._o(),l=5*(a===null||this.th()||this.za()?1:a.Dl());this.ca()&&(e=Hs(e,this.Pa)),e=new je(e.lh()-l,e.ah()+l),this.ca()&&(e=$i(e,this.Pa))}if(this.ca()){const a=Hs(e,this.Pa),l=Gn(a);if(o=l,h=this.Pa,o.Jl!==h.Jl||o.Ql!==h.Ql){const u=this.pa!==null?Hs(this.pa,this.Pa):null;this.Pa=l,e=$i(a,l),u!==null&&(this.pa=$i(u,l))}}this.Fa(e)}else this.ph===null&&(this.Fa(new je(-.5,.5)),this.Pa=Gn(null));var o,h;this.va.ma=!0}Za(){return this.th()?yi:this.za()?os:this.ca()?t=>wn(t,this.Pa):null}Sh(t,e){return this.Ba.priceFormatter===void 0?(e===void 0&&(e=this.Bl()),e.format(t)):this.Ba.priceFormatter(t)}}class _f{constructor(t,e){this.xa=[],this.fo=new Map,this.da=0,this.po=0,this.vo=1e3,this.ya=null,this.mo=new Ht,this.bo=t,this.Hi=e,this.wo=new gf(this);const s=e.F();this.Mo=this.So("left",s.leftPriceScale),this.xo=this.So("right",s.rightPriceScale),this.Mo.ja().l(this.yo.bind(this,this.Mo),this),this.xo.ja().l(this.yo.bind(this,this.xo),this),this.ko(s)}ko(t){if(t.leftPriceScale&&this.Mo.kh(t.leftPriceScale),t.rightPriceScale&&this.xo.kh(t.rightPriceScale),t.localization&&(this.Mo.zl(),this.xo.zl()),t.overlayPriceScales){const e=Array.from(this.fo.values());for(const s of e){const n=V(s[0].Bt());n.kh(t.overlayPriceScales),t.localization&&n.zl()}}}Co(t){switch(t){case"left":return this.Mo;case"right":return this.xo}return this.fo.has(t)?ge(this.fo.get(t))[0].Bt():null}M(){this.Ut().To().v(this),this.Mo.ja().v(this),this.xo.ja().v(this),this.xa.forEach(t=>{t.M&&t.M()}),this.mo.m()}Po(){return this.vo}Ro(t){this.vo=t}Ut(){return this.Hi}$i(){return this.po}It(){return this.da}Do(t){this.po=t,this.Bo()}$a(t){this.da=t,this.Mo.$a(t),this.xo.$a(t),this.xa.forEach(e=>{if(this.Ge(e)){const s=e.Bt();s!==null&&s.$a(t)}}),this.Bo()}Wl(){return this.xa}Ge(t){const e=t.Bt();return e===null||this.Mo!==e&&this.xo!==e}Ja(t,e,s){const n=s!==void 0?s:this.Ao().Oo+1;this.Lo(t,e,n)}io(t){const e=this.xa.indexOf(t);li(e!==-1,"removeDataSource: invalid data source"),this.xa.splice(e,1);const s=V(t.Bt()).Vl();if(this.fo.has(s)){const r=ge(this.fo.get(s)),o=r.indexOf(t);o!==-1&&(r.splice(o,1),r.length===0&&this.fo.delete(s))}const n=t.Bt();n&&n.Wl().indexOf(t)>=0&&n.io(t),n!==null&&(n.Qa(),this.Io(n)),this.ya=null}Qe(t){return t===this.Mo?"left":t===this.xo?"right":"overlay"}Eo(){return this.Mo}Vo(){return this.xo}zo(t,e){t.eo(e)}No(t,e){t.ro(e),this.Bo()}Fo(t){t.ho()}Wo(t,e){t.lo(e)}jo(t,e){t.ao(e),this.Bo()}$o(t){t.oo()}Bo(){this.xa.forEach(t=>{t.Dn()})}fn(){let t=null;return this.Hi.F().rightPriceScale.visible&&this.xo.Wl().length!==0?t=this.xo:this.Hi.F().leftPriceScale.visible&&this.Mo.Wl().length!==0?t=this.Mo:this.xa.length!==0&&(t=this.xa[0].Bt()),t===null&&(t=this.xo),t}Je(){let t=null;return this.Hi.F().rightPriceScale.visible?t=this.xo:this.Hi.F().leftPriceScale.visible&&(t=this.Mo),t}Io(t){t!==null&&t.Va()&&this.Ho(t)}Uo(t){const e=this.bo.zs();t.Ia({Fn:!0}),e!==null&&t.co(e),this.Bo()}qo(){this.Ho(this.Mo),this.Ho(this.xo)}Yo(){this.Io(this.Mo),this.Io(this.xo),this.xa.forEach(t=>{this.Ge(t)&&this.Io(t.Bt())}),this.Bo(),this.Hi.Ch()}Ga(){return this.ya===null&&(this.ya=Ol(this.xa)),this.ya}Xo(){return this.mo}Zo(){return this.wo}Ho(t){const e=t.uo();if(e&&e.length>0&&!this.bo.Ni()){const s=this.bo.zs();s!==null&&t.co(s)}t.Dn()}Ao(){const t=this.Ga();if(t.length===0)return{Ko:0,Oo:0};let e=0,s=0;for(let n=0;n<t.length;n++){const r=t[n].Zi();r!==null&&(r<e&&(e=r),r>s&&(s=r))}return{Ko:e,Oo:s}}Lo(t,e,s){let n=this.Co(e);if(n===null&&(n=this.So(e,this.Hi.F().overlayPriceScales)),this.xa.push(t),!En(e)){const r=this.fo.get(e)||[];r.push(t),this.fo.set(e,r)}n.Ja(t),t.Gi(n),t.Ki(s),this.Io(n),this.ya=null}yo(t,e,s){e.lr!==s.lr&&this.Ho(t)}So(t,e){const s=Object.assign({visible:!0,autoScale:!0},Ae(e)),n=new yf(t,s,this.Hi.F().layout,this.Hi.F().localization);return n.$a(this.It()),n}}const Ko=i=>i.getUTCFullYear();function wf(i,t,e){return t.replace(/yyyy/g,(s=>Be(Ko(s),4))(i)).replace(/yy/g,(s=>Be(Ko(s)%100,2))(i)).replace(/MMMM/g,((s,n)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(n,{month:"long"}))(i,e)).replace(/MMM/g,((s,n)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(n,{month:"short"}))(i,e)).replace(/MM/g,(s=>Be((n=>n.getUTCMonth()+1)(s),2))(i)).replace(/dd/g,(s=>Be((n=>n.getUTCDate())(s),2))(i))}class Nl{constructor(t="yyyy-MM-dd",e="default"){this.Go=t,this.Jo=e}Qo(t){return wf(t,this.Go,this.Jo)}}class xf{constructor(t){this.t_=t||"%h:%m:%s"}Qo(t){return this.t_.replace("%h",Be(t.getUTCHours(),2)).replace("%m",Be(t.getUTCMinutes(),2)).replace("%s",Be(t.getUTCSeconds(),2))}}const Mf={i_:"yyyy-MM-dd",n_:"%h:%m:%s",s_:" ",e_:"default"};class Sf{constructor(t={}){const e=Object.assign(Object.assign({},Mf),t);this.r_=new Nl(e.i_,e.e_),this.h_=new xf(e.n_),this.l_=e.s_}Qo(t){return`${this.r_.Qo(t)}${this.l_}${this.h_.Qo(t)}`}}class Cf{constructor(t,e=50){this.Le=0,this.Ie=1,this.Ee=1,this.ze=new Map,this.Ve=new Map,this.a_=t,this.Ne=e}Qo(t){const e=t._t,s=e.o_===void 0?new Date(1e3*e.__).getTime():new Date(Date.UTC(e.o_.year,e.o_.month-1,e.o_.day)).getTime(),n=this.ze.get(s);if(n!==void 0)return n.u_;if(this.Le===this.Ne){const o=this.Ve.get(this.Ee);this.Ve.delete(this.Ee),this.ze.delete(ge(o)),this.Ee++,this.Le--}const r=this.a_(t);return this.ze.set(s,{u_:r,$e:this.Ie}),this.Ve.set(this.Ie,s),this.Le++,this.Ie++,r}}class ls{constructor(t,e){li(t<=e,"right should be >= left"),this.c_=t,this.d_=e}Ms(){return this.c_}ci(){return this.d_}f_(){return this.d_-this.c_+1}Ir(t){return this.c_<=t&&t<=this.d_}rh(t){return this.c_===t.Ms()&&this.d_===t.ci()}}function Jo(i,t){return i===null||t===null?i===t:i.rh(t)}class Ef{constructor(){this.p_=new Map,this.ze=null}v_(t,e){this.m_(e),this.ze=null;for(let s=e;s<t.length;++s){const n=t[s];let r=this.p_.get(n.b_);r===void 0&&(r=[],this.p_.set(n.b_,r)),r.push({Ys:s,_t:n._t,g_:n.b_,w_:n.w_})}}M_(t,e){const s=Math.ceil(e/t);return this.ze!==null&&this.ze.S_===s||(this.ze={Gl:this.x_(s),S_:s}),this.ze.Gl}m_(t){if(t===0)return void this.p_.clear();const e=[];this.p_.forEach((s,n)=>{t<=s[0].Ys?e.push(n):s.splice(bs(s,t,r=>r.Ys<t),1/0)});for(const s of e)this.p_.delete(s)}x_(t){let e=[];for(const s of Array.from(this.p_.keys()).sort((n,r)=>r-n)){if(!this.p_.get(s))continue;const n=e;e=[];const r=n.length;let o=0;const h=ge(this.p_.get(s)),a=h.length;let l=1/0,u=-1/0;for(let c=0;c<a;c++){const f=h[c],m=f.Ys;for(;o<r;){const d=n[o],p=d.Ys;if(!(p<m)){l=p;break}o++,e.push(d),u=p,l=1/0}l-m>=t&&m-u>=t&&(e.push(f),u=m)}for(;o<r;o++)e.push(n[o])}return e}}class xi{constructor(t){this.y_=t}k_(){return this.y_===null?null:new ls(Math.floor(this.y_.Ms()),Math.ceil(this.y_.ci()))}C_(){return this.y_}static T_(){return new xi(null)}}var Xo,Qo,Zo,$o,gr;(function(i){i[i.Year=0]="Year",i[i.Month=1]="Month",i[i.DayOfMonth=2]="DayOfMonth",i[i.Time=3]="Time",i[i.TimeWithSeconds=4]="TimeWithSeconds"})(Xo||(Xo={}));class Tf{constructor(t,e,s){this.po=0,this.P_=null,this.R_=[],this.Ta=null,this.Ca=null,this.D_=new Ef,this.B_=new Map,this.O_=xi.T_(),this.A_=!0,this.L_=new Ht,this.I_=new Ht,this.E_=new Ht,this.V_=null,this.z_=null,this.N_=[],this.un=e,this.Ba=s,this.F_=e.rightOffset,this.W_=e.barSpacing,this.Hi=t,this.j_()}F(){return this.un}H_(t){ze(this.Ba,t),this.U_(),this.j_()}kh(t,e){var s;ze(this.un,t),this.un.fixLeftEdge&&this.q_(),this.un.fixRightEdge&&this.Y_(),t.barSpacing!==void 0&&this.Hi.Kn(t.barSpacing),t.rightOffset!==void 0&&this.Hi.Gn(t.rightOffset),t.minBarSpacing!==void 0&&this.Hi.Kn((s=t.barSpacing)!==null&&s!==void 0?s:this.W_),this.U_(),this.j_(),this.E_.m()}vn(t){var e,s;return(s=(e=this.R_[t])===null||e===void 0?void 0:e._t)!==null&&s!==void 0?s:null}Ui(t){var e;return(e=this.R_[t])!==null&&e!==void 0?e:null}Nl(t,e){if(this.R_.length<1)return null;if(t.__>this.R_[this.R_.length-1]._t.__)return e?this.R_.length-1:null;const s=bs(this.R_,t.__,(n,r)=>n._t.__<r);return t.__<this.R_[s]._t.__?e?s:null:s}Ni(){return this.po===0||this.R_.length===0||this.P_===null}zs(){return this.X_(),this.O_.k_()}Z_(){return this.X_(),this.O_.C_()}K_(){const t=this.zs();if(t===null)return null;const e={from:t.Ms(),to:t.ci()};return this.G_(e)}G_(t){const e=Math.round(t.from),s=Math.round(t.to),n=V(this.J_()),r=V(this.Q_());return{from:V(this.vn(Math.max(n,e))),to:V(this.vn(Math.min(r,s)))}}tu(t){return{from:V(this.Nl(t.from,!0)),to:V(this.Nl(t.to,!0))}}$i(){return this.po}Do(t){if(!isFinite(t)||t<=0||this.po===t)return;const e=this.Z_(),s=this.po;if(this.po=t,this.A_=!0,this.un.lockVisibleTimeRangeOnResize&&s!==0){const n=this.W_*t/s;this.W_=n}if(this.un.fixLeftEdge&&e!==null&&e.Ms()<=0){const n=s-t;this.F_-=Math.round(n/this.W_)+1,this.A_=!0}this.iu(),this.nu()}Et(t){if(this.Ni()||!fs(t))return 0;const e=this.su()+this.F_-t;return this.po-(e+.5)*this.W_-1}js(t,e){const s=this.su(),n=e===void 0?0:e.from,r=e===void 0?t.length:e.to;for(let o=n;o<r;o++){const h=t[o]._t,a=s+this.F_-h,l=this.po-(a+.5)*this.W_-1;t[o].st=l}}eu(t){return Math.ceil(this.ru(t))}Gn(t){this.A_=!0,this.F_=t,this.nu(),this.Hi.hu(),this.Hi.Ch()}Ks(){return this.W_}Kn(t){this.lu(t),this.nu(),this.Hi.hu(),this.Hi.Ch()}au(){return this.F_}Gl(){if(this.Ni())return null;if(this.z_!==null)return this.z_;const t=this.W_,e=5*(this.Hi.F().layout.fontSize+4),s=Math.round(e/t),n=V(this.zs()),r=Math.max(n.Ms(),n.Ms()-s),o=Math.max(n.ci(),n.ci()-s),h=this.D_.M_(t,e),a=this.J_()+s,l=this.Q_()-s,u=this.ou(),c=this.un.fixLeftEdge||u,f=this.un.fixRightEdge||u;let m=0;for(const d of h){if(!(r<=d.Ys&&d.Ys<=o))continue;let p;m<this.N_.length?(p=this.N_[m],p.ql=this.Et(d.Ys),p._a=this._u(d),p.g_=d.g_):(p={uu:!1,ql:this.Et(d.Ys),_a:this._u(d),g_:d.g_},this.N_.push(p)),this.W_>e/2&&!u?p.uu=!1:p.uu=c&&d.Ys<=a||f&&d.Ys>=l,m++}return this.N_.length=m,this.z_=this.N_,this.N_}cu(){this.A_=!0,this.Kn(this.un.barSpacing),this.Gn(this.un.rightOffset)}du(t){this.A_=!0,this.P_=t,this.nu(),this.q_()}fu(t,e){const s=this.ru(t),n=this.Ks(),r=n+e*(n/10);this.Kn(r),this.un.rightBarStaysOnScroll||this.Gn(this.au()+(s-this.ru(t)))}eo(t){this.Ta&&this.oo(),this.Ca===null&&this.V_===null&&(this.Ni()||(this.Ca=t,this.pu()))}ro(t){if(this.V_===null)return;const e=yn(this.po-t,0,this.po),s=yn(this.po-V(this.Ca),0,this.po);e!==0&&s!==0&&this.Kn(this.V_.Ks*e/s)}ho(){this.Ca!==null&&(this.Ca=null,this.vu())}lo(t){this.Ta===null&&this.V_===null&&(this.Ni()||(this.Ta=t,this.pu()))}ao(t){if(this.Ta===null)return;const e=(this.Ta-t)/this.Ks();this.F_=V(this.V_).au+e,this.A_=!0,this.nu()}oo(){this.Ta!==null&&(this.Ta=null,this.vu())}mu(){this.bu(this.un.rightOffset)}bu(t,e=400){if(!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(e)||e<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const s=this.F_,n=performance.now();this.Hi.Yn({gu:r=>(r-n)/e>=1,wu:r=>{const o=(r-n)/e;return o>=1?t:s+(t-s)*o}})}gt(t,e){this.A_=!0,this.R_=t,this.D_.v_(t,e),this.nu()}Mu(){return this.L_}Su(){return this.I_}xu(){return this.E_}su(){return this.P_||0}yu(t){const e=t.f_();this.lu(this.po/e),this.F_=t.ci()-this.su(),this.nu(),this.A_=!0,this.Hi.hu(),this.Hi.Ch()}ku(){const t=this.J_(),e=this.Q_();t!==null&&e!==null&&this.yu(new ls(t,e+this.un.rightOffset))}Cu(t){const e=new ls(t.from,t.to);this.yu(e)}qi(t){return this.Ba.timeFormatter!==void 0?this.Ba.timeFormatter(t.w_):this.Tu.Qo(new Date(1e3*t._t.__))}ou(){const{handleScroll:t,handleScale:e}=this.Hi.F();return!(t.horzTouchDrag||t.mouseWheel||t.pressedMouseMove||t.vertTouchDrag||e.axisDoubleClickReset.time||e.axisPressedMouseMove.time||e.mouseWheel||e.pinch)}J_(){return this.R_.length===0?null:0}Q_(){return this.R_.length===0?null:this.R_.length-1}Pu(t){return(this.po-1-t)/this.W_}ru(t){const e=this.Pu(t),s=this.su()+this.F_-e;return Math.round(1e6*s)/1e6}lu(t){const e=this.W_;this.W_=t,this.iu(),e!==this.W_&&(this.A_=!0,this.Ru())}X_(){if(!this.A_)return;if(this.A_=!1,this.Ni())return void this.Du(xi.T_());const t=this.su(),e=this.po/this.W_,s=this.F_+t,n=new ls(s-e+1,s);this.Du(new xi(n))}iu(){const t=this.Bu();if(this.W_<t&&(this.W_=t,this.A_=!0),this.po!==0){const e=.5*this.po;this.W_>e&&(this.W_=e,this.A_=!0)}}Bu(){return this.un.fixLeftEdge&&this.un.fixRightEdge&&this.R_.length!==0?this.po/this.R_.length:this.un.minBarSpacing}nu(){const t=this.Ou();this.F_>t&&(this.F_=t,this.A_=!0);const e=this.Au();e!==null&&this.F_<e&&(this.F_=e,this.A_=!0)}Au(){const t=this.J_(),e=this.P_;return t===null||e===null?null:t-e-1+(this.un.fixLeftEdge?this.po/this.W_:Math.min(2,this.R_.length))}Ou(){return this.un.fixRightEdge?0:this.po/this.W_-Math.min(2,this.R_.length)}pu(){this.V_={Ks:this.Ks(),au:this.au()}}vu(){this.V_=null}_u(t){let e=this.B_.get(t.g_);return e===void 0&&(e=new Cf(s=>this.Lu(s)),this.B_.set(t.g_,e)),e.Qo(t)}Lu(t){const e=function(s,n,r){switch(s){case 0:case 10:return n?r?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return n?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(t.g_,this.un.timeVisible,this.un.secondsVisible);if(this.un.tickMarkFormatter!==void 0){const s=this.un.tickMarkFormatter(t.w_,e,this.Ba.locale);if(s!==null)return s}return function(s,n,r){const o={};switch(n){case 0:o.year="numeric";break;case 1:o.month="short";break;case 2:o.day="numeric";break;case 3:o.hour12=!1,o.hour="2-digit",o.minute="2-digit";break;case 4:o.hour12=!1,o.hour="2-digit",o.minute="2-digit",o.second="2-digit"}const h=s.o_===void 0?new Date(1e3*s.__):new Date(Date.UTC(s.o_.year,s.o_.month-1,s.o_.day));return new Date(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate(),h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()).toLocaleString(r,o)}(t._t,e,this.Ba.locale)}Du(t){const e=this.O_;this.O_=t,Jo(e.k_(),this.O_.k_())||this.L_.m(),Jo(e.C_(),this.O_.C_())||this.I_.m(),this.Ru()}Ru(){this.z_=null}U_(){this.Ru(),this.B_.clear()}j_(){const t=this.Ba.dateFormat;this.un.timeVisible?this.Tu=new Sf({i_:t,n_:this.un.secondsVisible?"%h:%m:%s":"%h:%m",s_:"   ",e_:this.Ba.locale}):this.Tu=new Nl(t,this.Ba.locale)}q_(){if(!this.un.fixLeftEdge)return;const t=this.J_();if(t===null)return;const e=this.zs();if(e===null)return;const s=e.Ms()-t;if(s<0){const n=this.F_-s-1;this.Gn(n)}this.iu()}Y_(){this.nu(),this.iu()}}class kf extends vs{constructor(t){super(),this.Iu=new Map,this.Vt=t}Z(t){}G(t){if(!this.Vt.Ct)return;const{context:e,mediaSize:s}=t;let n=0;for(const o of this.Vt.Eu){if(o.Gt.length===0)continue;e.font=o.P;const h=this.Vu(e,o.Gt);h>s.width?o.fu=s.width/h:o.fu=1,n+=o.zu*o.fu}let r=0;switch(this.Vt.Nu){case"top":r=0;break;case"center":r=Math.max((s.height-n)/2,0);break;case"bottom":r=Math.max(s.height-n,0)}e.fillStyle=this.Vt.D;for(const o of this.Vt.Eu){e.save();let h=0;switch(this.Vt.Fu){case"left":e.textAlign="left",h=o.zu/2;break;case"center":e.textAlign="center",h=s.width/2;break;case"right":e.textAlign="right",h=s.width-1-o.zu/2}e.translate(h,r),e.textBaseline="top",e.font=o.P,e.scale(o.fu,o.fu),e.fillText(o.Gt,0,o.Wu),e.restore(),r+=o.zu*o.fu}}Vu(t,e){const s=this.ju(t.font);let n=s.get(e);return n===void 0&&(n=t.measureText(e).width,s.set(e,n)),n}ju(t){let e=this.Iu.get(t);return e===void 0&&(e=new Map,this.Iu.set(t,e)),e}}class Pf{constructor(t){this.vt=!0,this.Wt={Ct:!1,D:"",Eu:[],Nu:"center",Fu:"center"},this.jt=new kf(this.Wt),this.$t=t}gt(){this.vt=!0}Mt(){return this.vt&&(this.St(),this.vt=!1),this.jt}St(){const t=this.$t.F(),e=this.Wt;e.Ct=t.visible,e.Ct&&(e.D=t.color,e.Fu=t.horzAlign,e.Nu=t.vertAlign,e.Eu=[{Gt:t.text,P:Ri(t.fontSize,t.fontFamily,t.fontStyle),zu:1.2*t.fontSize,Wu:0,fu:0}])}}class Rf extends Ir{constructor(t,e){super(),this.un=e,this.bn=new Pf(this)}Pn(){return[]}Tn(){return[this.bn]}F(){return this.un}Dn(){this.bn.gt()}}(function(i){i[i.OnTouchEnd=0]="OnTouchEnd",i[i.OnNextTap=1]="OnNextTap"})(Qo||(Qo={}));class zf{constructor(t,e){this.$u=[],this.Hu=[],this.po=0,this.Uu=null,this.qu=new Ht,this.Yu=new Ht,this.Xu=null,this.Zu=t,this.un=e,this.Ku=new dc(this),this.bo=new Tf(this,e.timeScale,this.un.localization),this.bt=new Cc(this,e.crosshair),this.Gu=new df(e.crosshair),this.Ju=new Rf(this,e.watermark),this.Qu(),this.$u[0].Ro(2e3),this.tc=this.ic(0),this.nc=this.ic(1)}dl(){this.sc(Ut.ss())}Ch(){this.sc(Ut.ns())}Cl(){this.sc(new Ut(1))}fl(t){const e=this.ec(t);this.sc(e)}rc(){return this.Uu}hc(t){const e=this.Uu;this.Uu=t,e!==null&&this.fl(e.lc),t!==null&&this.fl(t.lc)}F(){return this.un}kh(t){ze(this.un,t),this.$u.forEach(e=>e.ko(t)),t.timeScale!==void 0&&this.bo.kh(t.timeScale),t.localization!==void 0&&this.bo.H_(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.qu.m(),this.tc=this.ic(0),this.nc=this.ic(1),this.dl()}ac(t,e){if(t==="left")return void this.kh({leftPriceScale:e});if(t==="right")return void this.kh({rightPriceScale:e});const s=this.oc(t);s!==null&&(s.Bt.kh(e),this.qu.m())}oc(t){for(const e of this.$u){const s=e.Co(t);if(s!==null)return{Ht:e,Bt:s}}return null}yt(){return this.bo}_c(){return this.$u}uc(){return this.Ju}cc(){return this.bt}dc(){return this.Yu}fc(t,e){t.$a(e),this.hu()}Do(t){this.po=t,this.bo.Do(this.po),this.$u.forEach(e=>e.Do(t)),this.hu()}Qu(t){const e=new _f(this.bo,this);t!==void 0?this.$u.splice(t,0,e):this.$u.push(e);const s=t===void 0?this.$u.length-1:t,n=Ut.ss();return n.zn(s,{Nn:0,Fn:!0}),this.sc(n),e}zo(t,e,s){t.zo(e,s)}No(t,e,s){t.No(e,s),this.pl(),this.sc(this.vc(t,2))}Fo(t,e){t.Fo(e),this.sc(this.vc(t,2))}Wo(t,e,s){e.Va()||t.Wo(e,s)}jo(t,e,s){e.Va()||(t.jo(e,s),this.pl(),this.sc(this.vc(t,2)))}$o(t,e){e.Va()||(t.$o(e),this.sc(this.vc(t,2)))}Uo(t,e){t.Uo(e),this.sc(this.vc(t,2))}mc(t){this.bo.eo(t)}bc(t,e){const s=this.yt();if(s.Ni()||e===0)return;const n=s.$i();t=Math.max(1,Math.min(t,n)),s.fu(t,e),this.hu()}gc(t){this.wc(0),this.Mc(t),this.Sc()}xc(t){this.bo.ro(t),this.hu()}yc(){this.bo.ho(),this.Ch()}wc(t){this.bo.lo(t)}Mc(t){this.bo.ao(t),this.hu()}Sc(){this.bo.oo(),this.Ch()}wt(){return this.Hu}kc(t,e,s,n){this.bt.gn(t,e);let r=NaN,o=this.bo.eu(t);const h=this.bo.zs();h!==null&&(o=Math.min(Math.max(h.Ms(),o),h.ci()));const a=n.fn(),l=a.Tt();l!==null&&(r=a.pn(e,l)),r=this.Gu.Fl(r,o,n),this.bt.xn(o,r,n),this.Cl(),this.Yu.m(this.bt.xt(),{x:t,y:e},s)}Cc(){this.cc().kn(),this.Cl(),this.Yu.m(null,null,null)}pl(){const t=this.bt.Ht();if(t!==null){const e=this.bt.Mn(),s=this.bt.Sn();this.kc(e,s,null,t)}this.bt.Dn()}Tc(t,e,s){const n=this.bo.vn(0);e!==void 0&&s!==void 0&&this.bo.gt(e,s);const r=this.bo.vn(0),o=this.bo.su(),h=this.bo.zs();if(h!==null&&n!==null&&r!==null){const a=h.Ir(o),l=n.__>r.__,u=t!==null&&t>o&&!l,c=a&&this.bo.F().shiftVisibleRangeOnNewBar;if(u&&!c){const f=t-o;this.bo.Gn(this.bo.au()-f)}}this.bo.du(t)}bl(t){t!==null&&t.Yo()}Ke(t){const e=this.$u.find(s=>s.Ga().includes(t));return e===void 0?null:e}hu(){this.Ju.Dn(),this.$u.forEach(t=>t.Yo()),this.pl()}M(){this.$u.forEach(t=>t.M()),this.$u.length=0,this.un.localization.priceFormatter=void 0,this.un.localization.timeFormatter=void 0}Pc(){return this.Ku}tr(){return this.Ku.F()}To(){return this.qu}Rc(t,e){const s=this.$u[0],n=this.Dc(e,t,s);return this.Hu.push(n),this.Hu.length===1?this.dl():this.Ch(),n}Bc(t){const e=this.Ke(t),s=this.Hu.indexOf(t);li(s!==-1,"Series not found"),this.Hu.splice(s,1),V(e).io(t),t.M&&t.M()}cl(t,e){const s=V(this.Ke(t));s.io(t);const n=this.oc(e);if(n===null){const r=t.Zi();s.Ja(t,e,r)}else{const r=n.Ht===s?t.Zi():void 0;n.Ht.Ja(t,e,r)}}ku(){const t=Ut.ns();t.$n(),this.sc(t)}Oc(t){const e=Ut.ns();e.qn(t),this.sc(e)}Zn(){const t=Ut.ns();t.Zn(),this.sc(t)}Kn(t){const e=Ut.ns();e.Kn(t),this.sc(e)}Gn(t){const e=Ut.ns();e.Gn(t),this.sc(e)}Yn(t){const e=Ut.ns();e.Yn(t),this.sc(e)}Hn(){const t=Ut.ns();t.Hn(),this.sc(t)}Ac(){return this.un.rightPriceScale.visible?"right":"left"}Lc(){return this.nc}U(){return this.tc}Lt(t){const e=this.nc,s=this.tc;if(e===s)return e;if(t=Math.max(0,Math.min(100,Math.round(100*t))),this.Xu===null||this.Xu.bs!==s||this.Xu.gs!==e)this.Xu={bs:s,gs:e,Ic:new Map};else{const r=this.Xu.Ic.get(t);if(r!==void 0)return r}const n=function(r,o,h){const[a,l,u,c]=vn(r),[f,m,d,p]=vn(o),E=[pe(a+h*(f-a)),pe(l+h*(m-l)),pe(u+h*(d-u)),vl(c+h*(p-c))];return`rgba(${E[0]}, ${E[1]}, ${E[2]}, ${E[3]})`}(s,e,t/100);return this.Xu.Ic.set(t,n),n}vc(t,e){const s=new Ut(e);if(t!==null){const n=this.$u.indexOf(t);s.zn(n,{Nn:e})}return s}ec(t,e){return e===void 0&&(e=2),this.vc(this.Ke(t),e)}sc(t){this.Zu&&this.Zu(t),this.$u.forEach(e=>e.Zo().Th().gt())}Dc(t,e,s){const n=new Hr(this,t,e),r=t.priceScaleId!==void 0?t.priceScaleId:this.Ac();return s.Ja(n,r),En(r)||n.kh(t),n}ic(t){const e=this.un.layout;return e.background.type==="gradient"?t===0?e.background.topColor:e.background.bottomColor:e.background.color}}function jr(i){return!ke(i)&&!Lr(i)}function Dl(i){return ke(i)}(function(i){i[i.Disabled=0]="Disabled",i[i.Continuous=1]="Continuous",i[i.OnDataUpdate=2]="OnDataUpdate"})(Zo||(Zo={})),function(i){i[i.LastBar=0]="LastBar",i[i.LastVisible=1]="LastVisible"}($o||($o={})),function(i){i.Solid="solid",i.VerticalGradient="gradient"}(gr||(gr={}));const zi=typeof window<"u";function th(){return!!zi&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Yn(){return!!zi&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function vr(i){return i+i%2}function Kn(i,t){return i.Ec-t.Ec}function Jn(i,t,e){const s=(i.Ec-t.Ec)/(i._t-t._t);return Math.sign(s)*Math.min(Math.abs(s),e)}class Vf{constructor(t,e,s,n){this.Vc=null,this.zc=null,this.Nc=null,this.Fc=null,this.Wc=null,this.jc=0,this.$c=0,this.Hc=t,this.Uc=e,this.qc=s,this.es=n}Yc(t,e){if(this.Vc!==null){if(this.Vc._t===e)return void(this.Vc.Ec=t);if(Math.abs(this.Vc.Ec-t)<this.es)return}this.Fc=this.Nc,this.Nc=this.zc,this.zc=this.Vc,this.Vc={_t:e,Ec:t}}pr(t,e){if(this.Vc===null||this.zc===null||e-this.Vc._t>50)return;let s=0;const n=Jn(this.Vc,this.zc,this.Uc),r=Kn(this.Vc,this.zc),o=[n],h=[r];if(s+=r,this.Nc!==null){const l=Jn(this.zc,this.Nc,this.Uc);if(Math.sign(l)===Math.sign(n)){const u=Kn(this.zc,this.Nc);if(o.push(l),h.push(u),s+=u,this.Fc!==null){const c=Jn(this.Nc,this.Fc,this.Uc);if(Math.sign(c)===Math.sign(n)){const f=Kn(this.Nc,this.Fc);o.push(c),h.push(f),s+=f}}}}let a=0;for(let l=0;l<o.length;++l)a+=h[l]/s*o[l];Math.abs(a)<this.Hc||(this.Wc={Ec:t,_t:e},this.$c=a,this.jc=function(l,u){const c=Math.log(u);return Math.log(1*c/-l)/c}(Math.abs(a),this.qc))}wu(t){const e=V(this.Wc),s=t-e._t;return e.Ec+this.$c*(Math.pow(this.qc,s)-1)/Math.log(this.qc)}gu(t){return this.Wc===null||this.Xc(t)===this.jc}Xc(t){const e=t-V(this.Wc)._t;return Math.min(e,this.jc)}}function hi(i,t){const e=V(i.ownerDocument).createElement("canvas");i.appendChild(e);const s=nc(e,{type:"device-pixel-content-box",options:{allowResizeObserver:!1},transform:(n,r)=>({width:Math.max(n.width,r.width),height:Math.max(n.height,r.height)})});return s.resizeCanvasElement(t),s}function Of(i){zi&&window.chrome!==void 0&&i.addEventListener("mousedown",t=>{if(t.button===1)return t.preventDefault(),!1})}class Wr{constructor(t,e,s){this.Zc=0,this.Kc=null,this.Gc={st:Number.NEGATIVE_INFINITY,et:Number.POSITIVE_INFINITY},this.Jc=0,this.Qc=null,this.td={st:Number.NEGATIVE_INFINITY,et:Number.POSITIVE_INFINITY},this.nd=null,this.sd=!1,this.ed=null,this.rd=null,this.hd=!1,this.ld=!1,this.ad=!1,this.od=null,this._d=null,this.ud=null,this.dd=null,this.fd=null,this.pd=null,this.vd=null,this.md=0,this.bd=!1,this.gd=!1,this.wd=!1,this.Md=0,this.Sd=null,this.xd=!Yn(),this.yd=n=>{this.kd(n)},this.Cd=n=>{if(this.Td(n)){const r=this.Pd(n);if(++this.Jc,this.Qc&&this.Jc>1){const{Rd:o}=this.Dd(Ee(n),this.td);o<30&&!this.ad&&this.Bd(r,this.Ad.Od),this.Ld()}}else{const r=this.Pd(n);if(++this.Zc,this.Kc&&this.Zc>1){const{Rd:o}=this.Dd(Ee(n),this.Gc);o<5&&!this.ld&&this.Id(r,this.Ad.Ed),this.Vd()}}},this.zd=t,this.Ad=e,this.un=s,this.Nd()}M(){this.od!==null&&(this.od(),this.od=null),this._d!==null&&(this._d(),this._d=null),this.dd!==null&&(this.dd(),this.dd=null),this.fd!==null&&(this.fd(),this.fd=null),this.pd!==null&&(this.pd(),this.pd=null),this.ud!==null&&(this.ud(),this.ud=null),this.Fd(),this.Vd()}Wd(t){this.dd&&this.dd();const e=this.jd.bind(this);if(this.dd=()=>{this.zd.removeEventListener("mousemove",e)},this.zd.addEventListener("mousemove",e),this.Td(t))return;const s=this.Pd(t);this.Id(s,this.Ad.$d),this.xd=!0}Vd(){this.Kc!==null&&clearTimeout(this.Kc),this.Zc=0,this.Kc=null,this.Gc={st:Number.NEGATIVE_INFINITY,et:Number.POSITIVE_INFINITY}}Ld(){this.Qc!==null&&clearTimeout(this.Qc),this.Jc=0,this.Qc=null,this.td={st:Number.NEGATIVE_INFINITY,et:Number.POSITIVE_INFINITY}}jd(t){if(this.wd||this.rd!==null||this.Td(t))return;const e=this.Pd(t);this.Id(e,this.Ad.Hd),this.xd=!0}Ud(t){const e=Xn(t.changedTouches,V(this.Sd));if(e===null||(this.Md=js(t),this.vd!==null)||this.gd)return;this.bd=!0;const s=this.Dd(Ee(e),V(this.rd)),{qd:n,Yd:r,Rd:o}=s;if(this.hd||!(o<5)){if(!this.hd){const h=.5*n,a=r>=h&&!this.un.Xd(),l=h>r&&!this.un.Zd();a||l||(this.gd=!0),this.hd=!0,this.ad=!0,this.Fd(),this.Ld()}if(!this.gd){const h=this.Pd(t,e);this.Bd(h,this.Ad.Kd),gi(t)}}}Gd(t){if(t.button!==0)return;const e=this.Dd(Ee(t),V(this.ed)),{Rd:s}=e;if(s>=5&&(this.ld=!0,this.Vd()),this.ld){const n=this.Pd(t);this.Id(n,this.Ad.Jd)}}Dd(t,e){const s=Math.abs(e.st-t.st),n=Math.abs(e.et-t.et);return{qd:s,Yd:n,Rd:s+n}}Qd(t){let e=Xn(t.changedTouches,V(this.Sd));if(e===null&&t.touches.length===0&&(e=t.changedTouches[0]),e===null)return;this.Sd=null,this.Md=js(t),this.Fd(),this.rd=null,this.pd&&(this.pd(),this.pd=null);const s=this.Pd(t,e);if(this.Bd(s,this.Ad.tf),++this.Jc,this.Qc&&this.Jc>1){const{Rd:n}=this.Dd(Ee(e),this.td);n<30&&!this.ad&&this.Bd(s,this.Ad.Od),this.Ld()}else this.ad||(this.Bd(s,this.Ad.if),this.Ad.if&&gi(t));this.Jc===0&&gi(t),t.touches.length===0&&this.sd&&(this.sd=!1,gi(t))}kd(t){if(t.button!==0)return;const e=this.Pd(t);if(this.ed=null,this.wd=!1,this.fd&&(this.fd(),this.fd=null),th()&&this.zd.ownerDocument.documentElement.removeEventListener("mouseleave",this.yd),!this.Td(t))if(this.Id(e,this.Ad.nf),++this.Zc,this.Kc&&this.Zc>1){const{Rd:s}=this.Dd(Ee(t),this.Gc);s<5&&!this.ld&&this.Id(e,this.Ad.Ed),this.Vd()}else this.ld||this.Id(e,this.Ad.sf)}Fd(){this.nd!==null&&(clearTimeout(this.nd),this.nd=null)}ef(t){if(this.Sd!==null)return;const e=t.changedTouches[0];this.Sd=e.identifier,this.Md=js(t);const s=this.zd.ownerDocument.documentElement;this.ad=!1,this.hd=!1,this.gd=!1,this.rd=Ee(e),this.pd&&(this.pd(),this.pd=null);{const r=this.Ud.bind(this),o=this.Qd.bind(this);this.pd=()=>{s.removeEventListener("touchmove",r),s.removeEventListener("touchend",o)},s.addEventListener("touchmove",r,{passive:!1}),s.addEventListener("touchend",o,{passive:!1}),this.Fd(),this.nd=setTimeout(this.rf.bind(this,t),240)}const n=this.Pd(t,e);this.Bd(n,this.Ad.hf),this.Qc||(this.Jc=0,this.Qc=setTimeout(this.Ld.bind(this),500),this.td=Ee(e))}lf(t){if(t.button!==0)return;const e=this.zd.ownerDocument.documentElement;th()&&e.addEventListener("mouseleave",this.yd),this.ld=!1,this.ed=Ee(t),this.fd&&(this.fd(),this.fd=null);{const n=this.Gd.bind(this),r=this.kd.bind(this);this.fd=()=>{e.removeEventListener("mousemove",n),e.removeEventListener("mouseup",r)},e.addEventListener("mousemove",n),e.addEventListener("mouseup",r)}if(this.wd=!0,this.Td(t))return;const s=this.Pd(t);this.Id(s,this.Ad.af),this.Kc||(this.Zc=0,this.Kc=setTimeout(this.Vd.bind(this),500),this.Gc=Ee(t))}Nd(){this.zd.addEventListener("mouseenter",this.Wd.bind(this)),this.zd.addEventListener("touchcancel",this.Fd.bind(this));{const t=this.zd.ownerDocument,e=s=>{this.Ad._f&&(s.composed&&this.zd.contains(s.composedPath()[0])||s.target&&this.zd.contains(s.target)||this.Ad._f())};this._d=()=>{t.removeEventListener("touchstart",e)},this.od=()=>{t.removeEventListener("mousedown",e)},t.addEventListener("mousedown",e),t.addEventListener("touchstart",e,{passive:!0})}Yn()&&(this.ud=()=>{this.zd.removeEventListener("dblclick",this.Cd)},this.zd.addEventListener("dblclick",this.Cd)),this.zd.addEventListener("mouseleave",this.uf.bind(this)),this.zd.addEventListener("touchstart",this.ef.bind(this),{passive:!0}),Of(this.zd),this.zd.addEventListener("mousedown",this.lf.bind(this)),this.cf(),this.zd.addEventListener("touchmove",()=>{},{passive:!1})}cf(){this.Ad.df===void 0&&this.Ad.ff===void 0&&this.Ad.pf===void 0||(this.zd.addEventListener("touchstart",t=>this.vf(t.touches),{passive:!0}),this.zd.addEventListener("touchmove",t=>{if(t.touches.length===2&&this.vd!==null&&this.Ad.ff!==void 0){const e=eh(t.touches[0],t.touches[1])/this.md;this.Ad.ff(this.vd,e),gi(t)}},{passive:!1}),this.zd.addEventListener("touchend",t=>{this.vf(t.touches)}))}vf(t){t.length===1&&(this.bd=!1),t.length!==2||this.bd||this.sd?this.mf():this.bf(t)}bf(t){const e=this.zd.getBoundingClientRect()||{left:0,top:0};this.vd={st:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,et:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this.md=eh(t[0],t[1]),this.Ad.df!==void 0&&this.Ad.df(),this.Fd()}mf(){this.vd!==null&&(this.vd=null,this.Ad.pf!==void 0&&this.Ad.pf())}uf(t){if(this.dd&&this.dd(),this.Td(t)||!this.xd)return;const e=this.Pd(t);this.Id(e,this.Ad.gf),this.xd=!Yn()}rf(t){const e=Xn(t.touches,V(this.Sd));if(e===null)return;const s=this.Pd(t,e);this.Bd(s,this.Ad.wf),this.ad=!0,this.sd=!0}Td(t){return t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents!==void 0?t.sourceCapabilities.firesTouchEvents:js(t)<this.Md+500}Bd(t,e){e&&e.call(this.Ad,t)}Id(t,e){e&&e.call(this.Ad,t)}Pd(t,e){const s=e||t,n=this.zd.getBoundingClientRect()||{left:0,top:0};return{clientX:s.clientX,clientY:s.clientY,pageX:s.pageX,pageY:s.pageY,screenX:s.screenX,screenY:s.screenY,localX:s.clientX-n.left,localY:s.clientY-n.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,Mf:!t.type.startsWith("mouse")&&t.type!=="contextmenu"&&t.type!=="click",Sf:t.type,xf:s.target,yf:t.view,kf:()=>{t.type!=="touchstart"&&gi(t)}}}}function eh(i,t){const e=i.clientX-t.clientX,s=i.clientY-t.clientY;return Math.sqrt(e*e+s*s)}function gi(i){i.cancelable&&i.preventDefault()}function Ee(i){return{st:i.pageX,et:i.pageY}}function js(i){return i.timeStamp||performance.now()}function Xn(i,t){for(let e=0;e<i.length;++e)if(i[e].identifier===t)return i[e];return null}class ih{constructor(t,e,s,n){this.Vi=null,this.Cf=null,this.Tf=!1,this.Pf=new ds(200),this.Vr=null,this.Rf=0,this.Df=!1,this.Bf=()=>{this.Df||this.tn.Of().Ut().Ch()},this.Af=()=>{this.Df||this.tn.Of().Ut().Ch()},this.tn=t,this.un=e,this.Da=e.layout,this.Ku=s,this.Lf=n==="left",this.If=document.createElement("div"),this.If.style.height="100%",this.If.style.overflow="hidden",this.If.style.width="25px",this.If.style.left="0",this.If.style.position="relative",this.Ef=hi(this.If,yt({width:16,height:16})),this.Ef.subscribeSuggestedBitmapSizeChanged(this.Bf);const r=this.Ef.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Vf=hi(this.If,yt({width:16,height:16})),this.Vf.subscribeSuggestedBitmapSizeChanged(this.Af);const o=this.Vf.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const h={af:this.zf.bind(this),hf:this.zf.bind(this),Jd:this.Nf.bind(this),Kd:this.Nf.bind(this),_f:this.Ff.bind(this),nf:this.Wf.bind(this),tf:this.Wf.bind(this),Ed:this.jf.bind(this),Od:this.jf.bind(this),$d:this.$f.bind(this),gf:this.Hf.bind(this)};this.Uf=new Wr(this.Vf.canvasElement,h,{Xd:()=>!1,Zd:()=>!0})}M(){this.Uf.M(),this.Vf.unsubscribeSuggestedBitmapSizeChanged(this.Af),this.Vf.dispose(),this.Ef.unsubscribeSuggestedBitmapSizeChanged(this.Bf),this.Ef.dispose(),this.Vi!==null&&this.Vi.so().v(this),this.Vi=null}qf(){return this.If}T(){return this.Da.fontSize}Yf(){const t=this.Ku.F();return this.Vr!==t.P&&(this.Pf.Fe(),this.Vr=t.P),t}Xf(){if(this.Vi===null)return 0;let t=0;const e=this.Yf(),s=V(this.Ef.canvasElement.getContext("2d"));s.save();const n=this.Vi.Gl();s.font=this.Zf(),n.length>0&&(t=Math.max(this.Pf.Si(s,n[0]._a),this.Pf.Si(s,n[n.length-1]._a)));const r=this.Kf();for(let a=r.length;a--;){const l=this.Pf.Si(s,r[a].Gt());l>t&&(t=l)}const o=this.Vi.Tt();if(o!==null&&this.Cf!==null){const a=this.Vi.pn(1,o),l=this.Vi.pn(this.Cf.height-2,o);t=Math.max(t,this.Pf.Si(s,this.Vi.Fi(Math.floor(Math.min(a,l))+.11111111111111,o)),this.Pf.Si(s,this.Vi.Fi(Math.ceil(Math.max(a,l))-.11111111111111,o)))}s.restore();const h=t||34;return vr(Math.ceil(e.k+e.C+e.A+e.L+5+h))}Gf(t){this.Cf!==null&&ni(this.Cf,t)||(this.Cf=t,this.Df=!0,this.Ef.resizeCanvasElement(t),this.Vf.resizeCanvasElement(t),this.Df=!1,this.If.style.width=`${t.width}px`,this.If.style.height=`${t.height}px`)}Jf(){return V(this.Cf).width}Gi(t){this.Vi!==t&&(this.Vi!==null&&this.Vi.so().v(this),this.Vi=t,t.so().l(this.Ma.bind(this),this))}Bt(){return this.Vi}Fe(){const t=this.tn.Qf();this.tn.Of().Ut().Uo(t,V(this.Bt()))}tp(t){if(this.Cf===null)return;if(t!==1){this.ip(),this.Ef.applySuggestedBitmapSize();const s=ri(this.Ef);s!==null&&(s.useBitmapCoordinateSpace(n=>{this.np(n),this.ye(n)}),this.sp(s),this.ep(s))}this.Vf.applySuggestedBitmapSize();const e=ri(this.Vf);e!==null&&(e.useBitmapCoordinateSpace(({context:s,bitmapSize:n})=>{s.clearRect(0,0,n.width,n.height)}),this.rp(e))}hp(){return this.Ef.bitmapSize}lp(t,e,s){const n=this.hp();n.width>0&&n.height>0&&t.drawImage(this.Ef.canvasElement,e,s)}gt(){var t;(t=this.Vi)===null||t===void 0||t.Gl()}zf(t){if(this.Vi===null||this.Vi.Ni()||!this.un.handleScale.axisPressedMouseMove.price)return;const e=this.tn.Of().Ut(),s=this.tn.Qf();this.Tf=!0,e.zo(s,this.Vi,t.localY)}Nf(t){if(this.Vi===null||!this.un.handleScale.axisPressedMouseMove.price)return;const e=this.tn.Of().Ut(),s=this.tn.Qf(),n=this.Vi;e.No(s,n,t.localY)}Ff(){if(this.Vi===null||!this.un.handleScale.axisPressedMouseMove.price)return;const t=this.tn.Of().Ut(),e=this.tn.Qf(),s=this.Vi;this.Tf&&(this.Tf=!1,t.Fo(e,s))}Wf(t){if(this.Vi===null||!this.un.handleScale.axisPressedMouseMove.price)return;const e=this.tn.Of().Ut(),s=this.tn.Qf();this.Tf=!1,e.Fo(s,this.Vi)}jf(t){this.un.handleScale.axisDoubleClickReset.price&&this.Fe()}$f(t){this.Vi!==null&&(!this.tn.Of().Ut().F().handleScale.axisPressedMouseMove.price||this.Vi.th()||this.Vi.za()||this.ap(1))}Hf(t){this.ap(0)}Kf(){const t=[],e=this.Vi===null?void 0:this.Vi;return(s=>{for(let n=0;n<s.length;++n){const r=s[n].Pn(this.tn.Qf(),e);for(let o=0;o<r.length;o++)t.push(r[o])}})(this.tn.Qf().Ga()),t}np({context:t,bitmapSize:e}){const{width:s,height:n}=e,r=this.tn.Qf().Ut(),o=r.U(),h=r.Lc();o===h?Cn(t,0,0,s,n,o):bl(t,0,0,s,n,o,h)}ye({context:t,bitmapSize:e,horizontalPixelRatio:s}){if(this.Cf===null||this.Vi===null||!this.Vi.F().borderVisible)return;t.fillStyle=this.Vi.F().borderColor;const n=Math.max(1,Math.floor(this.Yf().k*s));let r;r=this.Lf?e.width-n:0,t.fillRect(r,0,n,e.height)}sp(t){if(this.Cf===null||this.Vi===null)return;const e=this.Vi.Gl(),s=this.Vi.F(),n=this.Yf(),r=this.Lf?this.Cf.width-n.C:0;s.borderVisible&&s.ticksVisible&&t.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:h,verticalPixelRatio:a})=>{o.fillStyle=s.borderColor;const l=Math.max(1,Math.floor(a)),u=Math.floor(.5*a),c=Math.round(n.C*h);o.beginPath();for(const f of e)o.rect(Math.floor(r*h),Math.round(f.ql*a)-u,c,l);o.fill()}),t.useMediaCoordinateSpace(({context:o})=>{var h;o.font=this.Zf(),o.fillStyle=(h=s.textColor)!==null&&h!==void 0?h:this.Da.textColor,o.textAlign=this.Lf?"right":"left",o.textBaseline="middle";const a=this.Lf?Math.round(r-n.A):Math.round(r+n.C+n.A),l=e.map(u=>this.Pf.Mi(o,u._a));for(let u=e.length;u--;){const c=e[u];o.fillText(c._a,a,c.ql+l[u])}})}ip(){if(this.Cf===null||this.Vi===null)return;let t=this.Cf.height/2;const e=[],s=this.Vi.Ga().slice(),n=this.tn.Qf(),r=this.Yf();this.Vi===n.Je()&&this.tn.Qf().Ga().forEach(a=>{n.Ge(a)&&s.push(a)});const o=this.Vi.Wl()[0],h=this.Vi;s.forEach(a=>{const l=a.Pn(n,h);l.forEach(u=>{u.Oi(null),u.Ai()&&e.push(u)}),o===a&&l.length>0&&(t=l[0].yi())}),e.forEach(a=>a.Oi(a.yi())),this.Vi.F().alignLabels&&this.op(e,r,t)}op(t,e,s){if(this.Cf===null)return;const n=t.filter(o=>o.yi()<=s),r=t.filter(o=>o.yi()>s);n.sort((o,h)=>h.yi()-o.yi()),n.length&&r.length&&r.push(n[0]),r.sort((o,h)=>o.yi()-h.yi());for(const o of t){const h=Math.floor(o.It(e)/2),a=o.yi();a>-h&&a<h&&o.Oi(h),a>this.Cf.height-h&&a<this.Cf.height+h&&o.Oi(this.Cf.height-h)}for(let o=1;o<n.length;o++){const h=n[o],a=n[o-1],l=a.It(e,!1),u=h.yi(),c=a.Bi();u>c-l&&h.Oi(c-l)}for(let o=1;o<r.length;o++){const h=r[o],a=r[o-1],l=a.It(e,!0),u=h.yi(),c=a.Bi();u<c+l&&h.Oi(c+l)}}ep(t){if(this.Cf===null)return;const e=this.Kf(),s=this.Yf(),n=this.Lf?"right":"left";e.forEach(r=>{r.Li()&&r.Mt(V(this.Vi)).X(t,s,this.Pf,n)})}rp(t){if(this.Cf===null||this.Vi===null)return;const e=this.tn.Of().Ut(),s=[],n=this.tn.Qf(),r=e.cc().Pn(n,this.Vi);r.length&&s.push(r);const o=this.Yf(),h=this.Lf?"right":"left";s.forEach(a=>{a.forEach(l=>{l.Mt(V(this.Vi)).X(t,o,this.Pf,h)})})}ap(t){this.If.style.cursor=t===1?"ns-resize":"default"}Ma(){const t=this.Xf();this.Rf<t&&this.tn.Of().Ut().dl(),this.Rf=t}Zf(){return Ri(this.Da.fontSize,this.Da.fontFamily)}}function sh(i,t,e,s){i.K&&i.K(t,e,s)}function Qn(i,t,e,s){i.X(t,e,s)}function Ws(i,t){return i.Tn(t)}function Nf(i,t){return i.Ji(t)}function Df(i,t){return i.kl!==void 0?i.kl(t):[]}class Gr{constructor(t,e){this.Cf=yt({width:0,height:0}),this._p=null,this.up=null,this.cp=null,this.dp=!1,this.fp=new Ht,this.pp=0,this.vp=!1,this.mp=null,this.bp=!1,this.gp=null,this.wp=null,this.Df=!1,this.Bf=()=>{this.Df||this.Mp===null||this.Hi().Ch()},this.Af=()=>{this.Df||this.Mp===null||this.Hi().Ch()},this.Sp=t,this.Mp=e,this.Mp.Xo().l(this.xp.bind(this),this,!0),this.yp=document.createElement("td"),this.yp.style.padding="0",this.yp.style.position="relative";const s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.position="relative",s.style.overflow="hidden",this.kp=document.createElement("td"),this.kp.style.padding="0",this.Cp=document.createElement("td"),this.Cp.style.padding="0",this.yp.appendChild(s),this.Ef=hi(s,yt({width:16,height:16})),this.Ef.subscribeSuggestedBitmapSizeChanged(this.Bf);const n=this.Ef.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Vf=hi(s,yt({width:16,height:16})),this.Vf.subscribeSuggestedBitmapSizeChanged(this.Af);const r=this.Vf.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.Tp=document.createElement("tr"),this.Tp.appendChild(this.kp),this.Tp.appendChild(this.yp),this.Tp.appendChild(this.Cp),this.Pp(),this.Uf=new Wr(this.Vf.canvasElement,this,{Xd:()=>this.mp===null&&!this.Sp.F().handleScroll.vertTouchDrag,Zd:()=>this.mp===null&&!this.Sp.F().handleScroll.horzTouchDrag})}M(){this._p!==null&&this._p.M(),this.up!==null&&this.up.M(),this.Vf.unsubscribeSuggestedBitmapSizeChanged(this.Af),this.Vf.dispose(),this.Ef.unsubscribeSuggestedBitmapSizeChanged(this.Bf),this.Ef.dispose(),this.Mp!==null&&this.Mp.Xo().v(this),this.Uf.M()}Qf(){return V(this.Mp)}Rp(t){this.Mp!==null&&this.Mp.Xo().v(this),this.Mp=t,this.Mp!==null&&this.Mp.Xo().l(Gr.prototype.xp.bind(this),this,!0),this.Pp()}Of(){return this.Sp}qf(){return this.Tp}Pp(){if(this.Mp!==null&&(this.Dp(),this.Hi().wt().length!==0)){if(this._p!==null){const t=this.Mp.Eo();this._p.Gi(V(t))}if(this.up!==null){const t=this.Mp.Vo();this.up.Gi(V(t))}}}Bp(){this._p!==null&&this._p.gt(),this.up!==null&&this.up.gt()}Po(){return this.Mp!==null?this.Mp.Po():0}Ro(t){this.Mp&&this.Mp.Ro(t)}$d(t){if(!this.Mp)return;this.Op();const e=t.localX,s=t.localY;this.Ap(e,s,t)}af(t){this.Op(),this.Lp(),this.Ap(t.localX,t.localY,t)}Hd(t){if(!this.Mp)return;this.Op();const e=t.localX,s=t.localY;this.Ap(e,s,t);const n=this.ir(e,s);this.Hi().hc(n&&{lc:n.lc,Ip:n.Ip})}sf(t){this.Mp!==null&&(this.Op(),this.Ep(t))}Jd(t){this.Op(),this.Vp(t),this.Ap(t.localX,t.localY,t)}nf(t){this.Mp!==null&&(this.Op(),this.vp=!1,this.zp(t))}if(t){this.Mp!==null&&this.Ep(t)}wf(t){if(this.vp=!0,this.mp===null){const e={x:t.localX,y:t.localY};this.Np(e,e,t)}}gf(t){this.Mp!==null&&(this.Op(),this.Mp.Ut().hc(null),this.Fp())}Wp(){return this.fp}df(){this.pp=1,this.Hi().Hn()}ff(t,e){if(!this.Sp.F().handleScale.pinch)return;const s=5*(e-this.pp);this.pp=e,this.Hi().bc(t.st,s)}hf(t){if(this.vp=!1,this.bp=this.mp!==null,this.Lp(),this.mp!==null){const e=this.Hi().cc();this.gp={x:e.Xt(),y:e.Zt()},this.mp={x:t.localX,y:t.localY}}}Kd(t){if(this.Mp===null)return;const e=t.localX,s=t.localY;if(this.mp===null)this.Vp(t);else{this.bp=!1;const n=V(this.gp),r=n.x+(e-this.mp.x),o=n.y+(s-this.mp.y);this.Ap(r,o,t)}}tf(t){this.Of().F().trackingMode.exitMode===0&&(this.bp=!0),this.jp(),this.zp(t)}ir(t,e){const s=this.Mp;if(s===null)return null;const n=s.Ga();for(const r of n){const o=this.$p(r.Tn(s),t,e);if(o!==null)return{lc:r,yf:o.yf,Ip:o.Ip}}return null}Hp(t,e){V(e==="left"?this._p:this.up).Gf(yt({width:t,height:this.Cf.height}))}Up(){return this.Cf}Gf(t){ni(this.Cf,t)||(this.Cf=t,this.Df=!0,this.Ef.resizeCanvasElement(t),this.Vf.resizeCanvasElement(t),this.Df=!1,this.yp.style.width=t.width+"px",this.yp.style.height=t.height+"px")}qp(){const t=V(this.Mp);t.Io(t.Eo()),t.Io(t.Vo());for(const e of t.Wl())if(t.Ge(e)){const s=e.Bt();s!==null&&t.Io(s),e.Dn()}}hp(){return this.Ef.bitmapSize}lp(t,e,s){const n=this.hp();n.width>0&&n.height>0&&t.drawImage(this.Ef.canvasElement,e,s)}tp(t){if(t===0||this.Mp===null)return;if(t>1&&this.qp(),this._p!==null&&this._p.tp(t),this.up!==null&&this.up.tp(t),t!==1){this.Ef.applySuggestedBitmapSize();const s=ri(this.Ef);s!==null&&(s.useBitmapCoordinateSpace(n=>{this.np(n)}),this.Mp&&(this.Yp(s),this.Xp(s),this.Zp(s,Ws),this.Zp(s,Nf)))}this.Vf.applySuggestedBitmapSize();const e=ri(this.Vf);e!==null&&(e.useBitmapCoordinateSpace(({context:s,bitmapSize:n})=>{s.clearRect(0,0,n.width,n.height)}),this.Zp(e,Df),this.Kp(e))}Gp(){return this._p}Jp(){return this.up}xp(){this.Mp!==null&&this.Mp.Xo().v(this),this.Mp=null}Ep(t){const e=t.localX,s=t.localY;this.fp.g()&&this.fp.m(this.Hi().yt().eu(e),{x:e,y:s},t)}np({context:t,bitmapSize:e}){const{width:s,height:n}=e,r=this.Hi(),o=r.U(),h=r.Lc();o===h?Cn(t,0,0,s,n,h):bl(t,0,0,s,n,o,h)}Yp(t){const e=V(this.Mp).Zo().Th().Mt();e!==null&&e.X(t,!1)}Xp(t){const e=this.Hi().uc();this.Qp(t,Ws,sh,e),this.Qp(t,Ws,Qn,e)}Kp(t){this.Qp(t,Ws,Qn,this.Hi().cc())}Zp(t,e){const s=V(this.Mp).Ga();for(const n of s)this.Qp(t,e,sh,n);for(const n of s)this.Qp(t,e,Qn,n)}Qp(t,e,s,n){const r=V(this.Mp),o=e(n,r),h=r.Ut().rc(),a=h!==null&&h.lc===n,l=h!==null&&a&&h.Ip!==void 0?h.Ip.sr:void 0;for(const u of o){const c=u.Mt();c!==null&&s(c,t,a,l)}}$p(t,e,s){for(const n of t){const r=n.Mt();if(r!==null&&r.ir){const o=r.ir(e,s);if(o!==null)return{yf:n,Ip:o}}}return null}Dp(){if(this.Mp===null)return;const t=this.Sp,e=this.Mp.Eo().F().visible,s=this.Mp.Vo().F().visible;e||this._p===null||(this.kp.removeChild(this._p.qf()),this._p.M(),this._p=null),s||this.up===null||(this.Cp.removeChild(this.up.qf()),this.up.M(),this.up=null);const n=t.Ut().Pc();e&&this._p===null&&(this._p=new ih(this,t.F(),n,"left"),this.kp.appendChild(this._p.qf())),s&&this.up===null&&(this.up=new ih(this,t.F(),n,"right"),this.Cp.appendChild(this.up.qf()))}tv(t){return t.Mf&&this.vp||this.mp!==null}iv(t){return Math.max(0,Math.min(t,this.Cf.width-1))}nv(t){return Math.max(0,Math.min(t,this.Cf.height-1))}Ap(t,e,s){this.Hi().kc(this.iv(t),this.nv(e),s,V(this.Mp))}Fp(){this.Hi().Cc()}jp(){this.bp&&(this.mp=null,this.Fp())}Np(t,e,s){this.mp=t,this.bp=!1,this.Ap(e.x,e.y,s);const n=this.Hi().cc();this.gp={x:n.Xt(),y:n.Zt()}}Hi(){return this.Sp.Ut()}zp(t){if(!this.dp)return;const e=this.Hi(),s=this.Qf();if(e.$o(s,s.fn()),this.cp=null,this.dp=!1,e.Sc(),this.wp!==null){const n=performance.now(),r=e.yt();this.wp.pr(r.au(),n),this.wp.gu(n)||e.Yn(this.wp)}}Op(){this.mp=null}Lp(){if(this.Mp){if(this.Hi().Hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)V(document.activeElement).blur();else{const t=document.getSelection();t!==null&&t.removeAllRanges()}!this.Mp.fn().Ni()&&this.Hi().yt().Ni()}}Vp(t){if(this.Mp===null)return;const e=this.Hi(),s=e.yt();if(s.Ni())return;const n=this.Sp.F(),r=n.handleScroll,o=n.kineticScroll;if((!r.pressedMouseMove||t.Mf)&&(!r.horzTouchDrag&&!r.vertTouchDrag||!t.Mf))return;const h=this.Mp.fn(),a=performance.now();if(this.cp!==null||this.tv(t)||(this.cp={x:t.clientX,y:t.clientY,__:a,sv:t.localX,ev:t.localY}),this.cp!==null&&!this.dp&&(this.cp.x!==t.clientX||this.cp.y!==t.clientY)){if(t.Mf&&o.touch||!t.Mf&&o.mouse){const l=s.Ks();this.wp=new Vf(.2/l,7/l,.997,15/l),this.wp.Yc(s.au(),this.cp.__)}else this.wp=null;h.Ni()||e.Wo(this.Mp,h,t.localY),e.wc(t.localX),this.dp=!0}this.dp&&(h.Ni()||e.jo(this.Mp,h,t.localY),e.Mc(t.localX),this.wp!==null&&this.wp.Yc(s.au(),a))}}class nh{constructor(t,e,s,n,r){this.vt=!0,this.Cf=yt({width:0,height:0}),this.Bf=()=>this.tp(3),this.Lf=t==="left",this.Ku=s.Pc,this.un=e,this.rv=n,this.hv=r,this.If=document.createElement("div"),this.If.style.width="25px",this.If.style.height="100%",this.If.style.overflow="hidden",this.Ef=hi(this.If,yt({width:16,height:16})),this.Ef.subscribeSuggestedBitmapSizeChanged(this.Bf)}M(){this.Ef.unsubscribeSuggestedBitmapSizeChanged(this.Bf),this.Ef.dispose()}qf(){return this.If}Up(){return this.Cf}Gf(t){ni(this.Cf,t)||(this.Cf=t,this.Ef.resizeCanvasElement(t),this.If.style.width=`${t.width}px`,this.If.style.height=`${t.height}px`,this.vt=!0)}tp(t){if(t<3&&!this.vt||this.Cf.width===0||this.Cf.height===0)return;this.vt=!1,this.Ef.applySuggestedBitmapSize();const e=ri(this.Ef);e!==null&&e.useBitmapCoordinateSpace(s=>{this.np(s),this.ye(s)})}hp(){return this.Ef.bitmapSize}lp(t,e,s){const n=this.hp();n.width>0&&n.height>0&&t.drawImage(this.Ef.canvasElement,e,s)}ye({context:t,bitmapSize:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(!this.rv())return;t.fillStyle=this.un.timeScale.borderColor;const r=Math.floor(this.Ku.F().k*s),o=Math.floor(this.Ku.F().k*n),h=this.Lf?e.width-r:0;t.fillRect(h,0,r,o)}np({context:t,bitmapSize:e}){Cn(t,0,0,e.width,e.height,this.hv())}}function Lf(i,t){return i.g_>t.g_?i:t}class Ff{constructor(t){this.lv=null,this.av=null,this.S=null,this.ov=!1,this.Cf=yt({width:0,height:0}),this._v=new Ht,this.Pf=new ds(5),this.Df=!1,this.Bf=()=>{this.Df||this.Sp.Ut().Ch()},this.Af=()=>{this.Df||this.Sp.Ut().Ch()},this.Sp=t,this.un=t.F().layout,this.uv=document.createElement("tr"),this.cv=document.createElement("td"),this.cv.style.padding="0",this.dv=document.createElement("td"),this.dv.style.padding="0",this.If=document.createElement("td"),this.If.style.height="25px",this.If.style.padding="0",this.fv=document.createElement("div"),this.fv.style.width="100%",this.fv.style.height="100%",this.fv.style.position="relative",this.fv.style.overflow="hidden",this.If.appendChild(this.fv),this.Ef=hi(this.fv,yt({width:16,height:16})),this.Ef.subscribeSuggestedBitmapSizeChanged(this.Bf);const e=this.Ef.canvasElement;e.style.position="absolute",e.style.zIndex="1",e.style.left="0",e.style.top="0",this.Vf=hi(this.fv,yt({width:16,height:16})),this.Vf.subscribeSuggestedBitmapSizeChanged(this.Af);const s=this.Vf.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.uv.appendChild(this.cv),this.uv.appendChild(this.If),this.uv.appendChild(this.dv),this.pv(),this.Sp.Ut().To().l(this.pv.bind(this),this),this.Uf=new Wr(this.Vf.canvasElement,this,{Xd:()=>!0,Zd:()=>!1})}M(){this.Uf.M(),this.lv!==null&&this.lv.M(),this.av!==null&&this.av.M(),this.Vf.unsubscribeSuggestedBitmapSizeChanged(this.Af),this.Vf.dispose(),this.Ef.unsubscribeSuggestedBitmapSizeChanged(this.Bf),this.Ef.dispose()}qf(){return this.uv}vv(){return this.lv}mv(){return this.av}af(t){if(this.ov)return;this.ov=!0;const e=this.Sp.Ut();!e.yt().Ni()&&this.Sp.F().handleScale.axisPressedMouseMove.time&&e.mc(t.localX)}hf(t){this.af(t)}_f(){const t=this.Sp.Ut();!t.yt().Ni()&&this.ov&&(this.ov=!1,this.Sp.F().handleScale.axisPressedMouseMove.time&&t.yc())}Jd(t){const e=this.Sp.Ut();!e.yt().Ni()&&this.Sp.F().handleScale.axisPressedMouseMove.time&&e.xc(t.localX)}Kd(t){this.Jd(t)}nf(){this.ov=!1;const t=this.Sp.Ut();t.yt().Ni()&&!this.Sp.F().handleScale.axisPressedMouseMove.time||t.yc()}tf(){this.nf()}Ed(){this.Sp.F().handleScale.axisDoubleClickReset.time&&this.Sp.Ut().Zn()}Od(){this.Ed()}$d(){this.Sp.Ut().F().handleScale.axisPressedMouseMove.time&&this.ap(1)}gf(){this.ap(0)}Up(){return this.Cf}bv(){return this._v}gv(t,e,s){ni(this.Cf,t)||(this.Cf=t,this.Df=!0,this.Ef.resizeCanvasElement(t),this.Vf.resizeCanvasElement(t),this.Df=!1,this.If.style.width=`${t.width}px`,this.If.style.height=`${t.height}px`,this._v.m(t)),this.lv!==null&&this.lv.Gf(yt({width:e,height:t.height})),this.av!==null&&this.av.Gf(yt({width:s,height:t.height}))}wv(){const t=this.Mv();return Math.ceil(t.k+t.C+t.T+t.I+t.O+t.Sv)}gt(){this.Sp.Ut().yt().Gl()}hp(){return this.Ef.bitmapSize}lp(t,e,s){const n=this.hp();n.width>0&&n.height>0&&t.drawImage(this.Ef.canvasElement,e,s)}tp(t){if(t===0)return;if(t!==1){this.Ef.applySuggestedBitmapSize();const s=ri(this.Ef);s!==null&&(s.useBitmapCoordinateSpace(n=>{this.np(n),this.ye(n)}),this.sp(s)),this.lv!==null&&this.lv.tp(t),this.av!==null&&this.av.tp(t)}this.Vf.applySuggestedBitmapSize();const e=ri(this.Vf);e!==null&&(e.useBitmapCoordinateSpace(({context:s,bitmapSize:n})=>{s.clearRect(0,0,n.width,n.height)}),this.xv([this.Sp.Ut().cc()],e))}np({context:t,bitmapSize:e}){Cn(t,0,0,e.width,e.height,this.Sp.Ut().Lc())}ye({context:t,bitmapSize:e,verticalPixelRatio:s}){if(this.Sp.F().timeScale.borderVisible){t.fillStyle=this.yv();const n=Math.max(1,Math.floor(this.Mv().k*s));t.fillRect(0,0,e.width,n)}}sp(t){const e=this.Sp.Ut().yt(),s=e.Gl();if(!s||s.length===0)return;let n=s.reduce(Lf,s[0]).g_;n>30&&n<50&&(n=30);const r=this.Mv(),o=e.F();o.borderVisible&&o.ticksVisible&&t.useBitmapCoordinateSpace(({context:h,horizontalPixelRatio:a,verticalPixelRatio:l})=>{h.strokeStyle=this.yv(),h.fillStyle=this.yv();const u=Math.max(1,Math.floor(a)),c=Math.floor(.5*a);h.beginPath();const f=Math.round(r.C*l);for(let m=s.length;m--;){const d=Math.round(s[m].ql*a);h.rect(d-c,0,u,f)}h.fill()}),t.useMediaCoordinateSpace(({context:h})=>{const a=r.k+r.C+r.I+r.T/2;h.textAlign="center",h.textBaseline="middle",h.fillStyle=this.$(),h.font=this.Zf();for(const l of s)if(l.g_<n){const u=l.uu?this.kv(h,l.ql,l._a):l.ql;h.fillText(l._a,u,a)}h.font=this.Cv();for(const l of s)if(l.g_>=n){const u=l.uu?this.kv(h,l.ql,l._a):l.ql;h.fillText(l._a,u,a)}})}kv(t,e,s){const n=this.Pf.Si(t,s),r=n/2,o=Math.floor(e-r)+.5;return o<0?e+=Math.abs(0-o):o+n>this.Cf.width&&(e-=Math.abs(this.Cf.width-(o+n))),e}xv(t,e){const s=this.Mv();for(const n of t)for(const r of n.Qi())r.Mt().X(e,s)}yv(){return this.Sp.F().timeScale.borderColor}$(){return this.un.textColor}W(){return this.un.fontSize}Zf(){return Ri(this.W(),this.un.fontFamily)}Cv(){return Ri(this.W(),this.un.fontFamily,"bold")}Mv(){this.S===null&&(this.S={k:1,V:NaN,I:NaN,O:NaN,ji:NaN,C:5,T:NaN,P:"",Wi:new ds,Sv:0});const t=this.S,e=this.Zf();if(t.P!==e){const s=this.W();t.T=s,t.P=e,t.I=3*s/12,t.O=3*s/12,t.ji=9*s/12,t.V=0,t.Sv=4*s/12,t.Wi.Fe()}return this.S}ap(t){this.If.style.cursor=t===1?"ew-resize":"default"}pv(){const t=this.Sp.Ut(),e=t.F();e.leftPriceScale.visible||this.lv===null||(this.cv.removeChild(this.lv.qf()),this.lv.M(),this.lv=null),e.rightPriceScale.visible||this.av===null||(this.dv.removeChild(this.av.qf()),this.av.M(),this.av=null);const s={Pc:this.Sp.Ut().Pc()},n=()=>e.leftPriceScale.borderVisible&&t.yt().F().borderVisible,r=()=>t.Lc();e.leftPriceScale.visible&&this.lv===null&&(this.lv=new nh("left",e,s,n,r),this.cv.appendChild(this.lv.qf())),e.rightPriceScale.visible&&this.av===null&&(this.av=new nh("right",e,s,n,r),this.dv.appendChild(this.av.qf()))}}const Af=!!zi&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(i=>i.brand.includes("Chromium"))&&!!zi&&(!((Zn=navigator==null?void 0:navigator.userAgentData)===null||Zn===void 0)&&Zn.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);var Zn;class Bf{constructor(t,e){var s;this.Tv=[],this.Pv=0,this.da=0,this.po=0,this.Rv=0,this.Dv=0,this.Bv=null,this.Ov=!1,this.fp=new Ht,this.Yu=new Ht,this.Av=null,this.Lv=t,this.un=e,this.uv=document.createElement("div"),this.uv.classList.add("tv-lightweight-charts"),this.uv.style.overflow="hidden",this.uv.style.width="100%",this.uv.style.height="100%",(s=this.uv).style.userSelect="none",s.style.webkitUserSelect="none",s.style.msUserSelect="none",s.style.MozUserSelect="none",s.style.webkitTapHighlightColor="transparent",this.Iv=document.createElement("table"),this.Iv.setAttribute("cellspacing","0"),this.uv.appendChild(this.Iv),this.Ev=this.Vv.bind(this),$n(this.un)&&this.zv(!0),this.Hi=new zf(this.Zu.bind(this),this.un),this.Ut().dc().l(this.Nv.bind(this),this),this.Fv=new Ff(this),this.Iv.appendChild(this.Fv.qf());const n=e.autoSize&&this.Wv();let r=this.un.width,o=this.un.height;if(n||r===0||o===0){const h=t.getBoundingClientRect();r=r||h.width,o=o||h.height}n||this.jv(r,o),this.$v(),t.appendChild(this.uv),this.Hv(),this.Hi.yt().xu().l(this.Hi.dl.bind(this.Hi),this),this.Hi.To().l(this.Hi.dl.bind(this.Hi),this)}Ut(){return this.Hi}F(){return this.un}Uv(){return this.Tv}qv(){return this.Fv}M(){this.zv(!1),this.Pv!==0&&window.cancelAnimationFrame(this.Pv),this.Hi.dc().v(this),this.Hi.yt().xu().v(this),this.Hi.To().v(this),this.Hi.M();for(const t of this.Tv)this.Iv.removeChild(t.qf()),t.Wp().v(this),t.M();this.Tv=[],V(this.Fv).M(),this.uv.parentElement!==null&&this.uv.parentElement.removeChild(this.uv),this.Yu.M(),this.fp.M(),this.Yv()}jv(t,e,s=!1){if(this.da===e&&this.po===t)return;const n=function(h){const a=Math.floor(h.width),l=Math.floor(h.height);return yt({width:a-a%2,height:l-l%2})}(yt({width:t,height:e}));this.da=n.height,this.po=n.width;const r=this.da+"px",o=this.po+"px";V(this.uv).style.height=r,V(this.uv).style.width=o,this.Iv.style.height=r,this.Iv.style.width=o,s?this.Xv(Ut.ss(),performance.now()):this.Hi.dl()}tp(t){t===void 0&&(t=Ut.ss());for(let e=0;e<this.Tv.length;e++)this.Tv[e].tp(t.jn(e).Nn);this.un.timeScale.visible&&this.Fv.tp(t.Wn())}kh(t){const e=$n(this.un);this.Hi.kh(t);const s=$n(this.un);s!==e&&this.zv(s),this.Hv(),this.Zv(t)}Wp(){return this.fp}dc(){return this.Yu}Kv(){this.Bv!==null&&(this.Xv(this.Bv,performance.now()),this.Bv=null);const t=this.Gv(null),e=document.createElement("canvas");e.width=t.width,e.height=t.height;const s=V(e.getContext("2d"));return this.Gv(s),e}Jv(t){return t==="left"&&!this.Qv()||t==="right"&&!this.tm()||this.Tv.length===0?0:V(t==="left"?this.Tv[0].Gp():this.Tv[0].Jp()).Jf()}Zv(t){(t.autoSize!==void 0||!this.Av||t.width===void 0&&t.height===void 0)&&(t.autoSize&&!this.Av&&this.Wv(),t.autoSize===!1&&this.Av!==null&&this.Yv(),t.autoSize||t.width===void 0&&t.height===void 0||this.jv(t.width||this.po,t.height||this.da))}Gv(t){let e=0,s=0;const n=this.Tv[0],r=(h,a)=>{let l=0;for(let u=0;u<this.Tv.length;u++){const c=this.Tv[u],f=V(h==="left"?c.Gp():c.Jp()),m=f.hp();t!==null&&f.lp(t,a,l),l+=m.height}};this.Qv()&&(r("left",0),e+=V(n.Gp()).hp().width);for(let h=0;h<this.Tv.length;h++){const a=this.Tv[h],l=a.hp();t!==null&&a.lp(t,e,s),s+=l.height}e+=n.hp().width,this.tm()&&(r("right",e),e+=V(n.Jp()).hp().width);const o=(h,a,l)=>{V(h==="left"?this.Fv.vv():this.Fv.mv()).lp(V(t),a,l)};if(this.un.timeScale.visible){const h=this.Fv.hp();if(t!==null){let a=0;this.Qv()&&(o("left",a,s),a=V(n.Gp()).hp().width),this.Fv.lp(t,a,s),a+=h.width,this.tm()&&o("right",a,s)}s+=h.height}return yt({width:e,height:s})}im(){let t=0,e=0,s=0;for(const d of this.Tv)this.Qv()&&(e=Math.max(e,V(d.Gp()).Xf())),this.tm()&&(s=Math.max(s,V(d.Jp()).Xf())),t+=d.Po();e=vr(e),s=vr(s);const n=this.po,r=this.da,o=Math.max(n-e-s,0),h=this.un.timeScale.visible;let a=h?this.Fv.wv():0;var l;a=(l=a)+l%2;const u=0+a,c=r<u?0:r-u,f=c/t;let m=0;for(let d=0;d<this.Tv.length;++d){const p=this.Tv[d];p.Rp(this.Hi._c()[d]);let E=0,C=0;C=d===this.Tv.length-1?c-m:Math.round(p.Po()*f),E=Math.max(C,2),m+=E,p.Gf(yt({width:o,height:E})),this.Qv()&&p.Hp(e,"left"),this.tm()&&p.Hp(s,"right"),p.Qf()&&this.Hi.fc(p.Qf(),E)}this.Fv.gv(yt({width:h?o:0,height:a}),h?e:0,h?s:0),this.Hi.Do(o),this.Rv!==e&&(this.Rv=e),this.Dv!==s&&(this.Dv=s)}zv(t){t?this.uv.addEventListener("wheel",this.Ev,{passive:!1}):this.uv.removeEventListener("wheel",this.Ev)}nm(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return Af?1/window.devicePixelRatio:1}Vv(t){if(!(t.deltaX!==0&&this.un.handleScroll.mouseWheel||t.deltaY!==0&&this.un.handleScale.mouseWheel))return;const e=this.nm(t),s=e*t.deltaX/100,n=-e*t.deltaY/100;if(t.cancelable&&t.preventDefault(),n!==0&&this.un.handleScale.mouseWheel){const r=Math.sign(n)*Math.min(1,Math.abs(n)),o=t.clientX-this.uv.getBoundingClientRect().left;this.Ut().bc(o,r)}s!==0&&this.un.handleScroll.mouseWheel&&this.Ut().gc(-80*s)}Xv(t,e){var s;const n=t.Wn();n===3&&this.sm(),n!==3&&n!==2||(this.rm(t),this.hm(t,e),this.Fv.gt(),this.Tv.forEach(r=>{r.Bp()}),((s=this.Bv)===null||s===void 0?void 0:s.Wn())===3&&(this.Bv.Qn(t),this.sm(),this.rm(this.Bv),this.hm(this.Bv,e),t=this.Bv,this.Bv=null)),this.tp(t)}hm(t,e){for(const s of t.Jn())this.ts(s,e)}rm(t){const e=this.Hi._c();for(let s=0;s<e.length;s++)t.jn(s).Fn&&e[s].qo()}ts(t,e){const s=this.Hi.yt();switch(t.Un){case 0:s.ku();break;case 1:s.Cu(t.Ot);break;case 2:s.Kn(t.Ot);break;case 3:s.Gn(t.Ot);break;case 4:s.cu();break;case 5:t.Ot.gu(e)||s.Gn(t.Ot.wu(e))}}Zu(t){this.Bv!==null?this.Bv.Qn(t):this.Bv=t,this.Ov||(this.Ov=!0,this.Pv=window.requestAnimationFrame(e=>{if(this.Ov=!1,this.Pv=0,this.Bv!==null){const s=this.Bv;this.Bv=null,this.Xv(s,e);for(const n of s.Jn())if(n.Un===5&&!n.Ot.gu(e)){this.Ut().Yn(n.Ot);break}}}))}sm(){this.$v()}$v(){const t=this.Hi._c(),e=t.length,s=this.Tv.length;for(let n=e;n<s;n++){const r=ge(this.Tv.pop());this.Iv.removeChild(r.qf()),r.Wp().v(this),r.M()}for(let n=s;n<e;n++){const r=new Gr(this,t[n]);r.Wp().l(this.lm.bind(this),this),this.Tv.push(r),this.Iv.insertBefore(r.qf(),this.Fv.qf())}for(let n=0;n<e;n++){const r=t[n],o=this.Tv[n];o.Qf()!==r?o.Rp(r):o.Pp()}this.Hv(),this.im()}am(t,e,s){var n;const r=new Map;t!==null&&this.Hi.wt().forEach(u=>{const c=u.Ln().jh(t);c!==null&&r.set(u,c)});let o;if(t!==null){const u=(n=this.Hi.yt().Ui(t))===null||n===void 0?void 0:n.w_;u!==void 0&&(o=u)}const h=this.Ut().rc(),a=h!==null&&h.lc instanceof Hr?h.lc:void 0,l=h!==null&&h.Ip!==void 0?h.Ip.nr:void 0;return{_t:o,Ys:t??void 0,om:e??void 0,_m:a,um:r,dm:l,fm:s??void 0}}lm(t,e,s){this.fp.m(()=>this.am(t,e,s))}Nv(t,e,s){this.Yu.m(()=>this.am(t,e,s))}Hv(){const t=this.un.timeScale.visible?"":"none";this.Fv.qf().style.display=t}Qv(){return this.Tv[0].Qf().Eo().F().visible}tm(){return this.Tv[0].Qf().Vo().F().visible}Wv(){return"ResizeObserver"in window&&(this.Av=new ResizeObserver(t=>{const e=t.find(s=>s.target===this.Lv);e&&this.jv(e.contentRect.width,e.contentRect.height)}),this.Av.observe(this.Lv,{box:"border-box"}),!0)}Yv(){this.Av!==null&&this.Av.disconnect()}}function $n(i){return Boolean(i.handleScroll.mouseWheel||i.handleScale.mouseWheel)}function rh(i,t,e,s){const n=e.value,r={Ys:t,_t:i,Ot:[n,n,n,n],w_:s};return e.color!==void 0&&(r.D=e.color),r}function Gs(i){return i.Ot!==void 0}function vi(i){return(t,e,s,n)=>{return(r=s).open===void 0&&r.value===void 0?{_t:t,Ys:e,w_:n}:i(t,e,s,n);var r}}const If={Candlestick:vi(function(i,t,e,s){const n={Ys:t,_t:i,Ot:[e.open,e.high,e.low,e.close],w_:s};return e.color!==void 0&&(n.D=e.color),e.borderColor!==void 0&&(n.At=e.borderColor),e.wickColor!==void 0&&(n.Dh=e.wickColor),n}),Bar:vi(function(i,t,e,s){const n={Ys:t,_t:i,Ot:[e.open,e.high,e.low,e.close],w_:s};return e.color!==void 0&&(n.D=e.color),n}),Area:vi(function(i,t,e,s){const n=e.value,r={Ys:t,_t:i,Ot:[n,n,n,n],w_:s};return e.lineColor!==void 0&&(r.ot=e.lineColor),e.topColor!==void 0&&(r.bs=e.topColor),e.bottomColor!==void 0&&(r.gs=e.bottomColor),r}),Baseline:vi(function(i,t,e,s){const n=e.value,r={Ys:t,_t:i,Ot:[n,n,n,n],w_:s};return e.topLineColor!==void 0&&(r.be=e.topLineColor),e.bottomLineColor!==void 0&&(r.ge=e.bottomLineColor),e.topFillColor1!==void 0&&(r.de=e.topFillColor1),e.topFillColor2!==void 0&&(r.fe=e.topFillColor2),e.bottomFillColor1!==void 0&&(r.pe=e.bottomFillColor1),e.bottomFillColor2!==void 0&&(r.ve=e.bottomFillColor2),r}),Histogram:vi(rh),Line:vi(rh)};function oh(i){return If[i]}function qs(i){return 60*i*60*1e3}function tr(i){return 60*i*1e3}const Ys=[{pm:(hh=1,1e3*hh),g_:10},{pm:tr(1),g_:20},{pm:tr(5),g_:21},{pm:tr(30),g_:22},{pm:qs(1),g_:30},{pm:qs(3),g_:31},{pm:qs(6),g_:32},{pm:qs(12),g_:33}];var hh;function lh(i,t){if(i.getUTCFullYear()!==t.getUTCFullYear())return 70;if(i.getUTCMonth()!==t.getUTCMonth())return 60;if(i.getUTCDate()!==t.getUTCDate())return 50;for(let e=Ys.length-1;e>=0;--e)if(Math.floor(t.getTime()/Ys[e].pm)!==Math.floor(i.getTime()/Ys[e].pm))return Ys[e].g_;return 0}function ah(i,t=0){if(i.length===0)return;let e=t===0?null:i[t-1]._t.__,s=e!==null?new Date(1e3*e):null,n=0;for(let r=t;r<i.length;++r){const o=i[r],h=new Date(1e3*o._t.__);s!==null&&(o.b_=lh(h,s)),n+=o._t.__-(e||o._t.__),e=o._t.__,s=h}if(t===0&&i.length>1){const r=Math.ceil(n/(i.length-1)),o=new Date(1e3*(i[0]._t.__-r));i[0].b_=lh(new Date(1e3*i[0]._t.__),o)}}function br(i){if(!jr(i))throw new Error("time must be of type BusinessDay");const t=new Date(Date.UTC(i.year,i.month-1,i.day,0,0,0,0));return{__:Math.round(t.getTime()/1e3),o_:i}}function Ll(i){if(!Dl(i))throw new Error("time must be of type isUTCTimestamp");return{__:i}}function uh(i){return i.length===0?null:jr(i[0].time)?br:Ll}function en(i){return Dl(i)?Ll(i):jr(i)?br(i):br(Fl(i))}function Fl(i){const t=new Date(i);if(isNaN(t.getTime()))throw new Error(`Invalid date string=${i}, expected format=yyyy-mm-dd`);return{day:t.getUTCDate(),month:t.getUTCMonth()+1,year:t.getUTCFullYear()}}function ch(i){Lr(i.time)&&(i.time=Fl(i.time))}function fh(i){return{Ys:0,vm:new Map,yl:i}}function dh(i){if(i!==void 0&&i.length!==0)return{bm:i[0]._t.__,gm:i[i.length-1]._t.__}}function mh(i){let t;return i.forEach(e=>{t===void 0&&(t=e.w_)}),ge(t)}function ph(i){i.w_===void 0&&(i.w_=i.time)}class Uf{constructor(){this.wm=new Map,this.Mm=new Map,this.Sm=new Map,this.xm=[]}M(){this.wm.clear(),this.Mm.clear(),this.Sm.clear(),this.xm=[]}ym(t,e){let s=this.wm.size!==0,n=!1;const r=this.Mm.get(t);if(r!==void 0)if(this.Mm.size===1)s=!1,n=!0,this.wm.clear();else for(const a of this.xm)a.pointData.vm.delete(t)&&(n=!0);let o=[];if(e.length!==0){const a=e;a.forEach(c=>ph(c)),function(c){c.forEach(ch)}(e);const l=V(uh(e)),u=oh(t.Lh());o=a.map(c=>{const f=l(c.time);let m=this.wm.get(f.__);m===void 0&&(m=fh(f),this.wm.set(f.__,m),n=!0);const d=u(f,m.Ys,c,c.w_);return m.vm.set(t,d),d})}s&&this.km(),this.Cm(t,o);let h=-1;if(n){const a=[];this.wm.forEach(l=>{a.push({b_:0,_t:l.yl,pointData:l,w_:mh(l.vm)})}),a.sort((l,u)=>l._t.__-u._t.__),h=this.Tm(a)}return this.Pm(t,h,function(a,l){const u=dh(a),c=dh(l);if(u!==void 0&&c!==void 0)return{ml:u.gm>=c.gm&&u.bm>=c.bm}}(this.Mm.get(t),r))}Bc(t){return this.ym(t,[])}Rm(t,e){const s=e;ph(s),ch(e);const n=V(uh([e]))(e.time),r=this.Sm.get(t);if(r!==void 0&&n.__<r.__)throw new Error(`Cannot update oldest data, last time=${r.__}, new time=${n.__}`);let o=this.wm.get(n.__);const h=o===void 0;o===void 0&&(o=fh(n),this.wm.set(n.__,o));const a=oh(t.Lh())(n,o.Ys,e,s.w_);o.vm.set(t,a),this.Dm(t,a);const l={ml:Gs(a)};if(!h)return this.Pm(t,-1,l);const u={b_:0,_t:o.yl,pointData:o,w_:mh(o.vm)},c=bs(this.xm,u._t.__,(f,m)=>f._t.__<m);this.xm.splice(c,0,u);for(let f=c;f<this.xm.length;++f)er(this.xm[f].pointData,f);return ah(this.xm,c),this.Pm(t,c,l)}Dm(t,e){let s=this.Mm.get(t);s===void 0&&(s=[],this.Mm.set(t,s));const n=s.length!==0?s[s.length-1]:null;n===null||e._t.__>n._t.__?Gs(e)&&s.push(e):Gs(e)?s[s.length-1]=e:s.splice(-1,1),this.Sm.set(t,e._t)}Cm(t,e){e.length!==0?(this.Mm.set(t,e.filter(Gs)),this.Sm.set(t,e[e.length-1]._t)):(this.Mm.delete(t),this.Sm.delete(t))}km(){for(const t of this.xm)t.pointData.vm.size===0&&this.wm.delete(t._t.__)}Tm(t){let e=-1;for(let s=0;s<this.xm.length&&s<t.length;++s){const n=this.xm[s],r=t[s];if(n._t.__!==r._t.__){e=s;break}r.b_=n.b_,er(r.pointData,s)}if(e===-1&&this.xm.length!==t.length&&(e=Math.min(this.xm.length,t.length)),e===-1)return-1;for(let s=e;s<t.length;++s)er(t[s].pointData,s);return ah(t,e),this.xm=t,e}Bm(){if(this.Mm.size===0)return null;let t=0;return this.Mm.forEach(e=>{e.length!==0&&(t=Math.max(t,e[e.length-1].Ys))}),t}Pm(t,e,s){const n={Om:new Map,yt:{su:this.Bm()}};if(e!==-1)this.Mm.forEach((r,o)=>{n.Om.set(o,{ar:r,Am:o===t?s:void 0})}),this.Mm.has(t)||n.Om.set(t,{ar:[],Am:s}),n.yt.Lm=this.xm,n.yt.Im=e;else{const r=this.Mm.get(t);n.Om.set(t,{ar:r||[],Am:s})}return n}}function er(i,t){i.Ys=t,i.vm.forEach(e=>{e.Ys=t})}function yr(i){return{value:i.Ot[3],time:i.w_}}function gh(i){const t=yr(i);return i.D!==void 0&&(t.color=i.D),t}function vh(i){return{open:i.Ot[0],high:i.Ot[1],low:i.Ot[2],close:i.Ot[3],time:i.w_}}const Hf={Area:function(i){const t=yr(i);return i.ot!==void 0&&(t.lineColor=i.ot),i.bs!==void 0&&(t.topColor=i.bs),i.gs!==void 0&&(t.bottomColor=i.gs),t},Line:gh,Baseline:function(i){const t=yr(i);return i.be!==void 0&&(t.topLineColor=i.be),i.ge!==void 0&&(t.bottomLineColor=i.ge),i.de!==void 0&&(t.topFillColor1=i.de),i.fe!==void 0&&(t.topFillColor2=i.fe),i.pe!==void 0&&(t.bottomFillColor1=i.pe),i.ve!==void 0&&(t.bottomFillColor2=i.ve),t},Histogram:gh,Bar:function(i){const t=vh(i);return i.D!==void 0&&(t.color=i.D),t},Candlestick:function(i){const t=vh(i),{D:e,At:s,Dh:n}=i;return e!==void 0&&(t.color=e),s!==void 0&&(t.borderColor=s),n!==void 0&&(t.wickColor=n),t}};function Al(i){return Hf[i]}const ir={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2}},jf={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:Fr,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"},bh={width:0,height:0,autoSize:!1,layout:{background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Fr},crosshair:{vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},grid:{vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},overlayPriceScales:Object.assign({},ir),leftPriceScale:Object.assign(Object.assign({},ir),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},ir),{visible:!0}),timeScale:{rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,ticksVisible:!1},watermark:jf,localization:{locale:zi?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}},Wf={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},Gf={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},qf={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},Yf={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},Kf={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},Jf={color:"#26a69a",base:0},Xf={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};class Qf{constructor(t,e){this.Em=t,this.Vm=e}applyOptions(t){this.Em.Ut().ac(this.Vm,t)}options(){return this.Vi().F()}width(){return En(this.Vm)?this.Em.Jv(this.Vm):0}Vi(){return V(this.Em.Ut().oc(this.Vm)).Bt}}const Zf={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:""};class $f{constructor(t){this.wh=t}applyOptions(t){this.wh.kh(t)}options(){return this.wh.F()}zm(){return this.wh}}class td{constructor(t,e,s){this.Ts=t,this.Nm=e,this.Fm=s}priceFormatter(){return this.Ts.Bl()}priceToCoordinate(t){const e=this.Ts.Tt();return e===null?null:this.Ts.Bt().Dt(t,e.Ot)}coordinateToPrice(t){const e=this.Ts.Tt();return e===null?null:this.Ts.Bt().pn(t,e.Ot)}barsInLogicalRange(t){if(t===null)return null;const e=new xi(new ls(t.from,t.to)).k_(),s=this.Ts.Ln();if(s.Ni())return null;const n=s.jh(e.Ms(),1),r=s.jh(e.ci(),-1),o=V(s.Nh()),h=V(s.An());if(n!==null&&r!==null&&n.Ys>r.Ys)return{barsBefore:t.from-o,barsAfter:h-t.to};const a={barsBefore:n===null||n.Ys===o?t.from-o:n.Ys-o,barsAfter:r===null||r.Ys===h?h-t.to:h-r.Ys};return n!==null&&r!==null&&(a.from=n._t.o_||n._t.__,a.to=r._t.o_||r._t.__),a}setData(t){this.Ts.Lh(),this.Nm.Wm(this.Ts,t)}update(t){this.Ts.Lh(),this.Nm.jm(this.Ts,t)}dataByIndex(t,e){const s=this.Ts.Ln().jh(t,e);return s===null?null:Al(this.seriesType())(s)}setMarkers(t){const e=t.map(s=>Object.assign(Object.assign({},s),{originalTime:s.time,time:en(s.time)}));this.Ts.gl(e)}markers(){return this.Ts.wl().map(t=>{const{originalTime:e,time:s}=t,n=function(r,o){var h={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&o.indexOf(a)<0&&(h[a]=r[a]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var l=0;for(a=Object.getOwnPropertySymbols(r);l<a.length;l++)o.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(r,a[l])&&(h[a[l]]=r[a[l]])}return h}(t,["originalTime","time"]);return Object.assign({time:e},n)})}applyOptions(t){this.Ts.kh(t)}options(){return Ae(this.Ts.F())}priceScale(){return this.Fm.priceScale(this.Ts.Bt().Vl())}createPriceLine(t){const e=ze(Ae(Zf),t),s=this.Ts.Ml(e);return new $f(s)}removePriceLine(t){this.Ts.Sl(t.zm())}seriesType(){return this.Ts.Lh()}}class ed{constructor(t,e){this.$m=new Ht,this.I_=new Ht,this._v=new Ht,this.Hi=t,this.bo=t.yt(),this.Fv=e,this.bo.Mu().l(this.Hm.bind(this)),this.bo.Su().l(this.Um.bind(this)),this.Fv.bv().l(this.qm.bind(this))}M(){this.bo.Mu().v(this),this.bo.Su().v(this),this.Fv.bv().v(this),this.$m.M(),this.I_.M(),this._v.M()}scrollPosition(){return this.bo.au()}scrollToPosition(t,e){e?this.bo.bu(t,1e3):this.Hi.Gn(t)}scrollToRealTime(){this.bo.mu()}getVisibleRange(){var t,e;const s=this.bo.K_();return s===null?null:{from:(t=s.from.o_)!==null&&t!==void 0?t:s.from.__,to:(e=s.to.o_)!==null&&e!==void 0?e:s.to.__}}setVisibleRange(t){const e={from:en(t.from),to:en(t.to)},s=this.bo.tu(e);this.Hi.Oc(s)}getVisibleLogicalRange(){const t=this.bo.Z_();return t===null?null:{from:t.Ms(),to:t.ci()}}setVisibleLogicalRange(t){li(t.from<=t.to,"The from index cannot be after the to index."),this.Hi.Oc(t)}resetTimeScale(){this.Hi.Zn()}fitContent(){this.Hi.ku()}logicalToCoordinate(t){const e=this.Hi.yt();return e.Ni()?null:e.Et(t)}coordinateToLogical(t){return this.bo.Ni()?null:this.bo.eu(t)}timeToCoordinate(t){const e=en(t),s=this.bo.Nl(e,!1);return s===null?null:this.bo.Et(s)}coordinateToTime(t){var e;const s=this.Hi.yt(),n=s.eu(t),r=s.vn(n);return r===null?null:(e=r.o_)!==null&&e!==void 0?e:r.__}width(){return this.Fv.Up().width}height(){return this.Fv.Up().height}subscribeVisibleTimeRangeChange(t){this.$m.l(t)}unsubscribeVisibleTimeRangeChange(t){this.$m.p(t)}subscribeVisibleLogicalRangeChange(t){this.I_.l(t)}unsubscribeVisibleLogicalRangeChange(t){this.I_.p(t)}subscribeSizeChange(t){this._v.l(t)}unsubscribeSizeChange(t){this._v.p(t)}applyOptions(t){this.bo.kh(t)}options(){return Ae(this.bo.F())}Hm(){this.$m.g()&&this.$m.m(this.getVisibleRange())}Um(){this.I_.g()&&this.I_.m(this.getVisibleLogicalRange())}qm(t){this._v.m(t.width,t.height)}}function id(i){if(i===void 0||i.type==="custom")return;const t=i;t.minMove!==void 0&&t.precision===void 0&&(t.precision=function(e){if(e>=1)return 0;let s=0;for(;s<8;s++){const n=Math.round(e);if(Math.abs(n-e)<1e-8)return s;e*=10}return s}(t.minMove))}function yh(i){return function(t){if(Bs(t.handleScale)){const s=t.handleScale;t.handleScale={axisDoubleClickReset:{time:s,price:s},axisPressedMouseMove:{time:s,price:s},mouseWheel:s,pinch:s}}else if(t.handleScale!==void 0){const{axisPressedMouseMove:s,axisDoubleClickReset:n}=t.handleScale;Bs(s)&&(t.handleScale.axisPressedMouseMove={time:s,price:s}),Bs(n)&&(t.handleScale.axisDoubleClickReset={time:n,price:n})}const e=t.handleScroll;Bs(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})}(i),i}class sd{constructor(t,e){this.Ym=new Uf,this.Xm=new Map,this.Zm=new Map,this.Km=new Ht,this.Gm=new Ht;const s=e===void 0?Ae(bh):ze(Ae(bh),yh(e));this.Em=new Bf(t,s),this.Em.Wp().l(r=>{this.Km.g()&&this.Km.m(this.Jm(r()))},this),this.Em.dc().l(r=>{this.Gm.g()&&this.Gm.m(this.Jm(r()))},this);const n=this.Em.Ut();this.Qm=new ed(n,this.Em.qv())}remove(){this.Em.Wp().v(this),this.Em.dc().v(this),this.Qm.M(),this.Em.M(),this.Xm.clear(),this.Zm.clear(),this.Km.M(),this.Gm.M(),this.Ym.M()}resize(t,e,s){this.Em.jv(t,e,s)}addAreaSeries(t){return this.tb("Area",Yf,t)}addBaselineSeries(t){return this.tb("Baseline",Kf,t)}addBarSeries(t){return this.tb("Bar",Gf,t)}addCandlestickSeries(t={}){return function(e){e.borderColor!==void 0&&(e.borderUpColor=e.borderColor,e.borderDownColor=e.borderColor),e.wickColor!==void 0&&(e.wickUpColor=e.wickColor,e.wickDownColor=e.wickColor)}(t),this.tb("Candlestick",Wf,t)}addHistogramSeries(t){return this.tb("Histogram",Jf,t)}addLineSeries(t){return this.tb("Line",qf,t)}removeSeries(t){const e=ge(this.Xm.get(t)),s=this.Ym.Bc(e);this.Em.Ut().Bc(e),this.ib(s),this.Xm.delete(t),this.Zm.delete(e)}Wm(t,e){this.ib(this.Ym.ym(t,e))}jm(t,e){this.ib(this.Ym.Rm(t,e))}subscribeClick(t){this.Km.l(t)}unsubscribeClick(t){this.Km.p(t)}subscribeCrosshairMove(t){this.Gm.l(t)}unsubscribeCrosshairMove(t){this.Gm.p(t)}priceScale(t){return new Qf(this.Em,t)}timeScale(){return this.Qm}applyOptions(t){this.Em.kh(yh(t))}options(){return this.Em.F()}takeScreenshot(){return this.Em.Kv()}tb(t,e,s={}){id(s.priceFormat);const n=ze(Ae(Xf),Ae(e),s),r=this.Em.Ut().Rc(t,n),o=new td(r,this,this);return this.Xm.set(o,r),this.Zm.set(r,o),o}ib(t){const e=this.Em.Ut();e.Tc(t.yt.su,t.yt.Lm,t.yt.Im),t.Om.forEach((s,n)=>n.tt(s.ar,s.Am)),e.hu()}nb(t){return ge(this.Zm.get(t))}Jm(t){const e=new Map;t.um.forEach((n,r)=>{const o=Al(r.Lh())(n);li(function(h){return h.open!==void 0||h.value!==void 0}(o)),e.set(this.nb(r),o)});const s=t._m===void 0?void 0:this.nb(t._m);return{time:t._t,logical:t.Ys,point:t.om,hoveredSeries:s,hoveredObjectId:t.dm,seriesData:e,sourceEvent:t.fm}}}function nd(i,t){let e;if(Lr(i)){const s=document.getElementById(i);li(s!==null,`Cannot find element in DOM with id=${i}`),e=s}else e=i;return new sd(e,t)}function rd(i){let t,e;return{c(){t=B("div"),this.h()},l(s){t=I(s,"DIV",{class:!0}),z(t).forEach(w),this.h()},h(){b(t,"class","overflow-visible w-full h-full min-h-[300px]"),Pr(()=>i[5].call(t))},m(s,n){st(s,t,n),e=Rr(t,i[5].bind(t)),i[6](t)},p:Ie,i:Ie,o:Ie,d(s){s&&w(t),e(),i[6](null)}}}function od(i,t,e){let s,n,r,{data:o}=t,h,a,l;zr(()=>{const f={layout:{background:{type:gr.Solid,color:"transparent"}},autoSize:!0,timeScale:{borderVisible:!1},rightPriceScale:{borderVisible:!1,mode:pr.Normal},watermark:{visible:!0,fontSize:24,horzAlign:"center",vertAlign:"center",color:"#FF3B7688",text:"bcked.com"}};e(4,a=nd(h,f)),a.timeScale().fitContent();const m={lineColor:"#FF3B76",topColor:"#FF3B7688",bottomColor:"#FF3B7600",priceFormat:{type:"percent",precision:2,minMove:.01}};l=a.addAreaSeries(m),l.setData(r)});function u(){s=this.offsetWidth,n=this.offsetHeight,e(1,s),e(0,n)}function c(f){hn[f?"unshift":"push"](()=>{h=f,e(2,h)})}return i.$$set=f=>{"data"in f&&e(3,o=f.data)},i.$$.update=()=>{i.$$.dirty&8&&(r=o.map(({date:f,value:m})=>({time:new Date(f).getTime()/1e3,value:m*100}))),i.$$.dirty&19&&(a==null||a.resize(s,n))},e(1,s=0),e(0,n=0),[n,s,h,o,a,u,c]}class Bl extends Ve{constructor(t){super(),Oe(this,t,od,rd,Ne,{data:3})}}const _r=Math.PI,wr=2*_r,Ze=1e-6,hd=wr-Ze;function Il(i){this._+=i[0];for(let t=1,e=i.length;t<e;++t)this._+=arguments[t]+i[t]}function ld(i){let t=Math.floor(i);if(!(t>=0))throw new Error(`invalid digits: ${i}`);if(t>15)return Il;const e=10**t;return function(s){this._+=s[0];for(let n=1,r=s.length;n<r;++n)this._+=Math.round(arguments[n]*e)/e+s[n]}}class qr{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Il:ld(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,s,n){this._append`Q${+t},${+e},${this._x1=+s},${this._y1=+n}`}bezierCurveTo(t,e,s,n,r,o){this._append`C${+t},${+e},${+s},${+n},${this._x1=+r},${this._y1=+o}`}arcTo(t,e,s,n,r){if(t=+t,e=+e,s=+s,n=+n,r=+r,r<0)throw new Error(`negative radius: ${r}`);let o=this._x1,h=this._y1,a=s-t,l=n-e,u=o-t,c=h-e,f=u*u+c*c;if(this._x1===null)this._append`M${this._x1=t},${this._y1=e}`;else if(f>Ze)if(!(Math.abs(c*a-l*u)>Ze)||!r)this._append`L${this._x1=t},${this._y1=e}`;else{let m=s-o,d=n-h,p=a*a+l*l,E=m*m+d*d,C=Math.sqrt(p),k=Math.sqrt(f),M=r*Math.tan((_r-Math.acos((p+f-E)/(2*C*k)))/2),L=M/k,F=M/C;Math.abs(L-1)>Ze&&this._append`L${t+L*u},${e+L*c}`,this._append`A${r},${r},0,0,${+(c*m>u*d)},${this._x1=t+F*a},${this._y1=e+F*l}`}}arc(t,e,s,n,r,o){if(t=+t,e=+e,s=+s,o=!!o,s<0)throw new Error(`negative radius: ${s}`);let h=s*Math.cos(n),a=s*Math.sin(n),l=t+h,u=e+a,c=1^o,f=o?n-r:r-n;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>Ze||Math.abs(this._y1-u)>Ze)&&this._append`L${l},${u}`,s&&(f<0&&(f=f%wr+wr),f>hd?this._append`A${s},${s},0,1,${c},${t-h},${e-a}A${s},${s},0,1,${c},${this._x1=l},${this._y1=u}`:f>Ze&&this._append`A${s},${s},0,${+(f>=_r)},${c},${this._x1=t+s*Math.cos(r)},${this._y1=e+s*Math.sin(r)}`)}rect(t,e,s,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${s=+s}v${+n}h${-s}Z`}toString(){return this._}}function Ul(){return new qr}Ul.prototype=qr.prototype;function Ft(i){return function(){return i}}function Hl(i){let t=3;return i.digits=function(e){if(!arguments.length)return t;if(e==null)t=null;else{const s=Math.floor(e);if(!(s>=0))throw new RangeError(`invalid digits: ${e}`);t=s}return i},()=>new qr(t)}function jl(i){return typeof i=="object"&&"length"in i?i:Array.from(i)}function Wl(i){this._context=i}Wl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(i,t){switch(i=+i,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(i,t):this._context.moveTo(i,t);break;case 1:this._point=2;default:this._context.lineTo(i,t);break}}};function Gl(i){return new Wl(i)}function ql(i){return i[0]}function Yl(i){return i[1]}function ad(i,t){var e=Ft(!0),s=null,n=Gl,r=null,o=Hl(h);i=typeof i=="function"?i:i===void 0?ql:Ft(i),t=typeof t=="function"?t:t===void 0?Yl:Ft(t);function h(a){var l,u=(a=jl(a)).length,c,f=!1,m;for(s==null&&(r=n(m=o())),l=0;l<=u;++l)!(l<u&&e(c=a[l],l,a))===f&&((f=!f)?r.lineStart():r.lineEnd()),f&&r.point(+i(c,l,a),+t(c,l,a));if(m)return r=null,m+""||null}return h.x=function(a){return arguments.length?(i=typeof a=="function"?a:Ft(+a),h):i},h.y=function(a){return arguments.length?(t=typeof a=="function"?a:Ft(+a),h):t},h.defined=function(a){return arguments.length?(e=typeof a=="function"?a:Ft(!!a),h):e},h.curve=function(a){return arguments.length?(n=a,s!=null&&(r=n(s)),h):n},h.context=function(a){return arguments.length?(a==null?s=r=null:r=n(s=a),h):s},h}function ud(i,t,e){var s=null,n=Ft(!0),r=null,o=Gl,h=null,a=Hl(l);i=typeof i=="function"?i:i===void 0?ql:Ft(+i),t=typeof t=="function"?t:Ft(t===void 0?0:+t),e=typeof e=="function"?e:e===void 0?Yl:Ft(+e);function l(c){var f,m,d,p=(c=jl(c)).length,E,C=!1,k,M=new Array(p),L=new Array(p);for(r==null&&(h=o(k=a())),f=0;f<=p;++f){if(!(f<p&&n(E=c[f],f,c))===C)if(C=!C)m=f,h.areaStart(),h.lineStart();else{for(h.lineEnd(),h.lineStart(),d=f-1;d>=m;--d)h.point(M[d],L[d]);h.lineEnd(),h.areaEnd()}C&&(M[f]=+i(E,f,c),L[f]=+t(E,f,c),h.point(s?+s(E,f,c):M[f],e?+e(E,f,c):L[f]))}if(k)return h=null,k+""||null}function u(){return ad().defined(n).curve(o).context(r)}return l.x=function(c){return arguments.length?(i=typeof c=="function"?c:Ft(+c),s=null,l):i},l.x0=function(c){return arguments.length?(i=typeof c=="function"?c:Ft(+c),l):i},l.x1=function(c){return arguments.length?(s=c==null?null:typeof c=="function"?c:Ft(+c),l):s},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Ft(+c),e=null,l):t},l.y0=function(c){return arguments.length?(t=typeof c=="function"?c:Ft(+c),l):t},l.y1=function(c){return arguments.length?(e=c==null?null:typeof c=="function"?c:Ft(+c),l):e},l.lineX0=l.lineY0=function(){return u().x(i).y(t)},l.lineY1=function(){return u().x(i).y(e)},l.lineX1=function(){return u().x(s).y(t)},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Ft(!!c),l):n},l.curve=function(c){return arguments.length?(o=c,r!=null&&(h=o(r)),l):o},l.context=function(c){return arguments.length?(c==null?r=h=null:h=o(r=c),l):r},l}function ss(i,t,e){this.k=i,this.x=t,this.y=e}ss.prototype={constructor:ss,scale:function(i){return i===1?this:new ss(this.k*i,this.x,this.y)},translate:function(i,t){return i===0&t===0?this:new ss(this.k,this.x+this.k*i,this.y+this.k*t)},apply:function(i){return[i[0]*this.k+this.x,i[1]*this.k+this.y]},applyX:function(i){return i*this.k+this.x},applyY:function(i){return i*this.k+this.y},invert:function(i){return[(i[0]-this.x)/this.k,(i[1]-this.y)/this.k]},invertX:function(i){return(i-this.x)/this.k},invertY:function(i){return(i-this.y)/this.k},rescaleX:function(i){return i.copy().domain(i.range().map(this.invertX,this).map(i.invert,i))},rescaleY:function(i){return i.copy().domain(i.range().map(this.invertY,this).map(i.invert,i))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};ss.prototype;function cd(i){let t,e,s,n,r,o,h,a,l,u,c,f,m;return{c(){t=B("div"),e=vt("svg"),s=vt("g"),n=vt("defs"),r=vt("clipPath"),o=vt("path"),h=vt("animateTransform"),c=vt("g"),f=vt("rect"),this.h()},l(d){t=I(d,"DIV",{class:!0});var p=z(t);e=bt(p,"svg",{width:!0,height:!0});var E=z(e);s=bt(E,"g",{});var C=z(s);n=bt(C,"defs",{});var k=z(n);r=bt(k,"clipPath",{id:!0,transform:!0});var M=z(r);o=bt(M,"path",{d:!0});var L=z(o);h=bt(L,"animateTransform",{attributeName:!0,attributeType:!0,type:!0,from:!0,to:!0,dur:!0,repeatCount:!0}),z(h).forEach(w),L.forEach(w),M.forEach(w),k.forEach(w),c=bt(C,"g",{"clip-path":!0});var F=z(c);f=bt(F,"rect",{width:!0,height:!0,fill:!0}),z(f).forEach(w),F.forEach(w),C.forEach(w),E.forEach(w),p.forEach(w),this.h()},h(){b(h,"attributeName","transform"),b(h,"attributeType","XML"),b(h,"type","translate"),b(h,"from","0"),b(h,"to",a="-"+i[4]*2),b(h,"dur",l=i[2]+"ms"),b(h,"repeatCount","indefinite"),b(o,"d",i[7]),b(r,"id","clipWave-"+i[9]),b(r,"transform",u="translate("+i[8]+", "+i[6](ur(i[1],0,1))+")"),b(f,"width",i[4]),b(f,"height",i[5]),b(f,"fill",i[3]),b(c,"clip-path","url(#clipWave-"+i[9]+")"),b(e,"width",i[4]),b(e,"height",i[5]),b(t,"class",i[0]),Pr(()=>i[22].call(t))},m(d,p){st(d,t,p),_(t,e),_(e,s),_(s,n),_(n,r),_(r,o),_(o,h),_(s,c),_(c,f),m=Rr(t,i[22].bind(t))},p(d,[p]){p&16&&a!==(a="-"+d[4]*2)&&b(h,"to",a),p&4&&l!==(l=d[2]+"ms")&&b(h,"dur",l),p&128&&b(o,"d",d[7]),p&322&&u!==(u="translate("+d[8]+", "+d[6](ur(d[1],0,1))+")")&&b(r,"transform",u),p&16&&b(f,"width",d[4]),p&32&&b(f,"height",d[5]),p&8&&b(f,"fill",d[3]),p&16&&b(e,"width",d[4]),p&32&&b(e,"height",d[5]),p&1&&b(t,"class",d[0])},i:Ie,o:Ie,d(d){d&&w(t),m()}}}let fd=100,_h=2;function dd(i,t,e){let{class:s=""}=t,{fillPercent:n}=t,{circleThickness:r=.05}=t,{circleFillGap:o=.05}=t,{waveHeight:h=.05}=t,{waveAnimateTime:a=18e3}=t,{waveHeightScaling:l=!0}=t,{waveColor:u="#178BCA"}=t,{waveOffset:c=0}=t;const m=`fill-gauge-${Math.floor(Math.random()*100)}`;let d=0,p=0,E=N=>0,C=0,k=fd*_h,M=N=>0,L=N=>0,F=N=>0,G=N=>[],H=[],X=N=>"",j="",W=0;function A(){d=this.offsetWidth,p=this.offsetHeight,e(4,d),e(5,p)}return i.$$set=N=>{"class"in N&&e(0,s=N.class),"fillPercent"in N&&e(1,n=N.fillPercent),"circleThickness"in N&&e(10,r=N.circleThickness),"circleFillGap"in N&&e(11,o=N.circleFillGap),"waveHeight"in N&&e(12,h=N.waveHeight),"waveAnimateTime"in N&&e(2,a=N.waveAnimateTime),"waveHeightScaling"in N&&e(13,l=N.waveHeightScaling),"waveColor"in N&&e(3,u=N.waveColor),"waveOffset"in N&&e(14,c=N.waveOffset)},i.$$.update=()=>{i.$$.dirty&12288&&e(15,E=l?Fe().range([0,h,0]).domain([0,50,100]):Fe().range([h,h]).domain([0,100])),i.$$.dirty&32770&&e(16,C=50*E(ur(n,0,1)*100)),i.$$.dirty&16&&e(17,M=Fe().range([0,d*4]).domain([0,1])),i.$$.dirty&65536&&e(18,L=Fe().range([0,C]).domain([0,1])),i.$$.dirty&65536&&e(6,F=Fe().range([100+C,-C]).domain([0,1])),i.$$.dirty&524288&&e(20,H=G(_h)),i.$$.dirty&475136&&e(21,X=ud().x(N=>M(N.x)).y0(N=>L(Math.sin(Math.PI*2*c*-1+N.y*2*Math.PI))).y1(N=>100+C+20)),i.$$.dirty&3145728&&e(7,j=X(H))},e(19,G=N=>{let Z=[];for(let R=0;R<=40*N;R++)Z.push({x:R/(40*N),y:R/40});return Z}),e(8,W=100-k),[s,n,a,u,d,p,F,j,W,m,r,o,h,l,c,E,C,M,L,G,H,X,A]}class md extends Ve{constructor(t){super(),Oe(this,t,dd,cd,Ne,{class:0,fillPercent:1,circleThickness:10,circleFillGap:11,waveHeight:12,waveAnimateTime:2,waveHeightScaling:13,waveColor:3,waveOffset:14})}}function wh(i,t){let e;if(t===void 0)for(const s of i)s!=null&&(e<s||e===void 0&&s>=s)&&(e=s);else{let s=-1;for(let n of i)(n=t(n,++s,i))!=null&&(e<n||e===void 0&&n>=n)&&(e=n)}return e}function pd(i,t){let e;if(t===void 0)for(const s of i)s!=null&&(e>s||e===void 0&&s>=s)&&(e=s);else{let s=-1;for(let n of i)(n=t(n,++s,i))!=null&&(e>n||e===void 0&&n>=n)&&(e=n)}return e}function sr(i,t){let e=0;if(t===void 0)for(let s of i)(s=+s)&&(e+=s);else{let s=-1;for(let n of i)(n=+t(n,++s,i))&&(e+=n)}return e}function Kl(i,t){return i.sourceLinks.length?i.depth:t-1}function Ks(i){return function(){return i}}function xh(i,t){return xn(i.source,t.source)||i.index-t.index}function Mh(i,t){return xn(i.target,t.target)||i.index-t.index}function xn(i,t){return i.y0-t.y0}function nr(i){return i.value}function gd(i){return i.index}function vd(i){return i.nodes}function bd(i){return i.links}function Sh(i,t){const e=i.get(t);if(!e)throw new Error("missing: "+t);return e}function Ch({nodes:i}){for(const t of i){let e=t.y0,s=e;for(const n of t.sourceLinks)n.y0=e+n.width/2,e+=n.width;for(const n of t.targetLinks)n.y1=s+n.width/2,s+=n.width}}function yd(){let i=0,t=0,e=1,s=1,n=24,r=8,o,h=gd,a=Kl,l,u,c=vd,f=bd,m=6;function d(){const y={nodes:c.apply(null,arguments),links:f.apply(null,arguments)};return p(y),E(y),C(y),k(y),F(y),Ch(y),y}d.update=function(y){return Ch(y),y},d.nodeId=function(y){return arguments.length?(h=typeof y=="function"?y:Ks(y),d):h},d.nodeAlign=function(y){return arguments.length?(a=typeof y=="function"?y:Ks(y),d):a},d.nodeSort=function(y){return arguments.length?(l=y,d):l},d.nodeWidth=function(y){return arguments.length?(n=+y,d):n},d.nodePadding=function(y){return arguments.length?(r=o=+y,d):r},d.nodes=function(y){return arguments.length?(c=typeof y=="function"?y:Ks(y),d):c},d.links=function(y){return arguments.length?(f=typeof y=="function"?y:Ks(y),d):f},d.linkSort=function(y){return arguments.length?(u=y,d):u},d.size=function(y){return arguments.length?(i=t=0,e=+y[0],s=+y[1],d):[e-i,s-t]},d.extent=function(y){return arguments.length?(i=+y[0][0],e=+y[1][0],t=+y[0][1],s=+y[1][1],d):[[i,t],[e,s]]},d.iterations=function(y){return arguments.length?(m=+y,d):m};function p({nodes:y,links:T}){for(const[O,g]of y.entries())g.index=O,g.sourceLinks=[],g.targetLinks=[];const x=new Map(y.map((O,g)=>[h(O,g,y),O]));for(const[O,g]of T.entries()){g.index=O;let{source:P,target:U}=g;typeof P!="object"&&(P=g.source=Sh(x,P)),typeof U!="object"&&(U=g.target=Sh(x,U)),P.sourceLinks.push(g),U.targetLinks.push(g)}if(u!=null)for(const{sourceLinks:O,targetLinks:g}of y)O.sort(u),g.sort(u)}function E({nodes:y}){for(const T of y)T.value=T.fixedValue===void 0?Math.max(sr(T.sourceLinks,nr),sr(T.targetLinks,nr)):T.fixedValue}function C({nodes:y}){const T=y.length;let x=new Set(y),O=new Set,g=0;for(;x.size;){for(const P of x){P.depth=g;for(const{target:U}of P.sourceLinks)O.add(U)}if(++g>T)throw new Error("circular link");x=O,O=new Set}}function k({nodes:y}){const T=y.length;let x=new Set(y),O=new Set,g=0;for(;x.size;){for(const P of x){P.height=g;for(const{source:U}of P.targetLinks)O.add(U)}if(++g>T)throw new Error("circular link");x=O,O=new Set}}function M({nodes:y}){const T=wh(y,g=>g.depth)+1,x=(e-i-n)/(T-1),O=new Array(T);for(const g of y){const P=Math.max(0,Math.min(T-1,Math.floor(a.call(null,g,T))));g.layer=P,g.x0=i+P*x,g.x1=g.x0+n,O[P]?O[P].push(g):O[P]=[g]}if(l)for(const g of O)g.sort(l);return O}function L(y){const T=pd(y,x=>(s-t-(x.length-1)*o)/sr(x,nr));for(const x of y){let O=t;for(const g of x){g.y0=O,g.y1=O+g.value*T,O=g.y1+o;for(const P of g.sourceLinks)P.width=P.value*T}O=(s-O+o)/(x.length+1);for(let g=0;g<x.length;++g){const P=x[g];P.y0+=O*(g+1),P.y1+=O*(g+1)}N(x)}}function F(y){const T=M(y);o=Math.min(r,(s-t)/(wh(T,x=>x.length)-1)),L(T);for(let x=0;x<m;++x){const O=Math.pow(.99,x),g=Math.max(1-O,(x+1)/m);H(T,O,g),G(T,O,g)}}function G(y,T,x){for(let O=1,g=y.length;O<g;++O){const P=y[O];for(const U of P){let J=0,Q=0;for(const{source:ht,value:Tt}of U.targetLinks){let dt=Tt*(U.layer-ht.layer);J+=Z(ht,U)*dt,Q+=dt}if(!(Q>0))continue;let xt=(J/Q-U.y0)*T;U.y0+=xt,U.y1+=xt,A(U)}l===void 0&&P.sort(xn),X(P,x)}}function H(y,T,x){for(let O=y.length,g=O-2;g>=0;--g){const P=y[g];for(const U of P){let J=0,Q=0;for(const{target:ht,value:Tt}of U.sourceLinks){let dt=Tt*(ht.layer-U.layer);J+=R(U,ht)*dt,Q+=dt}if(!(Q>0))continue;let xt=(J/Q-U.y0)*T;U.y0+=xt,U.y1+=xt,A(U)}l===void 0&&P.sort(xn),X(P,x)}}function X(y,T){const x=y.length>>1,O=y[x];W(y,O.y0-o,x-1,T),j(y,O.y1+o,x+1,T),W(y,s,y.length-1,T),j(y,t,0,T)}function j(y,T,x,O){for(;x<y.length;++x){const g=y[x],P=(T-g.y0)*O;P>1e-6&&(g.y0+=P,g.y1+=P),T=g.y1+o}}function W(y,T,x,O){for(;x>=0;--x){const g=y[x],P=(g.y1-T)*O;P>1e-6&&(g.y0-=P,g.y1-=P),T=g.y0-o}}function A({sourceLinks:y,targetLinks:T}){if(u===void 0){for(const{source:{sourceLinks:x}}of T)x.sort(Mh);for(const{target:{targetLinks:x}}of y)x.sort(xh)}}function N(y){if(u===void 0)for(const{sourceLinks:T,targetLinks:x}of y)T.sort(Mh),x.sort(xh)}function Z(y,T){let x=y.y0-(y.sourceLinks.length-1)*o/2;for(const{target:O,width:g}of y.sourceLinks){if(O===T)break;x+=g+o}for(const{source:O,width:g}of T.targetLinks){if(O===y)break;x-=g}return x}function R(y,T){let x=T.y0-(T.targetLinks.length-1)*o/2;for(const{source:O,width:g}of T.targetLinks){if(O===y)break;x+=g+o}for(const{target:O,width:g}of y.sourceLinks){if(O===T)break;x-=g}return x}return d}function Eh(i,t,e){var c;const s=i.slice();s[17]=t[e],s[26]=e;const n=(c=s[0].getNode(s[17].id))==null?void 0:c.data;s[18]=n;const r=s[17].y1-s[17].y0;s[19]=r;const o=Math.min(s[1],s[19])*.8;s[20]=o;const h=s[19]>300;s[21]=h;const a=s[19]>150;s[22]=a;const l=s[19]>100;s[23]=l;const u=s[19]>10;return s[24]=u,s}function Th(i,t,e){const s=i.slice();return s[17]=t[e],s[26]=e,s}function kh(i){let t,e,s;return{c(){t=vt("g"),e=vt("path"),this.h()},l(n){t=bt(n,"g",{class:!0});var r=z(t);e=bt(r,"path",{class:!0,d:!0}),z(e).forEach(w),r.forEach(w),this.h()},h(){b(e,"class","opacity-40 fill-neon-pink group-hover:fill-neon-blue"),b(e,"d",s=i[6](i[17])),b(t,"class","sankey-link group")},m(n,r){st(n,t,r),_(t,e)},p(n,r){r&4&&s!==(s=n[6](n[17]))&&b(e,"d",s)},d(n){n&&w(t)}}}function _d(i){let t,e,s;function n(h,a){var l,u,c,f;if(h[22]&&((u=(l=h[18])==null?void 0:l.details)!=null&&u.name))return Cd;if(h[22])return Sd;if(h[23]&&((f=(c=h[18])==null?void 0:c.details)!=null&&f.symbol))return Md;if(h[23])return xd}let r=n(i),o=r&&r(i);return{c(){t=vt("text"),o&&o.c(),this.h()},l(h){t=bt(h,"text",{class:!0,x:!0,y:!0,"dominant-baseline":!0,"text-anchor":!0});var a=z(t);o&&o.l(a),a.forEach(w),this.h()},h(){b(t,"class","pointer-events-none fill-black text-xs"),b(t,"x",e=i[17].y0+i[19]/2),b(t,"y",s=i[17].x0+i[1]/2),b(t,"dominant-baseline","central"),b(t,"text-anchor","middle")},m(h,a){st(h,t,a),o&&o.m(t,null)},p(h,a){r===(r=n(h))&&o?o.p(h,a):(o&&o.d(1),o=r&&r(h),o&&(o.c(),o.m(t,null))),a&4&&e!==(e=h[17].y0+h[19]/2)&&b(t,"x",e),a&6&&s!==(s=h[17].x0+h[1]/2)&&b(t,"y",s)},d(h){h&&w(t),o&&o.d()}}}function wd(i){let t,e,s,n,r,o;return{c(){t=vt("image"),this.h()},l(h){t=bt(h,"image",{class:!0,x:!0,y:!0,href:!0,height:!0,width:!0,"dominant-baseline":!0,"text-anchor":!0}),z(t).forEach(w),this.h()},h(){b(t,"class","drop-shadow-md group-hover:drop-shadow-lg"),b(t,"x",e=i[17].y0+i[19]/2-i[20]/2),b(t,"y",s=i[17].x0+i[1]/2-i[20]/2),b(t,"href",n=bi+"/"+i[18].icon.href),b(t,"height",r=i[20]),b(t,"width",o=i[20]),b(t,"dominant-baseline","central"),b(t,"text-anchor","middle")},m(h,a){st(h,t,a)},p(h,a){a&6&&e!==(e=h[17].y0+h[19]/2-h[20]/2)&&b(t,"x",e),a&6&&s!==(s=h[17].x0+h[1]/2-h[20]/2)&&b(t,"y",s),a&5&&n!==(n=bi+"/"+h[18].icon.href)&&b(t,"href",n),a&6&&r!==(r=h[20])&&b(t,"height",r),a&6&&o!==(o=h[20])&&b(t,"width",o)},d(h){h&&w(t)}}}function xd(i){let t;return{c(){t=q("UNK")},l(e){t=Y(e,"UNK")},m(e,s){st(e,t,s)},p:Ie,d(e){e&&w(t)}}}function Md(i){let t=i[18].details.symbol+"",e;return{c(){e=q(t)},l(s){e=Y(s,t)},m(s,n){st(s,e,n)},p(s,n){n&5&&t!==(t=s[18].details.symbol+"")&&At(e,t)},d(s){s&&w(e)}}}function Sd(i){let t;return{c(){t=q("Unknown Name")},l(e){t=Y(e,"Unknown Name")},m(e,s){st(e,t,s)},p:Ie,d(e){e&&w(t)}}}function Cd(i){let t=i[18].details.name+"",e;return{c(){e=q(t)},l(s){e=Y(s,t)},m(s,n){st(s,e,n)},p(s,n){n&5&&t!==(t=s[18].details.name+"")&&At(e,t)},d(s){s&&w(e)}}}function Ph(i){let t,e,s,n,r;function o(l,u){var c;if((c=l[18])!=null&&c.icon)return wd;if(l[24])return _d}let h=o(i),a=h&&h(i);return{c(){t=vt("g"),e=vt("rect"),a&&a.c(),this.h()},l(l){t=bt(l,"g",{class:!0});var u=z(t);e=bt(u,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,rx:!0,ry:!0}),z(e).forEach(w),a&&a.l(u),u.forEach(w),this.h()},h(){b(e,"class","fill-neon-pink group-hover:fill-neon-blue"),b(e,"x",s=i[17].y0),b(e,"y",n=i[17].x0),b(e,"height",i[1]),b(e,"width",r=i[19]),b(e,"rx","5"),b(e,"ry","5"),b(t,"class","sankey-node group")},m(l,u){st(l,t,u),_(t,e),a&&a.m(t,null)},p(l,u){u&4&&s!==(s=l[17].y0)&&b(e,"x",s),u&4&&n!==(n=l[17].x0)&&b(e,"y",n),u&2&&b(e,"height",l[1]),u&4&&r!==(r=l[19])&&b(e,"width",r),h===(h=o(l))&&a?a.p(l,u):(a&&a.d(1),a=h&&h(l),a&&(a.c(),a.m(t,null)))},d(l){l&&w(t),a&&a.d()}}}function Ed(i){let t,e,s,n,r,o=i[2].links,h=[];for(let u=0;u<o.length;u+=1)h[u]=kh(Th(i,o,u));let a=i[2].nodes,l=[];for(let u=0;u<a.length;u+=1)l[u]=Ph(Eh(i,a,u));return{c(){t=B("div"),e=lt(),s=vt("g"),n=vt("g");for(let u=0;u<h.length;u+=1)h[u].c();r=vt("g");for(let u=0;u<l.length;u+=1)l[u].c();this.h()},l(u){t=I(u,"DIV",{id:!0,class:!0}),z(t).forEach(w),e=at(u),s=bt(u,"g",{class:!0});var c=z(s);n=bt(c,"g",{class:!0});var f=z(n);for(let d=0;d<h.length;d+=1)h[d].l(f);f.forEach(w),r=bt(c,"g",{class:!0});var m=z(r);for(let d=0;d<l.length;d+=1)l[d].l(m);m.forEach(w),c.forEach(w),this.h()},h(){b(t,"id","tooltip"),b(t,"class","hidden absolute"),b(n,"class","sankey-links"),b(r,"class","sankey-nodes"),b(s,"class","sankey-layer")},m(u,c){st(u,t,c),st(u,e,c),st(u,s,c),_(s,n);for(let f=0;f<h.length;f+=1)h[f].m(n,null);_(s,r);for(let f=0;f<l.length;f+=1)l[f].m(r,null)},p(u,[c]){if(c&68){o=u[2].links;let f;for(f=0;f<o.length;f+=1){const m=Th(u,o,f);h[f]?h[f].p(m,c):(h[f]=kh(m),h[f].c(),h[f].m(n,null))}for(;f<h.length;f+=1)h[f].d(1);h.length=o.length}if(c&7){a=u[2].nodes;let f;for(f=0;f<a.length;f+=1){const m=Eh(u,a,f);l[f]?l[f].p(m,c):(l[f]=Ph(m),l[f].c(),l[f].m(r,null))}for(;f<l.length;f+=1)l[f].d(1);l.length=a.length}},i:Ie,o:Ie,d(u){u&&w(t),u&&w(e),u&&w(s),ln(h,u),ln(l,u)}}}function Td(i,t,e){let s,n,r,o,h,{graph:a}=t;const{data:l,width:u,height:c}=$h("LayerCake");K(i,l,M=>e(14,o=M)),K(i,u,M=>e(13,r=M)),K(i,c,M=>e(15,h=M));let{nodeHeight:f=40}=t,{linkWidth:m=M=>.9}=t,{nodePadding:d=10}=t,{nodeId:p=M=>M.id}=t,{nodeAlign:E=Kl}=t,{iterations:C=200}=t;function k(M){let L=M.source.x1,F=M.target.x0,G=M.y0-M.width/2*m(M),H=M.y0+M.width/2*m(M),X=M.y1-M.width/2*m(M),j=M.y1+M.width/2*m(M),W=L+(F-L)/2,A=Ul();return A.moveTo(G,L),A.bezierCurveTo(G,W,X,W,X,F),A.lineTo(j,F),A.bezierCurveTo(j,W,H,W,H,L),A.lineTo(G,L),A.toString()}return i.$$set=M=>{"graph"in M&&e(0,a=M.graph),"nodeHeight"in M&&e(1,f=M.nodeHeight),"linkWidth"in M&&e(7,m=M.linkWidth),"nodePadding"in M&&e(8,d=M.nodePadding),"nodeId"in M&&e(9,p=M.nodeId),"nodeAlign"in M&&e(10,E=M.nodeAlign),"iterations"in M&&e(11,C=M.iterations)},i.$$.update=()=>{i.$$.dirty&44802&&e(12,s=yd().nodeAlign(E).nodeWidth(f).nodePadding(d).nodeId(p).size([h,r]).iterations(C)),i.$$.dirty&20480&&e(2,n=s(o)),i.$$.dirty&8192},[a,f,n,l,u,c,k,m,d,p,E,C,s,r,o,h]}class kd extends Ve{constructor(t){super(),Oe(this,t,Td,Ed,Ne,{graph:0,nodeHeight:1,linkWidth:7,nodePadding:8,nodeId:9,nodeAlign:10,iterations:11})}}function Pd(i){return i===0?!0:i}function Ke(i){return Pd(i)?Array.isArray(i)?t=>i.map(e=>typeof e!="function"?t[e]:e(t)):typeof i!="function"?t=>t[i]:i:null}function Rd(i){const t={};for(const e of i){if(Object(e)!==e)throw new TypeError("iterable for fromEntries should yield objects");const{"0":s,"1":n}=e;Object.defineProperty(t,s,{configurable:!0,enumerable:!0,writable:!0,value:n})}return t}function rr(i,t={}){return Rd(Object.entries(i).filter(([e,s])=>s!==void 0&&t[e]===void 0))}function zd(i,t,{sort:e=!1}={}){if(!Array.isArray(i))throw new TypeError(`The first argument of calcUniques() must be an array. You passed in a ${typeof i}. If you got this error using the <LayerCake> component, consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(t)||t===void 0||t===null)throw new TypeError("The second argument of calcUniques() must be an object with field names as keys as accessor functions as values.");const s={},n=Object.keys(t),r=n.length;let o,h,a,l,u,c,f;const m=i.length;for(o=0;o<r;o+=1){for(f=new Set,l=n[o],u=t[l],h=0;h<m;h+=1)if(c=u(i[h]),Array.isArray(c)){const p=c.length;for(a=0;a<p;a+=1)f.add(c[a])}else f.add(c);const d=Array.from(f);s[l]=e===!0?d.sort():d}return s}function Vd(i,t){if(!Array.isArray(i))throw new TypeError(`The first argument of calcExtents() must be an array. You passed in a ${typeof i}. If you got this error using the <LayerCake> component, consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(t)||t===void 0||t===null)throw new TypeError("The second argument of calcExtents() must be an object with field names as keys as accessor functions as values.");const e={},s=Object.keys(t),n=s.length;let r,o,h,a,l,u,c,f;const m=i.length;for(r=0;r<n;r+=1){for(a=s[r],c=t[a],l=null,u=null,o=0;o<m;o+=1)if(f=c(i[o]),Array.isArray(f)){const d=f.length;for(h=0;h<d;h+=1)f[h]!==!1&&f[h]!==void 0&&f[h]!==null&&Number.isNaN(f[h])===!1&&((l===null||f[h]<l)&&(l=f[h]),(u===null||f[h]>u)&&(u=f[h]))}else f!==!1&&f!==void 0&&f!==null&&Number.isNaN(f)===!1&&((l===null||f<l)&&(l=f),(u===null||f>u)&&(u=f));e[a]=[l,u]}return e}function Od(i){return typeof i.bandwidth=="function"||Nd(Object.keys(i),["domain","range","unknown","copy"])?"ordinal":"other"}function Nd(i,t){return i.length!==t.length?!1:i.every(e=>t.includes(e))}function Dd(i,t,e){const s=Object.keys(e).reduce((r,o)=>{const h=Od(e[o]);return r[h]||(r[h]={}),r[h][o]=t[o],r},{ordinal:!1,other:!1});let n={};return s.ordinal&&(n=zd(i,s.ordinal)),s.other&&(n={...n,...Vd(i,s.other)}),n}function Ld(i=[],t){return Array.isArray(t)===!0?t.map((e,s)=>e===null?i[s]:e):i}function Js(i){return function([e,s]){return typeof s=="function"&&(s=s(e[i])),e?Ld(e[i],s):s}}const ns={x:Fe,y:Fe,z:Fe,r:tc};function Fd(i){return i.constant?"symlog":i.base?"log":i.exponent?i.exponent()===.5?"sqrt":"pow":"other"}function Rh(i){return i}function Ad(i){return t=>Math.log(i*t)}function Bd(i){return t=>i*Math.exp(t)}function Id(i){return t=>Math.sign(t)*Math.log1p(Math.abs(t/i))}function Ud(i){return t=>Math.sign(t)*Math.expm1(Math.abs(t))*i}function Xs(i){return function(e){return e<0?-Math.pow(-e,i):Math.pow(e,i)}}function Hd(i){const t=Fd(i);if(t==="log"){const e=Math.sign(i.domain()[0]);return{lift:Ad(e),ground:Bd(e),scaleType:t}}return t==="pow"?{lift:Xs(1),ground:Xs(1/1),scaleType:t}:t==="sqrt"?{lift:Xs(.5),ground:Xs(1/.5),scaleType:t}:t==="symlog"?{lift:Id(1),ground:Ud(1),scaleType:t}:{lift:Rh,ground:Rh,scaleType:t}}function jd(i,t){if(typeof i.range!="function")throw new Error("Scale method `range` must be a function");if(typeof i.domain!="function")throw new Error("Scale method `domain` must be a function");if(!Array.isArray(t))return i.domain();i.domain().length!==2&&console.warn("[LayerCake] The scale is expected to have a domain of length 2 to use padding. Are you sure you want to use padding? Your scale's domain is:",i.domain()),i.range().length!==2&&console.warn("[LayerCake] The scale is expected to have a range of length 2 to use padding. Are you sure you want to use padding? Your scale's range is:",i.range());const{lift:e,ground:s}=Hd(i),n=i.domain()[0],r=Object.prototype.toString.call(n)==="[object Date]",[o,h]=i.domain().map(m=>e(r?m.getTime():m)),[a,l]=i.range(),u=t[0]||0,c=t[1]||0,f=(h-o)/(Math.abs(l-a)-u-c);return[o-u*f,c*f+h].map(m=>s(r?new Date(m):m))}function Wd(i,t,e,s,n){let r,o;return n===!0?(r=0,o=100):(r=i==="r"?1:0,o=i==="y"?e:i==="r"?25:t),s===!0?[o,r]:[r,o]}function Gd(i,t,e,s,n,r){return n?typeof n=="function"?n({width:t,height:e}):n:Wd(i,t,e,s,r)}function Qs(i){return function([e,s,n,r,o,h,a,l,u,c]){if(s===null)return null;const f=Gd(i,a,l,h,u,c),m=e===ns[i]?e():e.copy();return m.domain(n),(!m.interpolator||typeof m.interpolator=="function"&&m.interpolator().name.startsWith("identity"))&&m.range(f),r&&m.domain(jd(m,r)),(o===!0||typeof o=="number")&&(typeof m.nice=="function"?m.nice(typeof o=="number"?o:void 0):console.error(`[Layer Cake] You set \`${i}Nice: true\` but the ${i}Scale does not have a \`.nice\` method. Ignoring...`)),m}}function Zs([i,t]){return e=>{const s=i(e);return Array.isArray(s)?s.map(n=>t(n)):t(s)}}function $s([i]){if(typeof i=="function"){if(typeof i.range=="function")return i.range();console.error("[LayerCake] Your scale doesn't have a `.range` method?")}return null}const qd=i=>({element:i[0]&4,width:i[0]&256,height:i[0]&512,aspectRatio:i[0]&1024,containerWidth:i[0]&128,containerHeight:i[0]&64}),zh=i=>({element:i[2],width:i[8],height:i[9],aspectRatio:i[10],containerWidth:i[7],containerHeight:i[6]});function Vh(i){let t,e,s;const n=i[90].default,r=Mi(n,i,i[89],zh);return{c(){t=B("div"),r&&r.c(),this.h()},l(o){t=I(o,"DIV",{class:!0});var h=z(t);r&&r.l(h),h.forEach(w),this.h()},h(){b(t,"class","layercake-container svelte-vhzpsp"),Pr(()=>i[92].call(t)),Yt(t,"position",i[5]),Yt(t,"top",i[5]==="absolute"?"0":null),Yt(t,"right",i[5]==="absolute"?"0":null),Yt(t,"bottom",i[5]==="absolute"?"0":null),Yt(t,"left",i[5]==="absolute"?"0":null),Yt(t,"pointer-events",i[4]===!1?"none":null)},m(o,h){st(o,t,h),r&&r.m(t,null),i[91](t),e=Rr(t,i[92].bind(t)),s=!0},p(o,h){r&&r.p&&(!s||h[0]&1988|h[2]&134217728)&&Ci(r,n,o,o[89],s?Ti(n,o[89],h,qd):Ei(o[89]),zh),h[0]&32&&Yt(t,"position",o[5]),h[0]&32&&Yt(t,"top",o[5]==="absolute"?"0":null),h[0]&32&&Yt(t,"right",o[5]==="absolute"?"0":null),h[0]&32&&Yt(t,"bottom",o[5]==="absolute"?"0":null),h[0]&32&&Yt(t,"left",o[5]==="absolute"?"0":null),h[0]&16&&Yt(t,"pointer-events",o[4]===!1?"none":null)},i(o){s||(tt(r,o),s=!0)},o(o){nt(r,o),s=!1},d(o){o&&w(t),r&&r.d(o),i[91](null),e()}}}function Yd(i){let t,e,s=(i[3]===!0||typeof window<"u")&&Vh(i);return{c(){s&&s.c(),t=ho()},l(n){s&&s.l(n),t=ho()},m(n,r){s&&s.m(n,r),st(n,t,r),e=!0},p(n,r){n[3]===!0||typeof window<"u"?s?(s.p(n,r),r[0]&8&&tt(s,1)):(s=Vh(n),s.c(),tt(s,1),s.m(t.parentNode,t)):s&&(ti(),nt(s,1,1,()=>{s=null}),ei())},i(n){e||(tt(s),e=!0)},o(n){nt(s),e=!1},d(n){s&&s.d(n),n&&w(t)}}}function Kd(i,t,e){let s,n,r,o,h,a,l,u,c,f,m,d,p,E,C,k,M,L,F,G,H,X,j,W,A,N,Z,R,y,T,x,O,g,P,U,J,Q,xt,ht,Tt,dt,{$$slots:Bt={},$$scope:jt}=t,{ssr:Wt=!1}=t,{pointerEvents:St=!0}=t,{position:mt="relative"}=t,{percentRange:kt=!1}=t,{width:ut=void 0}=t,{height:ct=void 0}=t,{containerWidth:pt=ut||100}=t,{containerHeight:Pt=ct||100}=t,{element:Nt=void 0}=t,{x:ft=void 0}=t,{y:It=void 0}=t,{z:Ct=void 0}=t,{r:Gt=void 0}=t,{data:Qt=[]}=t,{xDomain:Zt=void 0}=t,{yDomain:_t=void 0}=t,{zDomain:gt=void 0}=t,{rDomain:ue=void 0}=t,{xNice:be=!1}=t,{yNice:ye=!1}=t,{zNice:D=!1}=t,{rNice:$=!1}=t,{xPadding:Rt=void 0}=t,{yPadding:zt=void 0}=t,{zPadding:Vt=void 0}=t,{rPadding:qt=void 0}=t,{xScale:wt=ns.x}=t,{yScale:Et=ns.y}=t,{zScale:ce=ns.z}=t,{rScale:_e=ns.r}=t,{xRange:fe=void 0}=t,{yRange:$t=void 0}=t,{zRange:de=void 0}=t,{rRange:me=void 0}=t,{xReverse:we=!1}=t,{yReverse:te=typeof Et.bandwidth!="function"}=t,{zReverse:xe=!1}=t,{rReverse:ee=!1}=t,{padding:Me={}}=t,{extents:ie={}}=t,{flatData:Se=void 0}=t,{custom:se={}}=t,ae=!1;zr(()=>{ae=!0});const rt={},Dt=it(kt);K(i,Dt,v=>e(128,xt=v));const ui=it(pt);K(i,ui,v=>e(7,Q=v));const ci=it(Pt);K(i,ci,v=>e(6,J=v));const ws=it(rr(ie));K(i,ws,v=>e(127,U=v));const xs=it(Qt);K(i,xs,v=>e(126,P=v));const Ni=it(Se||Qt);K(i,Ni,v=>e(125,g=v));const Ms=it(Me);K(i,Ms,v=>e(124,O=v));const fi=it(Ke(ft));K(i,fi,v=>e(123,x=v));const di=it(Ke(It));K(i,di,v=>e(122,T=v));const mi=it(Ke(Ct));K(i,mi,v=>e(121,y=v));const pi=it(Ke(Gt));K(i,pi,v=>e(120,R=v));const Ss=it(Zt);K(i,Ss,v=>e(119,Z=v));const Cs=it(_t);K(i,Cs,v=>e(118,N=v));const Es=it(gt);K(i,Es,v=>e(117,A=v));const Ts=it(ue);K(i,Ts,v=>e(116,W=v));const Di=it(be);K(i,Di,v=>e(115,j=v));const Li=it(ye);K(i,Li,v=>e(114,X=v));const Fi=it(D);K(i,Fi,v=>e(113,H=v));const Ai=it($);K(i,Ai,v=>e(112,G=v));const Bi=it(we);K(i,Bi,v=>e(111,F=v));const Ii=it(te);K(i,Ii,v=>e(110,L=v));const Ui=it(xe);K(i,Ui,v=>e(109,M=v));const Hi=it(ee);K(i,Hi,v=>e(108,k=v));const ji=it(Rt);K(i,ji,v=>e(107,C=v));const Wi=it(zt);K(i,Wi,v=>e(106,E=v));const Gi=it(Vt);K(i,Gi,v=>e(105,p=v));const qi=it(qt);K(i,qi,v=>e(104,d=v));const ks=it(fe);K(i,ks,v=>e(103,m=v));const Ps=it($t);K(i,Ps,v=>e(102,f=v));const Rs=it(de);K(i,Rs,v=>e(101,c=v));const zs=it(me);K(i,zs,v=>e(100,u=v));const Yi=it(wt);K(i,Yi,v=>e(99,l=v));const Ki=it(Et);K(i,Ki,v=>e(98,a=v));const Ji=it(ce);K(i,Ji,v=>e(97,h=v));const Xi=it(_e);K(i,Xi,v=>e(96,o=v));const Vs=it(rt);K(i,Vs,v=>e(94,n=v));const Os=it(se);K(i,Os,v=>e(95,r=v));const to=Mt([fi,di,mi,pi],([v,Le,Ce,Lt])=>{const Qe={};return v&&(Qe.x=v),Le&&(Qe.y=Le),Ce&&(Qe.z=Ce),Lt&&(Qe.r=Lt),Qe}),eo=Mt([Ms,ui,ci],([v])=>Object.assign({top:0,right:0,bottom:0,left:0},v)),io=Mt([ui,ci,eo],([v,Le,Ce])=>{const Lt={};return Lt.top=Ce.top,Lt.right=v-Ce.right,Lt.bottom=Le-Ce.bottom,Lt.left=Ce.left,Lt.width=Lt.right-Lt.left,Lt.height=Lt.bottom-Lt.top,Lt.width<=0&&ae===!0&&console.warn("[LayerCake] Target div has zero or negative width. Did you forget to set an explicit width in CSS on the container?"),Lt.height<=0&&ae===!0&&console.warn("[LayerCake] Target div has zero or negative height. Did you forget to set an explicit height in CSS on the container?"),Lt}),Ge=Mt([io],([v])=>v.width);K(i,Ge,v=>e(8,ht=v));const qe=Mt([io],([v])=>v.height);K(i,qe,v=>e(9,Tt=v));const De=Mt([Ni,to,ws,Yi,Ki,Xi,Ji],([v,Le,Ce,Lt,Qe,Pa,Ra])=>{const za={x:Lt,y:Qe,r:Pa,z:Ra},An=rr(Le,Ce),Va=Object.fromEntries(Object.keys(An).map(Bn=>[Bn,za[Bn]]));return Object.keys(An).length>0?{...Dd(v,An,Va),...Ce}:{}}),so=Mt([De,Ss],Js("x")),no=Mt([De,Cs],Js("y")),ro=Mt([De,Es],Js("z")),oo=Mt([De,Ts],Js("r")),On=Mt([Yi,De,so,ji,Di,Bi,Ge,qe,ks,Dt],Qs("x")),ya=Mt([fi,On],Zs),Nn=Mt([Ki,De,no,Wi,Li,Ii,Ge,qe,Ps,Dt],Qs("y")),_a=Mt([di,Nn],Zs),Dn=Mt([Ji,De,ro,Gi,Fi,Ui,Ge,qe,Rs,Dt],Qs("z")),wa=Mt([mi,Dn],Zs),Ln=Mt([Xi,De,oo,qi,Ai,Hi,Ge,qe,zs,Dt],Qs("r")),xa=Mt([pi,Ln],Zs),Ma=Mt([On],$s),Sa=Mt([Nn],$s),Ca=Mt([Dn],$s),Ea=Mt([Ln],$s),Fn=Mt([Ge,qe],([v,Le])=>v/Le);K(i,Fn,v=>e(10,dt=v));function Ta(v){hn[v?"unshift":"push"](()=>{Nt=v,e(2,Nt)})}function ka(){pt=this.clientWidth,Pt=this.clientHeight,e(0,pt),e(1,Pt)}return i.$$set=v=>{"ssr"in v&&e(3,Wt=v.ssr),"pointerEvents"in v&&e(4,St=v.pointerEvents),"position"in v&&e(5,mt=v.position),"percentRange"in v&&e(51,kt=v.percentRange),"width"in v&&e(52,ut=v.width),"height"in v&&e(53,ct=v.height),"containerWidth"in v&&e(0,pt=v.containerWidth),"containerHeight"in v&&e(1,Pt=v.containerHeight),"element"in v&&e(2,Nt=v.element),"x"in v&&e(54,ft=v.x),"y"in v&&e(55,It=v.y),"z"in v&&e(56,Ct=v.z),"r"in v&&e(57,Gt=v.r),"data"in v&&e(58,Qt=v.data),"xDomain"in v&&e(59,Zt=v.xDomain),"yDomain"in v&&e(60,_t=v.yDomain),"zDomain"in v&&e(61,gt=v.zDomain),"rDomain"in v&&e(62,ue=v.rDomain),"xNice"in v&&e(63,be=v.xNice),"yNice"in v&&e(64,ye=v.yNice),"zNice"in v&&e(65,D=v.zNice),"rNice"in v&&e(66,$=v.rNice),"xPadding"in v&&e(67,Rt=v.xPadding),"yPadding"in v&&e(68,zt=v.yPadding),"zPadding"in v&&e(69,Vt=v.zPadding),"rPadding"in v&&e(70,qt=v.rPadding),"xScale"in v&&e(71,wt=v.xScale),"yScale"in v&&e(72,Et=v.yScale),"zScale"in v&&e(73,ce=v.zScale),"rScale"in v&&e(74,_e=v.rScale),"xRange"in v&&e(75,fe=v.xRange),"yRange"in v&&e(76,$t=v.yRange),"zRange"in v&&e(77,de=v.zRange),"rRange"in v&&e(78,me=v.rRange),"xReverse"in v&&e(79,we=v.xReverse),"yReverse"in v&&e(80,te=v.yReverse),"zReverse"in v&&e(81,xe=v.zReverse),"rReverse"in v&&e(82,ee=v.rReverse),"padding"in v&&e(83,Me=v.padding),"extents"in v&&e(84,ie=v.extents),"flatData"in v&&e(85,Se=v.flatData),"custom"in v&&e(86,se=v.custom),"$$scope"in v&&e(89,jt=v.$$scope)},i.$$.update=()=>{i.$$.dirty[1]&8388608&&ft&&e(87,rt.x=ft,rt),i.$$.dirty[1]&16777216&&It&&e(87,rt.y=It,rt),i.$$.dirty[1]&33554432&&Ct&&e(87,rt.z=Ct,rt),i.$$.dirty[1]&67108864&&Gt&&e(87,rt.r=Gt,rt),i.$$.dirty[1]&268435456&&Zt&&e(87,rt.xDomain=Zt,rt),i.$$.dirty[1]&536870912&&_t&&e(87,rt.yDomain=_t,rt),i.$$.dirty[1]&1073741824&&gt&&e(87,rt.zDomain=gt,rt),i.$$.dirty[2]&1&&ue&&e(87,rt.rDomain=ue,rt),i.$$.dirty[2]&8192&&fe&&e(87,rt.xRange=fe,rt),i.$$.dirty[2]&16384&&$t&&e(87,rt.yRange=$t,rt),i.$$.dirty[2]&32768&&de&&e(87,rt.zRange=de,rt),i.$$.dirty[2]&65536&&me&&e(87,rt.rRange=me,rt),i.$$.dirty[1]&1048576&&et(Dt,xt=kt,xt),i.$$.dirty[0]&1&&et(ui,Q=pt,Q),i.$$.dirty[0]&2&&et(ci,J=Pt,J),i.$$.dirty[2]&4194304&&et(ws,U=rr(ie),U),i.$$.dirty[1]&134217728&&et(xs,P=Qt,P),i.$$.dirty[1]&134217728|i.$$.dirty[2]&8388608&&et(Ni,g=Se||Qt,g),i.$$.dirty[2]&2097152&&et(Ms,O=Me,O),i.$$.dirty[1]&8388608&&et(fi,x=Ke(ft),x),i.$$.dirty[1]&16777216&&et(di,T=Ke(It),T),i.$$.dirty[1]&33554432&&et(mi,y=Ke(Ct),y),i.$$.dirty[1]&67108864&&et(pi,R=Ke(Gt),R),i.$$.dirty[1]&268435456&&et(Ss,Z=Zt,Z),i.$$.dirty[1]&536870912&&et(Cs,N=_t,N),i.$$.dirty[1]&1073741824&&et(Es,A=gt,A),i.$$.dirty[2]&1&&et(Ts,W=ue,W),i.$$.dirty[2]&2&&et(Di,j=be,j),i.$$.dirty[2]&4&&et(Li,X=ye,X),i.$$.dirty[2]&8&&et(Fi,H=D,H),i.$$.dirty[2]&16&&et(Ai,G=$,G),i.$$.dirty[2]&131072&&et(Bi,F=we,F),i.$$.dirty[2]&262144&&et(Ii,L=te,L),i.$$.dirty[2]&524288&&et(Ui,M=xe,M),i.$$.dirty[2]&1048576&&et(Hi,k=ee,k),i.$$.dirty[2]&32&&et(ji,C=Rt,C),i.$$.dirty[2]&64&&et(Wi,E=zt,E),i.$$.dirty[2]&128&&et(Gi,p=Vt,p),i.$$.dirty[2]&256&&et(qi,d=qt,d),i.$$.dirty[2]&8192&&et(ks,m=fe,m),i.$$.dirty[2]&16384&&et(Ps,f=$t,f),i.$$.dirty[2]&32768&&et(Rs,c=de,c),i.$$.dirty[2]&65536&&et(zs,u=me,u),i.$$.dirty[2]&512&&et(Yi,l=wt,l),i.$$.dirty[2]&1024&&et(Ki,a=Et,a),i.$$.dirty[2]&2048&&et(Ji,h=ce,h),i.$$.dirty[2]&4096&&et(Xi,o=_e,o),i.$$.dirty[2]&16777216&&et(Os,r=se,r),i.$$.dirty[2]&33554432&&et(Vs,n=rt,n),i.$$.dirty[2]&67108864&&Da("LayerCake",s)},e(88,s={activeGetters:to,width:Ge,height:qe,percentRange:Dt,aspectRatio:Fn,containerWidth:ui,containerHeight:ci,x:fi,y:di,z:mi,r:pi,custom:Os,data:xs,xNice:Di,yNice:Li,zNice:Fi,rNice:Ai,xReverse:Bi,yReverse:Ii,zReverse:Ui,rReverse:Hi,xPadding:ji,yPadding:Wi,zPadding:Gi,rPadding:qi,padding:eo,flatData:Ni,extents:De,xDomain:so,yDomain:no,zDomain:ro,rDomain:oo,xRange:Ma,yRange:Sa,zRange:Ca,rRange:Ea,config:Vs,xScale:On,xGet:ya,yScale:Nn,yGet:_a,zScale:Dn,zGet:wa,rScale:Ln,rGet:xa}),[pt,Pt,Nt,Wt,St,mt,J,Q,ht,Tt,dt,Dt,ui,ci,ws,xs,Ni,Ms,fi,di,mi,pi,Ss,Cs,Es,Ts,Di,Li,Fi,Ai,Bi,Ii,Ui,Hi,ji,Wi,Gi,qi,ks,Ps,Rs,zs,Yi,Ki,Ji,Xi,Vs,Os,Ge,qe,Fn,kt,ut,ct,ft,It,Ct,Gt,Qt,Zt,_t,gt,ue,be,ye,D,$,Rt,zt,Vt,qt,wt,Et,ce,_e,fe,$t,de,me,we,te,xe,ee,Me,ie,Se,se,rt,s,jt,Bt,Ta,ka]}class Jd extends Ve{constructor(t){super(),Oe(this,t,Kd,Yd,Ne,{ssr:3,pointerEvents:4,position:5,percentRange:51,width:52,height:53,containerWidth:0,containerHeight:1,element:2,x:54,y:55,z:56,r:57,data:58,xDomain:59,yDomain:60,zDomain:61,rDomain:62,xNice:63,yNice:64,zNice:65,rNice:66,xPadding:67,yPadding:68,zPadding:69,rPadding:70,xScale:71,yScale:72,zScale:73,rScale:74,xRange:75,yRange:76,zRange:77,rRange:78,xReverse:79,yReverse:80,zReverse:81,rReverse:82,padding:83,extents:84,flatData:85,custom:86},null,[-1,-1,-1,-1,-1])}}const Xd=i=>({element:i&1}),Oh=i=>({element:i[0]}),Qd=i=>({element:i&1}),Nh=i=>({element:i[0]});function Zd(i){let t,e,s,n,r;const o=i[12].defs,h=Mi(o,i,i[11],Nh),a=i[12].default,l=Mi(a,i,i[11],Oh);return{c(){t=vt("svg"),e=vt("defs"),h&&h.c(),s=vt("g"),l&&l.c(),this.h()},l(u){t=bt(u,"svg",{class:!0,viewBox:!0,width:!0,height:!0});var c=z(t);e=bt(c,"defs",{});var f=z(e);h&&h.l(f),f.forEach(w),s=bt(c,"g",{class:!0,transform:!0});var m=z(s);l&&l.l(m),m.forEach(w),c.forEach(w),this.h()},h(){b(s,"class","layercake-layout-svg_g"),b(s,"transform",n="translate("+i[7].left+", "+i[7].top+")"),b(t,"class","layercake-layout-svg svelte-u84d8d"),b(t,"viewBox",i[4]),b(t,"width",i[5]),b(t,"height",i[6]),Yt(t,"z-index",i[2]),Yt(t,"pointer-events",i[3]===!1?"none":null)},m(u,c){st(u,t,c),_(t,e),h&&h.m(e,null),_(t,s),l&&l.m(s,null),i[13](s),i[14](t),r=!0},p(u,[c]){h&&h.p&&(!r||c&2049)&&Ci(h,o,u,u[11],r?Ti(o,u[11],c,Qd):Ei(u[11]),Nh),l&&l.p&&(!r||c&2049)&&Ci(l,a,u,u[11],r?Ti(a,u[11],c,Xd):Ei(u[11]),Oh),(!r||c&128&&n!==(n="translate("+u[7].left+", "+u[7].top+")"))&&b(s,"transform",n),(!r||c&16)&&b(t,"viewBox",u[4]),(!r||c&32)&&b(t,"width",u[5]),(!r||c&64)&&b(t,"height",u[6]),c&4&&Yt(t,"z-index",u[2]),c&8&&Yt(t,"pointer-events",u[3]===!1?"none":null)},i(u){r||(tt(h,u),tt(l,u),r=!0)},o(u){nt(h,u),nt(l,u),r=!1},d(u){u&&w(t),h&&h.d(u),l&&l.d(u),i[13](null),i[14](null)}}}function $d(i,t,e){let s,n,r,{$$slots:o={},$$scope:h}=t,{element:a=void 0}=t,{innerElement:l=void 0}=t,{zIndex:u=void 0}=t,{pointerEvents:c=void 0}=t,{viewBox:f=void 0}=t;const{containerWidth:m,containerHeight:d,padding:p}=$h("LayerCake");K(i,m,k=>e(5,s=k)),K(i,d,k=>e(6,n=k)),K(i,p,k=>e(7,r=k));function E(k){hn[k?"unshift":"push"](()=>{l=k,e(1,l)})}function C(k){hn[k?"unshift":"push"](()=>{a=k,e(0,a)})}return i.$$set=k=>{"element"in k&&e(0,a=k.element),"innerElement"in k&&e(1,l=k.innerElement),"zIndex"in k&&e(2,u=k.zIndex),"pointerEvents"in k&&e(3,c=k.pointerEvents),"viewBox"in k&&e(4,f=k.viewBox),"$$scope"in k&&e(11,h=k.$$scope)},[a,l,u,c,f,s,n,r,m,d,p,h,o,E,C]}class t0 extends Ve{constructor(t){super(),Oe(this,t,$d,Zd,Ne,{element:0,innerElement:1,zIndex:2,pointerEvents:3,viewBox:4})}}function e0(i){let t,e;return t=new kd({props:{graph:i[0]}}),{c(){re(t.$$.fragment)},l(s){oe(t.$$.fragment,s)},m(s,n){he(t,s,n),e=!0},p(s,n){const r={};n&1&&(r.graph=s[0]),t.$set(r)},i(s){e||(tt(t.$$.fragment,s),e=!0)},o(s){nt(t.$$.fragment,s),e=!1},d(s){le(t,s)}}}function i0(i){let t,e;return t=new t0({props:{$$slots:{default:[e0]},$$scope:{ctx:i}}}),{c(){re(t.$$.fragment)},l(s){oe(t.$$.fragment,s)},m(s,n){he(t,s,n),e=!0},p(s,n){const r={};n&3&&(r.$$scope={dirty:n,ctx:s}),t.$set(r)},i(s){e||(tt(t.$$.fragment,s),e=!0)},o(s){nt(t.$$.fragment,s),e=!1},d(s){le(t,s)}}}function s0(i){let t,e,s;return e=new Jd({props:{data:JSON.parse(JSON.stringify(Dh(i[0]))),$$slots:{default:[i0]},$$scope:{ctx:i}}}),{c(){t=B("div"),re(e.$$.fragment),this.h()},l(n){t=I(n,"DIV",{class:!0});var r=z(t);oe(e.$$.fragment,r),r.forEach(w),this.h()},h(){b(t,"class","w-full h-96")},m(n,r){st(n,t,r),he(e,t,null),s=!0},p(n,[r]){const o={};r&1&&(o.data=JSON.parse(JSON.stringify(Dh(n[0])))),r&3&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){s||(tt(e.$$.fragment,n),s=!0)},o(n){nt(e.$$.fragment,n),s=!1},d(n){n&&w(t),le(e)}}}function Dh(i){let t={nodes:[],links:[]};return i.forEachNode(e=>{var s,n,r;t.nodes.push({id:e.id,name:e.id,value:((r=(n=(s=e==null?void 0:e.data)==null?void 0:s.history)==null?void 0:n.at(-1))==null?void 0:r.mcap)??1})}),i.forEachLink(e=>{var s,n,r,o,h,a;(r=(n=(s=e==null?void 0:e.data)==null?void 0:s.history)==null?void 0:n.at(-1))!=null&&r.amount&&t.links.push({source:e.fromId,target:e.toId,value:((a=(h=(o=e==null?void 0:e.data)==null?void 0:o.history)==null?void 0:h.at(-1))==null?void 0:a.value)??1})}),t}function n0(i,t,e){let{graph:s}=t;return i.$$set=n=>{"graph"in n&&e(0,s=n.graph)},[s]}class Jl extends Ve{constructor(t){super(),Oe(this,t,n0,s0,Ne,{graph:0})}}class r0{constructor(t){Qi(this,"_instances",{});this.classes=t}get instances(){return Object.keys(this.classes).map(t=>this.getInstance(t))}getInstance(t){const e=this.classes[t];if(!e)throw new Error(`No proxy implementation for: ${t}.`);if(e.name in this._instances)return this._instances[e.name];const s=new e;return this._instances[e.name]=s,s}}const o0=2048;function h0(i,t,e){return el(i,s=>(t+e(s)).length<=o0)}function Xl(i,t){return function(){return i.apply(t,arguments)}}const{toString:Ql}=Object.prototype,{getPrototypeOf:Yr}=Object,Kr=(i=>t=>{const e=Ql.call(t);return i[e]||(i[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),We=i=>(i=i.toLowerCase(),t=>Kr(t)===i),Pn=i=>t=>typeof t===i,{isArray:Oi}=Array,ps=Pn("undefined");function l0(i){return i!==null&&!ps(i)&&i.constructor!==null&&!ps(i.constructor)&&Xe(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const Zl=We("ArrayBuffer");function a0(i){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(i):t=i&&i.buffer&&Zl(i.buffer),t}const u0=Pn("string"),Xe=Pn("function"),$l=Pn("number"),Jr=i=>i!==null&&typeof i=="object",c0=i=>i===!0||i===!1,sn=i=>{if(Kr(i)!=="object")return!1;const t=Yr(i);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},f0=We("Date"),d0=We("File"),m0=We("Blob"),p0=We("FileList"),g0=i=>Jr(i)&&Xe(i.pipe),v0=i=>{const t="[object FormData]";return i&&(typeof FormData=="function"&&i instanceof FormData||Ql.call(i)===t||Xe(i.toString)&&i.toString()===t)},b0=We("URLSearchParams"),y0=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ys(i,t,{allOwnKeys:e=!1}={}){if(i===null||typeof i>"u")return;let s,n;if(typeof i!="object"&&(i=[i]),Oi(i))for(s=0,n=i.length;s<n;s++)t.call(null,i[s],s,i);else{const r=e?Object.getOwnPropertyNames(i):Object.keys(i),o=r.length;let h;for(s=0;s<o;s++)h=r[s],t.call(null,i[h],h,i)}}function ta(i,t){t=t.toLowerCase();const e=Object.keys(i);let s=e.length,n;for(;s-- >0;)if(n=e[s],t===n.toLowerCase())return n;return null}const ea=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),ia=i=>!ps(i)&&i!==ea;function xr(){const{caseless:i}=ia(this)&&this||{},t={},e=(s,n)=>{const r=i&&ta(t,n)||n;sn(t[r])&&sn(s)?t[r]=xr(t[r],s):sn(s)?t[r]=xr({},s):Oi(s)?t[r]=s.slice():t[r]=s};for(let s=0,n=arguments.length;s<n;s++)arguments[s]&&ys(arguments[s],e);return t}const _0=(i,t,e,{allOwnKeys:s}={})=>(ys(t,(n,r)=>{e&&Xe(n)?i[r]=Xl(n,e):i[r]=n},{allOwnKeys:s}),i),w0=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),x0=(i,t,e,s)=>{i.prototype=Object.create(t.prototype,s),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:t.prototype}),e&&Object.assign(i.prototype,e)},M0=(i,t,e,s)=>{let n,r,o;const h={};if(t=t||{},i==null)return t;do{for(n=Object.getOwnPropertyNames(i),r=n.length;r-- >0;)o=n[r],(!s||s(o,i,t))&&!h[o]&&(t[o]=i[o],h[o]=!0);i=e!==!1&&Yr(i)}while(i&&(!e||e(i,t))&&i!==Object.prototype);return t},S0=(i,t,e)=>{i=String(i),(e===void 0||e>i.length)&&(e=i.length),e-=t.length;const s=i.indexOf(t,e);return s!==-1&&s===e},C0=i=>{if(!i)return null;if(Oi(i))return i;let t=i.length;if(!$l(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=i[t];return e},E0=(i=>t=>i&&t instanceof i)(typeof Uint8Array<"u"&&Yr(Uint8Array)),T0=(i,t)=>{const s=(i&&i[Symbol.iterator]).call(i);let n;for(;(n=s.next())&&!n.done;){const r=n.value;t.call(i,r[0],r[1])}},k0=(i,t)=>{let e;const s=[];for(;(e=i.exec(t))!==null;)s.push(e);return s},P0=We("HTMLFormElement"),R0=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,s,n){return s.toUpperCase()+n}),Lh=(({hasOwnProperty:i})=>(t,e)=>i.call(t,e))(Object.prototype),z0=We("RegExp"),sa=(i,t)=>{const e=Object.getOwnPropertyDescriptors(i),s={};ys(e,(n,r)=>{t(n,r,i)!==!1&&(s[r]=n)}),Object.defineProperties(i,s)},V0=i=>{sa(i,(t,e)=>{if(Xe(i)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const s=i[e];if(Xe(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},O0=(i,t)=>{const e={},s=n=>{n.forEach(r=>{e[r]=!0})};return Oi(i)?s(i):s(String(i).split(t)),e},N0=()=>{},D0=(i,t)=>(i=+i,Number.isFinite(i)?i:t),or="abcdefghijklmnopqrstuvwxyz",Fh="0123456789",na={DIGIT:Fh,ALPHA:or,ALPHA_DIGIT:or+or.toUpperCase()+Fh},L0=(i=16,t=na.ALPHA_DIGIT)=>{let e="";const{length:s}=t;for(;i--;)e+=t[Math.random()*s|0];return e};function F0(i){return!!(i&&Xe(i.append)&&i[Symbol.toStringTag]==="FormData"&&i[Symbol.iterator])}const A0=i=>{const t=new Array(10),e=(s,n)=>{if(Jr(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[n]=s;const r=Oi(s)?[]:{};return ys(s,(o,h)=>{const a=e(o,n+1);!ps(a)&&(r[h]=a)}),t[n]=void 0,r}}return s};return e(i,0)},S={isArray:Oi,isArrayBuffer:Zl,isBuffer:l0,isFormData:v0,isArrayBufferView:a0,isString:u0,isNumber:$l,isBoolean:c0,isObject:Jr,isPlainObject:sn,isUndefined:ps,isDate:f0,isFile:d0,isBlob:m0,isRegExp:z0,isFunction:Xe,isStream:g0,isURLSearchParams:b0,isTypedArray:E0,isFileList:p0,forEach:ys,merge:xr,extend:_0,trim:y0,stripBOM:w0,inherits:x0,toFlatObject:M0,kindOf:Kr,kindOfTest:We,endsWith:S0,toArray:C0,forEachEntry:T0,matchAll:k0,isHTMLForm:P0,hasOwnProperty:Lh,hasOwnProp:Lh,reduceDescriptors:sa,freezeMethods:V0,toObjectSet:O0,toCamelCase:R0,noop:N0,toFiniteNumber:D0,findKey:ta,global:ea,isContextDefined:ia,ALPHABET:na,generateString:L0,isSpecCompliantForm:F0,toJSONObject:A0};function ot(i,t,e,s,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),s&&(this.request=s),n&&(this.response=n)}S.inherits(ot,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:S.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const ra=ot.prototype,oa={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{oa[i]={value:i}});Object.defineProperties(ot,oa);Object.defineProperty(ra,"isAxiosError",{value:!0});ot.from=(i,t,e,s,n,r)=>{const o=Object.create(ra);return S.toFlatObject(i,o,function(a){return a!==Error.prototype},h=>h!=="isAxiosError"),ot.call(o,i.message,t,e,s,n),o.cause=i,o.name=i.name,r&&Object.assign(o,r),o};const B0=null;function Mr(i){return S.isPlainObject(i)||S.isArray(i)}function ha(i){return S.endsWith(i,"[]")?i.slice(0,-2):i}function Ah(i,t,e){return i?i.concat(t).map(function(n,r){return n=ha(n),!e&&r?"["+n+"]":n}).join(e?".":""):t}function I0(i){return S.isArray(i)&&!i.some(Mr)}const U0=S.toFlatObject(S,{},null,function(t){return/^is[A-Z]/.test(t)});function Rn(i,t,e){if(!S.isObject(i))throw new TypeError("target must be an object");t=t||new FormData,e=S.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,E){return!S.isUndefined(E[p])});const s=e.metaTokens,n=e.visitor||u,r=e.dots,o=e.indexes,a=(e.Blob||typeof Blob<"u"&&Blob)&&S.isSpecCompliantForm(t);if(!S.isFunction(n))throw new TypeError("visitor must be a function");function l(d){if(d===null)return"";if(S.isDate(d))return d.toISOString();if(!a&&S.isBlob(d))throw new ot("Blob is not supported. Use a Buffer instead.");return S.isArrayBuffer(d)||S.isTypedArray(d)?a&&typeof Blob=="function"?new Blob([d]):Buffer.from(d):d}function u(d,p,E){let C=d;if(d&&!E&&typeof d=="object"){if(S.endsWith(p,"{}"))p=s?p:p.slice(0,-2),d=JSON.stringify(d);else if(S.isArray(d)&&I0(d)||(S.isFileList(d)||S.endsWith(p,"[]"))&&(C=S.toArray(d)))return p=ha(p),C.forEach(function(M,L){!(S.isUndefined(M)||M===null)&&t.append(o===!0?Ah([p],L,r):o===null?p:p+"[]",l(M))}),!1}return Mr(d)?!0:(t.append(Ah(E,p,r),l(d)),!1)}const c=[],f=Object.assign(U0,{defaultVisitor:u,convertValue:l,isVisitable:Mr});function m(d,p){if(!S.isUndefined(d)){if(c.indexOf(d)!==-1)throw Error("Circular reference detected in "+p.join("."));c.push(d),S.forEach(d,function(C,k){(!(S.isUndefined(C)||C===null)&&n.call(t,C,S.isString(k)?k.trim():k,p,f))===!0&&m(C,p?p.concat(k):[k])}),c.pop()}}if(!S.isObject(i))throw new TypeError("data must be an object");return m(i),t}function Bh(i){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function Xr(i,t){this._pairs=[],i&&Rn(i,this,t)}const la=Xr.prototype;la.append=function(t,e){this._pairs.push([t,e])};la.toString=function(t){const e=t?function(s){return t.call(this,s,Bh)}:Bh;return this._pairs.map(function(n){return e(n[0])+"="+e(n[1])},"").join("&")};function H0(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function aa(i,t,e){if(!t)return i;const s=e&&e.encode||H0,n=e&&e.serialize;let r;if(n?r=n(t,e):r=S.isURLSearchParams(t)?t.toString():new Xr(t,e).toString(s),r){const o=i.indexOf("#");o!==-1&&(i=i.slice(0,o)),i+=(i.indexOf("?")===-1?"?":"&")+r}return i}class j0{constructor(){this.handlers=[]}use(t,e,s){return this.handlers.push({fulfilled:t,rejected:e,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){S.forEach(this.handlers,function(s){s!==null&&t(s)})}}const Ih=j0,ua={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},W0=typeof URLSearchParams<"u"?URLSearchParams:Xr,G0=typeof FormData<"u"?FormData:null,q0=(()=>{let i;return typeof navigator<"u"&&((i=navigator.product)==="ReactNative"||i==="NativeScript"||i==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),Y0=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Pe={isBrowser:!0,classes:{URLSearchParams:W0,FormData:G0,Blob},isStandardBrowserEnv:q0,isStandardBrowserWebWorkerEnv:Y0,protocols:["http","https","file","blob","url","data"]};function K0(i,t){return Rn(i,new Pe.classes.URLSearchParams,Object.assign({visitor:function(e,s,n,r){return Pe.isNode&&S.isBuffer(e)?(this.append(s,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function J0(i){return S.matchAll(/\w+|\[(\w*)]/g,i).map(t=>t[0]==="[]"?"":t[1]||t[0])}function X0(i){const t={},e=Object.keys(i);let s;const n=e.length;let r;for(s=0;s<n;s++)r=e[s],t[r]=i[r];return t}function ca(i){function t(e,s,n,r){let o=e[r++];const h=Number.isFinite(+o),a=r>=e.length;return o=!o&&S.isArray(n)?n.length:o,a?(S.hasOwnProp(n,o)?n[o]=[n[o],s]:n[o]=s,!h):((!n[o]||!S.isObject(n[o]))&&(n[o]=[]),t(e,s,n[o],r)&&S.isArray(n[o])&&(n[o]=X0(n[o])),!h)}if(S.isFormData(i)&&S.isFunction(i.entries)){const e={};return S.forEachEntry(i,(s,n)=>{t(J0(s),n,e,0)}),e}return null}const Q0={"Content-Type":void 0};function Z0(i,t,e){if(S.isString(i))try{return(t||JSON.parse)(i),S.trim(i)}catch(s){if(s.name!=="SyntaxError")throw s}return(e||JSON.stringify)(i)}const zn={transitional:ua,adapter:["xhr","http"],transformRequest:[function(t,e){const s=e.getContentType()||"",n=s.indexOf("application/json")>-1,r=S.isObject(t);if(r&&S.isHTMLForm(t)&&(t=new FormData(t)),S.isFormData(t))return n&&n?JSON.stringify(ca(t)):t;if(S.isArrayBuffer(t)||S.isBuffer(t)||S.isStream(t)||S.isFile(t)||S.isBlob(t))return t;if(S.isArrayBufferView(t))return t.buffer;if(S.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let h;if(r){if(s.indexOf("application/x-www-form-urlencoded")>-1)return K0(t,this.formSerializer).toString();if((h=S.isFileList(t))||s.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return Rn(h?{"files[]":t}:t,a&&new a,this.formSerializer)}}return r||n?(e.setContentType("application/json",!1),Z0(t)):t}],transformResponse:[function(t){const e=this.transitional||zn.transitional,s=e&&e.forcedJSONParsing,n=this.responseType==="json";if(t&&S.isString(t)&&(s&&!this.responseType||n)){const o=!(e&&e.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(h){if(o)throw h.name==="SyntaxError"?ot.from(h,ot.ERR_BAD_RESPONSE,this,null,this.response):h}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Pe.classes.FormData,Blob:Pe.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};S.forEach(["delete","get","head"],function(t){zn.headers[t]={}});S.forEach(["post","put","patch"],function(t){zn.headers[t]=S.merge(Q0)});const Qr=zn,$0=S.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),tm=i=>{const t={};let e,s,n;return i&&i.split(`
`).forEach(function(o){n=o.indexOf(":"),e=o.substring(0,n).trim().toLowerCase(),s=o.substring(n+1).trim(),!(!e||t[e]&&$0[e])&&(e==="set-cookie"?t[e]?t[e].push(s):t[e]=[s]:t[e]=t[e]?t[e]+", "+s:s)}),t},Uh=Symbol("internals");function ts(i){return i&&String(i).trim().toLowerCase()}function nn(i){return i===!1||i==null?i:S.isArray(i)?i.map(nn):String(i)}function em(i){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=e.exec(i);)t[s[1]]=s[2];return t}function im(i){return/^[-_a-zA-Z]+$/.test(i.trim())}function hr(i,t,e,s,n){if(S.isFunction(s))return s.call(this,t,e);if(n&&(t=e),!!S.isString(t)){if(S.isString(s))return t.indexOf(s)!==-1;if(S.isRegExp(s))return s.test(t)}}function sm(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,s)=>e.toUpperCase()+s)}function nm(i,t){const e=S.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(i,s+e,{value:function(n,r,o){return this[s].call(this,t,n,r,o)},configurable:!0})})}class Vn{constructor(t){t&&this.set(t)}set(t,e,s){const n=this;function r(h,a,l){const u=ts(a);if(!u)throw new Error("header name must be a non-empty string");const c=S.findKey(n,u);(!c||n[c]===void 0||l===!0||l===void 0&&n[c]!==!1)&&(n[c||a]=nn(h))}const o=(h,a)=>S.forEach(h,(l,u)=>r(l,u,a));return S.isPlainObject(t)||t instanceof this.constructor?o(t,e):S.isString(t)&&(t=t.trim())&&!im(t)?o(tm(t),e):t!=null&&r(e,t,s),this}get(t,e){if(t=ts(t),t){const s=S.findKey(this,t);if(s){const n=this[s];if(!e)return n;if(e===!0)return em(n);if(S.isFunction(e))return e.call(this,n,s);if(S.isRegExp(e))return e.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=ts(t),t){const s=S.findKey(this,t);return!!(s&&this[s]!==void 0&&(!e||hr(this,this[s],s,e)))}return!1}delete(t,e){const s=this;let n=!1;function r(o){if(o=ts(o),o){const h=S.findKey(s,o);h&&(!e||hr(s,s[h],h,e))&&(delete s[h],n=!0)}}return S.isArray(t)?t.forEach(r):r(t),n}clear(t){const e=Object.keys(this);let s=e.length,n=!1;for(;s--;){const r=e[s];(!t||hr(this,this[r],r,t,!0))&&(delete this[r],n=!0)}return n}normalize(t){const e=this,s={};return S.forEach(this,(n,r)=>{const o=S.findKey(s,r);if(o){e[o]=nn(n),delete e[r];return}const h=t?sm(r):String(r).trim();h!==r&&delete e[r],e[h]=nn(n),s[h]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return S.forEach(this,(s,n)=>{s!=null&&s!==!1&&(e[n]=t&&S.isArray(s)?s.join(", "):s)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const s=new this(t);return e.forEach(n=>s.set(n)),s}static accessor(t){const s=(this[Uh]=this[Uh]={accessors:{}}).accessors,n=this.prototype;function r(o){const h=ts(o);s[h]||(nm(n,o),s[h]=!0)}return S.isArray(t)?t.forEach(r):r(t),this}}Vn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);S.freezeMethods(Vn.prototype);S.freezeMethods(Vn);const Ue=Vn;function lr(i,t){const e=this||Qr,s=t||e,n=Ue.from(s.headers);let r=s.data;return S.forEach(i,function(h){r=h.call(e,r,n.normalize(),t?t.status:void 0)}),n.normalize(),r}function fa(i){return!!(i&&i.__CANCEL__)}function _s(i,t,e){ot.call(this,i??"canceled",ot.ERR_CANCELED,t,e),this.name="CanceledError"}S.inherits(_s,ot,{__CANCEL__:!0});function rm(i,t,e){const s=e.config.validateStatus;!e.status||!s||s(e.status)?i(e):t(new ot("Request failed with status code "+e.status,[ot.ERR_BAD_REQUEST,ot.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}const om=Pe.isStandardBrowserEnv?function(){return{write:function(e,s,n,r,o,h){const a=[];a.push(e+"="+encodeURIComponent(s)),S.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),S.isString(r)&&a.push("path="+r),S.isString(o)&&a.push("domain="+o),h===!0&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){const s=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function hm(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function lm(i,t){return t?i.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):i}function da(i,t){return i&&!hm(t)?lm(i,t):t}const am=Pe.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let s;function n(r){let o=r;return t&&(e.setAttribute("href",o),o=e.href),e.setAttribute("href",o),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return s=n(window.location.href),function(o){const h=S.isString(o)?n(o):o;return h.protocol===s.protocol&&h.host===s.host}}():function(){return function(){return!0}}();function um(i){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return t&&t[1]||""}function cm(i,t){i=i||10;const e=new Array(i),s=new Array(i);let n=0,r=0,o;return t=t!==void 0?t:1e3,function(a){const l=Date.now(),u=s[r];o||(o=l),e[n]=a,s[n]=l;let c=r,f=0;for(;c!==n;)f+=e[c++],c=c%i;if(n=(n+1)%i,n===r&&(r=(r+1)%i),l-o<t)return;const m=u&&l-u;return m?Math.round(f*1e3/m):void 0}}function Hh(i,t){let e=0;const s=cm(50,250);return n=>{const r=n.loaded,o=n.lengthComputable?n.total:void 0,h=r-e,a=s(h),l=r<=o;e=r;const u={loaded:r,total:o,progress:o?r/o:void 0,bytes:h,rate:a||void 0,estimated:a&&o&&l?(o-r)/a:void 0,event:n};u[t?"download":"upload"]=!0,i(u)}}const fm=typeof XMLHttpRequest<"u",dm=fm&&function(i){return new Promise(function(e,s){let n=i.data;const r=Ue.from(i.headers).normalize(),o=i.responseType;let h;function a(){i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}S.isFormData(n)&&(Pe.isStandardBrowserEnv||Pe.isStandardBrowserWebWorkerEnv)&&r.setContentType(!1);let l=new XMLHttpRequest;if(i.auth){const m=i.auth.username||"",d=i.auth.password?unescape(encodeURIComponent(i.auth.password)):"";r.set("Authorization","Basic "+btoa(m+":"+d))}const u=da(i.baseURL,i.url);l.open(i.method.toUpperCase(),aa(u,i.params,i.paramsSerializer),!0),l.timeout=i.timeout;function c(){if(!l)return;const m=Ue.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders()),p={data:!o||o==="text"||o==="json"?l.responseText:l.response,status:l.status,statusText:l.statusText,headers:m,config:i,request:l};rm(function(C){e(C),a()},function(C){s(C),a()},p),l=null}if("onloadend"in l?l.onloadend=c:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(c)},l.onabort=function(){l&&(s(new ot("Request aborted",ot.ECONNABORTED,i,l)),l=null)},l.onerror=function(){s(new ot("Network Error",ot.ERR_NETWORK,i,l)),l=null},l.ontimeout=function(){let d=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const p=i.transitional||ua;i.timeoutErrorMessage&&(d=i.timeoutErrorMessage),s(new ot(d,p.clarifyTimeoutError?ot.ETIMEDOUT:ot.ECONNABORTED,i,l)),l=null},Pe.isStandardBrowserEnv){const m=(i.withCredentials||am(u))&&i.xsrfCookieName&&om.read(i.xsrfCookieName);m&&r.set(i.xsrfHeaderName,m)}n===void 0&&r.setContentType(null),"setRequestHeader"in l&&S.forEach(r.toJSON(),function(d,p){l.setRequestHeader(p,d)}),S.isUndefined(i.withCredentials)||(l.withCredentials=!!i.withCredentials),o&&o!=="json"&&(l.responseType=i.responseType),typeof i.onDownloadProgress=="function"&&l.addEventListener("progress",Hh(i.onDownloadProgress,!0)),typeof i.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",Hh(i.onUploadProgress)),(i.cancelToken||i.signal)&&(h=m=>{l&&(s(!m||m.type?new _s(null,i,l):m),l.abort(),l=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const f=um(u);if(f&&Pe.protocols.indexOf(f)===-1){s(new ot("Unsupported protocol "+f+":",ot.ERR_BAD_REQUEST,i));return}l.send(n||null)})},rn={http:B0,xhr:dm};S.forEach(rn,(i,t)=>{if(i){try{Object.defineProperty(i,"name",{value:t})}catch{}Object.defineProperty(i,"adapterName",{value:t})}});const mm={getAdapter:i=>{i=S.isArray(i)?i:[i];const{length:t}=i;let e,s;for(let n=0;n<t&&(e=i[n],!(s=S.isString(e)?rn[e.toLowerCase()]:e));n++);if(!s)throw s===!1?new ot(`Adapter ${e} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(S.hasOwnProp(rn,e)?`Adapter '${e}' is not available in the build`:`Unknown adapter '${e}'`);if(!S.isFunction(s))throw new TypeError("adapter is not a function");return s},adapters:rn};function ar(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new _s(null,i)}function jh(i){return ar(i),i.headers=Ue.from(i.headers),i.data=lr.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),mm.getAdapter(i.adapter||Qr.adapter)(i).then(function(s){return ar(i),s.data=lr.call(i,i.transformResponse,s),s.headers=Ue.from(s.headers),s},function(s){return fa(s)||(ar(i),s&&s.response&&(s.response.data=lr.call(i,i.transformResponse,s.response),s.response.headers=Ue.from(s.response.headers))),Promise.reject(s)})}const Wh=i=>i instanceof Ue?i.toJSON():i;function Vi(i,t){t=t||{};const e={};function s(l,u,c){return S.isPlainObject(l)&&S.isPlainObject(u)?S.merge.call({caseless:c},l,u):S.isPlainObject(u)?S.merge({},u):S.isArray(u)?u.slice():u}function n(l,u,c){if(S.isUndefined(u)){if(!S.isUndefined(l))return s(void 0,l,c)}else return s(l,u,c)}function r(l,u){if(!S.isUndefined(u))return s(void 0,u)}function o(l,u){if(S.isUndefined(u)){if(!S.isUndefined(l))return s(void 0,l)}else return s(void 0,u)}function h(l,u,c){if(c in t)return s(l,u);if(c in i)return s(void 0,l)}const a={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:h,headers:(l,u)=>n(Wh(l),Wh(u),!0)};return S.forEach(Object.keys(i).concat(Object.keys(t)),function(u){const c=a[u]||n,f=c(i[u],t[u],u);S.isUndefined(f)&&c!==h||(e[u]=f)}),e}const ma="1.3.3",Zr={};["object","boolean","number","function","string","symbol"].forEach((i,t)=>{Zr[i]=function(s){return typeof s===i||"a"+(t<1?"n ":" ")+i}});const Gh={};Zr.transitional=function(t,e,s){function n(r,o){return"[Axios v"+ma+"] Transitional option '"+r+"'"+o+(s?". "+s:"")}return(r,o,h)=>{if(t===!1)throw new ot(n(o," has been removed"+(e?" in "+e:"")),ot.ERR_DEPRECATED);return e&&!Gh[o]&&(Gh[o]=!0,console.warn(n(o," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(r,o,h):!0}};function pm(i,t,e){if(typeof i!="object")throw new ot("options must be an object",ot.ERR_BAD_OPTION_VALUE);const s=Object.keys(i);let n=s.length;for(;n-- >0;){const r=s[n],o=t[r];if(o){const h=i[r],a=h===void 0||o(h,r,i);if(a!==!0)throw new ot("option "+r+" must be "+a,ot.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new ot("Unknown option "+r,ot.ERR_BAD_OPTION)}}const Sr={assertOptions:pm,validators:Zr},Je=Sr.validators;let Mn=class{constructor(t){this.defaults=t,this.interceptors={request:new Ih,response:new Ih}}request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=Vi(this.defaults,e);const{transitional:s,paramsSerializer:n,headers:r}=e;s!==void 0&&Sr.assertOptions(s,{silentJSONParsing:Je.transitional(Je.boolean),forcedJSONParsing:Je.transitional(Je.boolean),clarifyTimeoutError:Je.transitional(Je.boolean)},!1),n!==void 0&&Sr.assertOptions(n,{encode:Je.function,serialize:Je.function},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o;o=r&&S.merge(r.common,r[e.method]),o&&S.forEach(["delete","get","head","post","put","patch","common"],d=>{delete r[d]}),e.headers=Ue.concat(o,r);const h=[];let a=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(e)===!1||(a=a&&p.synchronous,h.unshift(p.fulfilled,p.rejected))});const l=[];this.interceptors.response.forEach(function(p){l.push(p.fulfilled,p.rejected)});let u,c=0,f;if(!a){const d=[jh.bind(this),void 0];for(d.unshift.apply(d,h),d.push.apply(d,l),f=d.length,u=Promise.resolve(e);c<f;)u=u.then(d[c++],d[c++]);return u}f=h.length;let m=e;for(c=0;c<f;){const d=h[c++],p=h[c++];try{m=d(m)}catch(E){p.call(this,E);break}}try{u=jh.call(this,m)}catch(d){return Promise.reject(d)}for(c=0,f=l.length;c<f;)u=u.then(l[c++],l[c++]);return u}getUri(t){t=Vi(this.defaults,t);const e=da(t.baseURL,t.url);return aa(e,t.params,t.paramsSerializer)}};S.forEach(["delete","get","head","options"],function(t){Mn.prototype[t]=function(e,s){return this.request(Vi(s||{},{method:t,url:e,data:(s||{}).data}))}});S.forEach(["post","put","patch"],function(t){function e(s){return function(r,o,h){return this.request(Vi(h||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}Mn.prototype[t]=e(),Mn.prototype[t+"Form"]=e(!0)});const on=Mn;class $r{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(r){e=r});const s=this;this.promise.then(n=>{if(!s._listeners)return;let r=s._listeners.length;for(;r-- >0;)s._listeners[r](n);s._listeners=null}),this.promise.then=n=>{let r;const o=new Promise(h=>{s.subscribe(h),r=h}).then(n);return o.cancel=function(){s.unsubscribe(r)},o},t(function(r,o,h){s.reason||(s.reason=new _s(r,o,h),e(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}static source(){let t;return{token:new $r(function(n){t=n}),cancel:t}}}const gm=$r;function vm(i){return function(e){return i.apply(null,e)}}function bm(i){return S.isObject(i)&&i.isAxiosError===!0}const Cr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Cr).forEach(([i,t])=>{Cr[t]=i});const ym=Cr;function pa(i){const t=new on(i),e=Xl(on.prototype.request,t);return S.extend(e,on.prototype,t,{allOwnKeys:!0}),S.extend(e,t,null,{allOwnKeys:!0}),e.create=function(n){return pa(Vi(i,n))},e}const Ot=pa(Qr);Ot.Axios=on;Ot.CanceledError=_s;Ot.CancelToken=gm;Ot.isCancel=fa;Ot.VERSION=ma;Ot.toFormData=Rn;Ot.AxiosError=ot;Ot.Cancel=Ot.CanceledError;Ot.all=function(t){return Promise.all(t)};Ot.spread=vm;Ot.isAxiosError=bm;Ot.mergeConfig=Vi;Ot.AxiosHeaders=Ue;Ot.formToJSON=i=>ca(S.isHTMLForm(i)?new FormData(i):i);Ot.HttpStatusCode=ym;Ot.default=Ot;const _m=Ot;class ga{constructor(t){Qi(this,"api");this.baseURL=t,this.api=_m.create({baseURL:t})}async fetchJson(t){return(await this.api.get(t,{headers:{accept:"application/json"}})).data}}class wm{constructor(){Qi(this,"api");this.api=new ga("https://coins.llama.fi")}getPriceRoute(t,e="4h"){return`/prices/current/${t}?searchWidth=${e}`}async _getPrices(t){const e=Object.fromEntries(t.map(({id:o,token:h})=>[`${h.chain}:${h.address}`,o])),s=this.getPriceRoute(Object.keys(e).join(",")),r=(await this.api.fetchJson(s)).coins??{};return Object.fromEntries(Object.entries(e).map(([o,h])=>[h,r[o]]).map(([o,h])=>[o,h?{usd:h.price,timestamp:new Date(h.timestamp>1775369079?h.timestamp:Date.now()).toISOString(),source:this.api.baseURL+s}:null]))}async getPrices(t){const e=h0(t,this.api.baseURL,n=>this.getPriceRoute(n.map(({token:r})=>`${r.chain}:${r.address}`).join(","))),s=await Promise.all(e.map(n=>this._getPrices(n)));return es.merge({},...s)}async getPrice(t){return(await this.getPrices([t]))[t.id]}}const xm=2048,Mm=30;class Sm{constructor(){Qi(this,"api");this.api=new ga("https://api.dexscreener.com")}getPriceRoute(t){return`/latest/dex/tokens/${t}`}async _getPrices(t){const e=Object.fromEntries(t.map(l=>[`${l.token.chain}:${l.token.address}`,l])),s=this.getPriceRoute(Object.keys(e).join(",")),o=((await this.api.fetchJson(s)).pairs??[]).filter(l=>l.baseToken.address in e),h=es.groupBy(o,"baseToken.address");return Object.fromEntries(Object.entries(h).map(([l,u])=>[e[l].id,e[l].token.chain,u]).map(([l,u,c])=>[l,c.filter(f=>f.chainId==u)]).map(([l,u])=>[l,{usd:lu(es.map(u,"priceUsd")),timestamp:new Date().toISOString(),source:this.api.baseURL+s}]))}async getPrices(t){const e=el(t,n=>(this.api.baseURL+this.getPriceRoute(es.map(n,"token.address").join(","))).length<=xm&&n.length<=Mm),s=await Promise.all(e.map(n=>this._getPrices(n)));return es.merge({},...s)}async getPrice(t){return(await this.getPrices([t]))[t.id]}}class Cm extends r0{constructor(){super({defillama:wm,dexscreener:Sm})}async getPrices(t){let e={};for(const s of this.instances)if(e={...e,...await s.getPrices(t.filter(({id:n})=>!e[n]))},t.every(({id:n})=>e[n]))break;return e}async getPrice(t){return(await this.getPrices([t]))[t.id]}}function qh(i,t,e){const s=i.slice();return s[32]=t[e],s}function Yh(i,t,e){const s=i.slice();return s[35]=t[e],s}function Kh(i){let t,e,s;return e=new md({props:{fillPercent:i[35].value,class:"h-full w-full",waveColor:"#FFDDDD",waveAnimateTime:2e3,waveHeight:.1,waveHeightScaling:!0}}),{c(){t=B("div"),re(e.$$.fragment),this.h()},l(n){t=I(n,"DIV",{class:!0});var r=z(t);oe(e.$$.fragment,r),r.forEach(w),this.h()},h(){b(t,"class","absolute top-0 left-0 h-full w-full")},m(n,r){st(n,t,r),he(e,t,null),s=!0},p(n,r){const o={};r[0]&64&&(o.fillPercent=n[35].value),e.$set(o)},i(n){s||(tt(e.$$.fragment,n),s=!0)},o(n){nt(e.$$.fragment,n),s=!1},d(n){n&&w(t),le(e)}}}function Em(i){let t=i[35].value+"",e;return{c(){e=q(t)},l(s){e=Y(s,t)},m(s,n){st(s,e,n)},p(s,n){n[0]&64&&t!==(t=s[35].value+"")&&At(e,t)},d(s){s&&w(e)}}}function Tm(i){let t=$e(i[35].value)+"",e;return{c(){e=q(t)},l(s){e=Y(s,t)},m(s,n){st(s,e,n)},p(s,n){n[0]&64&&t!==(t=$e(s[35].value)+"")&&At(e,t)},d(s){s&&w(e)}}}function km(i){let t=Xt(i[35].value)+"",e;return{c(){e=q(t)},l(s){e=Y(s,t)},m(s,n){st(s,e,n)},p(s,n){n[0]&64&&t!==(t=Xt(s[35].value)+"")&&At(e,t)},d(s){s&&w(e)}}}function Pm(i){let t=i[35].value+"",e;return{c(){e=q(t)},l(s){e=Y(s,t)},m(s,n){st(s,e,n)},p(s,n){n[0]&64&&t!==(t=s[35].value+"")&&At(e,t)},d(s){s&&w(e)}}}function Jh(i){let t,e,s,n,r=i[35].name+"",o,h,a,l,u=i[35].type=="percent"&&typeof i[35].value=="number"&&Kh(i);function c(d,p){return d[35].type=="standard"?Pm:d[35].type=="currency"&&typeof d[35].value=="number"?km:d[35].type=="percent"&&typeof d[35].value=="number"?Tm:Em}let f=c(i),m=f(i);return{c(){t=B("div"),u&&u.c(),e=lt(),s=B("dl"),n=B("dt"),o=q(r),h=B("dd"),m.c(),a=lt(),this.h()},l(d){t=I(d,"DIV",{class:!0});var p=z(t);u&&u.l(p),e=at(p),s=I(p,"DL",{class:!0});var E=z(s);n=I(E,"DT",{class:!0});var C=z(n);o=Y(C,r),C.forEach(w),h=I(E,"DD",{class:!0});var k=z(h);m.l(k),k.forEach(w),E.forEach(w),a=at(p),p.forEach(w),this.h()},h(){b(n,"class","text-sm font-medium text-gray-500 truncate"),b(h,"class","mt-1 text-3xl font-semibold text-gray-900"),b(s,"class","relative"),b(t,"class","relative px-4 py-5 bg-gray-50 sm:shadow sm:rounded-lg overflow-hidden sm:p-6")},m(d,p){st(d,t,p),u&&u.m(t,null),_(t,e),_(t,s),_(s,n),_(n,o),_(s,h),m.m(h,null),_(t,a),l=!0},p(d,p){d[35].type=="percent"&&typeof d[35].value=="number"?u?(u.p(d,p),p[0]&64&&tt(u,1)):(u=Kh(d),u.c(),tt(u,1),u.m(t,e)):u&&(ti(),nt(u,1,1,()=>{u=null}),ei()),(!l||p[0]&64)&&r!==(r=d[35].name+"")&&At(o,r),f===(f=c(d))&&m?m.p(d,p):(m.d(1),m=f(d),m&&(m.c(),m.m(h,null)))},i(d){l||(tt(u),l=!0)},o(d){nt(u),l=!1},d(d){d&&w(t),u&&u.d(),m.d()}}}function Xh(i){var ue,be,ye;let t,e,s,n,r,o,h,a,l,u=i[1].name+"",c,f,m=ba*va+"",d,p,E,C,k,M,L,F,G=Xt(i[3].underlying.usd)+"",H,X,j,W,A,N,Z=((ye=(be=(ue=i[5])==null?void 0:ue.history)==null?void 0:be.at(-1))!=null&&ye.mcap?Xt(i[5].history.at(-1).mcap):"UNK")+"",R,y,T,x,O,g,P,U,J,Q,xt,ht,Tt,dt=i[1].name+"",Bt,jt,Wt,St,mt,kt,ut,ct,pt,Pt,Nt,ft,It,Ct=i[1].name+"",Gt,Qt,Zt,_t,gt;return x=new Bl({props:{data:i[4].length?[...new Set(i[4].flatMap(i[16]))].sort().map(i[17]):[{date:new Date().toISOString(),value:0}]}}),mt=new Jl({props:{graph:an(un(i[0],i[2],"down"),i[2])}}),_t=new il({props:{columns:[{id:"share",title:"%",class:""},{id:"name",title:"Name",class:"font-medium",link:!0},{id:"price",title:"Price",class:"hidden lg:table-cell"},{id:"amount",title:"Amount",class:"hidden sm:table-cell"},{id:"underlying-usd",title:"Backing",class:""},{id:"underlying-ratio",title:"Mcap Ratio",class:""}],rows:i[4].map(i[18]).map(i[19]),sort:[{by:"share"}],class:""}}),{c(){t=B("div"),e=B("div"),s=B("div"),n=B("div"),r=B("h2"),o=q("Backing History"),h=lt(),a=B("p"),l=q("View "),c=q(u),f=q("'s backing history of up to the last "),d=q(m),p=q(" days."),E=lt(),C=B("div"),k=B("dl"),M=B("dt"),L=q("Current Backing"),F=B("dd"),H=q(G),X=lt(),j=B("dl"),W=B("dt"),A=q("Current Market Cap"),N=B("dd"),R=q(Z),y=lt(),T=B("div"),re(x.$$.fragment),O=lt(),g=B("div"),P=B("div"),U=B("div"),J=B("h2"),Q=q("Underlying Chain"),xt=lt(),ht=B("p"),Tt=q("View the full chain of "),Bt=q(dt),jt=q("'s underlying assets."),Wt=lt(),St=B("div"),re(mt.$$.fragment),kt=lt(),ut=B("div"),ct=B("div"),pt=B("h2"),Pt=q("Underlying Assets"),Nt=lt(),ft=B("p"),It=q("List of "),Gt=q(Ct),Qt=q("'s underlying assets."),Zt=lt(),re(_t.$$.fragment),this.h()},l(D){t=I(D,"DIV",{class:!0});var $=z(t);e=I($,"DIV",{class:!0});var Rt=z(e);s=I(Rt,"DIV",{class:!0});var zt=z(s);n=I(zt,"DIV",{class:!0});var Vt=z(n);r=I(Vt,"H2",{class:!0});var qt=z(r);o=Y(qt,"Backing History"),qt.forEach(w),h=at(Vt),a=I(Vt,"P",{class:!0});var wt=z(a);l=Y(wt,"View "),c=Y(wt,u),f=Y(wt,"'s backing history of up to the last "),d=Y(wt,m),p=Y(wt," days."),wt.forEach(w),Vt.forEach(w),E=at(zt),C=I(zt,"DIV",{class:!0});var Et=z(C);k=I(Et,"DL",{});var ce=z(k);M=I(ce,"DT",{class:!0});var _e=z(M);L=Y(_e,"Current Backing"),_e.forEach(w),F=I(ce,"DD",{class:!0});var fe=z(F);H=Y(fe,G),fe.forEach(w),ce.forEach(w),X=at(Et),j=I(Et,"DL",{class:!0});var $t=z(j);W=I($t,"DT",{class:!0});var de=z(W);A=Y(de,"Current Market Cap"),de.forEach(w),N=I($t,"DD",{class:!0});var me=z(N);R=Y(me,Z),me.forEach(w),$t.forEach(w),Et.forEach(w),zt.forEach(w),y=at(Rt),T=I(Rt,"DIV",{class:!0});var we=z(T);oe(x.$$.fragment,we),we.forEach(w),Rt.forEach(w),O=at($),g=I($,"DIV",{class:!0});var te=z(g);P=I(te,"DIV",{class:!0});var xe=z(P);U=I(xe,"DIV",{class:!0});var ee=z(U);J=I(ee,"H2",{class:!0});var Me=z(J);Q=Y(Me,"Underlying Chain"),Me.forEach(w),xt=at(ee),ht=I(ee,"P",{class:!0});var ie=z(ht);Tt=Y(ie,"View the full chain of "),Bt=Y(ie,dt),jt=Y(ie,"'s underlying assets."),ie.forEach(w),ee.forEach(w),xe.forEach(w),Wt=at(te),St=I(te,"DIV",{class:!0});var Se=z(St);oe(mt.$$.fragment,Se),Se.forEach(w),te.forEach(w),$.forEach(w),kt=at(D),ut=I(D,"DIV",{class:!0});var se=z(ut);ct=I(se,"DIV",{class:!0});var ae=z(ct);pt=I(ae,"H2",{class:!0});var rt=z(pt);Pt=Y(rt,"Underlying Assets"),rt.forEach(w),Nt=at(ae),ft=I(ae,"P",{class:!0});var Dt=z(ft);It=Y(Dt,"List of "),Gt=Y(Dt,Ct),Qt=Y(Dt,"'s underlying assets."),Dt.forEach(w),ae.forEach(w),Zt=at(se),oe(_t.$$.fragment,se),se.forEach(w),this.h()},h(){b(r,"class","text-3xl tracking-tight font-bold text-gray-900"),b(a,"class","mt-4 text-lg text-gray-500"),b(n,"class","max-w-3xl mx-auto text-center"),b(M,"class","text-sm font-medium text-gray-500 truncate"),b(F,"class","mt-1 text-3xl font-semibold text-gray-900"),b(W,"class","text-sm font-medium text-gray-500 truncate"),b(N,"class","mt-1 text-3xl font-semibold text-gray-900"),b(j,"class","text-right"),b(C,"class","flex mt-6 items-center justify-between"),b(s,"class","px-4 pt-5 sm:px-6 sm:pt-6"),b(T,"class","mt-6 overflow-hidden"),b(e,"class","flex flex-col bg-gray-50 shadow sm:rounded-lg overflow-hidden"),b(J,"class","text-3xl tracking-tight font-bold text-gray-900"),b(ht,"class","mt-4 text-lg text-gray-500"),b(U,"class","max-w-3xl mx-auto text-center"),b(P,"class","px-4 pt-5 sm:px-6 sm:pt-6"),b(St,"class","flex mt-6 justify-center"),b(g,"class","bg-gray-50 shadow sm:rounded-lg overflow-hidden"),b(t,"class","grid grid-cols-1 gap-4 lg:grid-cols-2 shadow-none"),b(pt,"class","text-3xl tracking-tight font-bold text-gray-900"),b(ft,"class","mt-4 text-lg text-gray-500"),b(ct,"class","max-w-3xl mx-auto text-center px-4 py-5 sm:p-6"),b(ut,"class","bg-gray-50 shadow sm:rounded-lg overflow-hidden sm:mx-0 divide-y divide-gray-200")},m(D,$){st(D,t,$),_(t,e),_(e,s),_(s,n),_(n,r),_(r,o),_(n,h),_(n,a),_(a,l),_(a,c),_(a,f),_(a,d),_(a,p),_(s,E),_(s,C),_(C,k),_(k,M),_(M,L),_(k,F),_(F,H),_(C,X),_(C,j),_(j,W),_(W,A),_(j,N),_(N,R),_(e,y),_(e,T),he(x,T,null),_(t,O),_(t,g),_(g,P),_(P,U),_(U,J),_(J,Q),_(U,xt),_(U,ht),_(ht,Tt),_(ht,Bt),_(ht,jt),_(g,Wt),_(g,St),he(mt,St,null),st(D,kt,$),st(D,ut,$),_(ut,ct),_(ct,pt),_(pt,Pt),_(ct,Nt),_(ct,ft),_(ft,It),_(ft,Gt),_(ft,Qt),_(ut,Zt),he(_t,ut,null),gt=!0},p(D,$){var qt,wt,Et;(!gt||$[0]&2)&&u!==(u=D[1].name+"")&&At(c,u),(!gt||$[0]&8)&&G!==(G=Xt(D[3].underlying.usd)+"")&&At(H,G),(!gt||$[0]&32)&&Z!==(Z=((Et=(wt=(qt=D[5])==null?void 0:qt.history)==null?void 0:wt.at(-1))!=null&&Et.mcap?Xt(D[5].history.at(-1).mcap):"UNK")+"")&&At(R,Z);const Rt={};$[0]&48&&(Rt.data=D[4].length?[...new Set(D[4].flatMap(D[16]))].sort().map(D[17]):[{date:new Date().toISOString(),value:0}]),x.$set(Rt),(!gt||$[0]&2)&&dt!==(dt=D[1].name+"")&&At(Bt,dt);const zt={};$[0]&5&&(zt.graph=an(un(D[0],D[2],"down"),D[2])),mt.$set(zt),(!gt||$[0]&2)&&Ct!==(Ct=D[1].name+"")&&At(Gt,Ct);const Vt={};$[0]&57&&(Vt.rows=D[4].map(D[18]).map(D[19])),_t.$set(Vt)},i(D){gt||(tt(x.$$.fragment,D),tt(mt.$$.fragment,D),tt(_t.$$.fragment,D),gt=!0)},o(D){nt(x.$$.fragment,D),nt(mt.$$.fragment,D),nt(_t.$$.fragment,D),gt=!1},d(D){D&&w(t),le(x),le(mt),D&&w(kt),D&&w(ut),le(_t)}}}function Qh(i){var ue,be,ye;let t,e,s,n,r,o,h,a,l,u=i[1].name+"",c,f,m=ba*va+"",d,p,E,C,k,M,L,F,G=Xt(i[3].derivative.usd)+"",H,X,j,W,A,N,Z=((ye=(be=(ue=i[5])==null?void 0:ue.history)==null?void 0:be.at(-1))!=null&&ye.mcap?Xt(i[5].history.at(-1).mcap):"UNK")+"",R,y,T,x,O,g,P,U,J,Q,xt,ht,Tt,dt=i[1].name+"",Bt,jt,Wt,St,mt,kt,ut,ct,pt,Pt,Nt,ft,It,Ct=i[1].name+"",Gt,Qt,Zt,_t,gt;return x=new Bl({props:{data:i[8].length?[...new Set(i[8].flatMap(i[20]))].sort().map(i[21]):[{date:new Date().toISOString(),value:0}]}}),mt=new Jl({props:{graph:an(un(i[0],i[2],"up"),i[2])}}),_t=new il({props:{columns:[{id:"share",title:"%",class:""},{id:"name",title:"Name",class:"font-medium",link:!0},{id:"price",title:"Price",class:"hidden lg:table-cell"},{id:"amount",title:"Amount",class:"hidden sm:table-cell"},{id:"derivative-usd",title:"Backing",class:""},{id:"derivative-ratio",title:"Mcap Ratio",class:""}],rows:i[8].map(i[22]).map(i[23]),sort:[{by:"share"}],class:""}}),{c(){t=B("div"),e=B("div"),s=B("div"),n=B("div"),r=B("h2"),o=q("History of Derivative Mcap Ratio"),h=lt(),a=B("p"),l=q("View "),c=q(u),f=q("'s derivative history of up to the last "),d=q(m),p=q(" days."),E=lt(),C=B("div"),k=B("dl"),M=B("dt"),L=q(`Current Derivative Mcap Ratio
								`),F=B("dd"),H=q(G),X=lt(),j=B("dl"),W=B("dt"),A=q("Current Market Cap"),N=B("dd"),R=q(Z),y=lt(),T=B("div"),re(x.$$.fragment),O=lt(),g=B("div"),P=B("div"),U=B("div"),J=B("h2"),Q=q("Derivative Chain"),xt=lt(),ht=B("p"),Tt=q("View the full chain of "),Bt=q(dt),jt=q("'s derivative assets."),Wt=lt(),St=B("div"),re(mt.$$.fragment),kt=lt(),ut=B("div"),ct=B("div"),pt=B("h2"),Pt=q("Derivative Assets"),Nt=lt(),ft=B("p"),It=q("List of "),Gt=q(Ct),Qt=q("'s derivative assets."),Zt=lt(),re(_t.$$.fragment),this.h()},l(D){t=I(D,"DIV",{class:!0});var $=z(t);e=I($,"DIV",{class:!0});var Rt=z(e);s=I(Rt,"DIV",{class:!0});var zt=z(s);n=I(zt,"DIV",{class:!0});var Vt=z(n);r=I(Vt,"H2",{class:!0});var qt=z(r);o=Y(qt,"History of Derivative Mcap Ratio"),qt.forEach(w),h=at(Vt),a=I(Vt,"P",{class:!0});var wt=z(a);l=Y(wt,"View "),c=Y(wt,u),f=Y(wt,"'s derivative history of up to the last "),d=Y(wt,m),p=Y(wt," days."),wt.forEach(w),Vt.forEach(w),E=at(zt),C=I(zt,"DIV",{class:!0});var Et=z(C);k=I(Et,"DL",{});var ce=z(k);M=I(ce,"DT",{class:!0});var _e=z(M);L=Y(_e,`Current Derivative Mcap Ratio
								`),_e.forEach(w),F=I(ce,"DD",{class:!0});var fe=z(F);H=Y(fe,G),fe.forEach(w),ce.forEach(w),X=at(Et),j=I(Et,"DL",{class:!0});var $t=z(j);W=I($t,"DT",{class:!0});var de=z(W);A=Y(de,"Current Market Cap"),de.forEach(w),N=I($t,"DD",{class:!0});var me=z(N);R=Y(me,Z),me.forEach(w),$t.forEach(w),Et.forEach(w),zt.forEach(w),y=at(Rt),T=I(Rt,"DIV",{class:!0});var we=z(T);oe(x.$$.fragment,we),we.forEach(w),Rt.forEach(w),O=at($),g=I($,"DIV",{class:!0});var te=z(g);P=I(te,"DIV",{class:!0});var xe=z(P);U=I(xe,"DIV",{class:!0});var ee=z(U);J=I(ee,"H2",{class:!0});var Me=z(J);Q=Y(Me,"Derivative Chain"),Me.forEach(w),xt=at(ee),ht=I(ee,"P",{class:!0});var ie=z(ht);Tt=Y(ie,"View the full chain of "),Bt=Y(ie,dt),jt=Y(ie,"'s derivative assets."),ie.forEach(w),ee.forEach(w),xe.forEach(w),Wt=at(te),St=I(te,"DIV",{class:!0});var Se=z(St);oe(mt.$$.fragment,Se),Se.forEach(w),te.forEach(w),$.forEach(w),kt=at(D),ut=I(D,"DIV",{class:!0});var se=z(ut);ct=I(se,"DIV",{class:!0});var ae=z(ct);pt=I(ae,"H2",{class:!0});var rt=z(pt);Pt=Y(rt,"Derivative Assets"),rt.forEach(w),Nt=at(ae),ft=I(ae,"P",{class:!0});var Dt=z(ft);It=Y(Dt,"List of "),Gt=Y(Dt,Ct),Qt=Y(Dt,"'s derivative assets."),Dt.forEach(w),ae.forEach(w),Zt=at(se),oe(_t.$$.fragment,se),se.forEach(w),this.h()},h(){b(r,"class","text-3xl tracking-tight font-bold text-gray-900"),b(a,"class","mt-4 text-lg text-gray-500"),b(n,"class","max-w-3xl mx-auto text-center"),b(M,"class","text-sm font-medium text-gray-500 truncate"),b(F,"class","mt-1 text-3xl font-semibold text-gray-900"),b(W,"class","text-sm font-medium text-gray-500 truncate"),b(N,"class","mt-1 text-3xl font-semibold text-gray-900"),b(j,"class","text-right"),b(C,"class","flex mt-6 items-center justify-between"),b(s,"class","px-4 pt-5 sm:px-6 sm:pt-6"),b(T,"class","mt-6 overflow-visible"),b(e,"class","relative bg-gray-50 shadow sm:rounded-lg overflow-hidden"),b(J,"class","text-3xl tracking-tight font-bold text-gray-900"),b(ht,"class","mt-4 text-lg text-gray-500"),b(U,"class","max-w-3xl mx-auto text-center"),b(P,"class","px-4 pt-5 sm:px-6 sm:pt-6"),b(St,"class","flex mt-6 justify-center"),b(g,"class","bg-gray-50 shadow sm:rounded-lg overflow-hidden"),b(t,"class","grid grid-cols-1 gap-4 lg:grid-cols-2 shadow-none"),b(pt,"class","text-3xl tracking-tight font-bold text-gray-900"),b(ft,"class","mt-4 text-lg text-gray-500"),b(ct,"class","max-w-3xl mx-auto text-center px-4 py-5 sm:p-6"),b(ut,"class","bg-gray-50 shadow sm:rounded-lg overflow-hidden sm:mx-0 divide-y divide-gray-200")},m(D,$){st(D,t,$),_(t,e),_(e,s),_(s,n),_(n,r),_(r,o),_(n,h),_(n,a),_(a,l),_(a,c),_(a,f),_(a,d),_(a,p),_(s,E),_(s,C),_(C,k),_(k,M),_(M,L),_(k,F),_(F,H),_(C,X),_(C,j),_(j,W),_(W,A),_(j,N),_(N,R),_(e,y),_(e,T),he(x,T,null),_(t,O),_(t,g),_(g,P),_(P,U),_(U,J),_(J,Q),_(U,xt),_(U,ht),_(ht,Tt),_(ht,Bt),_(ht,jt),_(g,Wt),_(g,St),he(mt,St,null),st(D,kt,$),st(D,ut,$),_(ut,ct),_(ct,pt),_(pt,Pt),_(ct,Nt),_(ct,ft),_(ft,It),_(ft,Gt),_(ft,Qt),_(ut,Zt),he(_t,ut,null),gt=!0},p(D,$){var qt,wt,Et;(!gt||$[0]&2)&&u!==(u=D[1].name+"")&&At(c,u),(!gt||$[0]&8)&&G!==(G=Xt(D[3].derivative.usd)+"")&&At(H,G),(!gt||$[0]&32)&&Z!==(Z=((Et=(wt=(qt=D[5])==null?void 0:qt.history)==null?void 0:wt.at(-1))!=null&&Et.mcap?Xt(D[5].history.at(-1).mcap):"UNK")+"")&&At(R,Z);const Rt={};$[0]&288&&(Rt.data=D[8].length?[...new Set(D[8].flatMap(D[20]))].sort().map(D[21]):[{date:new Date().toISOString(),value:0}]),x.$set(Rt),(!gt||$[0]&2)&&dt!==(dt=D[1].name+"")&&At(Bt,dt);const zt={};$[0]&5&&(zt.graph=an(un(D[0],D[2],"up"),D[2])),mt.$set(zt),(!gt||$[0]&2)&&Ct!==(Ct=D[1].name+"")&&At(Gt,Ct);const Vt={};$[0]&297&&(Vt.rows=D[8].map(D[22]).map(D[23])),_t.$set(Vt)},i(D){gt||(tt(x.$$.fragment,D),tt(mt.$$.fragment,D),tt(_t.$$.fragment,D),gt=!0)},o(D){nt(x.$$.fragment,D),nt(mt.$$.fragment,D),nt(_t.$$.fragment,D),gt=!1},d(D){D&&w(t),le(x),le(mt),D&&w(kt),D&&w(ut),le(_t)}}}function Rm(i){let t,e;return t=new Ua({props:{class:"h-6 w-6 text-blue-500","aria-hidden":"true"}}),{c(){re(t.$$.fragment)},l(s){oe(t.$$.fragment,s)},m(s,n){he(t,s,n),e=!0},i(s){e||(tt(t.$$.fragment,s),e=!0)},o(s){nt(t.$$.fragment,s),e=!1},d(s){le(t,s)}}}function zm(i){let t,e;return t=new Ya({props:{class:"h-6 w-6 text-green-500","aria-hidden":"true"}}),{c(){re(t.$$.fragment)},l(s){oe(t.$$.fragment,s)},m(s,n){he(t,s,n),e=!0},i(s){e||(tt(t.$$.fragment,s),e=!0)},o(s){nt(t.$$.fragment,s),e=!1},d(s){le(t,s)}}}function Vm(i){let t,e;return t=new Wa({props:{class:"h-6 w-6 text-red-500","aria-hidden":"true"}}),{c(){re(t.$$.fragment)},l(s){oe(t.$$.fragment,s)},m(s,n){he(t,s,n),e=!0},i(s){e||(tt(t.$$.fragment,s),e=!0)},o(s){nt(t.$$.fragment,s),e=!1},d(s){le(t,s)}}}function Zh(i){let t,e,s,n,r,o,h=i[32].html+"",a,l;const u=[Vm,zm,Rm],c=[];function f(m,d){return m[32].type=="doubt"?0:m[32].type=="praise"?1:m[32].type=="addition"?2:-1}return~(s=f(i))&&(n=c[s]=u[s](i)),{c(){t=B("div"),e=B("div"),n&&n.c(),r=lt(),o=B("dl"),a=lt(),this.h()},l(m){t=I(m,"DIV",{class:!0});var d=z(t);e=I(d,"DIV",{class:!0});var p=z(e);n&&n.l(p),p.forEach(w),r=at(d),o=I(d,"DL",{class:!0});var E=z(o);E.forEach(w),a=at(d),d.forEach(w),this.h()},h(){b(e,"class","flex-shrink-0 mr-4"),b(o,"class","flex-1"),b(t,"class","relative flex")},m(m,d){st(m,t,d),_(t,e),~s&&c[s].m(e,null),_(t,r),_(t,o),o.innerHTML=h,_(t,a),l=!0},p(m,d){let p=s;s=f(m),s!==p&&(n&&(ti(),nt(c[p],1,1,()=>{c[p]=null}),ei()),~s?(n=c[s],n||(n=c[s]=u[s](m),n.c()),tt(n,1),n.m(e,null)):n=null),(!l||d[0]&512)&&h!==(h=m[32].html+"")&&(o.innerHTML=h)},i(m){l||(tt(n),l=!0)},o(m){nt(n),l=!1},d(m){m&&w(t),~s&&c[s].d()}}}function Om(i){let t,e,s,n,r,o,h,a,l,u,c,f,m,d,p,E=i[1].name+"",C,k,M,L,F;t=new Aa({props:{title:i[7].title,description:i[7].description,openGraph:{title:i[7].title,description:i[7].description,url:i[7].url,type:"website",images:[i[7].image]},twitter:{site:"@bcked_com",title:i[7].title,description:i[7].description,image:i[7].image.url,imageAlt:i[7].image.alt}}});let G=i[6],H=[];for(let R=0;R<G.length;R+=1)H[R]=Jh(Yh(i,G,R));const X=R=>nt(H[R],1,1,()=>{H[R]=null});let j=i[4].length>0&&Xh(i),W=i[8].length>0&&Qh(i),A=i[9],N=[];for(let R=0;R<A.length;R+=1)N[R]=Zh(qh(i,A,R));const Z=R=>nt(N[R],1,1,()=>{N[R]=null});return{c(){re(t.$$.fragment),e=lt(),s=B("div"),n=B("div"),r=B("div");for(let R=0;R<H.length;R+=1)H[R].c();o=lt(),j&&j.c(),h=lt(),W&&W.c(),a=lt(),l=B("div"),u=B("div"),c=B("h2"),f=q("Praise and Doubts"),m=lt(),d=B("p"),p=q("Any praise and doubts the community has about "),C=q(E),k=q("'s backing."),M=lt(),L=B("div");for(let R=0;R<N.length;R+=1)N[R].c();this.h()},l(R){oe(t.$$.fragment,R),e=at(R),s=I(R,"DIV",{class:!0});var y=z(s);n=I(y,"DIV",{class:!0});var T=z(n);r=I(T,"DIV",{class:!0});var x=z(r);for(let Q=0;Q<H.length;Q+=1)H[Q].l(x);x.forEach(w),o=at(T),j&&j.l(T),h=at(T),W&&W.l(T),a=at(T),l=I(T,"DIV",{class:!0});var O=z(l);u=I(O,"DIV",{class:!0});var g=z(u);c=I(g,"H2",{class:!0});var P=z(c);f=Y(P,"Praise and Doubts"),P.forEach(w),m=at(g),d=I(g,"P",{class:!0});var U=z(d);p=Y(U,"Any praise and doubts the community has about "),C=Y(U,E),k=Y(U,"'s backing."),U.forEach(w),g.forEach(w),M=at(O),L=I(O,"DIV",{class:!0});var J=z(L);for(let Q=0;Q<N.length;Q+=1)N[Q].l(J);J.forEach(w),O.forEach(w),T.forEach(w),y.forEach(w),this.h()},h(){b(r,"class","grid grid-cols-2 gap-[0.1rem] sm:gap-4 md:grid-cols-4 shadow sm:shadow-none"),b(c,"class","text-3xl tracking-tight font-bold text-gray-900"),b(d,"class","mt-4 text-lg text-gray-500"),b(u,"class","max-w-3xl mx-auto text-center"),b(L,"class","mt-6 space-y-10 sm:space-y-0 sm:grid sm:grid-cols-2 sm:gap-x-6 sm:gap-y-12 lg:grid-cols-3 lg:gap-x-8"),b(l,"class","px-4 py-5 bg-gray-50 shadow sm:rounded-lg overflow-hidden sm:p-6"),b(n,"class","max-w-7xl mx-auto space-y-4 sm:px-6 lg:px-8"),b(s,"class","py-10")},m(R,y){he(t,R,y),st(R,e,y),st(R,s,y),_(s,n),_(n,r);for(let T=0;T<H.length;T+=1)H[T].m(r,null);_(n,o),j&&j.m(n,null),_(n,h),W&&W.m(n,null),_(n,a),_(n,l),_(l,u),_(u,c),_(c,f),_(u,m),_(u,d),_(d,p),_(d,C),_(d,k),_(l,M),_(l,L);for(let T=0;T<N.length;T+=1)N[T].m(L,null);F=!0},p(R,y){const T={};if(y[0]&128&&(T.title=R[7].title),y[0]&128&&(T.description=R[7].description),y[0]&128&&(T.openGraph={title:R[7].title,description:R[7].description,url:R[7].url,type:"website",images:[R[7].image]}),y[0]&128&&(T.twitter={site:"@bcked_com",title:R[7].title,description:R[7].description,image:R[7].image.url,imageAlt:R[7].image.alt}),t.$set(T),y[0]&64){G=R[6];let x;for(x=0;x<G.length;x+=1){const O=Yh(R,G,x);H[x]?(H[x].p(O,y),tt(H[x],1)):(H[x]=Jh(O),H[x].c(),tt(H[x],1),H[x].m(r,null))}for(ti(),x=G.length;x<H.length;x+=1)X(x);ei()}if(R[4].length>0?j?(j.p(R,y),y[0]&16&&tt(j,1)):(j=Xh(R),j.c(),tt(j,1),j.m(n,h)):j&&(ti(),nt(j,1,1,()=>{j=null}),ei()),R[8].length>0?W?(W.p(R,y),y[0]&256&&tt(W,1)):(W=Qh(R),W.c(),tt(W,1),W.m(n,a)):W&&(ti(),nt(W,1,1,()=>{W=null}),ei()),(!F||y[0]&2)&&E!==(E=R[1].name+"")&&At(C,E),y[0]&512){A=R[9];let x;for(x=0;x<A.length;x+=1){const O=qh(R,A,x);N[x]?(N[x].p(O,y),tt(N[x],1)):(N[x]=Zh(O),N[x].c(),tt(N[x],1),N[x].m(L,null))}for(ti(),x=A.length;x<N.length;x+=1)Z(x);ei()}},i(R){if(!F){tt(t.$$.fragment,R);for(let y=0;y<G.length;y+=1)tt(H[y]);tt(j),tt(W);for(let y=0;y<A.length;y+=1)tt(N[y]);F=!0}},o(R){nt(t.$$.fragment,R),H=H.filter(Boolean);for(let y=0;y<H.length;y+=1)nt(H[y]);nt(j),nt(W),N=N.filter(Boolean);for(let y=0;y<N.length;y+=1)nt(N[y]);F=!1},d(R){le(t,R),R&&w(e),R&&w(s),ln(H,R),j&&j.d(),W&&W.d(),ln(N,R)}}}let va=3,ba=10;function Nm(i,t,e){let s,n,r,o,h,a,l,u,c,f,m,d,p,E,C,k,M,L,F;K(i,La,g=>e(15,F=g));let{data:G}=t,H;const X=new Cm;async function j(){u.contracts&&await X.getPrice(u.contracts)}zr(async()=>{await j();const g=setInterval(async()=>{await j()},5e3);return()=>{clearInterval(g)}});let W=[];const A=g=>Ns.map(g.data.history,"timestamp"),N=g=>{var J;const P=(J=Ds(u.history,g))==null?void 0:J.mcap,U=P?fo(Ns.sum(f.map(Q=>Ds(Q.data.history,g).value))/P,4):0;return{date:g,value:U}},Z=g=>({linkedNode:H.getNode(g.toId),linkData:g.data}),R=({linkedNode:g,linkData:P})=>{var U,J,Q,xt,ht,Tt,dt,Bt,jt,Wt,St,mt,kt,ut,ct,pt,Pt,Nt,ft,It,Ct;return{name:{text:g==null?void 0:g.data.details.name,value:g==null?void 0:g.data.details.name,icon:g==null?void 0:g.data.icon.href},"name-path":{text:`${bi}/assets/${g==null?void 0:g.id}`,value:`${bi}/assets/${g==null?void 0:g.id}`},price:{text:(Q=(J=(U=g==null?void 0:g.data.history)==null?void 0:U.at(-1))==null?void 0:J.price)!=null&&Q.usd?Xt(((Tt=(ht=(xt=g==null?void 0:g.data.history)==null?void 0:xt.at(-1))==null?void 0:ht.price)==null?void 0:Tt.usd)??0):"UNK",value:(jt=(Bt=(dt=g==null?void 0:g.data.history)==null?void 0:dt.at(-1))==null?void 0:Bt.price)==null?void 0:jt.usd},amount:{text:(St=(Wt=P.history)==null?void 0:Wt.at(-1))!=null&&St.amount?uo(P.history.at(-1).amount):"UNK",value:(kt=(mt=P.history)==null?void 0:mt.at(-1))==null?void 0:kt.amount},share:(ct=(ut=P.history)==null?void 0:ut.at(-1))!=null&&ct.value?{text:$e(P.history.at(-1).value/M.underlying.usd),value:P.history.at(-1).value/M.underlying.usd}:{text:"UNK",value:void 0},"underlying-usd":(Pt=(pt=P.history)==null?void 0:pt.at(-1))!=null&&Pt.value?{text:Xt(P.history.at(-1).value),value:P.history.at(-1).value}:{text:"UNK",value:void 0},"underlying-ratio":(ft=(Nt=P.history)==null?void 0:Nt.at(-1))!=null&&ft.value&&((Ct=(It=u==null?void 0:u.history)==null?void 0:It.at(-1))!=null&&Ct.mcap)?{text:$e(P.history.at(-1).value/(u==null?void 0:u.history.at(-1).mcap)),value:P.history.at(-1).value/(u==null?void 0:u.history.at(-1).mcap)}:{text:"UNK",value:void 0}}},y=g=>Ns.map(g.data.history,"timestamp"),T=g=>{var J;const P=(J=Ds(u.history,g))==null?void 0:J.mcap,U=P?fo(Ns.sum(m.map(Q=>Ds(Q.data.history,g).value))/P,4):0;return{date:g,value:U}},x=g=>({linkedNode:H.getNode(g.fromId),linkData:g.data}),O=({linkedNode:g,linkData:P})=>{var U,J,Q,xt,ht,Tt,dt,Bt,jt,Wt,St,mt,kt,ut,ct,pt,Pt,Nt;return{name:{text:g==null?void 0:g.data.details.name,value:g==null?void 0:g.data.details.name,icon:g==null?void 0:g.data.icon.href},"name-path":{text:`${bi}/assets/${g==null?void 0:g.id}`,value:`${bi}/assets/${g==null?void 0:g.id}`},price:{text:(Q=(J=(U=g==null?void 0:g.data.history)==null?void 0:U.at(-1))==null?void 0:J.price)!=null&&Q.usd?Xt(g==null?void 0:g.data.history.at(-1).price.usd):"UNK",value:(Tt=(ht=(xt=g==null?void 0:g.data.history)==null?void 0:xt.at(-1))==null?void 0:ht.price)==null?void 0:Tt.usd},amount:{text:(Bt=(dt=P.history)==null?void 0:dt.at(-1))!=null&&Bt.amount?uo(P.history.at(-1).amount):"UNK",value:(Wt=(jt=P.history)==null?void 0:jt.at(-1))==null?void 0:Wt.amount},share:(mt=(St=P.history)==null?void 0:St.at(-1))!=null&&mt.value?{text:$e(P.history.at(-1).value/M.derivative.usd),value:P.history.at(-1).value/M.derivative.usd}:{text:"UNK",value:void 0},"derivative-usd":(ut=(kt=P.history)==null?void 0:kt.at(-1))!=null&&ut.value?{text:Xt(P.history.at(-1).value),value:P.history.at(-1).value}:{text:"UNK",value:void 0},"derivative-ratio":(pt=(ct=P.history)==null?void 0:ct.at(-1))!=null&&pt.value&&((Nt=(Pt=u==null?void 0:u.history)==null?void 0:Pt.at(-1))!=null&&Nt.mcap)?{text:$e(P.history.at(-1).value/u.history.at(-1).mcap),value:P.history.at(-1).value/u.history.at(-1).mcap}:{text:"UNK",value:void 0}}};return i.$$set=g=>{"data"in g&&e(10,G=g.data)},i.$$.update=()=>{var g,P,U;i.$$.dirty[0]&1024&&e(11,{assetsPrice:s,assetsBacking:n,assetsStats:r,graphData:o,comments:h}=G,r,(e(14,o),e(10,G)),(e(9,h),e(10,G))),i.$$.dirty[0]&16384&&e(0,H=Fa(o)),i.$$.dirty[0]&32768&&e(2,a=F.params.id),i.$$.dirty[0]&5&&e(13,l=H.getNode(a)),i.$$.dirty[0]&8192&&e(5,u=l.data),i.$$.dirty[0]&5&&e(12,c=(H.getLinks(a)??[]).filter(J=>{var Q;return(Q=J.data.history.at(-1))==null?void 0:Q.amount})),i.$$.dirty[0]&4100&&e(4,f=c.filter(J=>J.fromId==a)),i.$$.dirty[0]&4100&&e(8,m=c.filter(J=>J.fromId!=a)),i.$$.dirty[0]&32&&e(1,{details:d,issuer:p,chain:E,icon:C,contracts:k}=u,d),i.$$.dirty[0]&2052&&e(3,M=r[a]),i.$$.dirty[0]&56&&e(6,W=[(U=(P=(g=u==null?void 0:u.history)==null?void 0:g.at(-1))==null?void 0:P.price)!=null&&U.usd?{name:"Price",value:u.history.at(-1).price.usd,type:"currency"}:{name:"Price",value:"UNK",type:"standard"},{name:"Backing Assets",value:f.length,type:"standard"},M.underlying.ratio?{name:"Backing Ratio",value:M.underlying.ratio,type:"percent"}:{name:"Backing Ratio",value:"N/A",type:"standard"},M.underlying.count>0?{name:"Backing Uniformity",value:M.underlying.uniformity,type:"percent"}:{name:"Backing Uniformity",value:"N/A",type:"standard"}]),i.$$.dirty[0]&14&&e(7,L={title:`${d.name} (${d.symbol}) Backing, History, Chain`,description:`${d.name} is backed ${M.underlying.ratio?`to ${$e(M.underlying.ratio)} `:""}
			with ${Xt(M.underlying.usd)} by ${M.underlying.count} ${M.underlying.count==1?"asset":"assets"}. Learn more ...`,url:`${co}/assets/${a}`,image:{url:`${co}/previews/assets/${a}.jpg`,width:1200,height:630,alt:`Preview of ${d.name}'s backing view.`}})},[H,d,a,M,f,u,W,L,m,h,G,r,c,l,o,F,A,N,Z,R,y,T,x,O]}class qm extends Ve{constructor(t){super(),Oe(this,t,Nm,Om,Ne,{data:10},null,[-1,-1])}}export{qm as default};
