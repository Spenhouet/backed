var Oa=Object.defineProperty;var Da=(i,t,e)=>t in i?Oa(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var Ji=(i,t,e)=>(Da(i,typeof t!="symbol"?t+"":t,e),e);import{S as Ve,i as Oe,s as De,G as wi,V as Ue,a5 as vt,a6 as bt,m as R,h as x,n as _,a7 as xi,b as ft,K as y,O as Kt,H as Mi,I as Si,J as Ci,Y as Cr,f as Q,t as st,E as Er,T as Ei,W as Tr,P as Jt,k as A,l as B,ae as kr,af as Pr,C as ss,v as hn,g as Je,d as Xe,L as ln,N as Zh,a1 as K,q,r as Y,u as Ot,x as Qt,y as Zt,z as $t,A as te,e as ro,o as $h,a2 as et,M as Na,p as Yt,a as ht,c as lt}from"../../../../../chunks/index-17510b9a.js";import{b as Os}from"../../../../../chunks/paths-24bb4e9c.js";import{p as La}from"../../../../../chunks/stores-b978d586.js";import{c as ur,l as Ds}from"../../../../../chunks/lodash.default-76769d5d.js";import{m as oo,c as ho,i as tl,g as el,l as $i,b as ti,f as Xt,d as an,e as un,h as Ns,j as lo}from"../../../../../chunks/graph-5ab05bb3.js";import{I as Fa}from"../../../../../chunks/icon-490a6472.js";import{w as it,j as Mt}from"../../../../../chunks/singletons-4789530f.js";import{n as Aa,T as il}from"../../../../../chunks/table-9128ac7c.js";import{P as ao}from"../../../../../chunks/public-550f299c.js";import{S as Ba}from"../../../../../chunks/index-24193bbc.js";function Ia(i){let t,e,s,n,r;const o=i[2].default,h=wi(o,i,i[1],null);let a=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{viewBox:"0 0 24 24"},{stroke:"currentColor"},{"aria-hidden":"true"},i[0]],l={};for(let u=0;u<a.length;u+=1)l=Ue(l,a[u]);return{c(){t=vt("svg"),h&&h.c(),e=vt("path"),this.h()},l(u){t=bt(u,"svg",{xmlns:!0,fill:!0,viewBox:!0,stroke:!0,"aria-hidden":!0});var c=R(t);h&&h.l(c),e=bt(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),R(e).forEach(x),c.forEach(x),this.h()},h(){_(e,"stroke-linecap","round"),_(e,"stroke-linejoin","round"),_(e,"stroke-width","2"),_(e,"d","M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"),xi(t,l)},m(u,c){ft(u,t,c),h&&h.m(t,null),y(t,e),s=!0,n||(r=[Kt(t,"click",i[3]),Kt(t,"mouseover",i[4]),Kt(t,"mouseenter",i[5]),Kt(t,"mouseleave",i[6]),Kt(t,"keydown",i[7])],n=!0)},p(u,[c]){h&&h.p&&(!s||c&2)&&Mi(h,o,u,u[1],s?Ci(o,u[1],c,null):Si(u[1]),null),xi(t,l=Cr(a,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{viewBox:"0 0 24 24"},{stroke:"currentColor"},{"aria-hidden":"true"},c&1&&u[0]]))},i(u){s||(Q(h,u),s=!0)},o(u){st(h,u),s=!1},d(u){u&&x(t),h&&h.d(u),n=!1,Er(r)}}}function Ua(i,t,e){const s=[];let n=Ei(t,s),{$$slots:r={},$$scope:o}=t;function h(f){Jt.call(this,i,f)}function a(f){Jt.call(this,i,f)}function l(f){Jt.call(this,i,f)}function u(f){Jt.call(this,i,f)}function c(f){Jt.call(this,i,f)}return i.$$set=f=>{t=Ue(Ue({},t),Tr(f)),e(0,n=Ei(t,s)),"$$scope"in f&&e(1,o=f.$$scope)},[n,o,r,h,a,l,u,c]}class Ha extends Ve{constructor(t){super(),Oe(this,t,Ua,Ia,De,{})}}function ja(i){let t,e,s,n,r;const o=i[2].default,h=wi(o,i,i[1],null);let a=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{viewBox:"0 0 24 24"},{stroke:"currentColor"},{"aria-hidden":"true"},i[0]],l={};for(let u=0;u<a.length;u+=1)l=Ue(l,a[u]);return{c(){t=vt("svg"),h&&h.c(),e=vt("path"),this.h()},l(u){t=bt(u,"svg",{xmlns:!0,fill:!0,viewBox:!0,stroke:!0,"aria-hidden":!0});var c=R(t);h&&h.l(c),e=bt(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),R(e).forEach(x),c.forEach(x),this.h()},h(){_(e,"stroke-linecap","round"),_(e,"stroke-linejoin","round"),_(e,"stroke-width","2"),_(e,"d","M10 14H5.236a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.736 3h4.018a2 2 0 01.485.06l3.76.94m-7 10v5a2 2 0 002 2h.096c.5 0 .905-.405.905-.904 0-.715.211-1.413.608-2.008L17 13V4m-7 10h2m5-10h2a2 2 0 012 2v6a2 2 0 01-2 2h-2.5"),xi(t,l)},m(u,c){ft(u,t,c),h&&h.m(t,null),y(t,e),s=!0,n||(r=[Kt(t,"click",i[3]),Kt(t,"mouseover",i[4]),Kt(t,"mouseenter",i[5]),Kt(t,"mouseleave",i[6]),Kt(t,"keydown",i[7])],n=!0)},p(u,[c]){h&&h.p&&(!s||c&2)&&Mi(h,o,u,u[1],s?Ci(o,u[1],c,null):Si(u[1]),null),xi(t,l=Cr(a,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{viewBox:"0 0 24 24"},{stroke:"currentColor"},{"aria-hidden":"true"},c&1&&u[0]]))},i(u){s||(Q(h,u),s=!0)},o(u){st(h,u),s=!1},d(u){u&&x(t),h&&h.d(u),n=!1,Er(r)}}}function Wa(i,t,e){const s=[];let n=Ei(t,s),{$$slots:r={},$$scope:o}=t;function h(f){Jt.call(this,i,f)}function a(f){Jt.call(this,i,f)}function l(f){Jt.call(this,i,f)}function u(f){Jt.call(this,i,f)}function c(f){Jt.call(this,i,f)}return i.$$set=f=>{t=Ue(Ue({},t),Tr(f)),e(0,n=Ei(t,s)),"$$scope"in f&&e(1,o=f.$$scope)},[n,o,r,h,a,l,u,c]}class Ga extends Ve{constructor(t){super(),Oe(this,t,Wa,ja,De,{})}}function qa(i){let t,e,s,n,r;const o=i[2].default,h=wi(o,i,i[1],null);let a=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{viewBox:"0 0 24 24"},{stroke:"currentColor"},{"aria-hidden":"true"},i[0]],l={};for(let u=0;u<a.length;u+=1)l=Ue(l,a[u]);return{c(){t=vt("svg"),h&&h.c(),e=vt("path"),this.h()},l(u){t=bt(u,"svg",{xmlns:!0,fill:!0,viewBox:!0,stroke:!0,"aria-hidden":!0});var c=R(t);h&&h.l(c),e=bt(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),R(e).forEach(x),c.forEach(x),this.h()},h(){_(e,"stroke-linecap","round"),_(e,"stroke-linejoin","round"),_(e,"stroke-width","2"),_(e,"d","M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"),xi(t,l)},m(u,c){ft(u,t,c),h&&h.m(t,null),y(t,e),s=!0,n||(r=[Kt(t,"click",i[3]),Kt(t,"mouseover",i[4]),Kt(t,"mouseenter",i[5]),Kt(t,"mouseleave",i[6]),Kt(t,"keydown",i[7])],n=!0)},p(u,[c]){h&&h.p&&(!s||c&2)&&Mi(h,o,u,u[1],s?Ci(o,u[1],c,null):Si(u[1]),null),xi(t,l=Cr(a,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{viewBox:"0 0 24 24"},{stroke:"currentColor"},{"aria-hidden":"true"},c&1&&u[0]]))},i(u){s||(Q(h,u),s=!0)},o(u){st(h,u),s=!1},d(u){u&&x(t),h&&h.d(u),n=!1,Er(r)}}}function Ya(i,t,e){const s=[];let n=Ei(t,s),{$$slots:r={},$$scope:o}=t;function h(f){Jt.call(this,i,f)}function a(f){Jt.call(this,i,f)}function l(f){Jt.call(this,i,f)}function u(f){Jt.call(this,i,f)}function c(f){Jt.call(this,i,f)}return i.$$set=f=>{t=Ue(Ue({},t),Tr(f)),e(0,n=Ei(t,s)),"$$scope"in f&&e(1,o=f.$$scope)},[n,o,r,h,a,l,u,c]}class Ka extends Ve{constructor(t){super(),Oe(this,t,Ya,qa,De,{})}}function uo(i,t=0){var e=Math.pow(10,t),s=i*e*(1+Number.EPSILON);return Math.round(s)/e}function bi(i,t){return i==null||t==null?NaN:i<t?-1:i>t?1:i>=t?0:NaN}function Ja(i,t){return i==null||t==null?NaN:t<i?-1:t>i?1:t>=i?0:NaN}function sl(i){let t,e,s;i.length!==2?(t=bi,e=(h,a)=>bi(i(h),a),s=(h,a)=>i(h)-a):(t=i===bi||i===Ja?i:Xa,e=i,s=i);function n(h,a,l=0,u=h.length){if(l<u){if(t(a,a)!==0)return u;do{const c=l+u>>>1;e(h[c],a)<0?l=c+1:u=c}while(l<u)}return l}function r(h,a,l=0,u=h.length){if(l<u){if(t(a,a)!==0)return u;do{const c=l+u>>>1;e(h[c],a)<=0?l=c+1:u=c}while(l<u)}return l}function o(h,a,l=0,u=h.length){const c=n(h,a,l,u-1);return c>l&&s(h[c-1],a)>-s(h[c],a)?c-1:c}return{left:n,center:o,right:r}}function Xa(){return 0}function Qa(i){return i===null?NaN:+i}function*Za(i,t){if(t===void 0)for(let e of i)e!=null&&(e=+e)>=e&&(yield e);else{let e=-1;for(let s of i)(s=t(s,++e,i))!=null&&(s=+s)>=s&&(yield s)}}const $a=sl(bi),tu=$a.right;sl(Qa).center;const eu=tu;function iu(i=bi){if(i===bi)return nl;if(typeof i!="function")throw new TypeError("compare is not a function");return(t,e)=>{const s=i(t,e);return s||s===0?s:(i(e,e)===0)-(i(t,t)===0)}}function nl(i,t){return(i==null||!(i>=i))-(t==null||!(t>=t))||(i<t?-1:i>t?1:0)}const su=Math.sqrt(50),nu=Math.sqrt(10),ru=Math.sqrt(2);function cn(i,t,e){const s=(t-i)/Math.max(0,e),n=Math.floor(Math.log10(s)),r=s/Math.pow(10,n),o=r>=su?10:r>=nu?5:r>=ru?2:1;let h,a,l;return n<0?(l=Math.pow(10,-n)/o,h=Math.round(i*l),a=Math.round(t*l),h/l<i&&++h,a/l>t&&--a,l=-l):(l=Math.pow(10,n)*o,h=Math.round(i/l),a=Math.round(t/l),h*l<i&&++h,a*l>t&&--a),a<h&&.5<=e&&e<2?cn(i,t,e*2):[h,a,l]}function ou(i,t,e){if(t=+t,i=+i,e=+e,!(e>0))return[];if(i===t)return[i];const s=t<i,[n,r,o]=s?cn(t,i,e):cn(i,t,e);if(!(r>=n))return[];const h=r-n+1,a=new Array(h);if(s)if(o<0)for(let l=0;l<h;++l)a[l]=(r-l)/-o;else for(let l=0;l<h;++l)a[l]=(r-l)*o;else if(o<0)for(let l=0;l<h;++l)a[l]=(n+l)/-o;else for(let l=0;l<h;++l)a[l]=(n+l)*o;return a}function cr(i,t,e){return t=+t,i=+i,e=+e,cn(i,t,e)[2]}function hu(i,t,e){t=+t,i=+i,e=+e;const s=t<i,n=s?cr(t,i,e):cr(i,t,e);return(s?-1:1)*(n<0?1/-n:n)}function rl(i,t,e=0,s=1/0,n){if(t=Math.floor(t),e=Math.floor(Math.max(0,e)),s=Math.floor(Math.min(i.length-1,s)),!(e<=t&&t<=s))return i;for(n=n===void 0?nl:iu(n);s>e;){if(s-e>600){const a=s-e+1,l=t-e+1,u=Math.log(a),c=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*c*(a-c)/a)*(l-a/2<0?-1:1),m=Math.max(e,Math.floor(t-l*c/a+f)),d=Math.min(s,Math.floor(t+(a-l)*c/a+f));rl(i,t,m,d,n)}const r=i[t];let o=e,h=s;for(Xi(i,e,t),n(i[s],r)>0&&Xi(i,e,s);o<h;){for(Xi(i,o,h),++o,--h;n(i[o],r)<0;)++o;for(;n(i[h],r)>0;)--h}n(i[e],r)===0?Xi(i,e,h):(++h,Xi(i,h,s)),h<=t&&(e=h+1),t<=h&&(s=h-1)}return i}function Xi(i,t,e){const s=i[t];i[t]=i[e],i[e]=s}function lu(i,t,e){if(i=Float64Array.from(Za(i,e)),!(!(s=i.length)||isNaN(t=+t))){if(t<=0||s<2)return oo(i);if(t>=1)return ho(i);var s,n=(s-1)*t,r=Math.floor(n),o=ho(rl(i,r).subarray(0,r+1)),h=oo(i.subarray(r+1));return o+(h-o)*(n-r)}}function au(i,t){return lu(i,.5,t)}function zr(i,t,e){i.prototype=t.prototype=e,e.constructor=i}function ol(i,t){var e=Object.create(i.prototype);for(var s in t)e[s]=t[s];return e}function gs(){}var ls=.7,fn=1/ls,yi="\\s*([+-]?\\d+)\\s*",as="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ze="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",uu=/^#([0-9a-f]{3,8})$/,cu=new RegExp(`^rgb\\(${yi},${yi},${yi}\\)$`),fu=new RegExp(`^rgb\\(${ze},${ze},${ze}\\)$`),du=new RegExp(`^rgba\\(${yi},${yi},${yi},${as}\\)$`),mu=new RegExp(`^rgba\\(${ze},${ze},${ze},${as}\\)$`),gu=new RegExp(`^hsl\\(${as},${ze},${ze}\\)$`),pu=new RegExp(`^hsla\\(${as},${ze},${ze},${as}\\)$`),co={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};zr(gs,us,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:fo,formatHex:fo,formatHex8:vu,formatHsl:bu,formatRgb:mo,toString:mo});function fo(){return this.rgb().formatHex()}function vu(){return this.rgb().formatHex8()}function bu(){return hl(this).formatHsl()}function mo(){return this.rgb().formatRgb()}function us(i){var t,e;return i=(i+"").trim().toLowerCase(),(t=uu.exec(i))?(e=t[1].length,t=parseInt(t[1],16),e===6?go(t):e===3?new le(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?Ls(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?Ls(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=cu.exec(i))?new le(t[1],t[2],t[3],1):(t=fu.exec(i))?new le(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=du.exec(i))?Ls(t[1],t[2],t[3],t[4]):(t=mu.exec(i))?Ls(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=gu.exec(i))?bo(t[1],t[2]/100,t[3]/100,1):(t=pu.exec(i))?bo(t[1],t[2]/100,t[3]/100,t[4]):co.hasOwnProperty(i)?go(co[i]):i==="transparent"?new le(NaN,NaN,NaN,0):null}function go(i){return new le(i>>16&255,i>>8&255,i&255,1)}function Ls(i,t,e,s){return s<=0&&(i=t=e=NaN),new le(i,t,e,s)}function yu(i){return i instanceof gs||(i=us(i)),i?(i=i.rgb(),new le(i.r,i.g,i.b,i.opacity)):new le}function fr(i,t,e,s){return arguments.length===1?yu(i):new le(i,t,e,s??1)}function le(i,t,e,s){this.r=+i,this.g=+t,this.b=+e,this.opacity=+s}zr(le,fr,ol(gs,{brighter(i){return i=i==null?fn:Math.pow(fn,i),new le(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=i==null?ls:Math.pow(ls,i),new le(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new le(ii(this.r),ii(this.g),ii(this.b),dn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:po,formatHex:po,formatHex8:_u,formatRgb:vo,toString:vo}));function po(){return`#${ei(this.r)}${ei(this.g)}${ei(this.b)}`}function _u(){return`#${ei(this.r)}${ei(this.g)}${ei(this.b)}${ei((isNaN(this.opacity)?1:this.opacity)*255)}`}function vo(){const i=dn(this.opacity);return`${i===1?"rgb(":"rgba("}${ii(this.r)}, ${ii(this.g)}, ${ii(this.b)}${i===1?")":`, ${i})`}`}function dn(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function ii(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function ei(i){return i=ii(i),(i<16?"0":"")+i.toString(16)}function bo(i,t,e,s){return s<=0?i=t=e=NaN:e<=0||e>=1?i=t=NaN:t<=0&&(i=NaN),new ve(i,t,e,s)}function hl(i){if(i instanceof ve)return new ve(i.h,i.s,i.l,i.opacity);if(i instanceof gs||(i=us(i)),!i)return new ve;if(i instanceof ve)return i;i=i.rgb();var t=i.r/255,e=i.g/255,s=i.b/255,n=Math.min(t,e,s),r=Math.max(t,e,s),o=NaN,h=r-n,a=(r+n)/2;return h?(t===r?o=(e-s)/h+(e<s)*6:e===r?o=(s-t)/h+2:o=(t-e)/h+4,h/=a<.5?r+n:2-r-n,o*=60):h=a>0&&a<1?0:o,new ve(o,h,a,i.opacity)}function wu(i,t,e,s){return arguments.length===1?hl(i):new ve(i,t,e,s??1)}function ve(i,t,e,s){this.h=+i,this.s=+t,this.l=+e,this.opacity=+s}zr(ve,wu,ol(gs,{brighter(i){return i=i==null?fn:Math.pow(fn,i),new ve(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?ls:Math.pow(ls,i),new ve(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+(this.h<0)*360,t=isNaN(i)||isNaN(this.s)?0:this.s,e=this.l,s=e+(e<.5?e:1-e)*t,n=2*e-s;return new le(In(i>=240?i-240:i+120,n,s),In(i,n,s),In(i<120?i+240:i-120,n,s),this.opacity)},clamp(){return new ve(yo(this.h),Fs(this.s),Fs(this.l),dn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const i=dn(this.opacity);return`${i===1?"hsl(":"hsla("}${yo(this.h)}, ${Fs(this.s)*100}%, ${Fs(this.l)*100}%${i===1?")":`, ${i})`}`}}));function yo(i){return i=(i||0)%360,i<0?i+360:i}function Fs(i){return Math.max(0,Math.min(1,i||0))}function In(i,t,e){return(i<60?t+(e-t)*i/60:i<180?e:i<240?t+(e-t)*(240-i)/60:t)*255}const Rr=i=>()=>i;function xu(i,t){return function(e){return i+e*t}}function Mu(i,t,e){return i=Math.pow(i,e),t=Math.pow(t,e)-i,e=1/e,function(s){return Math.pow(i+s*t,e)}}function Su(i){return(i=+i)==1?ll:function(t,e){return e-t?Mu(t,e,i):Rr(isNaN(t)?e:t)}}function ll(i,t){var e=t-i;return e?xu(i,e):Rr(isNaN(i)?t:i)}const _o=function i(t){var e=Su(t);function s(n,r){var o=e((n=fr(n)).r,(r=fr(r)).r),h=e(n.g,r.g),a=e(n.b,r.b),l=ll(n.opacity,r.opacity);return function(u){return n.r=o(u),n.g=h(u),n.b=a(u),n.opacity=l(u),n+""}}return s.gamma=i,s}(1);function Cu(i,t){t||(t=[]);var e=i?Math.min(t.length,i.length):0,s=t.slice(),n;return function(r){for(n=0;n<e;++n)s[n]=i[n]*(1-r)+t[n]*r;return s}}function Eu(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function Tu(i,t){var e=t?t.length:0,s=i?Math.min(e,i.length):0,n=new Array(s),r=new Array(e),o;for(o=0;o<s;++o)n[o]=Vr(i[o],t[o]);for(;o<e;++o)r[o]=t[o];return function(h){for(o=0;o<s;++o)r[o]=n[o](h);return r}}function ku(i,t){var e=new Date;return i=+i,t=+t,function(s){return e.setTime(i*(1-s)+t*s),e}}function mn(i,t){return i=+i,t=+t,function(e){return i*(1-e)+t*e}}function Pu(i,t){var e={},s={},n;(i===null||typeof i!="object")&&(i={}),(t===null||typeof t!="object")&&(t={});for(n in t)n in i?e[n]=Vr(i[n],t[n]):s[n]=t[n];return function(r){for(n in e)s[n]=e[n](r);return s}}var dr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Un=new RegExp(dr.source,"g");function zu(i){return function(){return i}}function Ru(i){return function(t){return i(t)+""}}function Vu(i,t){var e=dr.lastIndex=Un.lastIndex=0,s,n,r,o=-1,h=[],a=[];for(i=i+"",t=t+"";(s=dr.exec(i))&&(n=Un.exec(t));)(r=n.index)>e&&(r=t.slice(e,r),h[o]?h[o]+=r:h[++o]=r),(s=s[0])===(n=n[0])?h[o]?h[o]+=n:h[++o]=n:(h[++o]=null,a.push({i:o,x:mn(s,n)})),e=Un.lastIndex;return e<t.length&&(r=t.slice(e),h[o]?h[o]+=r:h[++o]=r),h.length<2?a[0]?Ru(a[0].x):zu(t):(t=a.length,function(l){for(var u=0,c;u<t;++u)h[(c=a[u]).i]=c.x(l);return h.join("")})}function Vr(i,t){var e=typeof t,s;return t==null||e==="boolean"?Rr(t):(e==="number"?mn:e==="string"?(s=us(t))?(t=s,_o):Vu:t instanceof us?_o:t instanceof Date?ku:Eu(t)?Cu:Array.isArray(t)?Tu:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Pu:mn)(i,t)}function Ou(i,t){return i=+i,t=+t,function(e){return Math.round(i*(1-e)+t*e)}}function Du(i){return function(){return i}}function Nu(i){return+i}var wo=[0,1];function Te(i){return i}function mr(i,t){return(t-=i=+i)?function(e){return(e-i)/t}:Du(isNaN(t)?NaN:.5)}function Lu(i,t){var e;return i>t&&(e=i,i=t,t=e),function(s){return Math.max(i,Math.min(t,s))}}function Fu(i,t,e){var s=i[0],n=i[1],r=t[0],o=t[1];return n<s?(s=mr(n,s),r=e(o,r)):(s=mr(s,n),r=e(r,o)),function(h){return r(s(h))}}function Au(i,t,e){var s=Math.min(i.length,t.length)-1,n=new Array(s),r=new Array(s),o=-1;for(i[s]<i[0]&&(i=i.slice().reverse(),t=t.slice().reverse());++o<s;)n[o]=mr(i[o],i[o+1]),r[o]=e(t[o],t[o+1]);return function(h){var a=eu(i,h,1,s)-1;return r[a](n[a](h))}}function al(i,t){return t.domain(i.domain()).range(i.range()).interpolate(i.interpolate()).clamp(i.clamp()).unknown(i.unknown())}function ul(){var i=wo,t=wo,e=Vr,s,n,r,o=Te,h,a,l;function u(){var f=Math.min(i.length,t.length);return o!==Te&&(o=Lu(i[0],i[f-1])),h=f>2?Au:Fu,a=l=null,c}function c(f){return f==null||isNaN(f=+f)?r:(a||(a=h(i.map(s),t,e)))(s(o(f)))}return c.invert=function(f){return o(n((l||(l=h(t,i.map(s),mn)))(f)))},c.domain=function(f){return arguments.length?(i=Array.from(f,Nu),u()):i.slice()},c.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},c.rangeRound=function(f){return t=Array.from(f),e=Ou,u()},c.clamp=function(f){return arguments.length?(o=f?!0:Te,u()):o!==Te},c.interpolate=function(f){return arguments.length?(e=f,u()):e},c.unknown=function(f){return arguments.length?(r=f,c):r},function(f,m){return s=f,n=m,u()}}function Bu(){return ul()(Te,Te)}function Iu(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function gn(i,t){if((e=(i=t?i.toExponential(t-1):i.toExponential()).indexOf("e"))<0)return null;var e,s=i.slice(0,e);return[s.length>1?s[0]+s.slice(2):s,+i.slice(e+1)]}function Ti(i){return i=gn(Math.abs(i)),i?i[1]:NaN}function Uu(i,t){return function(e,s){for(var n=e.length,r=[],o=0,h=i[0],a=0;n>0&&h>0&&(a+h+1>s&&(h=Math.max(1,s-a)),r.push(e.substring(n-=h,n+h)),!((a+=h+1)>s));)h=i[o=(o+1)%i.length];return r.reverse().join(t)}}function Hu(i){return function(t){return t.replace(/[0-9]/g,function(e){return i[+e]})}}var ju=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function pn(i){if(!(t=ju.exec(i)))throw new Error("invalid format: "+i);var t;return new Or({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}pn.prototype=Or.prototype;function Or(i){this.fill=i.fill===void 0?" ":i.fill+"",this.align=i.align===void 0?">":i.align+"",this.sign=i.sign===void 0?"-":i.sign+"",this.symbol=i.symbol===void 0?"":i.symbol+"",this.zero=!!i.zero,this.width=i.width===void 0?void 0:+i.width,this.comma=!!i.comma,this.precision=i.precision===void 0?void 0:+i.precision,this.trim=!!i.trim,this.type=i.type===void 0?"":i.type+""}Or.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Wu(i){t:for(var t=i.length,e=1,s=-1,n;e<t;++e)switch(i[e]){case".":s=n=e;break;case"0":s===0&&(s=e),n=e;break;default:if(!+i[e])break t;s>0&&(s=0);break}return s>0?i.slice(0,s)+i.slice(n+1):i}var cl;function Gu(i,t){var e=gn(i,t);if(!e)return i+"";var s=e[0],n=e[1],r=n-(cl=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,o=s.length;return r===o?s:r>o?s+new Array(r-o+1).join("0"):r>0?s.slice(0,r)+"."+s.slice(r):"0."+new Array(1-r).join("0")+gn(i,Math.max(0,t+r-1))[0]}function xo(i,t){var e=gn(i,t);if(!e)return i+"";var s=e[0],n=e[1];return n<0?"0."+new Array(-n).join("0")+s:s.length>n+1?s.slice(0,n+1)+"."+s.slice(n+1):s+new Array(n-s.length+2).join("0")}const Mo={"%":(i,t)=>(i*100).toFixed(t),b:i=>Math.round(i).toString(2),c:i=>i+"",d:Iu,e:(i,t)=>i.toExponential(t),f:(i,t)=>i.toFixed(t),g:(i,t)=>i.toPrecision(t),o:i=>Math.round(i).toString(8),p:(i,t)=>xo(i*100,t),r:xo,s:Gu,X:i=>Math.round(i).toString(16).toUpperCase(),x:i=>Math.round(i).toString(16)};function So(i){return i}var Co=Array.prototype.map,Eo=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function qu(i){var t=i.grouping===void 0||i.thousands===void 0?So:Uu(Co.call(i.grouping,Number),i.thousands+""),e=i.currency===void 0?"":i.currency[0]+"",s=i.currency===void 0?"":i.currency[1]+"",n=i.decimal===void 0?".":i.decimal+"",r=i.numerals===void 0?So:Hu(Co.call(i.numerals,String)),o=i.percent===void 0?"%":i.percent+"",h=i.minus===void 0?"−":i.minus+"",a=i.nan===void 0?"NaN":i.nan+"";function l(c){c=pn(c);var f=c.fill,m=c.align,d=c.sign,g=c.symbol,T=c.zero,S=c.width,M=c.comma,O=c.precision,E=c.trim,F=c.type;F==="n"?(M=!0,F="g"):Mo[F]||(O===void 0&&(O=12),E=!0,F="g"),(T||f==="0"&&m==="=")&&(T=!0,f="0",m="=");var G=g==="$"?e:g==="#"&&/[boxX]/.test(F)?"0"+F.toLowerCase():"",U=g==="$"?s:/[%p]/.test(F)?o:"",Z=Mo[F],j=/[defgprs%]/.test(F);O=O===void 0?6:/[gprs]/.test(F)?Math.max(1,Math.min(21,O)):Math.max(0,Math.min(20,O));function W(H){var V=G,tt=U,z,b,k;if(F==="c")tt=Z(H)+tt,H="";else{H=+H;var w=H<0||1/H<0;if(H=isNaN(H)?a:Z(Math.abs(H),O),E&&(H=Wu(H)),w&&+H==0&&d!=="+"&&(w=!1),V=(w?d==="("?d:h:d==="-"||d==="("?"":d)+V,tt=(F==="s"?Eo[8+cl/3]:"")+tt+(w&&d==="("?")":""),j){for(z=-1,b=H.length;++z<b;)if(k=H.charCodeAt(z),48>k||k>57){tt=(k===46?n+H.slice(z+1):H.slice(z))+tt,H=H.slice(0,z);break}}}M&&!T&&(H=t(H,1/0));var N=V.length+H.length+tt.length,p=N<S?new Array(S-N+1).join(f):"";switch(M&&T&&(H=t(p+H,p.length?S-tt.length:1/0),p=""),m){case"<":H=V+H+tt+p;break;case"=":H=V+p+H+tt;break;case"^":H=p.slice(0,N=p.length>>1)+V+H+tt+p.slice(N);break;default:H=p+V+H+tt;break}return r(H)}return W.toString=function(){return c+""},W}function u(c,f){var m=l((c=pn(c),c.type="f",c)),d=Math.max(-8,Math.min(8,Math.floor(Ti(f)/3)))*3,g=Math.pow(10,-d),T=Eo[8+d/3];return function(S){return m(g*S)+T}}return{format:l,formatPrefix:u}}var As,fl,dl;Yu({thousands:",",grouping:[3],currency:["$",""]});function Yu(i){return As=qu(i),fl=As.format,dl=As.formatPrefix,As}function Ku(i){return Math.max(0,-Ti(Math.abs(i)))}function Ju(i,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ti(t)/3)))*3-Ti(Math.abs(i)))}function Xu(i,t){return i=Math.abs(i),t=Math.abs(t)-i,Math.max(0,Ti(t)-Ti(i))+1}function Qu(i,t,e,s){var n=hu(i,t,e),r;switch(s=pn(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(i),Math.abs(t));return s.precision==null&&!isNaN(r=Ju(n,o))&&(s.precision=r),dl(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(r=Xu(n,Math.max(Math.abs(i),Math.abs(t))))&&(s.precision=r-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(r=Ku(n))&&(s.precision=r-(s.type==="%")*2);break}}return fl(s)}function ml(i){var t=i.domain;return i.ticks=function(e){var s=t();return ou(s[0],s[s.length-1],e??10)},i.tickFormat=function(e,s){var n=t();return Qu(n[0],n[n.length-1],e??10,s)},i.nice=function(e){e==null&&(e=10);var s=t(),n=0,r=s.length-1,o=s[n],h=s[r],a,l,u=10;for(h<o&&(l=o,o=h,h=l,l=n,n=r,r=l);u-- >0;){if(l=cr(o,h,e),l===a)return s[n]=o,s[r]=h,t(s);if(l>0)o=Math.floor(o/l)*l,h=Math.ceil(h/l)*l;else if(l<0)o=Math.ceil(o*l)/l,h=Math.floor(h*l)/l;else break;a=l}return i},i}function Fe(){var i=Bu();return i.copy=function(){return al(i,Fe())},tl.apply(i,arguments),ml(i)}function To(i){return function(t){return t<0?-Math.pow(-t,i):Math.pow(t,i)}}function Zu(i){return i<0?-Math.sqrt(-i):Math.sqrt(i)}function $u(i){return i<0?-i*i:i*i}function tc(i){var t=i(Te,Te),e=1;function s(){return e===1?i(Te,Te):e===.5?i(Zu,$u):i(To(e),To(1/e))}return t.exponent=function(n){return arguments.length?(e=+n,s()):e},ml(t)}function gl(){var i=tc(ul());return i.copy=function(){return al(i,gl()).exponent(i.exponent())},tl.apply(i,arguments),i}function ec(){return gl.apply(null,arguments).exponent(.5)}function yt(i){var t=i.width,e=i.height;if(t<0)throw new Error("Negative width is not allowed for Size");if(e<0)throw new Error("Negative height is not allowed for Size");return{width:t,height:e}}function si(i,t){return i.width===t.width&&i.height===t.height}var ic=function(){function i(t){var e=this;this._resolutionListener=function(){return e._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return i.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(i.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),i.prototype.subscribe=function(t){var e=this,s={next:t};return this._observers.push(s),{unsubscribe:function(){e._observers=e._observers.filter(function(n){return n!==s})}}},i.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},i.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},i.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},i.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach(function(e){return e.next(t._window.devicePixelRatio)}),this._reinstallResolutionListener()},i}();function sc(i){return new ic(i)}var nc=function(){function i(t,e,s){var n;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=yt({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=e??function(r){return r},this._allowResizeObserver=(n=s==null?void 0:s.allowResizeObserver)!==null&&n!==void 0?n:!0,this._chooseAndInitObserver()}return i.prototype.dispose=function(){var t,e;if(this._canvasElement===null)throw new Error("Object is disposed");(t=this._canvasElementResizeObserver)===null||t===void 0||t.disconnect(),this._canvasElementResizeObserver=null,(e=this._devicePixelRatioObservable)===null||e===void 0||e.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(i.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bitmapSize",{get:function(){return yt({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),i.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=yt(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},i.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},i.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(e){return e!==t})},Object.defineProperty(i.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),i.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},i.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(e){return e!==t})},i.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},i.prototype._resizeBitmap=function(t){var e=this.bitmapSize;si(e,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(e,t))},i.prototype._emitBitmapSizeChanged=function(t,e){var s=this;this._bitmapSizeChangedListeners.forEach(function(n){return n.call(s,t,e)})},i.prototype._suggestNewBitmapSize=function(t){var e=this._suggestedBitmapSize,s=yt(this._transformBitmapSize(t,this._canvasElementClientSize)),n=si(this.bitmapSize,s)?null:s;e===null&&n===null||e!==null&&n!==null&&si(e,n)||(this._suggestedBitmapSize=n,this._emitSuggestedBitmapSizeChanged(e,n))},i.prototype._emitSuggestedBitmapSizeChanged=function(t,e){var s=this;this._suggestedBitmapSizeChangedListeners.forEach(function(n){return n.call(s,t,e)})},i.prototype._chooseAndInitObserver=function(){var t=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}oc().then(function(e){return e?t._initResizeObserver():t._initDevicePixelRatioObservable()})},i.prototype._initDevicePixelRatioObservable=function(){var t=this;if(this._canvasElement!==null){var e=ko(this._canvasElement);if(e===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=sc(e),this._devicePixelRatioObservable.subscribe(function(){return t._invalidateBitmapSize()}),this._invalidateBitmapSize()}},i.prototype._invalidateBitmapSize=function(){var t,e;if(this._canvasElement!==null){var s=ko(this._canvasElement);if(s!==null){var n=(e=(t=this._devicePixelRatioObservable)===null||t===void 0?void 0:t.value)!==null&&e!==void 0?e:s.devicePixelRatio,r=this._canvasElement.getClientRects(),o=r[0]!==void 0?hc(r[0],n):yt({width:this._canvasElementClientSize.width*n,height:this._canvasElementClientSize.height*n});this._suggestNewBitmapSize(o)}}},i.prototype._initResizeObserver=function(){var t=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(e){var s=e.find(function(o){return o.target===t._canvasElement});if(!(!s||!s.devicePixelContentBoxSize||!s.devicePixelContentBoxSize[0])){var n=s.devicePixelContentBoxSize[0],r=yt({width:n.inlineSize,height:n.blockSize});t._suggestNewBitmapSize(r)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},i}();function rc(i,t){if(t.type==="device-pixel-content-box")return new nc(i,t.transform,t.options);throw new Error("Unsupported binding target")}function ko(i){return i.ownerDocument.defaultView}function oc(){return new Promise(function(i){var t=new ResizeObserver(function(e){i(e.every(function(s){return"devicePixelContentBoxSize"in s})),t.disconnect()});t.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function hc(i,t){return yt({width:Math.round(i.left*t+i.width*t)-Math.round(i.left*t),height:Math.round(i.top*t+i.height*t)-Math.round(i.top*t)})}var lc=function(){function i(t,e,s){if(e.width===0||e.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=e,s.width===0||s.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=s,this._context=t}return i.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},i.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(i.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),i}();function ni(i,t){var e=i.canvasElementClientSize;if(e.width===0||e.height===0)return null;var s=i.bitmapSize;if(s.width===0||s.height===0)return null;var n=i.canvasElement.getContext("2d",t);return n===null?null:new lc(n,e,s)}/*!
 * @license
 * TradingView Lightweight Charts v4.0.0
 * Copyright (c) 2023 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */var Po,zo;function ri(i,t){const e={0:[],1:[i.lineWidth,i.lineWidth],2:[2*i.lineWidth,2*i.lineWidth],3:[6*i.lineWidth,6*i.lineWidth],4:[i.lineWidth,4*i.lineWidth]}[t];i.setLineDash(e)}function pl(i,t,e,s){i.beginPath();const n=i.lineWidth%2?.5:0;i.moveTo(e,t+n),i.lineTo(s,t+n),i.stroke()}function hi(i,t){if(!i)throw new Error("Assertion failed"+(t?": "+t:""))}function pe(i){if(i===void 0)throw new Error("Value is undefined");return i}function D(i){if(i===null)throw new Error("Value is null");return i}function ts(i){return D(pe(i))}(function(i){i[i.Simple=0]="Simple",i[i.WithSteps=1]="WithSteps",i[i.Curved=2]="Curved"})(Po||(Po={})),function(i){i[i.Solid=0]="Solid",i[i.Dotted=1]="Dotted",i[i.Dashed=2]="Dashed",i[i.LargeDashed=3]="LargeDashed",i[i.SparseDotted=4]="SparseDotted"}(zo||(zo={}));const Ro={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function ge(i){return i<0?0:i>255?255:Math.round(i)||0}function vl(i){return i<=0||i>0?i<0?0:i>1?1:Math.round(1e4*i)/1e4:0}const ac=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,uc=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,cc=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,fc=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/;function vn(i){(i=i.toLowerCase())in Ro&&(i=Ro[i]);{const t=fc.exec(i)||cc.exec(i);if(t)return[ge(parseInt(t[1],10)),ge(parseInt(t[2],10)),ge(parseInt(t[3],10)),vl(t.length<5?1:parseFloat(t[4]))]}{const t=uc.exec(i);if(t)return[ge(parseInt(t[1],16)),ge(parseInt(t[2],16)),ge(parseInt(t[3],16)),1]}{const t=ac.exec(i);if(t)return[ge(17*parseInt(t[1],16)),ge(17*parseInt(t[2],16)),ge(17*parseInt(t[3],16)),1]}throw new Error(`Cannot parse color: ${i}`)}function Sn(i){const t=vn(i);return{t:`rgb(${t[0]}, ${t[1]}, ${t[2]})`,i:(e=t,.199*e[0]+.687*e[1]+.114*e[2]>160?"black":"white")};var e}class Ht{constructor(){this.h=[]}l(t,e,s){const n={o:t,_:e,u:s===!0};this.h.push(n)}p(t){const e=this.h.findIndex(s=>t===s.o);e>-1&&this.h.splice(e,1)}v(t){this.h=this.h.filter(e=>e._!==t)}m(t,e,s){const n=[...this.h];this.h=this.h.filter(r=>!r.u),n.forEach(r=>r.o(t,e,s))}g(){return this.h.length>0}M(){this.h=[]}}function Re(i,...t){for(const e of t)for(const s in e)e[s]!==void 0&&(typeof e[s]!="object"||i[s]===void 0?i[s]=e[s]:Re(i[s],e[s]));return i}function ke(i){return typeof i=="number"&&isFinite(i)}function cs(i){return typeof i=="number"&&i%1==0}function Dr(i){return typeof i=="string"}function Bs(i){return typeof i=="boolean"}function Ae(i){const t=i;if(!t||typeof t!="object")return t;let e,s,n;for(s in e=Array.isArray(t)?[]:{},t)t.hasOwnProperty(s)&&(n=t[s],e[s]=n&&typeof n=="object"?Ae(n):n);return e}function dc(i){return i!==null}function bn(i){return i===null?void 0:i}const Nr="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function ki(i,t,e){return t===void 0&&(t=Nr),`${e=e!==void 0?`${e} `:""}${i}px ${t}`}class mc{constructor(t){this.S={k:1,C:5,T:NaN,P:"",R:"",D:"",B:"",O:0,A:0,L:0,I:0,V:0},this.N=t}F(){const t=this.S,e=this.W(),s=this.j();return t.T===e&&t.R===s||(t.T=e,t.R=s,t.P=ki(e,s),t.I=2.5/12*e,t.O=t.I,t.A=e/12*t.C,t.L=e/12*t.C,t.V=0),t.D=this.$(),t.B=this.H(),this.S}$(){return this.N.F().layout.textColor}H(){return this.N.U()}W(){return this.N.F().layout.fontSize}j(){return this.N.F().layout.fontFamily}}class Lr{constructor(){this.q=[]}Y(t){this.q=t}X(t,e,s){this.q.forEach(n=>{n.X(t,e,s)})}}class ps{X(t,e,s){t.useMediaCoordinateSpace(n=>this.Z(n,e,s))}K(t,e,s){t.useMediaCoordinateSpace(n=>this.G(n,e,s))}G(t,e,s){}}class gc extends ps{constructor(){super(...arguments),this.J=null}tt(t){this.J=t}Z({context:t}){if(this.J===null||this.J.it===null)return;const e=this.J.it,s=this.J,n=r=>{t.beginPath();for(let o=e.to-1;o>=e.from;--o){const h=s.nt[o];t.moveTo(h.st,h.et),t.arc(h.st,h.et,r,0,2*Math.PI)}t.fill()};s.rt>0&&(t.fillStyle=s.ht,n(s.lt+s.rt)),t.fillStyle=s.ot,n(s.lt)}}function pc(){return{nt:[{st:0,et:0,_t:0,ut:0}],ot:"",ht:"",lt:0,rt:0,it:null}}const vc={from:0,to:1};class bc{constructor(t,e){this.ct=new Lr,this.dt=[],this.ft=[],this.vt=!0,this.N=t,this.bt=e,this.ct.Y(this.dt)}gt(t){const e=this.N.wt();e.length!==this.dt.length&&(this.ft=e.map(pc),this.dt=this.ft.map(s=>{const n=new gc;return n.tt(s),n}),this.ct.Y(this.dt)),this.vt=!0}Mt(){return this.vt&&(this.St(),this.vt=!1),this.ct}St(){const t=this.N.wt(),e=this.bt.xt(),s=this.N.yt();t.forEach((n,r)=>{var o;const h=this.ft[r],a=n.kt(e);if(a===null||!n.Ct())return void(h.it=null);const l=D(n.Tt());h.ot=a.Pt,h.lt=a.lt,h.rt=a.Rt,h.nt[0].ut=a.ut,h.nt[0].et=n.Bt().Dt(a.ut,l.Ot),h.ht=(o=a.At)!==null&&o!==void 0?o:this.N.Lt(h.nt[0].et/n.Bt().It()),h.nt[0]._t=e,h.nt[0].st=s.Et(e),h.it=vc})}}class li{X(t,e,s){t.useBitmapCoordinateSpace(n=>this.Z(n,e,s))}}class yc extends li{constructor(t){super(),this.Vt=t}Z({context:t,bitmapSize:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.Vt===null)return;const r=this.Vt.zt.Ct,o=this.Vt.Nt.Ct;if(!r&&!o)return;const h=Math.round(this.Vt.st*s),a=Math.round(this.Vt.et*n);t.lineCap="butt",r&&h>=0&&(t.lineWidth=Math.floor(this.Vt.zt.rt*s),t.strokeStyle=this.Vt.zt.D,t.fillStyle=this.Vt.zt.D,ri(t,this.Vt.zt.Ft),function(l,u,c,f){l.beginPath();const m=l.lineWidth%2?.5:0;l.moveTo(u+m,c),l.lineTo(u+m,f),l.stroke()}(t,h,0,e.height)),o&&a>=0&&(t.lineWidth=Math.floor(this.Vt.Nt.rt*n),t.strokeStyle=this.Vt.Nt.D,t.fillStyle=this.Vt.Nt.D,ri(t,this.Vt.Nt.Ft),pl(t,a,0,e.width))}}class _c{constructor(t){this.vt=!0,this.Wt={zt:{rt:1,Ft:0,D:"",Ct:!1},Nt:{rt:1,Ft:0,D:"",Ct:!1},st:0,et:0},this.jt=new yc(this.Wt),this.$t=t}gt(){this.vt=!0}Mt(){return this.vt&&(this.St(),this.vt=!1),this.jt}St(){const t=this.$t.Ct(),e=D(this.$t.Ht()),s=e.Ut().F().crosshair,n=this.Wt;n.Nt.Ct=t&&this.$t.qt(e),n.zt.Ct=t&&this.$t.Yt(),n.Nt.rt=s.horzLine.width,n.Nt.Ft=s.horzLine.style,n.Nt.D=s.horzLine.color,n.zt.rt=s.vertLine.width,n.zt.Ft=s.vertLine.style,n.zt.D=s.vertLine.color,n.st=this.$t.Xt(),n.et=this.$t.Zt()}}function wc(i,t,e,s,n,r){i.fillRect(t+r,e,s-2*r,r),i.fillRect(t+r,e+n-r,s-2*r,r),i.fillRect(t,e,r,n),i.fillRect(t+s-r,e,r,n)}function Cn(i,t,e,s,n,r){i.save(),i.globalCompositeOperation="copy",i.fillStyle=r,i.fillRect(t,e,s,n),i.restore()}function Vo(i,t){return Array.isArray(i)?i.map(e=>e===0?e:e+t):i+t}function Hn(i,t,e,s,n,r){let o,h,a,l;if(Array.isArray(r))if(r.length===2){const u=Math.max(0,r[0]),c=Math.max(0,r[1]);o=u,h=u,a=c,l=c}else{if(r.length!==4)throw new Error("Wrong border radius - it should be like css border radius");o=Math.max(0,r[0]),h=Math.max(0,r[1]),a=Math.max(0,r[2]),l=Math.max(0,r[3])}else{const u=Math.max(0,r);o=u,h=u,a=u,l=u}i.beginPath(),i.moveTo(t+o,e),i.lineTo(t+s-h,e),h!==0&&i.arcTo(t+s,e,t+s,e+h,h),i.lineTo(t+s,e+n-a),a!==0&&i.arcTo(t+s,e+n,t+s-a,e+n,a),i.lineTo(t+l,e+n),l!==0&&i.arcTo(t,e+n,t,e+n-l,l),i.lineTo(t,e+o),o!==0&&i.arcTo(t,e,t+o,e,o)}function Oo(i,t,e,s,n,r,o=0,h=0,a=""){if(i.save(),!o||!a||a===r)return Hn(i,t,e,s,n,h),i.fillStyle=r,i.fill(),void i.restore();const l=o/2;r!=="transparent"&&(Hn(i,t+o,e+o,s-2*o,n-2*o,Vo(h,-o)),i.fillStyle=r,i.fill()),a!=="transparent"&&(Hn(i,t+l,e+l,s-o,n-o,Vo(h,-l)),i.lineWidth=o,i.strokeStyle=a,i.closePath(),i.stroke()),i.restore()}function bl(i,t,e,s,n,r,o){i.save(),i.globalCompositeOperation="copy";const h=i.createLinearGradient(0,0,0,n);h.addColorStop(0,r),h.addColorStop(1,o),i.fillStyle=h,i.fillRect(t,e,s,n),i.restore()}class Do{constructor(t,e){this.tt(t,e)}tt(t,e){this.Vt=t,this.Kt=e}It(t,e){return this.Vt.Ct?t.T+t.I+t.O:0}X(t,e,s,n){if(!this.Vt.Ct||this.Vt.Gt.length===0)return;const r=this.Vt.D||this.Kt.D,o=this.Kt.t,h=t.useBitmapCoordinateSpace(a=>{const l=a.context;l.font=e.P;const u=this.Jt(a,e,s,n),c=u.Qt,f=(m,d)=>{u.ti?Oo(l,c.ii,c.ni,c.si,c.ei,m,c.ri,[c.lt,0,0,c.lt],d):Oo(l,c.hi,c.ni,c.si,c.ei,m,c.ri,[0,c.lt,c.lt,0],d)};return f(o,"transparent"),this.Vt.li&&(l.fillStyle=r,l.fillRect(c.hi,c.ai,c.oi-c.hi,c._i)),f("transparent",o),this.Vt.ui&&(l.fillStyle=e.B,l.fillRect(u.ti?c.ci-c.ri:0,c.ni,c.ri,c.di-c.ni)),u});t.useMediaCoordinateSpace(({context:a})=>{const l=h.fi;a.font=e.P,a.textAlign=h.ti?"right":"left",a.textBaseline="middle",a.fillStyle=r,a.fillText(this.Vt.Gt,l.pi,(l.ni+l.di)/2+l.vi)})}Jt(t,e,s,n){var r;const{context:o,bitmapSize:h,mediaSize:a,horizontalPixelRatio:l,verticalPixelRatio:u}=t,c=this.Vt.li||!this.Vt.mi?e.C:0,f=this.Vt.bi?e.k:0,m=e.I+this.Kt.gi,d=e.O+this.Kt.wi,g=e.A,T=e.L,S=this.Vt.Gt,M=e.T,O=s.Mi(o,S),E=Math.ceil(s.Si(o,S)),F=M+m+d,G=e.k+g+T+E+c,U=Math.max(1,Math.floor(u));let Z=Math.round(F*u);Z%2!=U%2&&(Z+=1);const j=f>0?Math.max(1,Math.floor(f*l)):0,W=Math.round(G*l),H=Math.round(c*l),V=(r=this.Kt.xi)!==null&&r!==void 0?r:this.Kt.yi,tt=Math.round(V*u)-Math.floor(.5*u),z=Math.floor(tt+U/2-Z/2),b=z+Z,k=n==="right",w=k?a.width-f:f,N=k?h.width-j:j;let p,P,I;return k?(p=N-W,P=N-H,I=w-c-g-f):(p=N+W,P=N+H,I=w+c+g),{ti:k,Qt:{ni:z,ai:tt,di:b,si:W,ei:Z,lt:2*l,ri:j,ii:p,hi:N,oi:P,_i:U,ci:h.width},fi:{ni:z/u,di:b/u,pi:I,vi:O}}}}class Fr{constructor(t){this.ki={yi:0,D:"#FFF",t:"#000",wi:0,gi:0},this.Ci={Gt:"",Ct:!1,li:!0,mi:!1,At:"",D:"#FFF",ui:!1,bi:!1},this.Ti={Gt:"",Ct:!1,li:!1,mi:!0,At:"",D:"#FFF",ui:!0,bi:!0},this.vt=!0,this.Pi=new(t||Do)(this.Ci,this.ki),this.Ri=new(t||Do)(this.Ti,this.ki)}Gt(){return this.Di(),this.Ci.Gt}yi(){return this.Di(),this.ki.yi}gt(){this.vt=!0}It(t,e=!1){return Math.max(this.Pi.It(t,e),this.Ri.It(t,e))}Bi(){return this.ki.xi||0}Oi(t){this.ki.xi=t}Ai(){return this.Di(),this.Ci.Ct||this.Ti.Ct}Li(){return this.Di(),this.Ci.Ct}Mt(t){return this.Di(),this.Ci.li=this.Ci.li&&t.F().ticksVisible,this.Ti.li=this.Ti.li&&t.F().ticksVisible,this.Pi.tt(this.Ci,this.ki),this.Ri.tt(this.Ti,this.ki),this.Pi}Ii(){return this.Di(),this.Pi.tt(this.Ci,this.ki),this.Ri.tt(this.Ti,this.ki),this.Ri}Di(){this.vt&&(this.Ci.li=!0,this.Ti.li=!1,this.Ei(this.Ci,this.Ti,this.ki))}}class xc extends Fr{constructor(t,e,s){super(),this.$t=t,this.Vi=e,this.zi=s}Ei(t,e,s){t.Ct=!1;const n=this.$t.F().horzLine;if(!n.labelVisible)return;const r=this.Vi.Tt();if(!this.$t.Ct()||this.Vi.Ni()||r===null)return;const o=Sn(n.labelBackgroundColor);s.t=o.t,s.D=o.i;const h=2/12*this.Vi.T();s.gi=h,s.wi=h;const a=this.zi(this.Vi);s.yi=a.yi,t.Gt=this.Vi.Fi(a.ut,r),t.Ct=!0}}const Mc=/[1-9]/g;class Sc{constructor(){this.Vt=null}tt(t){this.Vt=t}X(t,e){if(this.Vt===null||this.Vt.Ct===!1||this.Vt.Gt.length===0)return;const s=t.useMediaCoordinateSpace(({context:f})=>(f.font=e.P,Math.round(e.Wi.Si(f,D(this.Vt).Gt,Mc))));if(s<=0)return;const n=e.ji,r=s+2*n,o=r/2,h=this.Vt.$i;let a=this.Vt.yi,l=Math.floor(a-o)+.5;l<0?(a+=Math.abs(0-l),l=Math.floor(a-o)+.5):l+r>h&&(a-=Math.abs(h-(l+r)),l=Math.floor(a-o)+.5);const u=l+r,c=Math.ceil(0+e.k+e.C+e.I+e.T+e.O);t.useBitmapCoordinateSpace(({context:f,horizontalPixelRatio:m,verticalPixelRatio:d})=>{const g=D(this.Vt);f.fillStyle=g.t;const T=Math.round(l*m),S=Math.round(0*d),M=Math.round(u*m),O=Math.round(c*d),E=Math.round(2*m);if(f.beginPath(),f.moveTo(T,S),f.lineTo(T,O-E),f.arcTo(T,O,T+E,O,E),f.lineTo(M-E,O),f.arcTo(M,O,M,O-E,E),f.lineTo(M,S),f.fill(),g.li){const F=Math.round(g.yi*m),G=S,U=Math.round((G+e.C)*d);f.fillStyle=g.D;const Z=Math.max(1,Math.floor(m)),j=Math.floor(.5*m);f.fillRect(F-j,G,Z,U-G)}}),t.useMediaCoordinateSpace(({context:f})=>{const m=D(this.Vt),d=0+e.k+e.C+e.I+e.T/2;f.font=e.P,f.textAlign="left",f.textBaseline="middle",f.fillStyle=m.D;const g=e.Wi.Mi(f,"Apr0");f.translate(l+n,d+g),f.fillText(m.Gt,0,0)})}}class Cc{constructor(t,e,s){this.vt=!0,this.jt=new Sc,this.Wt={Ct:!1,t:"#4c525e",D:"white",Gt:"",$i:0,yi:NaN,li:!0},this.bt=t,this.Hi=e,this.zi=s}gt(){this.vt=!0}Mt(){return this.vt&&(this.St(),this.vt=!1),this.jt.tt(this.Wt),this.jt}St(){const t=this.Wt;t.Ct=!1;const e=this.bt.F().vertLine;if(!e.labelVisible)return;const s=this.Hi.yt();if(s.Ni())return;t.$i=s.$i();const n=this.zi();if(n===null)return;t.yi=n.yi;const r=s.Ui(this.bt.xt());t.Gt=s.qi(D(r)),t.Ct=!0;const o=Sn(e.labelBackgroundColor);t.t=o.t,t.D=o.i,t.li=s.F().ticksVisible}}class Ar{constructor(){this.Yi=null,this.Xi=0}Zi(){return this.Xi}Ki(t){this.Xi=t}Bt(){return this.Yi}Gi(t){this.Yi=t}Ji(t){return[]}Qi(){return[]}Ct(){return!0}}var No;(function(i){i[i.Normal=0]="Normal",i[i.Magnet=1]="Magnet"})(No||(No={}));class Ec extends Ar{constructor(t,e){super(),this.tn=null,this.nn=NaN,this.sn=0,this.en=!0,this.rn=new Map,this.hn=!1,this.ln=NaN,this.an=NaN,this.on=NaN,this._n=NaN,this.Hi=t,this.un=e,this.cn=new bc(t,this),this.dn=((n,r)=>o=>{const h=r(),a=n();if(o===D(this.tn).fn())return{ut:a,yi:h};{const l=D(o.Tt());return{ut:o.pn(h,l),yi:h}}})(()=>this.nn,()=>this.an);const s=((n,r)=>()=>{const o=this.Hi.yt().vn(n()),h=r();return o&&Number.isFinite(h)?{_t:o,yi:h}:null})(()=>this.sn,()=>this.Xt());this.mn=new Cc(this,t,s),this.bn=new _c(this)}F(){return this.un}gn(t,e){this.on=t,this._n=e}wn(){this.on=NaN,this._n=NaN}Mn(){return this.on}Sn(){return this._n}xn(t,e,s){this.hn||(this.hn=!0),this.en=!0,this.yn(t,e,s)}xt(){return this.sn}Xt(){return this.ln}Zt(){return this.an}Ct(){return this.en}kn(){this.en=!1,this.Cn(),this.nn=NaN,this.ln=NaN,this.an=NaN,this.tn=null,this.wn()}Tn(t){return this.tn!==null?[this.bn,this.cn]:[]}qt(t){return t===this.tn&&this.un.horzLine.visible}Yt(){return this.un.vertLine.visible}Pn(t,e){this.en&&this.tn===t||this.rn.clear();const s=[];return this.tn===t&&s.push(this.Rn(this.rn,e,this.dn)),s}Qi(){return this.en?[this.mn]:[]}Ht(){return this.tn}Dn(){this.bn.gt(),this.rn.forEach(t=>t.gt()),this.mn.gt(),this.cn.gt()}Bn(t){return t&&!t.fn().Ni()?t.fn():null}yn(t,e,s){this.On(t,e,s)&&this.Dn()}On(t,e,s){const n=this.ln,r=this.an,o=this.nn,h=this.sn,a=this.tn,l=this.Bn(s);this.sn=t,this.ln=isNaN(t)?NaN:this.Hi.yt().Et(t),this.tn=s;const u=l!==null?l.Tt():null;return l!==null&&u!==null?(this.nn=e,this.an=l.Dt(e,u)):(this.nn=NaN,this.an=NaN),n!==this.ln||r!==this.an||h!==this.sn||o!==this.nn||a!==this.tn}Cn(){const t=this.Hi.wt().map(s=>s.Ln().An()).filter(dc),e=t.length===0?null:Math.max(...t);this.sn=e!==null?e:NaN}Rn(t,e,s){let n=t.get(e);return n===void 0&&(n=new xc(this,e,s),t.set(e,n)),n}}function En(i){return i==="left"||i==="right"}class Ut{constructor(t){this.In=new Map,this.En=[],this.Vn=t}zn(t,e){const s=function(n,r){return n===void 0?r:{Nn:Math.max(n.Nn,r.Nn),Fn:n.Fn||r.Fn}}(this.In.get(t),e);this.In.set(t,s)}Wn(){return this.Vn}jn(t){const e=this.In.get(t);return e===void 0?{Nn:this.Vn}:{Nn:Math.max(this.Vn,e.Nn),Fn:e.Fn}}$n(){this.Hn(),this.En=[{Un:0}]}qn(t){this.Hn(),this.En=[{Un:1,Ot:t}]}Yn(t){this.Xn(),this.En.push({Un:5,Ot:t})}Hn(){this.Xn(),this.En.push({Un:6})}Zn(){this.Hn(),this.En=[{Un:4}]}Kn(t){this.Hn(),this.En.push({Un:2,Ot:t})}Gn(t){this.Hn(),this.En.push({Un:3,Ot:t})}Jn(){return this.En}Qn(t){for(const e of t.En)this.ts(e);this.Vn=Math.max(this.Vn,t.Vn),t.In.forEach((e,s)=>{this.zn(s,e)})}static ns(){return new Ut(2)}static ss(){return new Ut(3)}ts(t){switch(t.Un){case 0:this.$n();break;case 1:this.qn(t.Ot);break;case 2:this.Kn(t.Ot);break;case 3:this.Gn(t.Ot);break;case 4:this.Zn();break;case 5:this.Yn(t.Ot);break;case 6:this.Xn()}}Xn(){const t=this.En.findIndex(e=>e.Un===5);t!==-1&&this.En.splice(t,1)}}const Lo=".";function Be(i,t){if(!ke(i))return"n/a";if(!cs(t))throw new TypeError("invalid length");if(t<0||t>16)throw new TypeError("invalid length");return t===0?i.toString():("0000000000000000"+i.toString()).slice(-t)}class Tn{constructor(t,e){if(e||(e=1),ke(t)&&cs(t)||(t=100),t<0)throw new TypeError("invalid base");this.Vi=t,this.es=e,this.rs()}format(t){const e=t<0?"−":"";return t=Math.abs(t),e+this.hs(t)}rs(){if(this.ls=0,this.Vi>0&&this.es>0){let t=this.Vi;for(;t>1;)t/=10,this.ls++}}hs(t){const e=this.Vi/this.es;let s=Math.floor(t),n="";const r=this.ls!==void 0?this.ls:NaN;if(e>1){let o=+(Math.round(t*e)-s*e).toFixed(this.ls);o>=e&&(o-=e,s+=1),n=Lo+Be(+o.toFixed(this.ls)*this.es,r)}else s=Math.round(s*e)/e,r>0&&(n=Lo+Be(0,r));return s.toFixed(0)+n}}class yl extends Tn{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}}class Tc{constructor(t){this.os=t}format(t){let e="";return t<0&&(e="-",t=-t),t<995?e+this._s(t):t<999995?e+this._s(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),e+this._s(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this._s(t/1e9)+"B")}_s(t){let e;const s=Math.pow(10,this.os);return e=(t=Math.round(t*s)/s)>=1e-15&&t<1?t.toFixed(this.os).replace(/\.?0+$/,""):String(t),e.replace(/(\.[1-9]*)0+$/,(n,r)=>r)}}function _l(i,t,e,s,n,r,o){if(t.length===0||s.from>=t.length)return;const h=i.context,a=t[s.from];let l=r(i,a),u=a;if(s.to-s.from<2){const m=n/2;h.beginPath();const d={st:a.st-m,et:a.et},g={st:a.st+m,et:a.et};return h.moveTo(d.st,d.et),h.lineTo(g.st,g.et),void o(h,l,d,g)}const c=(m,d)=>{o(h,l,u,d),h.beginPath(),l=m,u=d};let f=u;h.beginPath(),h.moveTo(a.st,a.et);for(let m=s.from+1;m<s.to;++m){f=t[m];const d=r(i,f);switch(e){case 0:h.lineTo(f.st,f.et);break;case 1:h.lineTo(f.st,t[m-1].et),d!==l&&(c(d,f),h.lineTo(f.st,t[m-1].et)),h.lineTo(f.st,f.et);break;case 2:{const[g,T]=kc(t,m-1,m);h.bezierCurveTo(g.st,g.et,T.st,T.et,f.st,f.et);break}}e!==1&&d!==l&&(c(d,f),h.moveTo(f.st,f.et))}(u!==f||u===f&&e===1)&&o(h,l,u,f)}function jn(i,t){return{st:i.st-t.st,et:i.et-t.et}}function Fo(i,t){return{st:i.st/t,et:i.et/t}}function kc(i,t,e){const s=Math.max(0,t-1),n=Math.min(i.length-1,e+1);var r,o;return[(r=i[t],o=Fo(jn(i[e],i[s]),6),{st:r.st+o.st,et:r.et+o.et}),jn(i[e],Fo(jn(i[n],i[t]),6))]}function Pc(i,t,e,s,n){t.lineTo(n.st,i),t.lineTo(s.st,i),t.closePath(),t.fillStyle=e,t.fill()}class wl extends ps{constructor(){super(...arguments),this.J=null}tt(t){this.J=t}Z(t){var e;if(this.J===null)return;const{nt:s,it:n,us:r,rt:o,Ft:h,cs:a}=this.J,l=(e=this.J.ds)!==null&&e!==void 0?e:this.J.fs?0:t.mediaSize.height;if(n===null)return;const u=t.context;u.lineCap="butt",u.lineJoin="round",u.lineWidth=o,ri(u,h),u.lineWidth=1,_l(t,s,a,n,r,this.ps.bind(this),Pc.bind(null,l))}}class zc extends wl{constructor(){super(...arguments),this.vs=null}ps(t,e){const{context:s,mediaSize:n}=t,{bs:r,gs:o}=e,h=n.height;if(this.vs!==null&&this.vs.topColor===r&&this.vs.bottomColor===o&&this.vs.bottom===h)return this.vs.fillStyle;const a=s.createLinearGradient(0,0,0,h);return a.addColorStop(0,r),a.addColorStop(1,o),this.vs={topColor:r,bottomColor:o,fillStyle:a,bottom:h},a}}function Rc(i,t){i.strokeStyle=t,i.stroke()}class xl extends ps{constructor(){super(...arguments),this.J=null}tt(t){this.J=t}Z(t){if(this.J===null)return;const{nt:e,it:s,us:n,cs:r,rt:o,Ft:h}=this.J;if(s===null)return;const a=t.context;a.lineCap="butt",a.lineWidth=o,ri(a,h),a.lineJoin="round",_l(t,e,r,s,n,this.ws.bind(this),Rc)}}class Ml extends xl{ws(t,e){return e.ot}}function vs(i,t,e,s=0,n=i.length){let r=n-s;for(;0<r;){const o=r>>1,h=s+o;e(i[h],t)?(s=h+1,r-=o+1):r=o}return s}function Sl(i,t,e,s=0,n=i.length){let r=n-s;for(;0<r;){const o=r>>1,h=s+o;e(t,i[h])?r=o:(s=h+1,r-=o+1)}return s}function Vc(i,t){return i._t<t}function Oc(i,t){return i<t._t}function Cl(i,t,e){const s=t.Ms(),n=t.ci(),r=vs(i,s,Vc),o=Sl(i,n,Oc);if(!e)return{from:r,to:o};let h=r,a=o;return r>0&&r<i.length&&i[r]._t>=s&&(h=r-1),o>0&&o<i.length&&i[o-1]._t<=n&&(a=o+1),{from:h,to:a}}class El{constructor(t,e,s){this.Ss=!0,this.xs=!0,this.ys=!0,this.ks=[],this.Cs=null,this.Ts=t,this.Ps=e,this.Rs=s}gt(t){this.Ss=!0,t==="data"&&(this.xs=!0),t==="options"&&(this.ys=!0)}Mt(){return this.Ts.Ct()?(this.Ds(),this.Cs===null?null:this.Bs):null}Os(){this.ks=this.ks.map(t=>Object.assign(Object.assign({},t),this.Ts.Ls().As(t._t)))}Is(){this.Cs=null}Ds(){this.xs&&(this.Es(),this.xs=!1),this.ys&&(this.Os(),this.ys=!1),this.Ss&&(this.Vs(),this.Ss=!1)}Vs(){const t=this.Ts.Bt(),e=this.Ps.yt();if(this.Is(),e.Ni()||t.Ni())return;const s=e.zs();if(s===null||this.Ts.Ln().Ns()===0)return;const n=this.Ts.Tt();n!==null&&(this.Cs=Cl(this.ks,s,this.Rs),this.Fs(t,e,n.Ot),this.Ws())}}class kn extends El{constructor(t,e){super(t,e,!0)}Fs(t,e,s){e.js(this.ks,bn(this.Cs)),t.$s(this.ks,s,bn(this.Cs))}Hs(t,e){return{_t:t,ut:e,st:NaN,et:NaN}}Es(){const t=this.Ts.Ls();this.ks=this.Ts.Ln().Us().map(e=>{const s=e.Ot[3];return this.qs(e.Ys,s,t)})}}class Dc extends kn{constructor(t,e){super(t,e),this.Bs=new Lr,this.Xs=new zc,this.Zs=new Ml,this.Bs.Y([this.Xs,this.Zs])}qs(t,e,s){return Object.assign(Object.assign({},this.Hs(t,e)),s.As(t))}Ws(){const t=this.Ts.F();this.Xs.tt({cs:t.lineType,nt:this.ks,Ft:t.lineStyle,rt:t.lineWidth,ds:null,fs:t.invertFilledArea,it:this.Cs,us:this.Ps.yt().Ks()}),this.Zs.tt({cs:t.lineType,nt:this.ks,Ft:t.lineStyle,rt:t.lineWidth,it:this.Cs,us:this.Ps.yt().Ks()})}}class Nc extends li{constructor(){super(...arguments),this.Vt=null,this.Gs=0,this.Js=0}tt(t){this.Vt=t}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:s}){if(this.Vt===null||this.Vt.Ln.length===0||this.Vt.it===null)return;this.Gs=this.Qs(e),this.Gs>=2&&Math.max(1,Math.floor(e))%2!=this.Gs%2&&this.Gs--,this.Js=this.Vt.te?Math.min(this.Gs,Math.floor(e)):this.Gs;let n=null;const r=this.Js<=this.Gs&&this.Vt.Ks>=Math.floor(1.5*e);for(let o=this.Vt.it.from;o<this.Vt.it.to;++o){const h=this.Vt.Ln[o];n!==h.ie&&(t.fillStyle=h.ie,n=h.ie);const a=Math.floor(.5*this.Js),l=Math.round(h.st*e),u=l-a,c=this.Js,f=u+c-1,m=Math.min(h.ne,h.se),d=Math.max(h.ne,h.se),g=Math.round(m*s)-a,T=Math.round(d*s)+a,S=Math.max(T-g,this.Js);t.fillRect(u,g,c,S);const M=Math.ceil(1.5*this.Gs);if(r){if(this.Vt.ee){const G=l-M;let U=Math.max(g,Math.round(h.re*s)-a),Z=U+c-1;Z>g+S-1&&(Z=g+S-1,U=Z-c+1),t.fillRect(G,U,u-G,Z-U+1)}const O=l+M;let E=Math.max(g,Math.round(h.he*s)-a),F=E+c-1;F>g+S-1&&(F=g+S-1,E=F-c+1),t.fillRect(f+1,E,O-f,F-E+1)}}}Qs(t){const e=Math.floor(t);return Math.max(e,Math.floor(function(s,n){return Math.floor(.3*s*n)}(D(this.Vt).Ks,t)))}}class Tl extends El{constructor(t,e){super(t,e,!1)}Fs(t,e,s){e.js(this.ks,bn(this.Cs)),t.le(this.ks,s,bn(this.Cs))}ae(t,e,s){return{_t:t,oe:e.Ot[0],_e:e.Ot[1],ue:e.Ot[2],ce:e.Ot[3],st:NaN,re:NaN,ne:NaN,se:NaN,he:NaN}}Es(){const t=this.Ts.Ls();this.ks=this.Ts.Ln().Us().map(e=>this.qs(e.Ys,e,t))}}class Lc extends Tl{constructor(){super(...arguments),this.Bs=new Nc}qs(t,e,s){return Object.assign(Object.assign({},this.ae(t,e,s)),s.As(t))}Ws(){const t=this.Ts.F();this.Bs.tt({Ln:this.ks,Ks:this.Ps.yt().Ks(),ee:t.openVisible,te:t.thinBars,it:this.Cs})}}function yn(i,t,e){return Math.min(Math.max(i,t),e)}function Is(i,t,e){return t-i<=e}function kl(i){return i<=0?NaN:Math.log(i)/Math.log(10)}function Pl(i){const t=Math.ceil(i);return t%2==0?t-1:t}class Fc extends wl{constructor(){super(...arguments),this.vs=null}ps(t,e){var s;const{context:n,mediaSize:r}=t,o=this.J,{de:h,fe:a,pe:l,ve:u}=e,c=(s=o.ds)!==null&&s!==void 0?s:r.height,f=r.height;if(this.vs!==null&&this.vs.topFillColor1===h&&this.vs.topFillColor2===a&&this.vs.bottomFillColor1===l&&this.vs.bottomFillColor2===u&&this.vs.baseLevelCoordinate===c&&this.vs.bottom===f)return this.vs.fillStyle;const m=n.createLinearGradient(0,0,0,f),d=yn(c/f,0,1);return m.addColorStop(0,h),m.addColorStop(d,a),m.addColorStop(d,l),m.addColorStop(1,u),this.vs={topFillColor1:h,topFillColor2:a,bottomFillColor1:l,bottomFillColor2:u,fillStyle:m,baseLevelCoordinate:c,bottom:f},m}}class Ac extends xl{constructor(){super(...arguments),this.me=null}ws(t,e){const{context:s,mediaSize:n}=t,r=this.J,{be:o,ge:h}=e,{ds:a}=r,l=n.height;if(this.me!==null&&this.me.topLineColor===o&&this.me.bottomLineColor===h&&this.me.baseLevelCoordinate===a&&this.me.bottom===l)return this.me.strokeStyle;const u=s.createLinearGradient(0,0,0,l),c=yn(a/l,0,1);return u.addColorStop(0,o),u.addColorStop(c,o),u.addColorStop(c,h),u.addColorStop(1,h),this.me={topLineColor:o,bottomLineColor:h,strokeStyle:u,baseLevelCoordinate:a,bottom:l},u}}class Bc extends kn{constructor(t,e){super(t,e),this.Bs=new Lr,this.we=new Fc,this.Me=new Ac,this.Bs.Y([this.we,this.Me])}qs(t,e,s){return Object.assign(Object.assign({},this.Hs(t,e)),s.As(t))}Ws(){const t=this.Ts.Tt();if(t===null)return;const e=this.Ts.F(),s=this.Ts.Bt().Dt(e.baseValue.price,t.Ot),n=this.Ps.yt().Ks();this.we.tt({nt:this.ks,rt:e.lineWidth,Ft:e.lineStyle,cs:e.lineType,ds:s,fs:!1,it:this.Cs,us:n}),this.Me.tt({nt:this.ks,rt:e.lineWidth,Ft:e.lineStyle,cs:e.lineType,ds:s,it:this.Cs,us:n})}}class Ic extends li{constructor(){super(...arguments),this.Vt=null,this.Gs=0}tt(t){this.Vt=t}Z(t){if(this.Vt===null||this.Vt.Ln.length===0||this.Vt.it===null)return;const{horizontalPixelRatio:e}=t;this.Gs=function(r,o){if(r>=2.5&&r<=4)return Math.floor(3*o);const h=1-.2*Math.atan(Math.max(4,r)-4)/(.5*Math.PI),a=Math.floor(r*h*o),l=Math.floor(r*o),u=Math.min(a,l);return Math.max(Math.floor(o),u)}(this.Vt.Ks,e),this.Gs>=2&&Math.floor(e)%2!=this.Gs%2&&this.Gs--;const s=this.Vt.Ln;this.Vt.Se&&this.xe(t,s,this.Vt.it),this.Vt.ui&&this.ye(t,s,this.Vt.it);const n=this.ke(e);(!this.Vt.ui||this.Gs>2*n)&&this.Ce(t,s,this.Vt.it)}xe(t,e,s){if(this.Vt===null)return;const{context:n,horizontalPixelRatio:r,verticalPixelRatio:o}=t;let h="",a=Math.min(Math.floor(r),Math.floor(this.Vt.Ks*r));a=Math.max(Math.floor(r),Math.min(a,this.Gs));const l=Math.floor(.5*a);let u=null;for(let c=s.from;c<s.to;c++){const f=e[c];f.Te!==h&&(n.fillStyle=f.Te,h=f.Te);const m=Math.round(Math.min(f.re,f.he)*o),d=Math.round(Math.max(f.re,f.he)*o),g=Math.round(f.ne*o),T=Math.round(f.se*o);let S=Math.round(r*f.st)-l;const M=S+a-1;u!==null&&(S=Math.max(u+1,S),S=Math.min(S,M));const O=M-S+1;n.fillRect(S,g,O,m-g),n.fillRect(S,d+1,O,T-d),u=M}}ke(t){let e=Math.floor(1*t);this.Gs<=2*e&&(e=Math.floor(.5*(this.Gs-1)));const s=Math.max(Math.floor(t),e);return this.Gs<=2*s?Math.max(Math.floor(t),Math.floor(1*t)):s}ye(t,e,s){if(this.Vt===null)return;const{context:n,horizontalPixelRatio:r,verticalPixelRatio:o}=t;let h="";const a=this.ke(r);let l=null;for(let u=s.from;u<s.to;u++){const c=e[u];c.Pe!==h&&(n.fillStyle=c.Pe,h=c.Pe);let f=Math.round(c.st*r)-Math.floor(.5*this.Gs);const m=f+this.Gs-1,d=Math.round(Math.min(c.re,c.he)*o),g=Math.round(Math.max(c.re,c.he)*o);if(l!==null&&(f=Math.max(l+1,f),f=Math.min(f,m)),this.Vt.Ks*r>2*a)wc(n,f,d,m-f+1,g-d+1,a);else{const T=m-f+1;n.fillRect(f,d,T,g-d+1)}l=m}}Ce(t,e,s){if(this.Vt===null)return;const{context:n,horizontalPixelRatio:r,verticalPixelRatio:o}=t;let h="";const a=this.ke(r);for(let l=s.from;l<s.to;l++){const u=e[l];let c=Math.round(Math.min(u.re,u.he)*o),f=Math.round(Math.max(u.re,u.he)*o),m=Math.round(u.st*r)-Math.floor(.5*this.Gs),d=m+this.Gs-1;if(u.ie!==h){const g=u.ie;n.fillStyle=g,h=g}this.Vt.ui&&(m+=a,c+=a,d-=a,f-=a),c>f||n.fillRect(m,c,d-m+1,f-c+1)}}}class Uc extends Tl{constructor(){super(...arguments),this.Bs=new Ic}qs(t,e,s){return Object.assign(Object.assign({},this.ae(t,e,s)),s.As(t))}Ws(){const t=this.Ts.F();this.Bs.tt({Ln:this.ks,Ks:this.Ps.yt().Ks(),Se:t.wickVisible,ui:t.borderVisible,it:this.Cs})}}class Hc extends li{constructor(){super(...arguments),this.Vt=null,this.Re=[]}tt(t){this.Vt=t,this.Re=[]}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:s}){if(this.Vt===null||this.Vt.nt.length===0||this.Vt.it===null)return;this.Re.length||this.De(e);const n=Math.max(1,Math.floor(s)),r=Math.round(this.Vt.Be*s)-Math.floor(n/2),o=r+n;for(let h=this.Vt.it.from;h<this.Vt.it.to;h++){const a=this.Vt.nt[h],l=this.Re[h-this.Vt.it.from],u=Math.round(a.et*s);let c,f;t.fillStyle=a.ie,u<=r?(c=u,f=o):(c=r,f=u-Math.floor(n/2)+n),t.fillRect(l.Ms,c,l.ci-l.Ms+1,f-c)}}De(t){if(this.Vt===null||this.Vt.nt.length===0||this.Vt.it===null)return void(this.Re=[]);const e=Math.ceil(this.Vt.Ks*t)<=1?0:Math.max(1,Math.floor(t)),s=Math.round(this.Vt.Ks*t)-e;this.Re=new Array(this.Vt.it.to-this.Vt.it.from);for(let r=this.Vt.it.from;r<this.Vt.it.to;r++){const o=this.Vt.nt[r],h=Math.round(o.st*t);let a,l;if(s%2){const u=(s-1)/2;a=h-u,l=h+u}else{const u=s/2;a=h-u,l=h+u-1}this.Re[r-this.Vt.it.from]={Ms:a,ci:l,Oe:h,Ae:o.st*t,_t:o._t}}for(let r=this.Vt.it.from+1;r<this.Vt.it.to;r++){const o=this.Re[r-this.Vt.it.from],h=this.Re[r-this.Vt.it.from-1];o._t===h._t+1&&o.Ms-h.ci!==e+1&&(h.Oe>h.Ae?h.ci=o.Ms-e-1:o.Ms=h.ci+e+1)}let n=Math.ceil(this.Vt.Ks*t);for(let r=this.Vt.it.from;r<this.Vt.it.to;r++){const o=this.Re[r-this.Vt.it.from];o.ci<o.Ms&&(o.ci=o.Ms);const h=o.ci-o.Ms+1;n=Math.min(h,n)}if(e>0&&n<4)for(let r=this.Vt.it.from;r<this.Vt.it.to;r++){const o=this.Re[r-this.Vt.it.from];o.ci-o.Ms+1>n&&(o.Oe>o.Ae?o.ci-=1:o.Ms+=1)}}}class jc extends kn{constructor(){super(...arguments),this.Bs=new Hc}qs(t,e,s){return Object.assign(Object.assign({},this.Hs(t,e)),s.As(t))}Ws(){const t={nt:this.ks,Ks:this.Ps.yt().Ks(),it:this.Cs,Be:this.Ts.Bt().Dt(this.Ts.F().base,D(this.Ts.Tt()).Ot)};this.Bs.tt(t)}}class Wc extends kn{constructor(){super(...arguments),this.Bs=new Ml}qs(t,e,s){return Object.assign(Object.assign({},this.Hs(t,e)),s.As(t))}Ws(){const t=this.Ts.F(),e={nt:this.ks,Ft:t.lineStyle,cs:t.lineType,rt:t.lineWidth,it:this.Cs,us:this.Ps.yt().Ks()};this.Bs.tt(e)}}const Gc=/[2-9]/g;class fs{constructor(t=50){this.Le=0,this.Ie=1,this.Ee=1,this.Ve={},this.ze=new Map,this.Ne=t}Fe(){this.Le=0,this.ze.clear(),this.Ie=1,this.Ee=1,this.Ve={}}Si(t,e,s){return this.We(t,e,s).width}Mi(t,e,s){const n=this.We(t,e,s);return((n.actualBoundingBoxAscent||0)-(n.actualBoundingBoxDescent||0))/2}We(t,e,s){const n=s||Gc,r=String(e).replace(n,"0");if(this.ze.has(r))return pe(this.ze.get(r)).je;if(this.Le===this.Ne){const h=this.Ve[this.Ee];delete this.Ve[this.Ee],this.ze.delete(h),this.Ee++,this.Le--}t.save(),t.textBaseline="middle";const o=t.measureText(r);return t.restore(),o.width===0&&e.length||(this.ze.set(r,{je:o,$e:this.Ie}),this.Ve[this.Ie]=r,this.Le++,this.Ie++),o}}class qc{constructor(t){this.He=null,this.S=null,this.Ue="right",this.qe=t}Ye(t,e,s){this.He=t,this.S=e,this.Ue=s}X(t){this.S!==null&&this.He!==null&&this.He.X(t,this.S,this.qe,this.Ue)}}class zl{constructor(t,e,s){this.Xe=t,this.qe=new fs(50),this.Ze=e,this.N=s,this.W=-1,this.jt=new qc(this.qe)}Mt(){const t=this.N.Ke(this.Ze);if(t===null)return null;const e=t.Ge(this.Ze)?t.Je():this.Ze.Bt();if(e===null)return null;const s=t.Qe(e);if(s==="overlay")return null;const n=this.N.tr();return n.T!==this.W&&(this.W=n.T,this.qe.Fe()),this.jt.Ye(this.Xe.Ii(),n,s),this.jt}}class Yc extends li{constructor(){super(...arguments),this.Vt=null}tt(t){this.Vt=t}ir(t,e){var s;if(!(!((s=this.Vt)===null||s===void 0)&&s.Ct))return null;const{et:n,rt:r,nr:o}=this.Vt;return e>=n-r-7&&e<=n+r+7?{sr:this.Vt,nr:o}:null}Z({context:t,bitmapSize:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.Vt===null||this.Vt.Ct===!1)return;const r=Math.round(this.Vt.et*n);r<0||r>e.height||(t.lineCap="butt",t.strokeStyle=this.Vt.D,t.lineWidth=Math.floor(this.Vt.rt*s),ri(t,this.Vt.Ft),pl(t,r,0,e.width))}}class Br{constructor(t){this.er={et:0,D:"rgba(0, 0, 0, 0)",rt:1,Ft:0,Ct:!1},this.rr=new Yc,this.vt=!0,this.Ts=t,this.Ps=t.Ut(),this.rr.tt(this.er)}gt(){this.vt=!0}Mt(){return this.Ts.Ct()?(this.vt&&(this.hr(),this.vt=!1),this.rr):null}}class Kc extends Br{constructor(t){super(t)}hr(){this.er.Ct=!1;const t=this.Ts.Bt(),e=t.lr().lr;if(e!==2&&e!==3)return;const s=this.Ts.F();if(!s.baseLineVisible||!this.Ts.Ct())return;const n=this.Ts.Tt();n!==null&&(this.er.Ct=!0,this.er.et=t.Dt(n.Ot,n.Ot),this.er.D=s.baseLineColor,this.er.rt=s.baseLineWidth,this.er.Ft=s.baseLineStyle)}}class Jc extends li{constructor(){super(...arguments),this.Vt=null}tt(t){this.Vt=t}ar(){return this.Vt}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:s}){const n=this.Vt;if(n===null)return;const r=Math.max(1,Math.floor(e)),o=r%2/2,h=Math.round(n.Ae.x*e)+o,a=n.Ae.y*s;t.fillStyle=n._r,t.beginPath();const l=Math.max(2,1.5*n.ur)*e;t.arc(h,a,l,0,2*Math.PI,!1),t.fill(),t.fillStyle=n.cr,t.beginPath(),t.arc(h,a,n.lt*e,0,2*Math.PI,!1),t.fill(),t.lineWidth=r,t.strokeStyle=n.dr,t.beginPath(),t.arc(h,a,n.lt*e+r/2,0,2*Math.PI,!1),t.stroke()}}const Xc=[{pr:0,vr:.25,mr:4,br:10,gr:.25,wr:0,Mr:.4,Sr:.8},{pr:.25,vr:.525,mr:10,br:14,gr:0,wr:0,Mr:.8,Sr:0},{pr:.525,vr:1,mr:14,br:14,gr:0,wr:0,Mr:0,Sr:0}];function Ao(i,t,e,s){return function(n,r){if(n==="transparent")return n;const o=vn(n),h=o[3];return`rgba(${o[0]}, ${o[1]}, ${o[2]}, ${r*h})`}(i,e+(s-e)*t)}function Bo(i,t){const e=i%2600/2600;let s;for(const a of Xc)if(e>=a.pr&&e<=a.vr){s=a;break}hi(s!==void 0,"Last price animation internal logic error");const n=(e-s.pr)/(s.vr-s.pr);return{cr:Ao(t,n,s.gr,s.wr),dr:Ao(t,n,s.Mr,s.Sr),lt:(r=n,o=s.mr,h=s.br,o+(h-o)*r)};var r,o,h}class Qc{constructor(t){this.jt=new Jc,this.vt=!0,this.yr=!0,this.kr=performance.now(),this.Cr=this.kr-1,this.Tr=t}Pr(){this.Cr=this.kr-1,this.gt()}Rr(){if(this.gt(),this.Tr.F().lastPriceAnimation===2){const t=performance.now(),e=this.Cr-t;if(e>0)return void(e<650&&(this.Cr+=2600));this.kr=t,this.Cr=t+2600}}gt(){this.vt=!0}Dr(){this.yr=!0}Ct(){return this.Tr.F().lastPriceAnimation!==0}Br(){switch(this.Tr.F().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Cr}}Mt(){return this.vt?(this.St(),this.vt=!1,this.yr=!1):this.yr&&(this.Or(),this.yr=!1),this.jt}St(){this.jt.tt(null);const t=this.Tr.Ut().yt(),e=t.zs(),s=this.Tr.Tt();if(e===null||s===null)return;const n=this.Tr.Ar(!0);if(n.Lr||!e.Ir(n.Ys))return;const r={x:t.Et(n.Ys),y:this.Tr.Bt().Dt(n.ut,s.Ot)},o=n.D,h=this.Tr.F().lineWidth,a=Bo(this.Er(),o);this.jt.tt({_r:o,ur:h,cr:a.cr,dr:a.dr,lt:a.lt,Ae:r})}Or(){const t=this.jt.ar();if(t!==null){const e=Bo(this.Er(),t._r);t.cr=e.cr,t.dr=e.dr,t.lt=e.lt}}Er(){return this.Br()?performance.now()-this.kr:2599}}function ns(i,t){return Pl(Math.min(Math.max(i,12),30)*t)}function ds(i,t){switch(i){case"arrowDown":case"arrowUp":return ns(t,1);case"circle":return ns(t,.8);case"square":return ns(t,.7)}}function Rl(i){return function(t){const e=Math.ceil(t);return e%2!=0?e-1:e}(ns(i,1))}function Io(i){return Math.max(ns(i,.1),3)}function Vl(i,t,e,s,n){const r=ds("square",e),o=(r-1)/2,h=i-o,a=t-o;return s>=h&&s<=h+r&&n>=a&&n<=a+r}function Uo(i,t,e,s,n){const r=(ds("arrowUp",n)-1)/2,o=(Pl(n/2)-1)/2;t.beginPath(),i?(t.moveTo(e-r,s),t.lineTo(e,s-r),t.lineTo(e+r,s),t.lineTo(e+o,s),t.lineTo(e+o,s+r),t.lineTo(e-o,s+r),t.lineTo(e-o,s)):(t.moveTo(e-r,s),t.lineTo(e,s+r),t.lineTo(e+r,s),t.lineTo(e+o,s),t.lineTo(e+o,s-r),t.lineTo(e-o,s-r),t.lineTo(e-o,s)),t.fill()}function Zc(i,t,e,s,n,r){return Vl(t,e,s,n,r)}class $c extends ps{constructor(){super(...arguments),this.Vt=null,this.qe=new fs,this.W=-1,this.j="",this.Vr=""}tt(t){this.Vt=t}Ye(t,e){this.W===t&&this.j===e||(this.W=t,this.j=e,this.Vr=ki(t,e),this.qe.Fe())}ir(t,e){if(this.Vt===null||this.Vt.it===null)return null;for(let s=this.Vt.it.from;s<this.Vt.it.to;s++){const n=this.Vt.nt[s];if(ef(n,t,e))return{sr:n.zr,nr:n.nr}}return null}Z({context:t},e,s){if(this.Vt!==null&&this.Vt.it!==null){t.textBaseline="middle",t.font=this.Vr;for(let n=this.Vt.it.from;n<this.Vt.it.to;n++){const r=this.Vt.nt[n];r.Gt!==void 0&&(r.Gt.$i=this.qe.Si(t,r.Gt.Nr),r.Gt.It=this.W),tf(r,t)}}}}function tf(i,t){t.fillStyle=i.D,i.Gt!==void 0&&function(e,s,n,r){e.fillText(s,n,r)}(t,i.Gt.Nr,i.st-i.Gt.$i/2,i.Gt.et),function(e,s){if(e.Ns!==0){switch(e.Fr){case"arrowDown":return void Uo(!1,s,e.st,e.et,e.Ns);case"arrowUp":return void Uo(!0,s,e.st,e.et,e.Ns);case"circle":return void function(n,r,o,h){const a=(ds("circle",h)-1)/2;n.beginPath(),n.arc(r,o,a,0,2*Math.PI,!1),n.fill()}(s,e.st,e.et,e.Ns);case"square":return void function(n,r,o,h){const a=ds("square",h),l=(a-1)/2,u=r-l,c=o-l;n.fillRect(u,c,a,a)}(s,e.st,e.et,e.Ns)}e.Fr}}(i,t)}function ef(i,t,e){return!(i.Gt===void 0||!function(s,n,r,o,h,a){const l=o/2;return h>=s&&h<=s+r&&a>=n-l&&a<=n+l}(i.st,i.Gt.et,i.Gt.$i,i.Gt.It,t,e))||function(s,n,r){if(s.Ns===0)return!1;switch(s.Fr){case"arrowDown":case"arrowUp":return Zc(0,s.st,s.et,s.Ns,n,r);case"circle":return function(o,h,a,l,u){const c=2+ds("circle",a)/2,f=o-l,m=h-u;return Math.sqrt(f*f+m*m)<=c}(s.st,s.et,s.Ns,n,r);case"square":return Vl(s.st,s.et,s.Ns,n,r)}}(i,t,e)}function sf(i,t,e,s,n,r,o,h,a){const l=ke(e)?e:e.ce,u=ke(e)?e:e._e,c=ke(e)?e:e.ue,f=ke(t.size)?Math.max(t.size,0):1,m=Rl(h.Ks())*f,d=m/2;switch(i.Ns=m,t.position){case"inBar":return i.et=o.Dt(l,a),void(i.Gt!==void 0&&(i.Gt.et=i.et+d+r+.6*n));case"aboveBar":return i.et=o.Dt(u,a)-d-s.Wr,i.Gt!==void 0&&(i.Gt.et=i.et-d-.6*n,s.Wr+=1.2*n),void(s.Wr+=m+r);case"belowBar":return i.et=o.Dt(c,a)+d+s.jr,i.Gt!==void 0&&(i.Gt.et=i.et+d+r+.6*n,s.jr+=1.2*n),void(s.jr+=m+r)}t.position}class nf{constructor(t,e){this.vt=!0,this.$r=!0,this.Hr=!0,this.Ur=null,this.jt=new $c,this.Tr=t,this.Hi=e,this.Vt={nt:[],it:null}}gt(t){this.vt=!0,this.Hr=!0,t==="data"&&(this.$r=!0)}Mt(t){if(!this.Tr.Ct())return null;this.vt&&this.qr();const e=this.Hi.F().layout;return this.jt.Ye(e.fontSize,e.fontFamily),this.jt.tt(this.Vt),this.jt}Yr(){if(this.Hr){if(this.Tr.Xr().length>0){const t=this.Hi.yt().Ks(),e=Io(t),s=1.5*Rl(t)+2*e;this.Ur={above:s,below:s}}else this.Ur=null;this.Hr=!1}return this.Ur}qr(){const t=this.Tr.Bt(),e=this.Hi.yt(),s=this.Tr.Xr();this.$r&&(this.Vt.nt=s.map(u=>({_t:u.time,st:0,et:0,Ns:0,Fr:u.shape,D:u.color,zr:u.internalId,nr:u.id,Gt:void 0})),this.$r=!1);const n=this.Hi.F().layout;this.Vt.it=null;const r=e.zs();if(r===null)return;const o=this.Tr.Tt();if(o===null||this.Vt.nt.length===0)return;let h=NaN;const a=Io(e.Ks()),l={Wr:a,jr:a};this.Vt.it=Cl(this.Vt.nt,r,!0);for(let u=this.Vt.it.from;u<this.Vt.it.to;u++){const c=s[u];c.time!==h&&(l.Wr=a,l.jr=a,h=c.time);const f=this.Vt.nt[u];f.st=e.Et(c.time),c.text!==void 0&&c.text.length>0&&(f.Gt={Nr:c.text,et:0,$i:0,It:0});const m=this.Tr.Zr(c.time);m!==null&&sf(f,c,m,l,n.fontSize,a,t,e,o.Ot)}this.vt=!1}}class rf extends Br{constructor(t){super(t)}hr(){const t=this.er;t.Ct=!1;const e=this.Ts.F();if(!e.priceLineVisible||!this.Ts.Ct())return;const s=this.Ts.Ar(e.priceLineSource===0);s.Lr||(t.Ct=!0,t.et=s.yi,t.D=this.Ts.Kr(s.D),t.rt=e.priceLineWidth,t.Ft=e.priceLineStyle)}}class of extends Fr{constructor(t){super(),this.$t=t}Ei(t,e,s){t.Ct=!1,e.Ct=!1;const n=this.$t;if(!n.Ct())return;const r=n.F(),o=r.lastValueVisible,h=n.Gr()!=="",a=r.seriesLastValueMode===0,l=n.Ar(!1);if(l.Lr)return;o&&(t.Gt=this.Jr(l,o,a),t.Ct=t.Gt.length!==0),(h||a)&&(e.Gt=this.Qr(l,o,h,a),e.Ct=e.Gt.length>0);const u=n.Kr(l.D),c=Sn(u);s.t=c.t,s.D=c.i,s.yi=l.yi,e.At=n.Ut().Lt(l.yi/n.Bt().It()),t.At=u,t.D=s.D,e.D=s.D}Qr(t,e,s,n){let r="";const o=this.$t.Gr();return s&&o.length!==0&&(r+=`${o} `),e&&n&&(r+=this.$t.Bt().th()?t.ih:t.nh),r.trim()}Jr(t,e,s){return e?s?this.$t.Bt().th()?t.nh:t.ih:t.Gt:""}}let He=class tn{constructor(t,e){this.sh=t,this.eh=e}rh(t){return t!==null&&this.sh===t.sh&&this.eh===t.eh}hh(){return new tn(this.sh,this.eh)}lh(){return this.sh}ah(){return this.eh}oh(){return this.eh-this.sh}Ni(){return this.eh===this.sh||Number.isNaN(this.eh)||Number.isNaN(this.sh)}Qn(t){return t===null?this:new tn(Math.min(this.lh(),t.lh()),Math.max(this.ah(),t.ah()))}_h(t){if(!ke(t)||this.eh-this.sh===0)return;const e=.5*(this.eh+this.sh);let s=this.eh-e,n=this.sh-e;s*=t,n*=t,this.eh=e+s,this.sh=e+n}uh(t){ke(t)&&(this.eh+=t,this.sh+=t)}dh(){return{minValue:this.sh,maxValue:this.eh}}static fh(t){return t===null?null:new tn(t.minValue,t.maxValue)}};class _n{constructor(t,e){this.ph=t,this.mh=e||null}bh(){return this.ph}gh(){return this.mh}dh(){return this.ph===null?null:{priceRange:this.ph.dh(),margins:this.mh||void 0}}static fh(t){return t===null?null:new _n(He.fh(t.priceRange),t.margins)}}class hf extends Br{constructor(t,e){super(t),this.wh=e}hr(){const t=this.er;t.Ct=!1;const e=this.wh.F();if(!this.Ts.Ct()||!e.lineVisible)return;const s=this.wh.Mh();s!==null&&(t.Ct=!0,t.et=s,t.D=e.color,t.rt=e.lineWidth,t.Ft=e.lineStyle,t.nr=this.wh.F().id)}}class lf extends Fr{constructor(t,e){super(),this.Tr=t,this.wh=e}Ei(t,e,s){t.Ct=!1,e.Ct=!1;const n=this.wh.F(),r=n.axisLabelVisible,o=n.title!=="",h=this.Tr;if(!r||!h.Ct())return;const a=this.wh.Mh();if(a===null)return;o&&(e.Gt=n.title,e.Ct=!0),e.At=h.Ut().Lt(a/h.Bt().It()),t.Gt=this.Sh(n.price),t.Ct=!0;const l=Sn(n.color);s.t=l.t,s.D=l.i,s.yi=a}Sh(t){const e=this.Tr.Tt();return e===null?"":this.Tr.Bt().Fi(t,e.Ot)}}class af{constructor(t,e){this.Tr=t,this.un=e,this.xh=new hf(t,this),this.Xe=new lf(t,this),this.yh=new zl(this.Xe,t,t.Ut())}kh(t){Re(this.un,t),this.gt(),this.Tr.Ut().Ch()}F(){return this.un}Th(){return this.xh}Ph(){return this.yh}Rh(){return this.Xe}gt(){this.xh.gt(),this.Xe.gt()}Mh(){const t=this.Tr,e=t.Bt();if(t.Ut().yt().Ni()||e.Ni())return null;const s=t.Tt();return s===null?null:e.Dt(this.un.price,s.Ot)}}class uf extends Ar{constructor(t){super(),this.Hi=t}Ut(){return this.Hi}}const cf={Bar:(i,t,e,s)=>{var n;const r=t.upColor,o=t.downColor,h=D(i(e,s)),a=ts(h.Ot[0])<=ts(h.Ot[3]);return{ie:(n=h.D)!==null&&n!==void 0?n:a?r:o}},Candlestick:(i,t,e,s)=>{var n,r,o;const h=t.upColor,a=t.downColor,l=t.borderUpColor,u=t.borderDownColor,c=t.wickUpColor,f=t.wickDownColor,m=D(i(e,s)),d=ts(m.Ot[0])<=ts(m.Ot[3]);return{ie:(n=m.D)!==null&&n!==void 0?n:d?h:a,Pe:(r=m.At)!==null&&r!==void 0?r:d?l:u,Te:(o=m.Dh)!==null&&o!==void 0?o:d?c:f}},Area:(i,t,e,s)=>{var n,r,o,h;const a=D(i(e,s));return{ie:(n=a.ot)!==null&&n!==void 0?n:t.lineColor,ot:(r=a.ot)!==null&&r!==void 0?r:t.lineColor,bs:(o=a.bs)!==null&&o!==void 0?o:t.topColor,gs:(h=a.gs)!==null&&h!==void 0?h:t.bottomColor}},Baseline:(i,t,e,s)=>{var n,r,o,h,a,l;const u=D(i(e,s));return{ie:u.Ot[3]>=t.baseValue.price?t.topLineColor:t.bottomLineColor,be:(n=u.be)!==null&&n!==void 0?n:t.topLineColor,ge:(r=u.ge)!==null&&r!==void 0?r:t.bottomLineColor,de:(o=u.de)!==null&&o!==void 0?o:t.topFillColor1,fe:(h=u.fe)!==null&&h!==void 0?h:t.topFillColor2,pe:(a=u.pe)!==null&&a!==void 0?a:t.bottomFillColor1,ve:(l=u.ve)!==null&&l!==void 0?l:t.bottomFillColor2}},Line:(i,t,e,s)=>{var n,r;const o=D(i(e,s));return{ie:(n=o.D)!==null&&n!==void 0?n:t.color,ot:(r=o.D)!==null&&r!==void 0?r:t.color}},Histogram:(i,t,e,s)=>{var n;return{ie:(n=D(i(e,s)).D)!==null&&n!==void 0?n:t.color}}};class ff{constructor(t){this.Bh=(e,s)=>s!==void 0?s.Ot:this.Tr.Ln().Oh(e),this.Tr=t,this.Ah=cf[t.Lh()]}As(t,e){return this.Ah(this.Bh,this.Tr.F(),t,e)}}var Ho;(function(i){i[i.NearestLeft=-1]="NearestLeft",i[i.None=0]="None",i[i.NearestRight=1]="NearestRight"})(Ho||(Ho={}));const qe=30;class df{constructor(){this.Ih=[],this.Eh=new Map,this.Vh=new Map}zh(){return this.Ns()>0?this.Ih[this.Ih.length-1]:null}Nh(){return this.Ns()>0?this.Fh(0):null}An(){return this.Ns()>0?this.Fh(this.Ih.length-1):null}Ns(){return this.Ih.length}Ni(){return this.Ns()===0}Ir(t){return this.Wh(t,0)!==null}Oh(t){return this.jh(t)}jh(t,e=0){const s=this.Wh(t,e);return s===null?null:Object.assign(Object.assign({},this.$h(s)),{Ys:this.Fh(s)})}Us(){return this.Ih}Hh(t,e,s){if(this.Ni())return null;let n=null;for(const r of s)n=Us(n,this.Uh(t,e,r));return n}tt(t){this.Vh.clear(),this.Eh.clear(),this.Ih=t}Fh(t){return this.Ih[t].Ys}$h(t){return this.Ih[t]}Wh(t,e){const s=this.qh(t);if(s===null&&e!==0)switch(e){case-1:return this.Yh(t);case 1:return this.Xh(t);default:throw new TypeError("Unknown search mode")}return s}Yh(t){let e=this.Zh(t);return e>0&&(e-=1),e!==this.Ih.length&&this.Fh(e)<t?e:null}Xh(t){const e=this.Kh(t);return e!==this.Ih.length&&t<this.Fh(e)?e:null}qh(t){const e=this.Zh(t);return e===this.Ih.length||t<this.Ih[e].Ys?null:e}Zh(t){return vs(this.Ih,t,(e,s)=>e.Ys<s)}Kh(t){return Sl(this.Ih,t,(e,s)=>s.Ys>e)}Gh(t,e,s){let n=null;for(let r=t;r<e;r++){const o=this.Ih[r].Ot[s];Number.isNaN(o)||(n===null?n={Jh:o,Qh:o}:(o<n.Jh&&(n.Jh=o),o>n.Qh&&(n.Qh=o)))}return n}Uh(t,e,s){if(this.Ni())return null;let n=null;const r=D(this.Nh()),o=D(this.An()),h=Math.max(t,r),a=Math.min(e,o),l=Math.ceil(h/qe)*qe,u=Math.max(l,Math.floor(a/qe)*qe);{const f=this.Zh(h),m=this.Kh(Math.min(a,l,e));n=Us(n,this.Gh(f,m,s))}let c=this.Eh.get(s);c===void 0&&(c=new Map,this.Eh.set(s,c));for(let f=Math.max(l+1,h);f<u;f+=qe){const m=Math.floor(f/qe);let d=c.get(m);if(d===void 0){const g=this.Zh(m*qe),T=this.Kh((m+1)*qe-1);d=this.Gh(g,T,s),c.set(m,d)}n=Us(n,d)}{const f=this.Zh(u),m=this.Kh(a);n=Us(n,this.Gh(f,m,s))}return n}}function Us(i,t){return i===null?t:t===null?i:{Jh:Math.min(i.Jh,t.Jh),Qh:Math.max(i.Qh,t.Qh)}}class Ir extends uf{constructor(t,e,s){super(t),this.Vt=new df,this.xh=new rf(this),this.tl=[],this.il=new Kc(this),this.nl=null,this.sl=null,this.el=[],this.rl=[],this.hl=null,this.un=e,this.ll=s;const n=new of(this);this.rn=[n],this.yh=new zl(n,this,t),s!=="Area"&&s!=="Line"&&s!=="Baseline"||(this.nl=new Qc(this)),this.al(),this.ol()}M(){this.hl!==null&&clearTimeout(this.hl)}Kr(t){return this.un.priceLineColor||t}Ar(t){const e={Lr:!0},s=this.Bt();if(this.Ut().yt().Ni()||s.Ni()||this.Vt.Ni())return e;const n=this.Ut().yt().zs(),r=this.Tt();if(n===null||r===null)return e;let o,h;if(t){const c=this.Vt.zh();if(c===null)return e;o=c,h=c.Ys}else{const c=this.Vt.jh(n.ci(),-1);if(c===null||(o=this.Vt.Oh(c.Ys),o===null))return e;h=c.Ys}const a=o.Ot[3],l=this.Ls().As(h,{Ot:o}),u=s.Dt(a,r.Ot);return{Lr:!1,ut:a,Gt:s.Fi(a,r.Ot),ih:s._l(a),nh:s.ul(a,r.Ot),D:l.ie,yi:u,Ys:h}}Ls(){return this.sl!==null||(this.sl=new ff(this)),this.sl}F(){return this.un}kh(t){const e=t.priceScaleId;e!==void 0&&e!==this.un.priceScaleId&&this.Ut().cl(this,e),Re(this.un,t),t.priceFormat!==void 0&&(this.al(),this.Ut().dl()),this.Ut().fl(this),this.Ut().pl(),this.bn.gt("options")}tt(t,e){this.Vt.tt(t),this.vl(),this.bn.gt("data"),this.cn.gt("data"),this.nl!==null&&(e&&e.ml?this.nl.Rr():t.length===0&&this.nl.Pr());const s=this.Ut().Ke(this);this.Ut().bl(s),this.Ut().fl(this),this.Ut().pl(),this.Ut().Ch()}gl(t){this.el=t,this.vl();const e=this.Ut().Ke(this);this.cn.gt("data"),this.Ut().bl(e),this.Ut().fl(this),this.Ut().pl(),this.Ut().Ch()}wl(){return this.el}Xr(){return this.rl}Ml(t){const e=new af(this,t);return this.tl.push(e),this.Ut().fl(this),e}Sl(t){const e=this.tl.indexOf(t);e!==-1&&this.tl.splice(e,1),this.Ut().fl(this)}Lh(){return this.ll}Tt(){const t=this.xl();return t===null?null:{Ot:t.Ot[3],yl:t._t}}xl(){const t=this.Ut().yt().zs();if(t===null)return null;const e=t.Ms();return this.Vt.jh(e,1)}Ln(){return this.Vt}Zr(t){const e=this.Vt.Oh(t);return e===null?null:this.ll==="Bar"||this.ll==="Candlestick"?{oe:e.Ot[0],_e:e.Ot[1],ue:e.Ot[2],ce:e.Ot[3]}:e.Ot[3]}kl(t){const e=this.nl;return e!==null&&e.Ct()?(this.hl===null&&e.Br()&&(this.hl=setTimeout(()=>{this.hl=null,this.Ut().Cl()},0)),e.Dr(),[e]):[]}Tn(){const t=[];this.Tl()||t.push(this.il),t.push(this.bn,this.xh,this.cn);const e=this.tl.map(s=>s.Th());return t.push(...e),t}Ji(t){return[this.yh,...this.tl.map(e=>e.Ph())]}Pn(t,e){if(e!==this.Yi&&!this.Tl())return[];const s=[...this.rn];for(const n of this.tl)s.push(n.Rh());return s}Pl(t,e){if(this.un.autoscaleInfoProvider!==void 0){const s=this.un.autoscaleInfoProvider(()=>{const n=this.Rl(t,e);return n===null?null:n.dh()});return _n.fh(s)}return this.Rl(t,e)}Dl(){return this.un.priceFormat.minMove}Bl(){return this.Ol}Dn(){var t;this.bn.gt(),this.cn.gt();for(const e of this.rn)e.gt();for(const e of this.tl)e.gt();this.xh.gt(),this.il.gt(),(t=this.nl)===null||t===void 0||t.gt()}Bt(){return D(super.Bt())}kt(t){if(!((this.ll==="Line"||this.ll==="Area"||this.ll==="Baseline")&&this.un.crosshairMarkerVisible))return null;const e=this.Vt.Oh(t);return e===null?null:{ut:e.Ot[3],lt:this.Al(),At:this.Ll(),Rt:this.Il(),Pt:this.El(t)}}Gr(){return this.un.title}Ct(){return this.un.visible}Tl(){return!En(this.Bt().Vl())}Rl(t,e){if(!cs(t)||!cs(e)||this.Vt.Ni())return null;const s=this.ll==="Line"||this.ll==="Area"||this.ll==="Baseline"||this.ll==="Histogram"?[3]:[2,1],n=this.Vt.Hh(t,e,s);let r=n!==null?new He(n.Jh,n.Qh):null;if(this.Lh()==="Histogram"){const o=this.un.base,h=new He(o,o);r=r!==null?r.Qn(h):h}return new _n(r,this.cn.Yr())}Al(){switch(this.ll){case"Line":case"Area":case"Baseline":return this.un.crosshairMarkerRadius}return 0}Ll(){switch(this.ll){case"Line":case"Area":case"Baseline":{const t=this.un.crosshairMarkerBorderColor;if(t.length!==0)return t}}return null}Il(){switch(this.ll){case"Line":case"Area":case"Baseline":return this.un.crosshairMarkerBorderWidth}return 0}El(t){switch(this.ll){case"Line":case"Area":case"Baseline":{const e=this.un.crosshairMarkerBackgroundColor;if(e.length!==0)return e}}return this.Ls().As(t).ie}al(){switch(this.un.priceFormat.type){case"custom":this.Ol={format:this.un.priceFormat.formatter};break;case"volume":this.Ol=new Tc(this.un.priceFormat.precision);break;case"percent":this.Ol=new yl(this.un.priceFormat.precision);break;default:{const t=Math.pow(10,this.un.priceFormat.precision);this.Ol=new Tn(t,this.un.priceFormat.minMove*t)}}this.Yi!==null&&this.Yi.zl()}vl(){const t=this.Ut().yt();if(t.Ni()||this.Vt.Ns()===0)return void(this.rl=[]);const e=D(this.Vt.Nh());this.rl=this.el.map((s,n)=>{const r=D(t.Nl(s.time,!0)),o=r<e?1:-1;return{time:D(this.Vt.jh(r,o)).Ys,position:s.position,shape:s.shape,color:s.color,id:s.id,internalId:n,text:s.text,size:s.size}})}ol(){switch(this.cn=new nf(this,this.Ut()),this.ll){case"Bar":this.bn=new Lc(this,this.Ut());break;case"Candlestick":this.bn=new Uc(this,this.Ut());break;case"Line":this.bn=new Wc(this,this.Ut());break;case"Area":this.bn=new Dc(this,this.Ut());break;case"Baseline":this.bn=new Bc(this,this.Ut());break;case"Histogram":this.bn=new jc(this,this.Ut());break;default:throw Error("Unknown chart style assigned: "+this.ll)}}}class mf{constructor(t){this.un=t}Fl(t,e,s){let n=t;if(this.un.mode===0)return n;const r=s.fn(),o=r.Tt();if(o===null)return n;const h=r.Dt(t,o),a=s.Wl().filter(u=>u instanceof Ir).reduce((u,c)=>{if(s.Ge(c)||!c.Ct())return u;const f=c.Bt(),m=c.Ln();if(f.Ni()||!m.Ir(e))return u;const d=m.Oh(e);if(d===null)return u;const g=ts(c.Tt());return u.concat([f.Dt(d.Ot[3],g.Ot)])},[]);if(a.length===0)return n;a.sort((u,c)=>Math.abs(u-h)-Math.abs(c-h));const l=a[0];return n=r.pn(l,o),n}}class gf extends li{constructor(){super(...arguments),this.Vt=null}tt(t){this.Vt=t}Z({context:t,bitmapSize:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.Vt===null)return;const r=Math.max(1,Math.floor(s));t.lineWidth=r,function(o,h){o.save(),o.lineWidth%2&&o.translate(.5,.5),h(),o.restore()}(t,()=>{const o=D(this.Vt);if(o.jl){t.strokeStyle=o.$l,ri(t,o.Hl),t.beginPath();for(const h of o.Ul){const a=Math.round(h.ql*s);t.moveTo(a,-r),t.lineTo(a,e.height+r)}t.stroke()}if(o.Yl){t.strokeStyle=o.Xl,ri(t,o.Zl),t.beginPath();for(const h of o.Kl){const a=Math.round(h.ql*n);t.moveTo(-r,a),t.lineTo(e.width+r,a)}t.stroke()}})}}class pf{constructor(t){this.jt=new gf,this.vt=!0,this.tn=t}gt(){this.vt=!0}Mt(){if(this.vt){const t=this.tn.Ut().F().grid,e={Yl:t.horzLines.visible,jl:t.vertLines.visible,Xl:t.horzLines.color,$l:t.vertLines.color,Zl:t.horzLines.style,Hl:t.vertLines.style,Kl:this.tn.fn().Gl(),Ul:this.tn.Ut().yt().Gl()||[]};this.jt.tt(e),this.vt=!1}return this.jt}}class vf{constructor(t){this.bn=new pf(t)}Th(){return this.bn}}const Wn={Jl:4,Ql:1e-4};function vi(i,t){const e=100*(i-t)/t;return t<0?-e:e}function bf(i,t){const e=vi(i.lh(),t),s=vi(i.ah(),t);return new He(e,s)}function rs(i,t){const e=100*(i-t)/t+100;return t<0?-e:e}function yf(i,t){const e=rs(i.lh(),t),s=rs(i.ah(),t);return new He(e,s)}function wn(i,t){const e=Math.abs(i);if(e<1e-15)return 0;const s=kl(e+t.Ql)+t.Jl;return i<0?-s:s}function os(i,t){const e=Math.abs(i);if(e<1e-15)return 0;const s=Math.pow(10,e-t.Jl)-t.Ql;return i<0?-s:s}function Qi(i,t){if(i===null)return null;const e=wn(i.lh(),t),s=wn(i.ah(),t);return new He(e,s)}function Hs(i,t){if(i===null)return null;const e=os(i.lh(),t),s=os(i.ah(),t);return new He(e,s)}function Gn(i){if(i===null)return Wn;const t=Math.abs(i.ah()-i.lh());if(t>=1||t<1e-15)return Wn;const e=Math.ceil(Math.abs(Math.log10(t))),s=Wn.Jl+e;return{Jl:s,Ql:1/Math.pow(10,s)}}class qn{constructor(t,e){if(this.ta=t,this.ia=e,function(s){if(s<0)return!1;for(let n=s;n>1;n/=10)if(n%10!=0)return!1;return!0}(this.ta))this.na=[2,2.5,2];else{this.na=[];for(let s=this.ta;s!==1;){if(s%2==0)this.na.push(2),s/=2;else{if(s%5!=0)throw new Error("unexpected base");this.na.push(2,2.5),s/=5}if(this.na.length>100)throw new Error("something wrong with base")}}}sa(t,e,s){const n=this.ta===0?0:1/this.ta;let r=Math.pow(10,Math.max(0,Math.ceil(kl(t-e)))),o=0,h=this.ia[0];for(;;){const c=Is(r,n,1e-14)&&r>n+1e-14,f=Is(r,s*h,1e-14),m=Is(r,1,1e-14);if(!(c&&f&&m))break;r/=h,h=this.ia[++o%this.ia.length]}if(r<=n+1e-14&&(r=n),r=Math.max(1,r),this.na.length>0&&(a=r,l=1,u=1e-14,Math.abs(a-l)<u))for(o=0,h=this.na[0];Is(r,s*h,1e-14)&&r>n+1e-14;)r/=h,h=this.na[++o%this.na.length];var a,l,u;return r}}class jo{constructor(t,e,s,n){this.ea=[],this.Vi=t,this.ta=e,this.ra=s,this.ha=n}sa(t,e){if(t<e)throw new Error("high < low");const s=this.Vi.It(),n=(t-e)*this.la()/s,r=new qn(this.ta,[2,2.5,2]),o=new qn(this.ta,[2,2,2.5]),h=new qn(this.ta,[2.5,2,2]),a=[];return a.push(r.sa(t,e,n),o.sa(t,e,n),h.sa(t,e,n)),function(l){if(l.length<1)throw Error("array is empty");let u=l[0];for(let c=1;c<l.length;++c)l[c]<u&&(u=l[c]);return u}(a)}aa(){const t=this.Vi,e=t.Tt();if(e===null)return void(this.ea=[]);const s=t.It(),n=this.ra(s-1,e),r=this.ra(0,e),o=this.Vi.F().entireTextOnly?this.oa()/2:0,h=o,a=s-1-o,l=Math.max(n,r),u=Math.min(n,r);if(l===u)return void(this.ea=[]);let c=this.sa(l,u),f=l%c;f+=f<0?c:0;const m=l>=u?1:-1;let d=null,g=0;for(let T=l-f;T>u;T-=c){const S=this.ha(T,e,!0);d!==null&&Math.abs(S-d)<this.la()||S<h||S>a||(g<this.ea.length?(this.ea[g].ql=S,this.ea[g]._a=t.ua(T)):this.ea.push({ql:S,_a:t.ua(T)}),g++,d=S,t.ca()&&(c=this.sa(T*m,u)))}this.ea.length=g}Gl(){return this.ea}oa(){return this.Vi.T()}la(){return Math.ceil(2.5*this.oa())}}function Ol(i){return i.slice().sort((t,e)=>D(t.Zi())-D(e.Zi()))}var Wo;(function(i){i[i.Normal=0]="Normal",i[i.Logarithmic=1]="Logarithmic",i[i.Percentage=2]="Percentage",i[i.IndexedTo100=3]="IndexedTo100"})(Wo||(Wo={}));const Go=new yl,qo=new Tn(100,1);class _f{constructor(t,e,s,n){this.da=0,this.fa=null,this.ph=null,this.pa=null,this.va={ma:!1,ba:null},this.ga=0,this.wa=0,this.Ma=new Ht,this.Sa=new Ht,this.xa=[],this.ya=null,this.ka=null,this.Ca=null,this.Ta=null,this.Ol=qo,this.Pa=Gn(null),this.Ra=t,this.un=e,this.Da=s,this.Ba=n,this.Oa=new jo(this,100,this.Aa.bind(this),this.La.bind(this))}Vl(){return this.Ra}F(){return this.un}kh(t){if(Re(this.un,t),this.zl(),t.mode!==void 0&&this.Ia({lr:t.mode}),t.scaleMargins!==void 0){const e=pe(t.scaleMargins.top),s=pe(t.scaleMargins.bottom);if(e<0||e>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${e}`);if(s<0||s>1||e+s>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${s}`);if(e+s>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${e+s}`);this.Ea(),this.ka=null}}Va(){return this.un.autoScale}ca(){return this.un.mode===1}th(){return this.un.mode===2}za(){return this.un.mode===3}lr(){return{Fn:this.un.autoScale,Na:this.un.invertScale,lr:this.un.mode}}Ia(t){const e=this.lr();let s=null;t.Fn!==void 0&&(this.un.autoScale=t.Fn),t.lr!==void 0&&(this.un.mode=t.lr,t.lr!==2&&t.lr!==3||(this.un.autoScale=!0),this.va.ma=!1),e.lr===1&&t.lr!==e.lr&&(function(r,o){if(r===null)return!1;const h=os(r.lh(),o),a=os(r.ah(),o);return isFinite(h)&&isFinite(a)}(this.ph,this.Pa)?(s=Hs(this.ph,this.Pa),s!==null&&this.Fa(s)):this.un.autoScale=!0),t.lr===1&&t.lr!==e.lr&&(s=Qi(this.ph,this.Pa),s!==null&&this.Fa(s));const n=e.lr!==this.un.mode;n&&(e.lr===2||this.th())&&this.zl(),n&&(e.lr===3||this.za())&&this.zl(),t.Na!==void 0&&e.Na!==t.Na&&(this.un.invertScale=t.Na,this.Wa()),this.Sa.m(e,this.lr())}ja(){return this.Sa}T(){return this.Da.fontSize}It(){return this.da}$a(t){this.da!==t&&(this.da=t,this.Ea(),this.ka=null)}Ha(){if(this.fa)return this.fa;const t=this.It()-this.Ua()-this.qa();return this.fa=t,t}bh(){return this.Ya(),this.ph}Fa(t,e){const s=this.ph;(e||s===null&&t!==null||s!==null&&!s.rh(t))&&(this.ka=null,this.ph=t)}Ni(){return this.Ya(),this.da===0||!this.ph||this.ph.Ni()}Xa(t){return this.Na()?t:this.It()-1-t}Dt(t,e){return this.th()?t=vi(t,e):this.za()&&(t=rs(t,e)),this.La(t,e)}$s(t,e,s){this.Ya();const n=this.qa(),r=D(this.bh()),o=r.lh(),h=r.ah(),a=this.Ha()-1,l=this.Na(),u=a/(h-o),c=s===void 0?0:s.from,f=s===void 0?t.length:s.to,m=this.Za();for(let d=c;d<f;d++){const g=t[d],T=g.ut;if(isNaN(T))continue;let S=T;m!==null&&(S=m(g.ut,e));const M=n+u*(S-o),O=l?M:this.da-1-M;g.et=O}}le(t,e,s){this.Ya();const n=this.qa(),r=D(this.bh()),o=r.lh(),h=r.ah(),a=this.Ha()-1,l=this.Na(),u=a/(h-o),c=s===void 0?0:s.from,f=s===void 0?t.length:s.to,m=this.Za();for(let d=c;d<f;d++){const g=t[d];let T=g.oe,S=g._e,M=g.ue,O=g.ce;m!==null&&(T=m(g.oe,e),S=m(g._e,e),M=m(g.ue,e),O=m(g.ce,e));let E=n+u*(T-o),F=l?E:this.da-1-E;g.re=F,E=n+u*(S-o),F=l?E:this.da-1-E,g.ne=F,E=n+u*(M-o),F=l?E:this.da-1-E,g.se=F,E=n+u*(O-o),F=l?E:this.da-1-E,g.he=F}}pn(t,e){const s=this.Aa(t,e);return this.Ka(s,e)}Ka(t,e){let s=t;return this.th()?s=function(n,r){return r<0&&(n=-n),n/100*r+r}(s,e):this.za()&&(s=function(n,r){return n-=100,r<0&&(n=-n),n/100*r+r}(s,e)),s}Wl(){return this.xa}Ga(){if(this.ya)return this.ya;let t=[];for(let e=0;e<this.xa.length;e++){const s=this.xa[e];s.Zi()===null&&s.Ki(e+1),t.push(s)}return t=Ol(t),this.ya=t,this.ya}Ja(t){this.xa.indexOf(t)===-1&&(this.xa.push(t),this.zl(),this.Qa())}io(t){const e=this.xa.indexOf(t);if(e===-1)throw new Error("source is not attached to scale");this.xa.splice(e,1),this.xa.length===0&&(this.Ia({Fn:!0}),this.Fa(null)),this.zl(),this.Qa()}Tt(){let t=null;for(const e of this.xa){const s=e.Tt();s!==null&&(t===null||s.yl<t.yl)&&(t=s)}return t===null?null:t.Ot}Na(){return this.un.invertScale}Gl(){const t=this.Tt()===null;if(this.ka!==null&&(t||this.ka.no===t))return this.ka.Gl;this.Oa.aa();const e=this.Oa.Gl();return this.ka={Gl:e,no:t},this.Ma.m(),e}so(){return this.Ma}eo(t){this.th()||this.za()||this.Ca===null&&this.pa===null&&(this.Ni()||(this.Ca=this.da-t,this.pa=D(this.bh()).hh()))}ro(t){if(this.th()||this.za()||this.Ca===null)return;this.Ia({Fn:!1}),(t=this.da-t)<0&&(t=0);let e=(this.Ca+.2*(this.da-1))/(t+.2*(this.da-1));const s=D(this.pa).hh();e=Math.max(e,.1),s._h(e),this.Fa(s)}ho(){this.th()||this.za()||(this.Ca=null,this.pa=null)}lo(t){this.Va()||this.Ta===null&&this.pa===null&&(this.Ni()||(this.Ta=t,this.pa=D(this.bh()).hh()))}ao(t){if(this.Va()||this.Ta===null)return;const e=D(this.bh()).oh()/(this.Ha()-1);let s=t-this.Ta;this.Na()&&(s*=-1);const n=s*e,r=D(this.pa).hh();r.uh(n),this.Fa(r,!0),this.ka=null}oo(){this.Va()||this.Ta!==null&&(this.Ta=null,this.pa=null)}Bl(){return this.Ol||this.zl(),this.Ol}Fi(t,e){switch(this.un.mode){case 2:return this.Bl().format(vi(t,e));case 3:return this.Bl().format(rs(t,e));default:return this.Sh(t)}}ua(t){switch(this.un.mode){case 2:case 3:return this.Bl().format(t);default:return this.Sh(t)}}_l(t){return this.Sh(t,D(this._o()).Bl())}ul(t,e){return t=vi(t,e),Go.format(t)}uo(){return this.xa}co(t){this.va={ba:t,ma:!1}}Dn(){this.xa.forEach(t=>t.Dn())}zl(){this.ka=null;const t=this._o();let e=100;t!==null&&(e=Math.round(1/t.Dl())),this.Ol=qo,this.th()?(this.Ol=Go,e=100):this.za()?(this.Ol=new Tn(100,1),e=100):t!==null&&(this.Ol=t.Bl()),this.Oa=new jo(this,e,this.Aa.bind(this),this.La.bind(this)),this.Oa.aa()}Qa(){this.ya=null}_o(){return this.xa[0]||null}Ua(){return this.Na()?this.un.scaleMargins.bottom*this.It()+this.wa:this.un.scaleMargins.top*this.It()+this.ga}qa(){return this.Na()?this.un.scaleMargins.top*this.It()+this.ga:this.un.scaleMargins.bottom*this.It()+this.wa}Ya(){this.va.ma||(this.va.ma=!0,this.do())}Ea(){this.fa=null}La(t,e){if(this.Ya(),this.Ni())return 0;t=this.ca()&&t?wn(t,this.Pa):t;const s=D(this.bh()),n=this.qa()+(this.Ha()-1)*(t-s.lh())/s.oh();return this.Xa(n)}Aa(t,e){if(this.Ya(),this.Ni())return 0;const s=this.Xa(t),n=D(this.bh()),r=n.lh()+n.oh()*((s-this.qa())/(this.Ha()-1));return this.ca()?os(r,this.Pa):r}Wa(){this.ka=null,this.Oa.aa()}do(){const t=this.va.ba;if(t===null)return;let e=null;const s=this.uo();let n=0,r=0;for(const a of s){if(!a.Ct())continue;const l=a.Tt();if(l===null)continue;const u=a.Pl(t.Ms(),t.ci());let c=u&&u.bh();if(c!==null){switch(this.un.mode){case 1:c=Qi(c,this.Pa);break;case 2:c=bf(c,l.Ot);break;case 3:c=yf(c,l.Ot)}if(e=e===null?c:e.Qn(D(c)),u!==null){const f=u.gh();f!==null&&(n=Math.max(n,f.above),r=Math.max(n,f.below))}}}if(n===this.ga&&r===this.wa||(this.ga=n,this.wa=r,this.ka=null,this.Ea()),e!==null){if(e.lh()===e.ah()){const a=this._o(),l=5*(a===null||this.th()||this.za()?1:a.Dl());this.ca()&&(e=Hs(e,this.Pa)),e=new He(e.lh()-l,e.ah()+l),this.ca()&&(e=Qi(e,this.Pa))}if(this.ca()){const a=Hs(e,this.Pa),l=Gn(a);if(o=l,h=this.Pa,o.Jl!==h.Jl||o.Ql!==h.Ql){const u=this.pa!==null?Hs(this.pa,this.Pa):null;this.Pa=l,e=Qi(a,l),u!==null&&(this.pa=Qi(u,l))}}this.Fa(e)}else this.ph===null&&(this.Fa(new He(-.5,.5)),this.Pa=Gn(null));var o,h;this.va.ma=!0}Za(){return this.th()?vi:this.za()?rs:this.ca()?t=>wn(t,this.Pa):null}Sh(t,e){return this.Ba.priceFormatter===void 0?(e===void 0&&(e=this.Bl()),e.format(t)):this.Ba.priceFormatter(t)}}class wf{constructor(t,e){this.xa=[],this.fo=new Map,this.da=0,this.po=0,this.vo=1e3,this.ya=null,this.mo=new Ht,this.bo=t,this.Hi=e,this.wo=new vf(this);const s=e.F();this.Mo=this.So("left",s.leftPriceScale),this.xo=this.So("right",s.rightPriceScale),this.Mo.ja().l(this.yo.bind(this,this.Mo),this),this.xo.ja().l(this.yo.bind(this,this.xo),this),this.ko(s)}ko(t){if(t.leftPriceScale&&this.Mo.kh(t.leftPriceScale),t.rightPriceScale&&this.xo.kh(t.rightPriceScale),t.localization&&(this.Mo.zl(),this.xo.zl()),t.overlayPriceScales){const e=Array.from(this.fo.values());for(const s of e){const n=D(s[0].Bt());n.kh(t.overlayPriceScales),t.localization&&n.zl()}}}Co(t){switch(t){case"left":return this.Mo;case"right":return this.xo}return this.fo.has(t)?pe(this.fo.get(t))[0].Bt():null}M(){this.Ut().To().v(this),this.Mo.ja().v(this),this.xo.ja().v(this),this.xa.forEach(t=>{t.M&&t.M()}),this.mo.m()}Po(){return this.vo}Ro(t){this.vo=t}Ut(){return this.Hi}$i(){return this.po}It(){return this.da}Do(t){this.po=t,this.Bo()}$a(t){this.da=t,this.Mo.$a(t),this.xo.$a(t),this.xa.forEach(e=>{if(this.Ge(e)){const s=e.Bt();s!==null&&s.$a(t)}}),this.Bo()}Wl(){return this.xa}Ge(t){const e=t.Bt();return e===null||this.Mo!==e&&this.xo!==e}Ja(t,e,s){const n=s!==void 0?s:this.Ao().Oo+1;this.Lo(t,e,n)}io(t){const e=this.xa.indexOf(t);hi(e!==-1,"removeDataSource: invalid data source"),this.xa.splice(e,1);const s=D(t.Bt()).Vl();if(this.fo.has(s)){const r=pe(this.fo.get(s)),o=r.indexOf(t);o!==-1&&(r.splice(o,1),r.length===0&&this.fo.delete(s))}const n=t.Bt();n&&n.Wl().indexOf(t)>=0&&n.io(t),n!==null&&(n.Qa(),this.Io(n)),this.ya=null}Qe(t){return t===this.Mo?"left":t===this.xo?"right":"overlay"}Eo(){return this.Mo}Vo(){return this.xo}zo(t,e){t.eo(e)}No(t,e){t.ro(e),this.Bo()}Fo(t){t.ho()}Wo(t,e){t.lo(e)}jo(t,e){t.ao(e),this.Bo()}$o(t){t.oo()}Bo(){this.xa.forEach(t=>{t.Dn()})}fn(){let t=null;return this.Hi.F().rightPriceScale.visible&&this.xo.Wl().length!==0?t=this.xo:this.Hi.F().leftPriceScale.visible&&this.Mo.Wl().length!==0?t=this.Mo:this.xa.length!==0&&(t=this.xa[0].Bt()),t===null&&(t=this.xo),t}Je(){let t=null;return this.Hi.F().rightPriceScale.visible?t=this.xo:this.Hi.F().leftPriceScale.visible&&(t=this.Mo),t}Io(t){t!==null&&t.Va()&&this.Ho(t)}Uo(t){const e=this.bo.zs();t.Ia({Fn:!0}),e!==null&&t.co(e),this.Bo()}qo(){this.Ho(this.Mo),this.Ho(this.xo)}Yo(){this.Io(this.Mo),this.Io(this.xo),this.xa.forEach(t=>{this.Ge(t)&&this.Io(t.Bt())}),this.Bo(),this.Hi.Ch()}Ga(){return this.ya===null&&(this.ya=Ol(this.xa)),this.ya}Xo(){return this.mo}Zo(){return this.wo}Ho(t){const e=t.uo();if(e&&e.length>0&&!this.bo.Ni()){const s=this.bo.zs();s!==null&&t.co(s)}t.Dn()}Ao(){const t=this.Ga();if(t.length===0)return{Ko:0,Oo:0};let e=0,s=0;for(let n=0;n<t.length;n++){const r=t[n].Zi();r!==null&&(r<e&&(e=r),r>s&&(s=r))}return{Ko:e,Oo:s}}Lo(t,e,s){let n=this.Co(e);if(n===null&&(n=this.So(e,this.Hi.F().overlayPriceScales)),this.xa.push(t),!En(e)){const r=this.fo.get(e)||[];r.push(t),this.fo.set(e,r)}n.Ja(t),t.Gi(n),t.Ki(s),this.Io(n),this.ya=null}yo(t,e,s){e.lr!==s.lr&&this.Ho(t)}So(t,e){const s=Object.assign({visible:!0,autoScale:!0},Ae(e)),n=new _f(t,s,this.Hi.F().layout,this.Hi.F().localization);return n.$a(this.It()),n}}const Yo=i=>i.getUTCFullYear();function xf(i,t,e){return t.replace(/yyyy/g,(s=>Be(Yo(s),4))(i)).replace(/yy/g,(s=>Be(Yo(s)%100,2))(i)).replace(/MMMM/g,((s,n)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(n,{month:"long"}))(i,e)).replace(/MMM/g,((s,n)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(n,{month:"short"}))(i,e)).replace(/MM/g,(s=>Be((n=>n.getUTCMonth()+1)(s),2))(i)).replace(/dd/g,(s=>Be((n=>n.getUTCDate())(s),2))(i))}class Dl{constructor(t="yyyy-MM-dd",e="default"){this.Go=t,this.Jo=e}Qo(t){return xf(t,this.Go,this.Jo)}}class Mf{constructor(t){this.t_=t||"%h:%m:%s"}Qo(t){return this.t_.replace("%h",Be(t.getUTCHours(),2)).replace("%m",Be(t.getUTCMinutes(),2)).replace("%s",Be(t.getUTCSeconds(),2))}}const Sf={i_:"yyyy-MM-dd",n_:"%h:%m:%s",s_:" ",e_:"default"};class Cf{constructor(t={}){const e=Object.assign(Object.assign({},Sf),t);this.r_=new Dl(e.i_,e.e_),this.h_=new Mf(e.n_),this.l_=e.s_}Qo(t){return`${this.r_.Qo(t)}${this.l_}${this.h_.Qo(t)}`}}class Ef{constructor(t,e=50){this.Le=0,this.Ie=1,this.Ee=1,this.ze=new Map,this.Ve=new Map,this.a_=t,this.Ne=e}Qo(t){const e=t._t,s=e.o_===void 0?new Date(1e3*e.__).getTime():new Date(Date.UTC(e.o_.year,e.o_.month-1,e.o_.day)).getTime(),n=this.ze.get(s);if(n!==void 0)return n.u_;if(this.Le===this.Ne){const o=this.Ve.get(this.Ee);this.Ve.delete(this.Ee),this.ze.delete(pe(o)),this.Ee++,this.Le--}const r=this.a_(t);return this.ze.set(s,{u_:r,$e:this.Ie}),this.Ve.set(this.Ie,s),this.Le++,this.Ie++,r}}class hs{constructor(t,e){hi(t<=e,"right should be >= left"),this.c_=t,this.d_=e}Ms(){return this.c_}ci(){return this.d_}f_(){return this.d_-this.c_+1}Ir(t){return this.c_<=t&&t<=this.d_}rh(t){return this.c_===t.Ms()&&this.d_===t.ci()}}function Ko(i,t){return i===null||t===null?i===t:i.rh(t)}class Tf{constructor(){this.p_=new Map,this.ze=null}v_(t,e){this.m_(e),this.ze=null;for(let s=e;s<t.length;++s){const n=t[s];let r=this.p_.get(n.b_);r===void 0&&(r=[],this.p_.set(n.b_,r)),r.push({Ys:s,_t:n._t,g_:n.b_,w_:n.w_})}}M_(t,e){const s=Math.ceil(e/t);return this.ze!==null&&this.ze.S_===s||(this.ze={Gl:this.x_(s),S_:s}),this.ze.Gl}m_(t){if(t===0)return void this.p_.clear();const e=[];this.p_.forEach((s,n)=>{t<=s[0].Ys?e.push(n):s.splice(vs(s,t,r=>r.Ys<t),1/0)});for(const s of e)this.p_.delete(s)}x_(t){let e=[];for(const s of Array.from(this.p_.keys()).sort((n,r)=>r-n)){if(!this.p_.get(s))continue;const n=e;e=[];const r=n.length;let o=0;const h=pe(this.p_.get(s)),a=h.length;let l=1/0,u=-1/0;for(let c=0;c<a;c++){const f=h[c],m=f.Ys;for(;o<r;){const d=n[o],g=d.Ys;if(!(g<m)){l=g;break}o++,e.push(d),u=g,l=1/0}l-m>=t&&m-u>=t&&(e.push(f),u=m)}for(;o<r;o++)e.push(n[o])}return e}}class _i{constructor(t){this.y_=t}k_(){return this.y_===null?null:new hs(Math.floor(this.y_.Ms()),Math.ceil(this.y_.ci()))}C_(){return this.y_}static T_(){return new _i(null)}}var Jo,Xo,Qo,Zo,gr;(function(i){i[i.Year=0]="Year",i[i.Month=1]="Month",i[i.DayOfMonth=2]="DayOfMonth",i[i.Time=3]="Time",i[i.TimeWithSeconds=4]="TimeWithSeconds"})(Jo||(Jo={}));class kf{constructor(t,e,s){this.po=0,this.P_=null,this.R_=[],this.Ta=null,this.Ca=null,this.D_=new Tf,this.B_=new Map,this.O_=_i.T_(),this.A_=!0,this.L_=new Ht,this.I_=new Ht,this.E_=new Ht,this.V_=null,this.z_=null,this.N_=[],this.un=e,this.Ba=s,this.F_=e.rightOffset,this.W_=e.barSpacing,this.Hi=t,this.j_()}F(){return this.un}H_(t){Re(this.Ba,t),this.U_(),this.j_()}kh(t,e){var s;Re(this.un,t),this.un.fixLeftEdge&&this.q_(),this.un.fixRightEdge&&this.Y_(),t.barSpacing!==void 0&&this.Hi.Kn(t.barSpacing),t.rightOffset!==void 0&&this.Hi.Gn(t.rightOffset),t.minBarSpacing!==void 0&&this.Hi.Kn((s=t.barSpacing)!==null&&s!==void 0?s:this.W_),this.U_(),this.j_(),this.E_.m()}vn(t){var e,s;return(s=(e=this.R_[t])===null||e===void 0?void 0:e._t)!==null&&s!==void 0?s:null}Ui(t){var e;return(e=this.R_[t])!==null&&e!==void 0?e:null}Nl(t,e){if(this.R_.length<1)return null;if(t.__>this.R_[this.R_.length-1]._t.__)return e?this.R_.length-1:null;const s=vs(this.R_,t.__,(n,r)=>n._t.__<r);return t.__<this.R_[s]._t.__?e?s:null:s}Ni(){return this.po===0||this.R_.length===0||this.P_===null}zs(){return this.X_(),this.O_.k_()}Z_(){return this.X_(),this.O_.C_()}K_(){const t=this.zs();if(t===null)return null;const e={from:t.Ms(),to:t.ci()};return this.G_(e)}G_(t){const e=Math.round(t.from),s=Math.round(t.to),n=D(this.J_()),r=D(this.Q_());return{from:D(this.vn(Math.max(n,e))),to:D(this.vn(Math.min(r,s)))}}tu(t){return{from:D(this.Nl(t.from,!0)),to:D(this.Nl(t.to,!0))}}$i(){return this.po}Do(t){if(!isFinite(t)||t<=0||this.po===t)return;const e=this.Z_(),s=this.po;if(this.po=t,this.A_=!0,this.un.lockVisibleTimeRangeOnResize&&s!==0){const n=this.W_*t/s;this.W_=n}if(this.un.fixLeftEdge&&e!==null&&e.Ms()<=0){const n=s-t;this.F_-=Math.round(n/this.W_)+1,this.A_=!0}this.iu(),this.nu()}Et(t){if(this.Ni()||!cs(t))return 0;const e=this.su()+this.F_-t;return this.po-(e+.5)*this.W_-1}js(t,e){const s=this.su(),n=e===void 0?0:e.from,r=e===void 0?t.length:e.to;for(let o=n;o<r;o++){const h=t[o]._t,a=s+this.F_-h,l=this.po-(a+.5)*this.W_-1;t[o].st=l}}eu(t){return Math.ceil(this.ru(t))}Gn(t){this.A_=!0,this.F_=t,this.nu(),this.Hi.hu(),this.Hi.Ch()}Ks(){return this.W_}Kn(t){this.lu(t),this.nu(),this.Hi.hu(),this.Hi.Ch()}au(){return this.F_}Gl(){if(this.Ni())return null;if(this.z_!==null)return this.z_;const t=this.W_,e=5*(this.Hi.F().layout.fontSize+4),s=Math.round(e/t),n=D(this.zs()),r=Math.max(n.Ms(),n.Ms()-s),o=Math.max(n.ci(),n.ci()-s),h=this.D_.M_(t,e),a=this.J_()+s,l=this.Q_()-s,u=this.ou(),c=this.un.fixLeftEdge||u,f=this.un.fixRightEdge||u;let m=0;for(const d of h){if(!(r<=d.Ys&&d.Ys<=o))continue;let g;m<this.N_.length?(g=this.N_[m],g.ql=this.Et(d.Ys),g._a=this._u(d),g.g_=d.g_):(g={uu:!1,ql:this.Et(d.Ys),_a:this._u(d),g_:d.g_},this.N_.push(g)),this.W_>e/2&&!u?g.uu=!1:g.uu=c&&d.Ys<=a||f&&d.Ys>=l,m++}return this.N_.length=m,this.z_=this.N_,this.N_}cu(){this.A_=!0,this.Kn(this.un.barSpacing),this.Gn(this.un.rightOffset)}du(t){this.A_=!0,this.P_=t,this.nu(),this.q_()}fu(t,e){const s=this.ru(t),n=this.Ks(),r=n+e*(n/10);this.Kn(r),this.un.rightBarStaysOnScroll||this.Gn(this.au()+(s-this.ru(t)))}eo(t){this.Ta&&this.oo(),this.Ca===null&&this.V_===null&&(this.Ni()||(this.Ca=t,this.pu()))}ro(t){if(this.V_===null)return;const e=yn(this.po-t,0,this.po),s=yn(this.po-D(this.Ca),0,this.po);e!==0&&s!==0&&this.Kn(this.V_.Ks*e/s)}ho(){this.Ca!==null&&(this.Ca=null,this.vu())}lo(t){this.Ta===null&&this.V_===null&&(this.Ni()||(this.Ta=t,this.pu()))}ao(t){if(this.Ta===null)return;const e=(this.Ta-t)/this.Ks();this.F_=D(this.V_).au+e,this.A_=!0,this.nu()}oo(){this.Ta!==null&&(this.Ta=null,this.vu())}mu(){this.bu(this.un.rightOffset)}bu(t,e=400){if(!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(e)||e<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const s=this.F_,n=performance.now();this.Hi.Yn({gu:r=>(r-n)/e>=1,wu:r=>{const o=(r-n)/e;return o>=1?t:s+(t-s)*o}})}gt(t,e){this.A_=!0,this.R_=t,this.D_.v_(t,e),this.nu()}Mu(){return this.L_}Su(){return this.I_}xu(){return this.E_}su(){return this.P_||0}yu(t){const e=t.f_();this.lu(this.po/e),this.F_=t.ci()-this.su(),this.nu(),this.A_=!0,this.Hi.hu(),this.Hi.Ch()}ku(){const t=this.J_(),e=this.Q_();t!==null&&e!==null&&this.yu(new hs(t,e+this.un.rightOffset))}Cu(t){const e=new hs(t.from,t.to);this.yu(e)}qi(t){return this.Ba.timeFormatter!==void 0?this.Ba.timeFormatter(t.w_):this.Tu.Qo(new Date(1e3*t._t.__))}ou(){const{handleScroll:t,handleScale:e}=this.Hi.F();return!(t.horzTouchDrag||t.mouseWheel||t.pressedMouseMove||t.vertTouchDrag||e.axisDoubleClickReset.time||e.axisPressedMouseMove.time||e.mouseWheel||e.pinch)}J_(){return this.R_.length===0?null:0}Q_(){return this.R_.length===0?null:this.R_.length-1}Pu(t){return(this.po-1-t)/this.W_}ru(t){const e=this.Pu(t),s=this.su()+this.F_-e;return Math.round(1e6*s)/1e6}lu(t){const e=this.W_;this.W_=t,this.iu(),e!==this.W_&&(this.A_=!0,this.Ru())}X_(){if(!this.A_)return;if(this.A_=!1,this.Ni())return void this.Du(_i.T_());const t=this.su(),e=this.po/this.W_,s=this.F_+t,n=new hs(s-e+1,s);this.Du(new _i(n))}iu(){const t=this.Bu();if(this.W_<t&&(this.W_=t,this.A_=!0),this.po!==0){const e=.5*this.po;this.W_>e&&(this.W_=e,this.A_=!0)}}Bu(){return this.un.fixLeftEdge&&this.un.fixRightEdge&&this.R_.length!==0?this.po/this.R_.length:this.un.minBarSpacing}nu(){const t=this.Ou();this.F_>t&&(this.F_=t,this.A_=!0);const e=this.Au();e!==null&&this.F_<e&&(this.F_=e,this.A_=!0)}Au(){const t=this.J_(),e=this.P_;return t===null||e===null?null:t-e-1+(this.un.fixLeftEdge?this.po/this.W_:Math.min(2,this.R_.length))}Ou(){return this.un.fixRightEdge?0:this.po/this.W_-Math.min(2,this.R_.length)}pu(){this.V_={Ks:this.Ks(),au:this.au()}}vu(){this.V_=null}_u(t){let e=this.B_.get(t.g_);return e===void 0&&(e=new Ef(s=>this.Lu(s)),this.B_.set(t.g_,e)),e.Qo(t)}Lu(t){const e=function(s,n,r){switch(s){case 0:case 10:return n?r?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return n?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(t.g_,this.un.timeVisible,this.un.secondsVisible);if(this.un.tickMarkFormatter!==void 0){const s=this.un.tickMarkFormatter(t.w_,e,this.Ba.locale);if(s!==null)return s}return function(s,n,r){const o={};switch(n){case 0:o.year="numeric";break;case 1:o.month="short";break;case 2:o.day="numeric";break;case 3:o.hour12=!1,o.hour="2-digit",o.minute="2-digit";break;case 4:o.hour12=!1,o.hour="2-digit",o.minute="2-digit",o.second="2-digit"}const h=s.o_===void 0?new Date(1e3*s.__):new Date(Date.UTC(s.o_.year,s.o_.month-1,s.o_.day));return new Date(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate(),h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()).toLocaleString(r,o)}(t._t,e,this.Ba.locale)}Du(t){const e=this.O_;this.O_=t,Ko(e.k_(),this.O_.k_())||this.L_.m(),Ko(e.C_(),this.O_.C_())||this.I_.m(),this.Ru()}Ru(){this.z_=null}U_(){this.Ru(),this.B_.clear()}j_(){const t=this.Ba.dateFormat;this.un.timeVisible?this.Tu=new Cf({i_:t,n_:this.un.secondsVisible?"%h:%m:%s":"%h:%m",s_:"   ",e_:this.Ba.locale}):this.Tu=new Dl(t,this.Ba.locale)}q_(){if(!this.un.fixLeftEdge)return;const t=this.J_();if(t===null)return;const e=this.zs();if(e===null)return;const s=e.Ms()-t;if(s<0){const n=this.F_-s-1;this.Gn(n)}this.iu()}Y_(){this.nu(),this.iu()}}class Pf extends ps{constructor(t){super(),this.Iu=new Map,this.Vt=t}Z(t){}G(t){if(!this.Vt.Ct)return;const{context:e,mediaSize:s}=t;let n=0;for(const o of this.Vt.Eu){if(o.Gt.length===0)continue;e.font=o.P;const h=this.Vu(e,o.Gt);h>s.width?o.fu=s.width/h:o.fu=1,n+=o.zu*o.fu}let r=0;switch(this.Vt.Nu){case"top":r=0;break;case"center":r=Math.max((s.height-n)/2,0);break;case"bottom":r=Math.max(s.height-n,0)}e.fillStyle=this.Vt.D;for(const o of this.Vt.Eu){e.save();let h=0;switch(this.Vt.Fu){case"left":e.textAlign="left",h=o.zu/2;break;case"center":e.textAlign="center",h=s.width/2;break;case"right":e.textAlign="right",h=s.width-1-o.zu/2}e.translate(h,r),e.textBaseline="top",e.font=o.P,e.scale(o.fu,o.fu),e.fillText(o.Gt,0,o.Wu),e.restore(),r+=o.zu*o.fu}}Vu(t,e){const s=this.ju(t.font);let n=s.get(e);return n===void 0&&(n=t.measureText(e).width,s.set(e,n)),n}ju(t){let e=this.Iu.get(t);return e===void 0&&(e=new Map,this.Iu.set(t,e)),e}}class zf{constructor(t){this.vt=!0,this.Wt={Ct:!1,D:"",Eu:[],Nu:"center",Fu:"center"},this.jt=new Pf(this.Wt),this.$t=t}gt(){this.vt=!0}Mt(){return this.vt&&(this.St(),this.vt=!1),this.jt}St(){const t=this.$t.F(),e=this.Wt;e.Ct=t.visible,e.Ct&&(e.D=t.color,e.Fu=t.horzAlign,e.Nu=t.vertAlign,e.Eu=[{Gt:t.text,P:ki(t.fontSize,t.fontFamily,t.fontStyle),zu:1.2*t.fontSize,Wu:0,fu:0}])}}class Rf extends Ar{constructor(t,e){super(),this.un=e,this.bn=new zf(this)}Pn(){return[]}Tn(){return[this.bn]}F(){return this.un}Dn(){this.bn.gt()}}(function(i){i[i.OnTouchEnd=0]="OnTouchEnd",i[i.OnNextTap=1]="OnNextTap"})(Xo||(Xo={}));class Vf{constructor(t,e){this.$u=[],this.Hu=[],this.po=0,this.Uu=null,this.qu=new Ht,this.Yu=new Ht,this.Xu=null,this.Zu=t,this.un=e,this.Ku=new mc(this),this.bo=new kf(this,e.timeScale,this.un.localization),this.bt=new Ec(this,e.crosshair),this.Gu=new mf(e.crosshair),this.Ju=new Rf(this,e.watermark),this.Qu(),this.$u[0].Ro(2e3),this.tc=this.ic(0),this.nc=this.ic(1)}dl(){this.sc(Ut.ss())}Ch(){this.sc(Ut.ns())}Cl(){this.sc(new Ut(1))}fl(t){const e=this.ec(t);this.sc(e)}rc(){return this.Uu}hc(t){const e=this.Uu;this.Uu=t,e!==null&&this.fl(e.lc),t!==null&&this.fl(t.lc)}F(){return this.un}kh(t){Re(this.un,t),this.$u.forEach(e=>e.ko(t)),t.timeScale!==void 0&&this.bo.kh(t.timeScale),t.localization!==void 0&&this.bo.H_(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.qu.m(),this.tc=this.ic(0),this.nc=this.ic(1),this.dl()}ac(t,e){if(t==="left")return void this.kh({leftPriceScale:e});if(t==="right")return void this.kh({rightPriceScale:e});const s=this.oc(t);s!==null&&(s.Bt.kh(e),this.qu.m())}oc(t){for(const e of this.$u){const s=e.Co(t);if(s!==null)return{Ht:e,Bt:s}}return null}yt(){return this.bo}_c(){return this.$u}uc(){return this.Ju}cc(){return this.bt}dc(){return this.Yu}fc(t,e){t.$a(e),this.hu()}Do(t){this.po=t,this.bo.Do(this.po),this.$u.forEach(e=>e.Do(t)),this.hu()}Qu(t){const e=new wf(this.bo,this);t!==void 0?this.$u.splice(t,0,e):this.$u.push(e);const s=t===void 0?this.$u.length-1:t,n=Ut.ss();return n.zn(s,{Nn:0,Fn:!0}),this.sc(n),e}zo(t,e,s){t.zo(e,s)}No(t,e,s){t.No(e,s),this.pl(),this.sc(this.vc(t,2))}Fo(t,e){t.Fo(e),this.sc(this.vc(t,2))}Wo(t,e,s){e.Va()||t.Wo(e,s)}jo(t,e,s){e.Va()||(t.jo(e,s),this.pl(),this.sc(this.vc(t,2)))}$o(t,e){e.Va()||(t.$o(e),this.sc(this.vc(t,2)))}Uo(t,e){t.Uo(e),this.sc(this.vc(t,2))}mc(t){this.bo.eo(t)}bc(t,e){const s=this.yt();if(s.Ni()||e===0)return;const n=s.$i();t=Math.max(1,Math.min(t,n)),s.fu(t,e),this.hu()}gc(t){this.wc(0),this.Mc(t),this.Sc()}xc(t){this.bo.ro(t),this.hu()}yc(){this.bo.ho(),this.Ch()}wc(t){this.bo.lo(t)}Mc(t){this.bo.ao(t),this.hu()}Sc(){this.bo.oo(),this.Ch()}wt(){return this.Hu}kc(t,e,s,n){this.bt.gn(t,e);let r=NaN,o=this.bo.eu(t);const h=this.bo.zs();h!==null&&(o=Math.min(Math.max(h.Ms(),o),h.ci()));const a=n.fn(),l=a.Tt();l!==null&&(r=a.pn(e,l)),r=this.Gu.Fl(r,o,n),this.bt.xn(o,r,n),this.Cl(),this.Yu.m(this.bt.xt(),{x:t,y:e},s)}Cc(){this.cc().kn(),this.Cl(),this.Yu.m(null,null,null)}pl(){const t=this.bt.Ht();if(t!==null){const e=this.bt.Mn(),s=this.bt.Sn();this.kc(e,s,null,t)}this.bt.Dn()}Tc(t,e,s){const n=this.bo.vn(0);e!==void 0&&s!==void 0&&this.bo.gt(e,s);const r=this.bo.vn(0),o=this.bo.su(),h=this.bo.zs();if(h!==null&&n!==null&&r!==null){const a=h.Ir(o),l=n.__>r.__,u=t!==null&&t>o&&!l,c=a&&this.bo.F().shiftVisibleRangeOnNewBar;if(u&&!c){const f=t-o;this.bo.Gn(this.bo.au()-f)}}this.bo.du(t)}bl(t){t!==null&&t.Yo()}Ke(t){const e=this.$u.find(s=>s.Ga().includes(t));return e===void 0?null:e}hu(){this.Ju.Dn(),this.$u.forEach(t=>t.Yo()),this.pl()}M(){this.$u.forEach(t=>t.M()),this.$u.length=0,this.un.localization.priceFormatter=void 0,this.un.localization.timeFormatter=void 0}Pc(){return this.Ku}tr(){return this.Ku.F()}To(){return this.qu}Rc(t,e){const s=this.$u[0],n=this.Dc(e,t,s);return this.Hu.push(n),this.Hu.length===1?this.dl():this.Ch(),n}Bc(t){const e=this.Ke(t),s=this.Hu.indexOf(t);hi(s!==-1,"Series not found"),this.Hu.splice(s,1),D(e).io(t),t.M&&t.M()}cl(t,e){const s=D(this.Ke(t));s.io(t);const n=this.oc(e);if(n===null){const r=t.Zi();s.Ja(t,e,r)}else{const r=n.Ht===s?t.Zi():void 0;n.Ht.Ja(t,e,r)}}ku(){const t=Ut.ns();t.$n(),this.sc(t)}Oc(t){const e=Ut.ns();e.qn(t),this.sc(e)}Zn(){const t=Ut.ns();t.Zn(),this.sc(t)}Kn(t){const e=Ut.ns();e.Kn(t),this.sc(e)}Gn(t){const e=Ut.ns();e.Gn(t),this.sc(e)}Yn(t){const e=Ut.ns();e.Yn(t),this.sc(e)}Hn(){const t=Ut.ns();t.Hn(),this.sc(t)}Ac(){return this.un.rightPriceScale.visible?"right":"left"}Lc(){return this.nc}U(){return this.tc}Lt(t){const e=this.nc,s=this.tc;if(e===s)return e;if(t=Math.max(0,Math.min(100,Math.round(100*t))),this.Xu===null||this.Xu.bs!==s||this.Xu.gs!==e)this.Xu={bs:s,gs:e,Ic:new Map};else{const r=this.Xu.Ic.get(t);if(r!==void 0)return r}const n=function(r,o,h){const[a,l,u,c]=vn(r),[f,m,d,g]=vn(o),T=[ge(a+h*(f-a)),ge(l+h*(m-l)),ge(u+h*(d-u)),vl(c+h*(g-c))];return`rgba(${T[0]}, ${T[1]}, ${T[2]}, ${T[3]})`}(s,e,t/100);return this.Xu.Ic.set(t,n),n}vc(t,e){const s=new Ut(e);if(t!==null){const n=this.$u.indexOf(t);s.zn(n,{Nn:e})}return s}ec(t,e){return e===void 0&&(e=2),this.vc(this.Ke(t),e)}sc(t){this.Zu&&this.Zu(t),this.$u.forEach(e=>e.Zo().Th().gt())}Dc(t,e,s){const n=new Ir(this,t,e),r=t.priceScaleId!==void 0?t.priceScaleId:this.Ac();return s.Ja(n,r),En(r)||n.kh(t),n}ic(t){const e=this.un.layout;return e.background.type==="gradient"?t===0?e.background.topColor:e.background.bottomColor:e.background.color}}function Ur(i){return!ke(i)&&!Dr(i)}function Nl(i){return ke(i)}(function(i){i[i.Disabled=0]="Disabled",i[i.Continuous=1]="Continuous",i[i.OnDataUpdate=2]="OnDataUpdate"})(Qo||(Qo={})),function(i){i[i.LastBar=0]="LastBar",i[i.LastVisible=1]="LastVisible"}(Zo||(Zo={})),function(i){i.Solid="solid",i.VerticalGradient="gradient"}(gr||(gr={}));const Pi=typeof window<"u";function $o(){return!!Pi&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Yn(){return!!Pi&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function pr(i){return i+i%2}function Kn(i,t){return i.Ec-t.Ec}function Jn(i,t,e){const s=(i.Ec-t.Ec)/(i._t-t._t);return Math.sign(s)*Math.min(Math.abs(s),e)}class Of{constructor(t,e,s,n){this.Vc=null,this.zc=null,this.Nc=null,this.Fc=null,this.Wc=null,this.jc=0,this.$c=0,this.Hc=t,this.Uc=e,this.qc=s,this.es=n}Yc(t,e){if(this.Vc!==null){if(this.Vc._t===e)return void(this.Vc.Ec=t);if(Math.abs(this.Vc.Ec-t)<this.es)return}this.Fc=this.Nc,this.Nc=this.zc,this.zc=this.Vc,this.Vc={_t:e,Ec:t}}pr(t,e){if(this.Vc===null||this.zc===null||e-this.Vc._t>50)return;let s=0;const n=Jn(this.Vc,this.zc,this.Uc),r=Kn(this.Vc,this.zc),o=[n],h=[r];if(s+=r,this.Nc!==null){const l=Jn(this.zc,this.Nc,this.Uc);if(Math.sign(l)===Math.sign(n)){const u=Kn(this.zc,this.Nc);if(o.push(l),h.push(u),s+=u,this.Fc!==null){const c=Jn(this.Nc,this.Fc,this.Uc);if(Math.sign(c)===Math.sign(n)){const f=Kn(this.Nc,this.Fc);o.push(c),h.push(f),s+=f}}}}let a=0;for(let l=0;l<o.length;++l)a+=h[l]/s*o[l];Math.abs(a)<this.Hc||(this.Wc={Ec:t,_t:e},this.$c=a,this.jc=function(l,u){const c=Math.log(u);return Math.log(1*c/-l)/c}(Math.abs(a),this.qc))}wu(t){const e=D(this.Wc),s=t-e._t;return e.Ec+this.$c*(Math.pow(this.qc,s)-1)/Math.log(this.qc)}gu(t){return this.Wc===null||this.Xc(t)===this.jc}Xc(t){const e=t-D(this.Wc)._t;return Math.min(e,this.jc)}}function oi(i,t){const e=D(i.ownerDocument).createElement("canvas");i.appendChild(e);const s=rc(e,{type:"device-pixel-content-box",options:{allowResizeObserver:!1},transform:(n,r)=>({width:Math.max(n.width,r.width),height:Math.max(n.height,r.height)})});return s.resizeCanvasElement(t),s}function Df(i){Pi&&window.chrome!==void 0&&i.addEventListener("mousedown",t=>{if(t.button===1)return t.preventDefault(),!1})}class Hr{constructor(t,e,s){this.Zc=0,this.Kc=null,this.Gc={st:Number.NEGATIVE_INFINITY,et:Number.POSITIVE_INFINITY},this.Jc=0,this.Qc=null,this.td={st:Number.NEGATIVE_INFINITY,et:Number.POSITIVE_INFINITY},this.nd=null,this.sd=!1,this.ed=null,this.rd=null,this.hd=!1,this.ld=!1,this.ad=!1,this.od=null,this._d=null,this.ud=null,this.dd=null,this.fd=null,this.pd=null,this.vd=null,this.md=0,this.bd=!1,this.gd=!1,this.wd=!1,this.Md=0,this.Sd=null,this.xd=!Yn(),this.yd=n=>{this.kd(n)},this.Cd=n=>{if(this.Td(n)){const r=this.Pd(n);if(++this.Jc,this.Qc&&this.Jc>1){const{Rd:o}=this.Dd(Ee(n),this.td);o<30&&!this.ad&&this.Bd(r,this.Ad.Od),this.Ld()}}else{const r=this.Pd(n);if(++this.Zc,this.Kc&&this.Zc>1){const{Rd:o}=this.Dd(Ee(n),this.Gc);o<5&&!this.ld&&this.Id(r,this.Ad.Ed),this.Vd()}}},this.zd=t,this.Ad=e,this.un=s,this.Nd()}M(){this.od!==null&&(this.od(),this.od=null),this._d!==null&&(this._d(),this._d=null),this.dd!==null&&(this.dd(),this.dd=null),this.fd!==null&&(this.fd(),this.fd=null),this.pd!==null&&(this.pd(),this.pd=null),this.ud!==null&&(this.ud(),this.ud=null),this.Fd(),this.Vd()}Wd(t){this.dd&&this.dd();const e=this.jd.bind(this);if(this.dd=()=>{this.zd.removeEventListener("mousemove",e)},this.zd.addEventListener("mousemove",e),this.Td(t))return;const s=this.Pd(t);this.Id(s,this.Ad.$d),this.xd=!0}Vd(){this.Kc!==null&&clearTimeout(this.Kc),this.Zc=0,this.Kc=null,this.Gc={st:Number.NEGATIVE_INFINITY,et:Number.POSITIVE_INFINITY}}Ld(){this.Qc!==null&&clearTimeout(this.Qc),this.Jc=0,this.Qc=null,this.td={st:Number.NEGATIVE_INFINITY,et:Number.POSITIVE_INFINITY}}jd(t){if(this.wd||this.rd!==null||this.Td(t))return;const e=this.Pd(t);this.Id(e,this.Ad.Hd),this.xd=!0}Ud(t){const e=Xn(t.changedTouches,D(this.Sd));if(e===null||(this.Md=js(t),this.vd!==null)||this.gd)return;this.bd=!0;const s=this.Dd(Ee(e),D(this.rd)),{qd:n,Yd:r,Rd:o}=s;if(this.hd||!(o<5)){if(!this.hd){const h=.5*n,a=r>=h&&!this.un.Xd(),l=h>r&&!this.un.Zd();a||l||(this.gd=!0),this.hd=!0,this.ad=!0,this.Fd(),this.Ld()}if(!this.gd){const h=this.Pd(t,e);this.Bd(h,this.Ad.Kd),gi(t)}}}Gd(t){if(t.button!==0)return;const e=this.Dd(Ee(t),D(this.ed)),{Rd:s}=e;if(s>=5&&(this.ld=!0,this.Vd()),this.ld){const n=this.Pd(t);this.Id(n,this.Ad.Jd)}}Dd(t,e){const s=Math.abs(e.st-t.st),n=Math.abs(e.et-t.et);return{qd:s,Yd:n,Rd:s+n}}Qd(t){let e=Xn(t.changedTouches,D(this.Sd));if(e===null&&t.touches.length===0&&(e=t.changedTouches[0]),e===null)return;this.Sd=null,this.Md=js(t),this.Fd(),this.rd=null,this.pd&&(this.pd(),this.pd=null);const s=this.Pd(t,e);if(this.Bd(s,this.Ad.tf),++this.Jc,this.Qc&&this.Jc>1){const{Rd:n}=this.Dd(Ee(e),this.td);n<30&&!this.ad&&this.Bd(s,this.Ad.Od),this.Ld()}else this.ad||(this.Bd(s,this.Ad.if),this.Ad.if&&gi(t));this.Jc===0&&gi(t),t.touches.length===0&&this.sd&&(this.sd=!1,gi(t))}kd(t){if(t.button!==0)return;const e=this.Pd(t);if(this.ed=null,this.wd=!1,this.fd&&(this.fd(),this.fd=null),$o()&&this.zd.ownerDocument.documentElement.removeEventListener("mouseleave",this.yd),!this.Td(t))if(this.Id(e,this.Ad.nf),++this.Zc,this.Kc&&this.Zc>1){const{Rd:s}=this.Dd(Ee(t),this.Gc);s<5&&!this.ld&&this.Id(e,this.Ad.Ed),this.Vd()}else this.ld||this.Id(e,this.Ad.sf)}Fd(){this.nd!==null&&(clearTimeout(this.nd),this.nd=null)}ef(t){if(this.Sd!==null)return;const e=t.changedTouches[0];this.Sd=e.identifier,this.Md=js(t);const s=this.zd.ownerDocument.documentElement;this.ad=!1,this.hd=!1,this.gd=!1,this.rd=Ee(e),this.pd&&(this.pd(),this.pd=null);{const r=this.Ud.bind(this),o=this.Qd.bind(this);this.pd=()=>{s.removeEventListener("touchmove",r),s.removeEventListener("touchend",o)},s.addEventListener("touchmove",r,{passive:!1}),s.addEventListener("touchend",o,{passive:!1}),this.Fd(),this.nd=setTimeout(this.rf.bind(this,t),240)}const n=this.Pd(t,e);this.Bd(n,this.Ad.hf),this.Qc||(this.Jc=0,this.Qc=setTimeout(this.Ld.bind(this),500),this.td=Ee(e))}lf(t){if(t.button!==0)return;const e=this.zd.ownerDocument.documentElement;$o()&&e.addEventListener("mouseleave",this.yd),this.ld=!1,this.ed=Ee(t),this.fd&&(this.fd(),this.fd=null);{const n=this.Gd.bind(this),r=this.kd.bind(this);this.fd=()=>{e.removeEventListener("mousemove",n),e.removeEventListener("mouseup",r)},e.addEventListener("mousemove",n),e.addEventListener("mouseup",r)}if(this.wd=!0,this.Td(t))return;const s=this.Pd(t);this.Id(s,this.Ad.af),this.Kc||(this.Zc=0,this.Kc=setTimeout(this.Vd.bind(this),500),this.Gc=Ee(t))}Nd(){this.zd.addEventListener("mouseenter",this.Wd.bind(this)),this.zd.addEventListener("touchcancel",this.Fd.bind(this));{const t=this.zd.ownerDocument,e=s=>{this.Ad._f&&(s.composed&&this.zd.contains(s.composedPath()[0])||s.target&&this.zd.contains(s.target)||this.Ad._f())};this._d=()=>{t.removeEventListener("touchstart",e)},this.od=()=>{t.removeEventListener("mousedown",e)},t.addEventListener("mousedown",e),t.addEventListener("touchstart",e,{passive:!0})}Yn()&&(this.ud=()=>{this.zd.removeEventListener("dblclick",this.Cd)},this.zd.addEventListener("dblclick",this.Cd)),this.zd.addEventListener("mouseleave",this.uf.bind(this)),this.zd.addEventListener("touchstart",this.ef.bind(this),{passive:!0}),Df(this.zd),this.zd.addEventListener("mousedown",this.lf.bind(this)),this.cf(),this.zd.addEventListener("touchmove",()=>{},{passive:!1})}cf(){this.Ad.df===void 0&&this.Ad.ff===void 0&&this.Ad.pf===void 0||(this.zd.addEventListener("touchstart",t=>this.vf(t.touches),{passive:!0}),this.zd.addEventListener("touchmove",t=>{if(t.touches.length===2&&this.vd!==null&&this.Ad.ff!==void 0){const e=th(t.touches[0],t.touches[1])/this.md;this.Ad.ff(this.vd,e),gi(t)}},{passive:!1}),this.zd.addEventListener("touchend",t=>{this.vf(t.touches)}))}vf(t){t.length===1&&(this.bd=!1),t.length!==2||this.bd||this.sd?this.mf():this.bf(t)}bf(t){const e=this.zd.getBoundingClientRect()||{left:0,top:0};this.vd={st:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,et:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this.md=th(t[0],t[1]),this.Ad.df!==void 0&&this.Ad.df(),this.Fd()}mf(){this.vd!==null&&(this.vd=null,this.Ad.pf!==void 0&&this.Ad.pf())}uf(t){if(this.dd&&this.dd(),this.Td(t)||!this.xd)return;const e=this.Pd(t);this.Id(e,this.Ad.gf),this.xd=!Yn()}rf(t){const e=Xn(t.touches,D(this.Sd));if(e===null)return;const s=this.Pd(t,e);this.Bd(s,this.Ad.wf),this.ad=!0,this.sd=!0}Td(t){return t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents!==void 0?t.sourceCapabilities.firesTouchEvents:js(t)<this.Md+500}Bd(t,e){e&&e.call(this.Ad,t)}Id(t,e){e&&e.call(this.Ad,t)}Pd(t,e){const s=e||t,n=this.zd.getBoundingClientRect()||{left:0,top:0};return{clientX:s.clientX,clientY:s.clientY,pageX:s.pageX,pageY:s.pageY,screenX:s.screenX,screenY:s.screenY,localX:s.clientX-n.left,localY:s.clientY-n.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,Mf:!t.type.startsWith("mouse")&&t.type!=="contextmenu"&&t.type!=="click",Sf:t.type,xf:s.target,yf:t.view,kf:()=>{t.type!=="touchstart"&&gi(t)}}}}function th(i,t){const e=i.clientX-t.clientX,s=i.clientY-t.clientY;return Math.sqrt(e*e+s*s)}function gi(i){i.cancelable&&i.preventDefault()}function Ee(i){return{st:i.pageX,et:i.pageY}}function js(i){return i.timeStamp||performance.now()}function Xn(i,t){for(let e=0;e<i.length;++e)if(i[e].identifier===t)return i[e];return null}class eh{constructor(t,e,s,n){this.Vi=null,this.Cf=null,this.Tf=!1,this.Pf=new fs(200),this.Vr=null,this.Rf=0,this.Df=!1,this.Bf=()=>{this.Df||this.tn.Of().Ut().Ch()},this.Af=()=>{this.Df||this.tn.Of().Ut().Ch()},this.tn=t,this.un=e,this.Da=e.layout,this.Ku=s,this.Lf=n==="left",this.If=document.createElement("div"),this.If.style.height="100%",this.If.style.overflow="hidden",this.If.style.width="25px",this.If.style.left="0",this.If.style.position="relative",this.Ef=oi(this.If,yt({width:16,height:16})),this.Ef.subscribeSuggestedBitmapSizeChanged(this.Bf);const r=this.Ef.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Vf=oi(this.If,yt({width:16,height:16})),this.Vf.subscribeSuggestedBitmapSizeChanged(this.Af);const o=this.Vf.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const h={af:this.zf.bind(this),hf:this.zf.bind(this),Jd:this.Nf.bind(this),Kd:this.Nf.bind(this),_f:this.Ff.bind(this),nf:this.Wf.bind(this),tf:this.Wf.bind(this),Ed:this.jf.bind(this),Od:this.jf.bind(this),$d:this.$f.bind(this),gf:this.Hf.bind(this)};this.Uf=new Hr(this.Vf.canvasElement,h,{Xd:()=>!1,Zd:()=>!0})}M(){this.Uf.M(),this.Vf.unsubscribeSuggestedBitmapSizeChanged(this.Af),this.Vf.dispose(),this.Ef.unsubscribeSuggestedBitmapSizeChanged(this.Bf),this.Ef.dispose(),this.Vi!==null&&this.Vi.so().v(this),this.Vi=null}qf(){return this.If}T(){return this.Da.fontSize}Yf(){const t=this.Ku.F();return this.Vr!==t.P&&(this.Pf.Fe(),this.Vr=t.P),t}Xf(){if(this.Vi===null)return 0;let t=0;const e=this.Yf(),s=D(this.Ef.canvasElement.getContext("2d"));s.save();const n=this.Vi.Gl();s.font=this.Zf(),n.length>0&&(t=Math.max(this.Pf.Si(s,n[0]._a),this.Pf.Si(s,n[n.length-1]._a)));const r=this.Kf();for(let a=r.length;a--;){const l=this.Pf.Si(s,r[a].Gt());l>t&&(t=l)}const o=this.Vi.Tt();if(o!==null&&this.Cf!==null){const a=this.Vi.pn(1,o),l=this.Vi.pn(this.Cf.height-2,o);t=Math.max(t,this.Pf.Si(s,this.Vi.Fi(Math.floor(Math.min(a,l))+.11111111111111,o)),this.Pf.Si(s,this.Vi.Fi(Math.ceil(Math.max(a,l))-.11111111111111,o)))}s.restore();const h=t||34;return pr(Math.ceil(e.k+e.C+e.A+e.L+5+h))}Gf(t){this.Cf!==null&&si(this.Cf,t)||(this.Cf=t,this.Df=!0,this.Ef.resizeCanvasElement(t),this.Vf.resizeCanvasElement(t),this.Df=!1,this.If.style.width=`${t.width}px`,this.If.style.height=`${t.height}px`)}Jf(){return D(this.Cf).width}Gi(t){this.Vi!==t&&(this.Vi!==null&&this.Vi.so().v(this),this.Vi=t,t.so().l(this.Ma.bind(this),this))}Bt(){return this.Vi}Fe(){const t=this.tn.Qf();this.tn.Of().Ut().Uo(t,D(this.Bt()))}tp(t){if(this.Cf===null)return;if(t!==1){this.ip(),this.Ef.applySuggestedBitmapSize();const s=ni(this.Ef);s!==null&&(s.useBitmapCoordinateSpace(n=>{this.np(n),this.ye(n)}),this.sp(s),this.ep(s))}this.Vf.applySuggestedBitmapSize();const e=ni(this.Vf);e!==null&&(e.useBitmapCoordinateSpace(({context:s,bitmapSize:n})=>{s.clearRect(0,0,n.width,n.height)}),this.rp(e))}hp(){return this.Ef.bitmapSize}lp(t,e,s){const n=this.hp();n.width>0&&n.height>0&&t.drawImage(this.Ef.canvasElement,e,s)}gt(){var t;(t=this.Vi)===null||t===void 0||t.Gl()}zf(t){if(this.Vi===null||this.Vi.Ni()||!this.un.handleScale.axisPressedMouseMove.price)return;const e=this.tn.Of().Ut(),s=this.tn.Qf();this.Tf=!0,e.zo(s,this.Vi,t.localY)}Nf(t){if(this.Vi===null||!this.un.handleScale.axisPressedMouseMove.price)return;const e=this.tn.Of().Ut(),s=this.tn.Qf(),n=this.Vi;e.No(s,n,t.localY)}Ff(){if(this.Vi===null||!this.un.handleScale.axisPressedMouseMove.price)return;const t=this.tn.Of().Ut(),e=this.tn.Qf(),s=this.Vi;this.Tf&&(this.Tf=!1,t.Fo(e,s))}Wf(t){if(this.Vi===null||!this.un.handleScale.axisPressedMouseMove.price)return;const e=this.tn.Of().Ut(),s=this.tn.Qf();this.Tf=!1,e.Fo(s,this.Vi)}jf(t){this.un.handleScale.axisDoubleClickReset.price&&this.Fe()}$f(t){this.Vi!==null&&(!this.tn.Of().Ut().F().handleScale.axisPressedMouseMove.price||this.Vi.th()||this.Vi.za()||this.ap(1))}Hf(t){this.ap(0)}Kf(){const t=[],e=this.Vi===null?void 0:this.Vi;return(s=>{for(let n=0;n<s.length;++n){const r=s[n].Pn(this.tn.Qf(),e);for(let o=0;o<r.length;o++)t.push(r[o])}})(this.tn.Qf().Ga()),t}np({context:t,bitmapSize:e}){const{width:s,height:n}=e,r=this.tn.Qf().Ut(),o=r.U(),h=r.Lc();o===h?Cn(t,0,0,s,n,o):bl(t,0,0,s,n,o,h)}ye({context:t,bitmapSize:e,horizontalPixelRatio:s}){if(this.Cf===null||this.Vi===null||!this.Vi.F().borderVisible)return;t.fillStyle=this.Vi.F().borderColor;const n=Math.max(1,Math.floor(this.Yf().k*s));let r;r=this.Lf?e.width-n:0,t.fillRect(r,0,n,e.height)}sp(t){if(this.Cf===null||this.Vi===null)return;const e=this.Vi.Gl(),s=this.Vi.F(),n=this.Yf(),r=this.Lf?this.Cf.width-n.C:0;s.borderVisible&&s.ticksVisible&&t.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:h,verticalPixelRatio:a})=>{o.fillStyle=s.borderColor;const l=Math.max(1,Math.floor(a)),u=Math.floor(.5*a),c=Math.round(n.C*h);o.beginPath();for(const f of e)o.rect(Math.floor(r*h),Math.round(f.ql*a)-u,c,l);o.fill()}),t.useMediaCoordinateSpace(({context:o})=>{var h;o.font=this.Zf(),o.fillStyle=(h=s.textColor)!==null&&h!==void 0?h:this.Da.textColor,o.textAlign=this.Lf?"right":"left",o.textBaseline="middle";const a=this.Lf?Math.round(r-n.A):Math.round(r+n.C+n.A),l=e.map(u=>this.Pf.Mi(o,u._a));for(let u=e.length;u--;){const c=e[u];o.fillText(c._a,a,c.ql+l[u])}})}ip(){if(this.Cf===null||this.Vi===null)return;let t=this.Cf.height/2;const e=[],s=this.Vi.Ga().slice(),n=this.tn.Qf(),r=this.Yf();this.Vi===n.Je()&&this.tn.Qf().Ga().forEach(a=>{n.Ge(a)&&s.push(a)});const o=this.Vi.Wl()[0],h=this.Vi;s.forEach(a=>{const l=a.Pn(n,h);l.forEach(u=>{u.Oi(null),u.Ai()&&e.push(u)}),o===a&&l.length>0&&(t=l[0].yi())}),e.forEach(a=>a.Oi(a.yi())),this.Vi.F().alignLabels&&this.op(e,r,t)}op(t,e,s){if(this.Cf===null)return;const n=t.filter(o=>o.yi()<=s),r=t.filter(o=>o.yi()>s);n.sort((o,h)=>h.yi()-o.yi()),n.length&&r.length&&r.push(n[0]),r.sort((o,h)=>o.yi()-h.yi());for(const o of t){const h=Math.floor(o.It(e)/2),a=o.yi();a>-h&&a<h&&o.Oi(h),a>this.Cf.height-h&&a<this.Cf.height+h&&o.Oi(this.Cf.height-h)}for(let o=1;o<n.length;o++){const h=n[o],a=n[o-1],l=a.It(e,!1),u=h.yi(),c=a.Bi();u>c-l&&h.Oi(c-l)}for(let o=1;o<r.length;o++){const h=r[o],a=r[o-1],l=a.It(e,!0),u=h.yi(),c=a.Bi();u<c+l&&h.Oi(c+l)}}ep(t){if(this.Cf===null)return;const e=this.Kf(),s=this.Yf(),n=this.Lf?"right":"left";e.forEach(r=>{r.Li()&&r.Mt(D(this.Vi)).X(t,s,this.Pf,n)})}rp(t){if(this.Cf===null||this.Vi===null)return;const e=this.tn.Of().Ut(),s=[],n=this.tn.Qf(),r=e.cc().Pn(n,this.Vi);r.length&&s.push(r);const o=this.Yf(),h=this.Lf?"right":"left";s.forEach(a=>{a.forEach(l=>{l.Mt(D(this.Vi)).X(t,o,this.Pf,h)})})}ap(t){this.If.style.cursor=t===1?"ns-resize":"default"}Ma(){const t=this.Xf();this.Rf<t&&this.tn.Of().Ut().dl(),this.Rf=t}Zf(){return ki(this.Da.fontSize,this.Da.fontFamily)}}function ih(i,t,e,s){i.K&&i.K(t,e,s)}function Qn(i,t,e,s){i.X(t,e,s)}function Ws(i,t){return i.Tn(t)}function Nf(i,t){return i.Ji(t)}function Lf(i,t){return i.kl!==void 0?i.kl(t):[]}class jr{constructor(t,e){this.Cf=yt({width:0,height:0}),this._p=null,this.up=null,this.cp=null,this.dp=!1,this.fp=new Ht,this.pp=0,this.vp=!1,this.mp=null,this.bp=!1,this.gp=null,this.wp=null,this.Df=!1,this.Bf=()=>{this.Df||this.Mp===null||this.Hi().Ch()},this.Af=()=>{this.Df||this.Mp===null||this.Hi().Ch()},this.Sp=t,this.Mp=e,this.Mp.Xo().l(this.xp.bind(this),this,!0),this.yp=document.createElement("td"),this.yp.style.padding="0",this.yp.style.position="relative";const s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.position="relative",s.style.overflow="hidden",this.kp=document.createElement("td"),this.kp.style.padding="0",this.Cp=document.createElement("td"),this.Cp.style.padding="0",this.yp.appendChild(s),this.Ef=oi(s,yt({width:16,height:16})),this.Ef.subscribeSuggestedBitmapSizeChanged(this.Bf);const n=this.Ef.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Vf=oi(s,yt({width:16,height:16})),this.Vf.subscribeSuggestedBitmapSizeChanged(this.Af);const r=this.Vf.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.Tp=document.createElement("tr"),this.Tp.appendChild(this.kp),this.Tp.appendChild(this.yp),this.Tp.appendChild(this.Cp),this.Pp(),this.Uf=new Hr(this.Vf.canvasElement,this,{Xd:()=>this.mp===null&&!this.Sp.F().handleScroll.vertTouchDrag,Zd:()=>this.mp===null&&!this.Sp.F().handleScroll.horzTouchDrag})}M(){this._p!==null&&this._p.M(),this.up!==null&&this.up.M(),this.Vf.unsubscribeSuggestedBitmapSizeChanged(this.Af),this.Vf.dispose(),this.Ef.unsubscribeSuggestedBitmapSizeChanged(this.Bf),this.Ef.dispose(),this.Mp!==null&&this.Mp.Xo().v(this),this.Uf.M()}Qf(){return D(this.Mp)}Rp(t){this.Mp!==null&&this.Mp.Xo().v(this),this.Mp=t,this.Mp!==null&&this.Mp.Xo().l(jr.prototype.xp.bind(this),this,!0),this.Pp()}Of(){return this.Sp}qf(){return this.Tp}Pp(){if(this.Mp!==null&&(this.Dp(),this.Hi().wt().length!==0)){if(this._p!==null){const t=this.Mp.Eo();this._p.Gi(D(t))}if(this.up!==null){const t=this.Mp.Vo();this.up.Gi(D(t))}}}Bp(){this._p!==null&&this._p.gt(),this.up!==null&&this.up.gt()}Po(){return this.Mp!==null?this.Mp.Po():0}Ro(t){this.Mp&&this.Mp.Ro(t)}$d(t){if(!this.Mp)return;this.Op();const e=t.localX,s=t.localY;this.Ap(e,s,t)}af(t){this.Op(),this.Lp(),this.Ap(t.localX,t.localY,t)}Hd(t){if(!this.Mp)return;this.Op();const e=t.localX,s=t.localY;this.Ap(e,s,t);const n=this.ir(e,s);this.Hi().hc(n&&{lc:n.lc,Ip:n.Ip})}sf(t){this.Mp!==null&&(this.Op(),this.Ep(t))}Jd(t){this.Op(),this.Vp(t),this.Ap(t.localX,t.localY,t)}nf(t){this.Mp!==null&&(this.Op(),this.vp=!1,this.zp(t))}if(t){this.Mp!==null&&this.Ep(t)}wf(t){if(this.vp=!0,this.mp===null){const e={x:t.localX,y:t.localY};this.Np(e,e,t)}}gf(t){this.Mp!==null&&(this.Op(),this.Mp.Ut().hc(null),this.Fp())}Wp(){return this.fp}df(){this.pp=1,this.Hi().Hn()}ff(t,e){if(!this.Sp.F().handleScale.pinch)return;const s=5*(e-this.pp);this.pp=e,this.Hi().bc(t.st,s)}hf(t){if(this.vp=!1,this.bp=this.mp!==null,this.Lp(),this.mp!==null){const e=this.Hi().cc();this.gp={x:e.Xt(),y:e.Zt()},this.mp={x:t.localX,y:t.localY}}}Kd(t){if(this.Mp===null)return;const e=t.localX,s=t.localY;if(this.mp===null)this.Vp(t);else{this.bp=!1;const n=D(this.gp),r=n.x+(e-this.mp.x),o=n.y+(s-this.mp.y);this.Ap(r,o,t)}}tf(t){this.Of().F().trackingMode.exitMode===0&&(this.bp=!0),this.jp(),this.zp(t)}ir(t,e){const s=this.Mp;if(s===null)return null;const n=s.Ga();for(const r of n){const o=this.$p(r.Tn(s),t,e);if(o!==null)return{lc:r,yf:o.yf,Ip:o.Ip}}return null}Hp(t,e){D(e==="left"?this._p:this.up).Gf(yt({width:t,height:this.Cf.height}))}Up(){return this.Cf}Gf(t){si(this.Cf,t)||(this.Cf=t,this.Df=!0,this.Ef.resizeCanvasElement(t),this.Vf.resizeCanvasElement(t),this.Df=!1,this.yp.style.width=t.width+"px",this.yp.style.height=t.height+"px")}qp(){const t=D(this.Mp);t.Io(t.Eo()),t.Io(t.Vo());for(const e of t.Wl())if(t.Ge(e)){const s=e.Bt();s!==null&&t.Io(s),e.Dn()}}hp(){return this.Ef.bitmapSize}lp(t,e,s){const n=this.hp();n.width>0&&n.height>0&&t.drawImage(this.Ef.canvasElement,e,s)}tp(t){if(t===0||this.Mp===null)return;if(t>1&&this.qp(),this._p!==null&&this._p.tp(t),this.up!==null&&this.up.tp(t),t!==1){this.Ef.applySuggestedBitmapSize();const s=ni(this.Ef);s!==null&&(s.useBitmapCoordinateSpace(n=>{this.np(n)}),this.Mp&&(this.Yp(s),this.Xp(s),this.Zp(s,Ws),this.Zp(s,Nf)))}this.Vf.applySuggestedBitmapSize();const e=ni(this.Vf);e!==null&&(e.useBitmapCoordinateSpace(({context:s,bitmapSize:n})=>{s.clearRect(0,0,n.width,n.height)}),this.Zp(e,Lf),this.Kp(e))}Gp(){return this._p}Jp(){return this.up}xp(){this.Mp!==null&&this.Mp.Xo().v(this),this.Mp=null}Ep(t){const e=t.localX,s=t.localY;this.fp.g()&&this.fp.m(this.Hi().yt().eu(e),{x:e,y:s},t)}np({context:t,bitmapSize:e}){const{width:s,height:n}=e,r=this.Hi(),o=r.U(),h=r.Lc();o===h?Cn(t,0,0,s,n,h):bl(t,0,0,s,n,o,h)}Yp(t){const e=D(this.Mp).Zo().Th().Mt();e!==null&&e.X(t,!1)}Xp(t){const e=this.Hi().uc();this.Qp(t,Ws,ih,e),this.Qp(t,Ws,Qn,e)}Kp(t){this.Qp(t,Ws,Qn,this.Hi().cc())}Zp(t,e){const s=D(this.Mp).Ga();for(const n of s)this.Qp(t,e,ih,n);for(const n of s)this.Qp(t,e,Qn,n)}Qp(t,e,s,n){const r=D(this.Mp),o=e(n,r),h=r.Ut().rc(),a=h!==null&&h.lc===n,l=h!==null&&a&&h.Ip!==void 0?h.Ip.sr:void 0;for(const u of o){const c=u.Mt();c!==null&&s(c,t,a,l)}}$p(t,e,s){for(const n of t){const r=n.Mt();if(r!==null&&r.ir){const o=r.ir(e,s);if(o!==null)return{yf:n,Ip:o}}}return null}Dp(){if(this.Mp===null)return;const t=this.Sp,e=this.Mp.Eo().F().visible,s=this.Mp.Vo().F().visible;e||this._p===null||(this.kp.removeChild(this._p.qf()),this._p.M(),this._p=null),s||this.up===null||(this.Cp.removeChild(this.up.qf()),this.up.M(),this.up=null);const n=t.Ut().Pc();e&&this._p===null&&(this._p=new eh(this,t.F(),n,"left"),this.kp.appendChild(this._p.qf())),s&&this.up===null&&(this.up=new eh(this,t.F(),n,"right"),this.Cp.appendChild(this.up.qf()))}tv(t){return t.Mf&&this.vp||this.mp!==null}iv(t){return Math.max(0,Math.min(t,this.Cf.width-1))}nv(t){return Math.max(0,Math.min(t,this.Cf.height-1))}Ap(t,e,s){this.Hi().kc(this.iv(t),this.nv(e),s,D(this.Mp))}Fp(){this.Hi().Cc()}jp(){this.bp&&(this.mp=null,this.Fp())}Np(t,e,s){this.mp=t,this.bp=!1,this.Ap(e.x,e.y,s);const n=this.Hi().cc();this.gp={x:n.Xt(),y:n.Zt()}}Hi(){return this.Sp.Ut()}zp(t){if(!this.dp)return;const e=this.Hi(),s=this.Qf();if(e.$o(s,s.fn()),this.cp=null,this.dp=!1,e.Sc(),this.wp!==null){const n=performance.now(),r=e.yt();this.wp.pr(r.au(),n),this.wp.gu(n)||e.Yn(this.wp)}}Op(){this.mp=null}Lp(){if(this.Mp){if(this.Hi().Hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)D(document.activeElement).blur();else{const t=document.getSelection();t!==null&&t.removeAllRanges()}!this.Mp.fn().Ni()&&this.Hi().yt().Ni()}}Vp(t){if(this.Mp===null)return;const e=this.Hi(),s=e.yt();if(s.Ni())return;const n=this.Sp.F(),r=n.handleScroll,o=n.kineticScroll;if((!r.pressedMouseMove||t.Mf)&&(!r.horzTouchDrag&&!r.vertTouchDrag||!t.Mf))return;const h=this.Mp.fn(),a=performance.now();if(this.cp!==null||this.tv(t)||(this.cp={x:t.clientX,y:t.clientY,__:a,sv:t.localX,ev:t.localY}),this.cp!==null&&!this.dp&&(this.cp.x!==t.clientX||this.cp.y!==t.clientY)){if(t.Mf&&o.touch||!t.Mf&&o.mouse){const l=s.Ks();this.wp=new Of(.2/l,7/l,.997,15/l),this.wp.Yc(s.au(),this.cp.__)}else this.wp=null;h.Ni()||e.Wo(this.Mp,h,t.localY),e.wc(t.localX),this.dp=!0}this.dp&&(h.Ni()||e.jo(this.Mp,h,t.localY),e.Mc(t.localX),this.wp!==null&&this.wp.Yc(s.au(),a))}}class sh{constructor(t,e,s,n,r){this.vt=!0,this.Cf=yt({width:0,height:0}),this.Bf=()=>this.tp(3),this.Lf=t==="left",this.Ku=s.Pc,this.un=e,this.rv=n,this.hv=r,this.If=document.createElement("div"),this.If.style.width="25px",this.If.style.height="100%",this.If.style.overflow="hidden",this.Ef=oi(this.If,yt({width:16,height:16})),this.Ef.subscribeSuggestedBitmapSizeChanged(this.Bf)}M(){this.Ef.unsubscribeSuggestedBitmapSizeChanged(this.Bf),this.Ef.dispose()}qf(){return this.If}Up(){return this.Cf}Gf(t){si(this.Cf,t)||(this.Cf=t,this.Ef.resizeCanvasElement(t),this.If.style.width=`${t.width}px`,this.If.style.height=`${t.height}px`,this.vt=!0)}tp(t){if(t<3&&!this.vt||this.Cf.width===0||this.Cf.height===0)return;this.vt=!1,this.Ef.applySuggestedBitmapSize();const e=ni(this.Ef);e!==null&&e.useBitmapCoordinateSpace(s=>{this.np(s),this.ye(s)})}hp(){return this.Ef.bitmapSize}lp(t,e,s){const n=this.hp();n.width>0&&n.height>0&&t.drawImage(this.Ef.canvasElement,e,s)}ye({context:t,bitmapSize:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(!this.rv())return;t.fillStyle=this.un.timeScale.borderColor;const r=Math.floor(this.Ku.F().k*s),o=Math.floor(this.Ku.F().k*n),h=this.Lf?e.width-r:0;t.fillRect(h,0,r,o)}np({context:t,bitmapSize:e}){Cn(t,0,0,e.width,e.height,this.hv())}}function Ff(i,t){return i.g_>t.g_?i:t}class Af{constructor(t){this.lv=null,this.av=null,this.S=null,this.ov=!1,this.Cf=yt({width:0,height:0}),this._v=new Ht,this.Pf=new fs(5),this.Df=!1,this.Bf=()=>{this.Df||this.Sp.Ut().Ch()},this.Af=()=>{this.Df||this.Sp.Ut().Ch()},this.Sp=t,this.un=t.F().layout,this.uv=document.createElement("tr"),this.cv=document.createElement("td"),this.cv.style.padding="0",this.dv=document.createElement("td"),this.dv.style.padding="0",this.If=document.createElement("td"),this.If.style.height="25px",this.If.style.padding="0",this.fv=document.createElement("div"),this.fv.style.width="100%",this.fv.style.height="100%",this.fv.style.position="relative",this.fv.style.overflow="hidden",this.If.appendChild(this.fv),this.Ef=oi(this.fv,yt({width:16,height:16})),this.Ef.subscribeSuggestedBitmapSizeChanged(this.Bf);const e=this.Ef.canvasElement;e.style.position="absolute",e.style.zIndex="1",e.style.left="0",e.style.top="0",this.Vf=oi(this.fv,yt({width:16,height:16})),this.Vf.subscribeSuggestedBitmapSizeChanged(this.Af);const s=this.Vf.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.uv.appendChild(this.cv),this.uv.appendChild(this.If),this.uv.appendChild(this.dv),this.pv(),this.Sp.Ut().To().l(this.pv.bind(this),this),this.Uf=new Hr(this.Vf.canvasElement,this,{Xd:()=>!0,Zd:()=>!1})}M(){this.Uf.M(),this.lv!==null&&this.lv.M(),this.av!==null&&this.av.M(),this.Vf.unsubscribeSuggestedBitmapSizeChanged(this.Af),this.Vf.dispose(),this.Ef.unsubscribeSuggestedBitmapSizeChanged(this.Bf),this.Ef.dispose()}qf(){return this.uv}vv(){return this.lv}mv(){return this.av}af(t){if(this.ov)return;this.ov=!0;const e=this.Sp.Ut();!e.yt().Ni()&&this.Sp.F().handleScale.axisPressedMouseMove.time&&e.mc(t.localX)}hf(t){this.af(t)}_f(){const t=this.Sp.Ut();!t.yt().Ni()&&this.ov&&(this.ov=!1,this.Sp.F().handleScale.axisPressedMouseMove.time&&t.yc())}Jd(t){const e=this.Sp.Ut();!e.yt().Ni()&&this.Sp.F().handleScale.axisPressedMouseMove.time&&e.xc(t.localX)}Kd(t){this.Jd(t)}nf(){this.ov=!1;const t=this.Sp.Ut();t.yt().Ni()&&!this.Sp.F().handleScale.axisPressedMouseMove.time||t.yc()}tf(){this.nf()}Ed(){this.Sp.F().handleScale.axisDoubleClickReset.time&&this.Sp.Ut().Zn()}Od(){this.Ed()}$d(){this.Sp.Ut().F().handleScale.axisPressedMouseMove.time&&this.ap(1)}gf(){this.ap(0)}Up(){return this.Cf}bv(){return this._v}gv(t,e,s){si(this.Cf,t)||(this.Cf=t,this.Df=!0,this.Ef.resizeCanvasElement(t),this.Vf.resizeCanvasElement(t),this.Df=!1,this.If.style.width=`${t.width}px`,this.If.style.height=`${t.height}px`,this._v.m(t)),this.lv!==null&&this.lv.Gf(yt({width:e,height:t.height})),this.av!==null&&this.av.Gf(yt({width:s,height:t.height}))}wv(){const t=this.Mv();return Math.ceil(t.k+t.C+t.T+t.I+t.O+t.Sv)}gt(){this.Sp.Ut().yt().Gl()}hp(){return this.Ef.bitmapSize}lp(t,e,s){const n=this.hp();n.width>0&&n.height>0&&t.drawImage(this.Ef.canvasElement,e,s)}tp(t){if(t===0)return;if(t!==1){this.Ef.applySuggestedBitmapSize();const s=ni(this.Ef);s!==null&&(s.useBitmapCoordinateSpace(n=>{this.np(n),this.ye(n)}),this.sp(s)),this.lv!==null&&this.lv.tp(t),this.av!==null&&this.av.tp(t)}this.Vf.applySuggestedBitmapSize();const e=ni(this.Vf);e!==null&&(e.useBitmapCoordinateSpace(({context:s,bitmapSize:n})=>{s.clearRect(0,0,n.width,n.height)}),this.xv([this.Sp.Ut().cc()],e))}np({context:t,bitmapSize:e}){Cn(t,0,0,e.width,e.height,this.Sp.Ut().Lc())}ye({context:t,bitmapSize:e,verticalPixelRatio:s}){if(this.Sp.F().timeScale.borderVisible){t.fillStyle=this.yv();const n=Math.max(1,Math.floor(this.Mv().k*s));t.fillRect(0,0,e.width,n)}}sp(t){const e=this.Sp.Ut().yt(),s=e.Gl();if(!s||s.length===0)return;let n=s.reduce(Ff,s[0]).g_;n>30&&n<50&&(n=30);const r=this.Mv(),o=e.F();o.borderVisible&&o.ticksVisible&&t.useBitmapCoordinateSpace(({context:h,horizontalPixelRatio:a,verticalPixelRatio:l})=>{h.strokeStyle=this.yv(),h.fillStyle=this.yv();const u=Math.max(1,Math.floor(a)),c=Math.floor(.5*a);h.beginPath();const f=Math.round(r.C*l);for(let m=s.length;m--;){const d=Math.round(s[m].ql*a);h.rect(d-c,0,u,f)}h.fill()}),t.useMediaCoordinateSpace(({context:h})=>{const a=r.k+r.C+r.I+r.T/2;h.textAlign="center",h.textBaseline="middle",h.fillStyle=this.$(),h.font=this.Zf();for(const l of s)if(l.g_<n){const u=l.uu?this.kv(h,l.ql,l._a):l.ql;h.fillText(l._a,u,a)}h.font=this.Cv();for(const l of s)if(l.g_>=n){const u=l.uu?this.kv(h,l.ql,l._a):l.ql;h.fillText(l._a,u,a)}})}kv(t,e,s){const n=this.Pf.Si(t,s),r=n/2,o=Math.floor(e-r)+.5;return o<0?e+=Math.abs(0-o):o+n>this.Cf.width&&(e-=Math.abs(this.Cf.width-(o+n))),e}xv(t,e){const s=this.Mv();for(const n of t)for(const r of n.Qi())r.Mt().X(e,s)}yv(){return this.Sp.F().timeScale.borderColor}$(){return this.un.textColor}W(){return this.un.fontSize}Zf(){return ki(this.W(),this.un.fontFamily)}Cv(){return ki(this.W(),this.un.fontFamily,"bold")}Mv(){this.S===null&&(this.S={k:1,V:NaN,I:NaN,O:NaN,ji:NaN,C:5,T:NaN,P:"",Wi:new fs,Sv:0});const t=this.S,e=this.Zf();if(t.P!==e){const s=this.W();t.T=s,t.P=e,t.I=3*s/12,t.O=3*s/12,t.ji=9*s/12,t.V=0,t.Sv=4*s/12,t.Wi.Fe()}return this.S}ap(t){this.If.style.cursor=t===1?"ew-resize":"default"}pv(){const t=this.Sp.Ut(),e=t.F();e.leftPriceScale.visible||this.lv===null||(this.cv.removeChild(this.lv.qf()),this.lv.M(),this.lv=null),e.rightPriceScale.visible||this.av===null||(this.dv.removeChild(this.av.qf()),this.av.M(),this.av=null);const s={Pc:this.Sp.Ut().Pc()},n=()=>e.leftPriceScale.borderVisible&&t.yt().F().borderVisible,r=()=>t.Lc();e.leftPriceScale.visible&&this.lv===null&&(this.lv=new sh("left",e,s,n,r),this.cv.appendChild(this.lv.qf())),e.rightPriceScale.visible&&this.av===null&&(this.av=new sh("right",e,s,n,r),this.dv.appendChild(this.av.qf()))}}const Bf=!!Pi&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(i=>i.brand.includes("Chromium"))&&!!Pi&&(!((Zn=navigator==null?void 0:navigator.userAgentData)===null||Zn===void 0)&&Zn.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);var Zn;class If{constructor(t,e){var s;this.Tv=[],this.Pv=0,this.da=0,this.po=0,this.Rv=0,this.Dv=0,this.Bv=null,this.Ov=!1,this.fp=new Ht,this.Yu=new Ht,this.Av=null,this.Lv=t,this.un=e,this.uv=document.createElement("div"),this.uv.classList.add("tv-lightweight-charts"),this.uv.style.overflow="hidden",this.uv.style.width="100%",this.uv.style.height="100%",(s=this.uv).style.userSelect="none",s.style.webkitUserSelect="none",s.style.msUserSelect="none",s.style.MozUserSelect="none",s.style.webkitTapHighlightColor="transparent",this.Iv=document.createElement("table"),this.Iv.setAttribute("cellspacing","0"),this.uv.appendChild(this.Iv),this.Ev=this.Vv.bind(this),$n(this.un)&&this.zv(!0),this.Hi=new Vf(this.Zu.bind(this),this.un),this.Ut().dc().l(this.Nv.bind(this),this),this.Fv=new Af(this),this.Iv.appendChild(this.Fv.qf());const n=e.autoSize&&this.Wv();let r=this.un.width,o=this.un.height;if(n||r===0||o===0){const h=t.getBoundingClientRect();r=r||h.width,o=o||h.height}n||this.jv(r,o),this.$v(),t.appendChild(this.uv),this.Hv(),this.Hi.yt().xu().l(this.Hi.dl.bind(this.Hi),this),this.Hi.To().l(this.Hi.dl.bind(this.Hi),this)}Ut(){return this.Hi}F(){return this.un}Uv(){return this.Tv}qv(){return this.Fv}M(){this.zv(!1),this.Pv!==0&&window.cancelAnimationFrame(this.Pv),this.Hi.dc().v(this),this.Hi.yt().xu().v(this),this.Hi.To().v(this),this.Hi.M();for(const t of this.Tv)this.Iv.removeChild(t.qf()),t.Wp().v(this),t.M();this.Tv=[],D(this.Fv).M(),this.uv.parentElement!==null&&this.uv.parentElement.removeChild(this.uv),this.Yu.M(),this.fp.M(),this.Yv()}jv(t,e,s=!1){if(this.da===e&&this.po===t)return;const n=function(h){const a=Math.floor(h.width),l=Math.floor(h.height);return yt({width:a-a%2,height:l-l%2})}(yt({width:t,height:e}));this.da=n.height,this.po=n.width;const r=this.da+"px",o=this.po+"px";D(this.uv).style.height=r,D(this.uv).style.width=o,this.Iv.style.height=r,this.Iv.style.width=o,s?this.Xv(Ut.ss(),performance.now()):this.Hi.dl()}tp(t){t===void 0&&(t=Ut.ss());for(let e=0;e<this.Tv.length;e++)this.Tv[e].tp(t.jn(e).Nn);this.un.timeScale.visible&&this.Fv.tp(t.Wn())}kh(t){const e=$n(this.un);this.Hi.kh(t);const s=$n(this.un);s!==e&&this.zv(s),this.Hv(),this.Zv(t)}Wp(){return this.fp}dc(){return this.Yu}Kv(){this.Bv!==null&&(this.Xv(this.Bv,performance.now()),this.Bv=null);const t=this.Gv(null),e=document.createElement("canvas");e.width=t.width,e.height=t.height;const s=D(e.getContext("2d"));return this.Gv(s),e}Jv(t){return t==="left"&&!this.Qv()||t==="right"&&!this.tm()||this.Tv.length===0?0:D(t==="left"?this.Tv[0].Gp():this.Tv[0].Jp()).Jf()}Zv(t){(t.autoSize!==void 0||!this.Av||t.width===void 0&&t.height===void 0)&&(t.autoSize&&!this.Av&&this.Wv(),t.autoSize===!1&&this.Av!==null&&this.Yv(),t.autoSize||t.width===void 0&&t.height===void 0||this.jv(t.width||this.po,t.height||this.da))}Gv(t){let e=0,s=0;const n=this.Tv[0],r=(h,a)=>{let l=0;for(let u=0;u<this.Tv.length;u++){const c=this.Tv[u],f=D(h==="left"?c.Gp():c.Jp()),m=f.hp();t!==null&&f.lp(t,a,l),l+=m.height}};this.Qv()&&(r("left",0),e+=D(n.Gp()).hp().width);for(let h=0;h<this.Tv.length;h++){const a=this.Tv[h],l=a.hp();t!==null&&a.lp(t,e,s),s+=l.height}e+=n.hp().width,this.tm()&&(r("right",e),e+=D(n.Jp()).hp().width);const o=(h,a,l)=>{D(h==="left"?this.Fv.vv():this.Fv.mv()).lp(D(t),a,l)};if(this.un.timeScale.visible){const h=this.Fv.hp();if(t!==null){let a=0;this.Qv()&&(o("left",a,s),a=D(n.Gp()).hp().width),this.Fv.lp(t,a,s),a+=h.width,this.tm()&&o("right",a,s)}s+=h.height}return yt({width:e,height:s})}im(){let t=0,e=0,s=0;for(const d of this.Tv)this.Qv()&&(e=Math.max(e,D(d.Gp()).Xf())),this.tm()&&(s=Math.max(s,D(d.Jp()).Xf())),t+=d.Po();e=pr(e),s=pr(s);const n=this.po,r=this.da,o=Math.max(n-e-s,0),h=this.un.timeScale.visible;let a=h?this.Fv.wv():0;var l;a=(l=a)+l%2;const u=0+a,c=r<u?0:r-u,f=c/t;let m=0;for(let d=0;d<this.Tv.length;++d){const g=this.Tv[d];g.Rp(this.Hi._c()[d]);let T=0,S=0;S=d===this.Tv.length-1?c-m:Math.round(g.Po()*f),T=Math.max(S,2),m+=T,g.Gf(yt({width:o,height:T})),this.Qv()&&g.Hp(e,"left"),this.tm()&&g.Hp(s,"right"),g.Qf()&&this.Hi.fc(g.Qf(),T)}this.Fv.gv(yt({width:h?o:0,height:a}),h?e:0,h?s:0),this.Hi.Do(o),this.Rv!==e&&(this.Rv=e),this.Dv!==s&&(this.Dv=s)}zv(t){t?this.uv.addEventListener("wheel",this.Ev,{passive:!1}):this.uv.removeEventListener("wheel",this.Ev)}nm(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return Bf?1/window.devicePixelRatio:1}Vv(t){if(!(t.deltaX!==0&&this.un.handleScroll.mouseWheel||t.deltaY!==0&&this.un.handleScale.mouseWheel))return;const e=this.nm(t),s=e*t.deltaX/100,n=-e*t.deltaY/100;if(t.cancelable&&t.preventDefault(),n!==0&&this.un.handleScale.mouseWheel){const r=Math.sign(n)*Math.min(1,Math.abs(n)),o=t.clientX-this.uv.getBoundingClientRect().left;this.Ut().bc(o,r)}s!==0&&this.un.handleScroll.mouseWheel&&this.Ut().gc(-80*s)}Xv(t,e){var s;const n=t.Wn();n===3&&this.sm(),n!==3&&n!==2||(this.rm(t),this.hm(t,e),this.Fv.gt(),this.Tv.forEach(r=>{r.Bp()}),((s=this.Bv)===null||s===void 0?void 0:s.Wn())===3&&(this.Bv.Qn(t),this.sm(),this.rm(this.Bv),this.hm(this.Bv,e),t=this.Bv,this.Bv=null)),this.tp(t)}hm(t,e){for(const s of t.Jn())this.ts(s,e)}rm(t){const e=this.Hi._c();for(let s=0;s<e.length;s++)t.jn(s).Fn&&e[s].qo()}ts(t,e){const s=this.Hi.yt();switch(t.Un){case 0:s.ku();break;case 1:s.Cu(t.Ot);break;case 2:s.Kn(t.Ot);break;case 3:s.Gn(t.Ot);break;case 4:s.cu();break;case 5:t.Ot.gu(e)||s.Gn(t.Ot.wu(e))}}Zu(t){this.Bv!==null?this.Bv.Qn(t):this.Bv=t,this.Ov||(this.Ov=!0,this.Pv=window.requestAnimationFrame(e=>{if(this.Ov=!1,this.Pv=0,this.Bv!==null){const s=this.Bv;this.Bv=null,this.Xv(s,e);for(const n of s.Jn())if(n.Un===5&&!n.Ot.gu(e)){this.Ut().Yn(n.Ot);break}}}))}sm(){this.$v()}$v(){const t=this.Hi._c(),e=t.length,s=this.Tv.length;for(let n=e;n<s;n++){const r=pe(this.Tv.pop());this.Iv.removeChild(r.qf()),r.Wp().v(this),r.M()}for(let n=s;n<e;n++){const r=new jr(this,t[n]);r.Wp().l(this.lm.bind(this),this),this.Tv.push(r),this.Iv.insertBefore(r.qf(),this.Fv.qf())}for(let n=0;n<e;n++){const r=t[n],o=this.Tv[n];o.Qf()!==r?o.Rp(r):o.Pp()}this.Hv(),this.im()}am(t,e,s){var n;const r=new Map;t!==null&&this.Hi.wt().forEach(u=>{const c=u.Ln().jh(t);c!==null&&r.set(u,c)});let o;if(t!==null){const u=(n=this.Hi.yt().Ui(t))===null||n===void 0?void 0:n.w_;u!==void 0&&(o=u)}const h=this.Ut().rc(),a=h!==null&&h.lc instanceof Ir?h.lc:void 0,l=h!==null&&h.Ip!==void 0?h.Ip.nr:void 0;return{_t:o,Ys:t??void 0,om:e??void 0,_m:a,um:r,dm:l,fm:s??void 0}}lm(t,e,s){this.fp.m(()=>this.am(t,e,s))}Nv(t,e,s){this.Yu.m(()=>this.am(t,e,s))}Hv(){const t=this.un.timeScale.visible?"":"none";this.Fv.qf().style.display=t}Qv(){return this.Tv[0].Qf().Eo().F().visible}tm(){return this.Tv[0].Qf().Vo().F().visible}Wv(){return"ResizeObserver"in window&&(this.Av=new ResizeObserver(t=>{const e=t.find(s=>s.target===this.Lv);e&&this.jv(e.contentRect.width,e.contentRect.height)}),this.Av.observe(this.Lv,{box:"border-box"}),!0)}Yv(){this.Av!==null&&this.Av.disconnect()}}function $n(i){return Boolean(i.handleScroll.mouseWheel||i.handleScale.mouseWheel)}function nh(i,t,e,s){const n=e.value,r={Ys:t,_t:i,Ot:[n,n,n,n],w_:s};return e.color!==void 0&&(r.D=e.color),r}function Gs(i){return i.Ot!==void 0}function pi(i){return(t,e,s,n)=>{return(r=s).open===void 0&&r.value===void 0?{_t:t,Ys:e,w_:n}:i(t,e,s,n);var r}}const Uf={Candlestick:pi(function(i,t,e,s){const n={Ys:t,_t:i,Ot:[e.open,e.high,e.low,e.close],w_:s};return e.color!==void 0&&(n.D=e.color),e.borderColor!==void 0&&(n.At=e.borderColor),e.wickColor!==void 0&&(n.Dh=e.wickColor),n}),Bar:pi(function(i,t,e,s){const n={Ys:t,_t:i,Ot:[e.open,e.high,e.low,e.close],w_:s};return e.color!==void 0&&(n.D=e.color),n}),Area:pi(function(i,t,e,s){const n=e.value,r={Ys:t,_t:i,Ot:[n,n,n,n],w_:s};return e.lineColor!==void 0&&(r.ot=e.lineColor),e.topColor!==void 0&&(r.bs=e.topColor),e.bottomColor!==void 0&&(r.gs=e.bottomColor),r}),Baseline:pi(function(i,t,e,s){const n=e.value,r={Ys:t,_t:i,Ot:[n,n,n,n],w_:s};return e.topLineColor!==void 0&&(r.be=e.topLineColor),e.bottomLineColor!==void 0&&(r.ge=e.bottomLineColor),e.topFillColor1!==void 0&&(r.de=e.topFillColor1),e.topFillColor2!==void 0&&(r.fe=e.topFillColor2),e.bottomFillColor1!==void 0&&(r.pe=e.bottomFillColor1),e.bottomFillColor2!==void 0&&(r.ve=e.bottomFillColor2),r}),Histogram:pi(nh),Line:pi(nh)};function rh(i){return Uf[i]}function qs(i){return 60*i*60*1e3}function tr(i){return 60*i*1e3}const Ys=[{pm:(oh=1,1e3*oh),g_:10},{pm:tr(1),g_:20},{pm:tr(5),g_:21},{pm:tr(30),g_:22},{pm:qs(1),g_:30},{pm:qs(3),g_:31},{pm:qs(6),g_:32},{pm:qs(12),g_:33}];var oh;function hh(i,t){if(i.getUTCFullYear()!==t.getUTCFullYear())return 70;if(i.getUTCMonth()!==t.getUTCMonth())return 60;if(i.getUTCDate()!==t.getUTCDate())return 50;for(let e=Ys.length-1;e>=0;--e)if(Math.floor(t.getTime()/Ys[e].pm)!==Math.floor(i.getTime()/Ys[e].pm))return Ys[e].g_;return 0}function lh(i,t=0){if(i.length===0)return;let e=t===0?null:i[t-1]._t.__,s=e!==null?new Date(1e3*e):null,n=0;for(let r=t;r<i.length;++r){const o=i[r],h=new Date(1e3*o._t.__);s!==null&&(o.b_=hh(h,s)),n+=o._t.__-(e||o._t.__),e=o._t.__,s=h}if(t===0&&i.length>1){const r=Math.ceil(n/(i.length-1)),o=new Date(1e3*(i[0]._t.__-r));i[0].b_=hh(new Date(1e3*i[0]._t.__),o)}}function vr(i){if(!Ur(i))throw new Error("time must be of type BusinessDay");const t=new Date(Date.UTC(i.year,i.month-1,i.day,0,0,0,0));return{__:Math.round(t.getTime()/1e3),o_:i}}function Ll(i){if(!Nl(i))throw new Error("time must be of type isUTCTimestamp");return{__:i}}function ah(i){return i.length===0?null:Ur(i[0].time)?vr:Ll}function en(i){return Nl(i)?Ll(i):Ur(i)?vr(i):vr(Fl(i))}function Fl(i){const t=new Date(i);if(isNaN(t.getTime()))throw new Error(`Invalid date string=${i}, expected format=yyyy-mm-dd`);return{day:t.getUTCDate(),month:t.getUTCMonth()+1,year:t.getUTCFullYear()}}function uh(i){Dr(i.time)&&(i.time=Fl(i.time))}function ch(i){return{Ys:0,vm:new Map,yl:i}}function fh(i){if(i!==void 0&&i.length!==0)return{bm:i[0]._t.__,gm:i[i.length-1]._t.__}}function dh(i){let t;return i.forEach(e=>{t===void 0&&(t=e.w_)}),pe(t)}function mh(i){i.w_===void 0&&(i.w_=i.time)}class Hf{constructor(){this.wm=new Map,this.Mm=new Map,this.Sm=new Map,this.xm=[]}M(){this.wm.clear(),this.Mm.clear(),this.Sm.clear(),this.xm=[]}ym(t,e){let s=this.wm.size!==0,n=!1;const r=this.Mm.get(t);if(r!==void 0)if(this.Mm.size===1)s=!1,n=!0,this.wm.clear();else for(const a of this.xm)a.pointData.vm.delete(t)&&(n=!0);let o=[];if(e.length!==0){const a=e;a.forEach(c=>mh(c)),function(c){c.forEach(uh)}(e);const l=D(ah(e)),u=rh(t.Lh());o=a.map(c=>{const f=l(c.time);let m=this.wm.get(f.__);m===void 0&&(m=ch(f),this.wm.set(f.__,m),n=!0);const d=u(f,m.Ys,c,c.w_);return m.vm.set(t,d),d})}s&&this.km(),this.Cm(t,o);let h=-1;if(n){const a=[];this.wm.forEach(l=>{a.push({b_:0,_t:l.yl,pointData:l,w_:dh(l.vm)})}),a.sort((l,u)=>l._t.__-u._t.__),h=this.Tm(a)}return this.Pm(t,h,function(a,l){const u=fh(a),c=fh(l);if(u!==void 0&&c!==void 0)return{ml:u.gm>=c.gm&&u.bm>=c.bm}}(this.Mm.get(t),r))}Bc(t){return this.ym(t,[])}Rm(t,e){const s=e;mh(s),uh(e);const n=D(ah([e]))(e.time),r=this.Sm.get(t);if(r!==void 0&&n.__<r.__)throw new Error(`Cannot update oldest data, last time=${r.__}, new time=${n.__}`);let o=this.wm.get(n.__);const h=o===void 0;o===void 0&&(o=ch(n),this.wm.set(n.__,o));const a=rh(t.Lh())(n,o.Ys,e,s.w_);o.vm.set(t,a),this.Dm(t,a);const l={ml:Gs(a)};if(!h)return this.Pm(t,-1,l);const u={b_:0,_t:o.yl,pointData:o,w_:dh(o.vm)},c=vs(this.xm,u._t.__,(f,m)=>f._t.__<m);this.xm.splice(c,0,u);for(let f=c;f<this.xm.length;++f)er(this.xm[f].pointData,f);return lh(this.xm,c),this.Pm(t,c,l)}Dm(t,e){let s=this.Mm.get(t);s===void 0&&(s=[],this.Mm.set(t,s));const n=s.length!==0?s[s.length-1]:null;n===null||e._t.__>n._t.__?Gs(e)&&s.push(e):Gs(e)?s[s.length-1]=e:s.splice(-1,1),this.Sm.set(t,e._t)}Cm(t,e){e.length!==0?(this.Mm.set(t,e.filter(Gs)),this.Sm.set(t,e[e.length-1]._t)):(this.Mm.delete(t),this.Sm.delete(t))}km(){for(const t of this.xm)t.pointData.vm.size===0&&this.wm.delete(t._t.__)}Tm(t){let e=-1;for(let s=0;s<this.xm.length&&s<t.length;++s){const n=this.xm[s],r=t[s];if(n._t.__!==r._t.__){e=s;break}r.b_=n.b_,er(r.pointData,s)}if(e===-1&&this.xm.length!==t.length&&(e=Math.min(this.xm.length,t.length)),e===-1)return-1;for(let s=e;s<t.length;++s)er(t[s].pointData,s);return lh(t,e),this.xm=t,e}Bm(){if(this.Mm.size===0)return null;let t=0;return this.Mm.forEach(e=>{e.length!==0&&(t=Math.max(t,e[e.length-1].Ys))}),t}Pm(t,e,s){const n={Om:new Map,yt:{su:this.Bm()}};if(e!==-1)this.Mm.forEach((r,o)=>{n.Om.set(o,{ar:r,Am:o===t?s:void 0})}),this.Mm.has(t)||n.Om.set(t,{ar:[],Am:s}),n.yt.Lm=this.xm,n.yt.Im=e;else{const r=this.Mm.get(t);n.Om.set(t,{ar:r||[],Am:s})}return n}}function er(i,t){i.Ys=t,i.vm.forEach(e=>{e.Ys=t})}function br(i){return{value:i.Ot[3],time:i.w_}}function gh(i){const t=br(i);return i.D!==void 0&&(t.color=i.D),t}function ph(i){return{open:i.Ot[0],high:i.Ot[1],low:i.Ot[2],close:i.Ot[3],time:i.w_}}const jf={Area:function(i){const t=br(i);return i.ot!==void 0&&(t.lineColor=i.ot),i.bs!==void 0&&(t.topColor=i.bs),i.gs!==void 0&&(t.bottomColor=i.gs),t},Line:gh,Baseline:function(i){const t=br(i);return i.be!==void 0&&(t.topLineColor=i.be),i.ge!==void 0&&(t.bottomLineColor=i.ge),i.de!==void 0&&(t.topFillColor1=i.de),i.fe!==void 0&&(t.topFillColor2=i.fe),i.pe!==void 0&&(t.bottomFillColor1=i.pe),i.ve!==void 0&&(t.bottomFillColor2=i.ve),t},Histogram:gh,Bar:function(i){const t=ph(i);return i.D!==void 0&&(t.color=i.D),t},Candlestick:function(i){const t=ph(i),{D:e,At:s,Dh:n}=i;return e!==void 0&&(t.color=e),s!==void 0&&(t.borderColor=s),n!==void 0&&(t.wickColor=n),t}};function Al(i){return jf[i]}const ir={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2}},Wf={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:Nr,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"},vh={width:0,height:0,autoSize:!1,layout:{background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Nr},crosshair:{vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},grid:{vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},overlayPriceScales:Object.assign({},ir),leftPriceScale:Object.assign(Object.assign({},ir),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},ir),{visible:!0}),timeScale:{rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,ticksVisible:!1},watermark:Wf,localization:{locale:Pi?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}},Gf={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},qf={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},Yf={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},Kf={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},Jf={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},Xf={color:"#26a69a",base:0},Qf={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};class Zf{constructor(t,e){this.Em=t,this.Vm=e}applyOptions(t){this.Em.Ut().ac(this.Vm,t)}options(){return this.Vi().F()}width(){return En(this.Vm)?this.Em.Jv(this.Vm):0}Vi(){return D(this.Em.Ut().oc(this.Vm)).Bt}}const $f={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:""};class td{constructor(t){this.wh=t}applyOptions(t){this.wh.kh(t)}options(){return this.wh.F()}zm(){return this.wh}}class ed{constructor(t,e,s){this.Ts=t,this.Nm=e,this.Fm=s}priceFormatter(){return this.Ts.Bl()}priceToCoordinate(t){const e=this.Ts.Tt();return e===null?null:this.Ts.Bt().Dt(t,e.Ot)}coordinateToPrice(t){const e=this.Ts.Tt();return e===null?null:this.Ts.Bt().pn(t,e.Ot)}barsInLogicalRange(t){if(t===null)return null;const e=new _i(new hs(t.from,t.to)).k_(),s=this.Ts.Ln();if(s.Ni())return null;const n=s.jh(e.Ms(),1),r=s.jh(e.ci(),-1),o=D(s.Nh()),h=D(s.An());if(n!==null&&r!==null&&n.Ys>r.Ys)return{barsBefore:t.from-o,barsAfter:h-t.to};const a={barsBefore:n===null||n.Ys===o?t.from-o:n.Ys-o,barsAfter:r===null||r.Ys===h?h-t.to:h-r.Ys};return n!==null&&r!==null&&(a.from=n._t.o_||n._t.__,a.to=r._t.o_||r._t.__),a}setData(t){this.Ts.Lh(),this.Nm.Wm(this.Ts,t)}update(t){this.Ts.Lh(),this.Nm.jm(this.Ts,t)}dataByIndex(t,e){const s=this.Ts.Ln().jh(t,e);return s===null?null:Al(this.seriesType())(s)}setMarkers(t){const e=t.map(s=>Object.assign(Object.assign({},s),{originalTime:s.time,time:en(s.time)}));this.Ts.gl(e)}markers(){return this.Ts.wl().map(t=>{const{originalTime:e,time:s}=t,n=function(r,o){var h={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&o.indexOf(a)<0&&(h[a]=r[a]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var l=0;for(a=Object.getOwnPropertySymbols(r);l<a.length;l++)o.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(r,a[l])&&(h[a[l]]=r[a[l]])}return h}(t,["originalTime","time"]);return Object.assign({time:e},n)})}applyOptions(t){this.Ts.kh(t)}options(){return Ae(this.Ts.F())}priceScale(){return this.Fm.priceScale(this.Ts.Bt().Vl())}createPriceLine(t){const e=Re(Ae($f),t),s=this.Ts.Ml(e);return new td(s)}removePriceLine(t){this.Ts.Sl(t.zm())}seriesType(){return this.Ts.Lh()}}class id{constructor(t,e){this.$m=new Ht,this.I_=new Ht,this._v=new Ht,this.Hi=t,this.bo=t.yt(),this.Fv=e,this.bo.Mu().l(this.Hm.bind(this)),this.bo.Su().l(this.Um.bind(this)),this.Fv.bv().l(this.qm.bind(this))}M(){this.bo.Mu().v(this),this.bo.Su().v(this),this.Fv.bv().v(this),this.$m.M(),this.I_.M(),this._v.M()}scrollPosition(){return this.bo.au()}scrollToPosition(t,e){e?this.bo.bu(t,1e3):this.Hi.Gn(t)}scrollToRealTime(){this.bo.mu()}getVisibleRange(){var t,e;const s=this.bo.K_();return s===null?null:{from:(t=s.from.o_)!==null&&t!==void 0?t:s.from.__,to:(e=s.to.o_)!==null&&e!==void 0?e:s.to.__}}setVisibleRange(t){const e={from:en(t.from),to:en(t.to)},s=this.bo.tu(e);this.Hi.Oc(s)}getVisibleLogicalRange(){const t=this.bo.Z_();return t===null?null:{from:t.Ms(),to:t.ci()}}setVisibleLogicalRange(t){hi(t.from<=t.to,"The from index cannot be after the to index."),this.Hi.Oc(t)}resetTimeScale(){this.Hi.Zn()}fitContent(){this.Hi.ku()}logicalToCoordinate(t){const e=this.Hi.yt();return e.Ni()?null:e.Et(t)}coordinateToLogical(t){return this.bo.Ni()?null:this.bo.eu(t)}timeToCoordinate(t){const e=en(t),s=this.bo.Nl(e,!1);return s===null?null:this.bo.Et(s)}coordinateToTime(t){var e;const s=this.Hi.yt(),n=s.eu(t),r=s.vn(n);return r===null?null:(e=r.o_)!==null&&e!==void 0?e:r.__}width(){return this.Fv.Up().width}height(){return this.Fv.Up().height}subscribeVisibleTimeRangeChange(t){this.$m.l(t)}unsubscribeVisibleTimeRangeChange(t){this.$m.p(t)}subscribeVisibleLogicalRangeChange(t){this.I_.l(t)}unsubscribeVisibleLogicalRangeChange(t){this.I_.p(t)}subscribeSizeChange(t){this._v.l(t)}unsubscribeSizeChange(t){this._v.p(t)}applyOptions(t){this.bo.kh(t)}options(){return Ae(this.bo.F())}Hm(){this.$m.g()&&this.$m.m(this.getVisibleRange())}Um(){this.I_.g()&&this.I_.m(this.getVisibleLogicalRange())}qm(t){this._v.m(t.width,t.height)}}function sd(i){if(i===void 0||i.type==="custom")return;const t=i;t.minMove!==void 0&&t.precision===void 0&&(t.precision=function(e){if(e>=1)return 0;let s=0;for(;s<8;s++){const n=Math.round(e);if(Math.abs(n-e)<1e-8)return s;e*=10}return s}(t.minMove))}function bh(i){return function(t){if(Bs(t.handleScale)){const s=t.handleScale;t.handleScale={axisDoubleClickReset:{time:s,price:s},axisPressedMouseMove:{time:s,price:s},mouseWheel:s,pinch:s}}else if(t.handleScale!==void 0){const{axisPressedMouseMove:s,axisDoubleClickReset:n}=t.handleScale;Bs(s)&&(t.handleScale.axisPressedMouseMove={time:s,price:s}),Bs(n)&&(t.handleScale.axisDoubleClickReset={time:n,price:n})}const e=t.handleScroll;Bs(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})}(i),i}class nd{constructor(t,e){this.Ym=new Hf,this.Xm=new Map,this.Zm=new Map,this.Km=new Ht,this.Gm=new Ht;const s=e===void 0?Ae(vh):Re(Ae(vh),bh(e));this.Em=new If(t,s),this.Em.Wp().l(r=>{this.Km.g()&&this.Km.m(this.Jm(r()))},this),this.Em.dc().l(r=>{this.Gm.g()&&this.Gm.m(this.Jm(r()))},this);const n=this.Em.Ut();this.Qm=new id(n,this.Em.qv())}remove(){this.Em.Wp().v(this),this.Em.dc().v(this),this.Qm.M(),this.Em.M(),this.Xm.clear(),this.Zm.clear(),this.Km.M(),this.Gm.M(),this.Ym.M()}resize(t,e,s){this.Em.jv(t,e,s)}addAreaSeries(t){return this.tb("Area",Kf,t)}addBaselineSeries(t){return this.tb("Baseline",Jf,t)}addBarSeries(t){return this.tb("Bar",qf,t)}addCandlestickSeries(t={}){return function(e){e.borderColor!==void 0&&(e.borderUpColor=e.borderColor,e.borderDownColor=e.borderColor),e.wickColor!==void 0&&(e.wickUpColor=e.wickColor,e.wickDownColor=e.wickColor)}(t),this.tb("Candlestick",Gf,t)}addHistogramSeries(t){return this.tb("Histogram",Xf,t)}addLineSeries(t){return this.tb("Line",Yf,t)}removeSeries(t){const e=pe(this.Xm.get(t)),s=this.Ym.Bc(e);this.Em.Ut().Bc(e),this.ib(s),this.Xm.delete(t),this.Zm.delete(e)}Wm(t,e){this.ib(this.Ym.ym(t,e))}jm(t,e){this.ib(this.Ym.Rm(t,e))}subscribeClick(t){this.Km.l(t)}unsubscribeClick(t){this.Km.p(t)}subscribeCrosshairMove(t){this.Gm.l(t)}unsubscribeCrosshairMove(t){this.Gm.p(t)}priceScale(t){return new Zf(this.Em,t)}timeScale(){return this.Qm}applyOptions(t){this.Em.kh(bh(t))}options(){return this.Em.F()}takeScreenshot(){return this.Em.Kv()}tb(t,e,s={}){sd(s.priceFormat);const n=Re(Ae(Qf),Ae(e),s),r=this.Em.Ut().Rc(t,n),o=new ed(r,this,this);return this.Xm.set(o,r),this.Zm.set(r,o),o}ib(t){const e=this.Em.Ut();e.Tc(t.yt.su,t.yt.Lm,t.yt.Im),t.Om.forEach((s,n)=>n.tt(s.ar,s.Am)),e.hu()}nb(t){return pe(this.Zm.get(t))}Jm(t){const e=new Map;t.um.forEach((n,r)=>{const o=Al(r.Lh())(n);hi(function(h){return h.open!==void 0||h.value!==void 0}(o)),e.set(this.nb(r),o)});const s=t._m===void 0?void 0:this.nb(t._m);return{time:t._t,logical:t.Ys,point:t.om,hoveredSeries:s,hoveredObjectId:t.dm,seriesData:e,sourceEvent:t.fm}}}function rd(i,t){let e;if(Dr(i)){const s=document.getElementById(i);hi(s!==null,`Cannot find element in DOM with id=${i}`),e=s}else e=i;return new nd(e,t)}function od(i){let t,e;return{c(){t=A("div"),this.h()},l(s){t=B(s,"DIV",{class:!0}),R(t).forEach(x),this.h()},h(){_(t,"class","overflow-visible w-full h-full min-h-[200px] sm:min-h-[250px]"),kr(()=>i[6].call(t))},m(s,n){ft(s,t,n),e=Pr(t,i[6].bind(t)),i[7](t)},p:ss,i:ss,o:ss,d(s){s&&x(t),e(),i[7](null)}}}function hd(i,t,e){let s,n,r;const o={layout:{textColor:"rgb(107 114 128)",background:{type:gr.Solid,color:"transparent"}},grid:{vertLines:{visible:!1},horzLines:{visible:!1}},timeScale:{borderVisible:!1},rightPriceScale:{borderVisible:!1},watermark:{visible:!0,fontSize:24,horzAlign:"center",vertAlign:"center",color:"#FF3B7680",text:"bcked.com"}};let{priceFormat:h={type:"percent",precision:2,minMove:.01}}=t;const a={lineColor:"#FF3B76",topColor:"#FF3B7688",bottomColor:"#FF3B7600",priceFormat:h};let{data:l}=t,u,c,f;function m(M){M&&(c=rd(M,o),f=c.addAreaSeries(a),d(s))}function d(M){var O;f==null||f.setData(M),(O=c==null?void 0:c.timeScale())==null||O.fitContent()}function g(M,O){var E;c==null||c.resize(M,O),(E=c==null?void 0:c.timeScale())==null||E.fitContent()}function T(){n=this.offsetWidth,r=this.offsetHeight,e(2,n),e(1,r)}function S(M){hn[M?"unshift":"push"](()=>{u=M,e(0,u)})}return i.$$set=M=>{"priceFormat"in M&&e(3,h=M.priceFormat),"data"in M&&e(4,l=M.data)},i.$$.update=()=>{i.$$.dirty&16&&e(5,s=l.map(({date:M,value:O})=>({time:new Date(M).getTime()/1e3,value:O}))),i.$$.dirty&1&&m(u),i.$$.dirty&32&&d(s),i.$$.dirty&6&&g(n,r)},e(2,n=0),e(1,r=0),[u,r,n,h,l,s,T,S]}class Bl extends Ve{constructor(t){super(),Oe(this,t,hd,od,De,{priceFormat:3,data:4})}}const yr=Math.PI,_r=2*yr,$e=1e-6,ld=_r-$e;function Il(i){this._+=i[0];for(let t=1,e=i.length;t<e;++t)this._+=arguments[t]+i[t]}function ad(i){let t=Math.floor(i);if(!(t>=0))throw new Error(`invalid digits: ${i}`);if(t>15)return Il;const e=10**t;return function(s){this._+=s[0];for(let n=1,r=s.length;n<r;++n)this._+=Math.round(arguments[n]*e)/e+s[n]}}class Wr{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Il:ad(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,s,n){this._append`Q${+t},${+e},${this._x1=+s},${this._y1=+n}`}bezierCurveTo(t,e,s,n,r,o){this._append`C${+t},${+e},${+s},${+n},${this._x1=+r},${this._y1=+o}`}arcTo(t,e,s,n,r){if(t=+t,e=+e,s=+s,n=+n,r=+r,r<0)throw new Error(`negative radius: ${r}`);let o=this._x1,h=this._y1,a=s-t,l=n-e,u=o-t,c=h-e,f=u*u+c*c;if(this._x1===null)this._append`M${this._x1=t},${this._y1=e}`;else if(f>$e)if(!(Math.abs(c*a-l*u)>$e)||!r)this._append`L${this._x1=t},${this._y1=e}`;else{let m=s-o,d=n-h,g=a*a+l*l,T=m*m+d*d,S=Math.sqrt(g),M=Math.sqrt(f),O=r*Math.tan((yr-Math.acos((g+f-T)/(2*S*M)))/2),E=O/M,F=O/S;Math.abs(E-1)>$e&&this._append`L${t+E*u},${e+E*c}`,this._append`A${r},${r},0,0,${+(c*m>u*d)},${this._x1=t+F*a},${this._y1=e+F*l}`}}arc(t,e,s,n,r,o){if(t=+t,e=+e,s=+s,o=!!o,s<0)throw new Error(`negative radius: ${s}`);let h=s*Math.cos(n),a=s*Math.sin(n),l=t+h,u=e+a,c=1^o,f=o?n-r:r-n;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>$e||Math.abs(this._y1-u)>$e)&&this._append`L${l},${u}`,s&&(f<0&&(f=f%_r+_r),f>ld?this._append`A${s},${s},0,1,${c},${t-h},${e-a}A${s},${s},0,1,${c},${this._x1=l},${this._y1=u}`:f>$e&&this._append`A${s},${s},0,${+(f>=yr)},${c},${this._x1=t+s*Math.cos(r)},${this._y1=e+s*Math.sin(r)}`)}rect(t,e,s,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${s=+s}v${+n}h${-s}Z`}toString(){return this._}}function Ul(){return new Wr}Ul.prototype=Wr.prototype;function At(i){return function(){return i}}function Hl(i){let t=3;return i.digits=function(e){if(!arguments.length)return t;if(e==null)t=null;else{const s=Math.floor(e);if(!(s>=0))throw new RangeError(`invalid digits: ${e}`);t=s}return i},()=>new Wr(t)}function jl(i){return typeof i=="object"&&"length"in i?i:Array.from(i)}function Wl(i){this._context=i}Wl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(i,t){switch(i=+i,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(i,t):this._context.moveTo(i,t);break;case 1:this._point=2;default:this._context.lineTo(i,t);break}}};function Gl(i){return new Wl(i)}function ql(i){return i[0]}function Yl(i){return i[1]}function ud(i,t){var e=At(!0),s=null,n=Gl,r=null,o=Hl(h);i=typeof i=="function"?i:i===void 0?ql:At(i),t=typeof t=="function"?t:t===void 0?Yl:At(t);function h(a){var l,u=(a=jl(a)).length,c,f=!1,m;for(s==null&&(r=n(m=o())),l=0;l<=u;++l)!(l<u&&e(c=a[l],l,a))===f&&((f=!f)?r.lineStart():r.lineEnd()),f&&r.point(+i(c,l,a),+t(c,l,a));if(m)return r=null,m+""||null}return h.x=function(a){return arguments.length?(i=typeof a=="function"?a:At(+a),h):i},h.y=function(a){return arguments.length?(t=typeof a=="function"?a:At(+a),h):t},h.defined=function(a){return arguments.length?(e=typeof a=="function"?a:At(!!a),h):e},h.curve=function(a){return arguments.length?(n=a,s!=null&&(r=n(s)),h):n},h.context=function(a){return arguments.length?(a==null?s=r=null:r=n(s=a),h):s},h}function cd(i,t,e){var s=null,n=At(!0),r=null,o=Gl,h=null,a=Hl(l);i=typeof i=="function"?i:i===void 0?ql:At(+i),t=typeof t=="function"?t:At(t===void 0?0:+t),e=typeof e=="function"?e:e===void 0?Yl:At(+e);function l(c){var f,m,d,g=(c=jl(c)).length,T,S=!1,M,O=new Array(g),E=new Array(g);for(r==null&&(h=o(M=a())),f=0;f<=g;++f){if(!(f<g&&n(T=c[f],f,c))===S)if(S=!S)m=f,h.areaStart(),h.lineStart();else{for(h.lineEnd(),h.lineStart(),d=f-1;d>=m;--d)h.point(O[d],E[d]);h.lineEnd(),h.areaEnd()}S&&(O[f]=+i(T,f,c),E[f]=+t(T,f,c),h.point(s?+s(T,f,c):O[f],e?+e(T,f,c):E[f]))}if(M)return h=null,M+""||null}function u(){return ud().defined(n).curve(o).context(r)}return l.x=function(c){return arguments.length?(i=typeof c=="function"?c:At(+c),s=null,l):i},l.x0=function(c){return arguments.length?(i=typeof c=="function"?c:At(+c),l):i},l.x1=function(c){return arguments.length?(s=c==null?null:typeof c=="function"?c:At(+c),l):s},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:At(+c),e=null,l):t},l.y0=function(c){return arguments.length?(t=typeof c=="function"?c:At(+c),l):t},l.y1=function(c){return arguments.length?(e=c==null?null:typeof c=="function"?c:At(+c),l):e},l.lineX0=l.lineY0=function(){return u().x(i).y(t)},l.lineY1=function(){return u().x(i).y(e)},l.lineX1=function(){return u().x(s).y(t)},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:At(!!c),l):n},l.curve=function(c){return arguments.length?(o=c,r!=null&&(h=o(r)),l):o},l.context=function(c){return arguments.length?(c==null?r=h=null:h=o(r=c),l):r},l}function es(i,t,e){this.k=i,this.x=t,this.y=e}es.prototype={constructor:es,scale:function(i){return i===1?this:new es(this.k*i,this.x,this.y)},translate:function(i,t){return i===0&t===0?this:new es(this.k,this.x+this.k*i,this.y+this.k*t)},apply:function(i){return[i[0]*this.k+this.x,i[1]*this.k+this.y]},applyX:function(i){return i*this.k+this.x},applyY:function(i){return i*this.k+this.y},invert:function(i){return[(i[0]-this.x)/this.k,(i[1]-this.y)/this.k]},invertX:function(i){return(i-this.x)/this.k},invertY:function(i){return(i-this.y)/this.k},rescaleX:function(i){return i.copy().domain(i.range().map(this.invertX,this).map(i.invert,i))},rescaleY:function(i){return i.copy().domain(i.range().map(this.invertY,this).map(i.invert,i))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};es.prototype;function fd(i){let t,e,s,n,r,o,h,a,l,u,c,f,m;return{c(){t=A("div"),e=vt("svg"),s=vt("g"),n=vt("defs"),r=vt("clipPath"),o=vt("path"),h=vt("animateTransform"),c=vt("g"),f=vt("rect"),this.h()},l(d){t=B(d,"DIV",{class:!0});var g=R(t);e=bt(g,"svg",{width:!0,height:!0});var T=R(e);s=bt(T,"g",{});var S=R(s);n=bt(S,"defs",{});var M=R(n);r=bt(M,"clipPath",{id:!0,transform:!0});var O=R(r);o=bt(O,"path",{d:!0});var E=R(o);h=bt(E,"animateTransform",{attributeName:!0,attributeType:!0,type:!0,from:!0,to:!0,dur:!0,repeatCount:!0}),R(h).forEach(x),E.forEach(x),O.forEach(x),M.forEach(x),c=bt(S,"g",{"clip-path":!0});var F=R(c);f=bt(F,"rect",{width:!0,height:!0,fill:!0}),R(f).forEach(x),F.forEach(x),S.forEach(x),T.forEach(x),g.forEach(x),this.h()},h(){_(h,"attributeName","transform"),_(h,"attributeType","XML"),_(h,"type","translate"),_(h,"from","0"),_(h,"to",a="-"+i[4]*2),_(h,"dur",l=i[2]+"ms"),_(h,"repeatCount","indefinite"),_(o,"d",i[7]),_(r,"id","clipWave-"+i[9]),_(r,"transform",u="translate("+i[8]+", "+i[6](ur(i[1],0,1))+")"),_(f,"width",i[4]),_(f,"height",i[5]),_(f,"fill",i[3]),_(c,"clip-path","url(#clipWave-"+i[9]+")"),_(e,"width",i[4]),_(e,"height",i[5]),_(t,"class",i[0]),kr(()=>i[22].call(t))},m(d,g){ft(d,t,g),y(t,e),y(e,s),y(s,n),y(n,r),y(r,o),y(o,h),y(s,c),y(c,f),m=Pr(t,i[22].bind(t))},p(d,[g]){g&16&&a!==(a="-"+d[4]*2)&&_(h,"to",a),g&4&&l!==(l=d[2]+"ms")&&_(h,"dur",l),g&128&&_(o,"d",d[7]),g&322&&u!==(u="translate("+d[8]+", "+d[6](ur(d[1],0,1))+")")&&_(r,"transform",u),g&16&&_(f,"width",d[4]),g&32&&_(f,"height",d[5]),g&8&&_(f,"fill",d[3]),g&16&&_(e,"width",d[4]),g&32&&_(e,"height",d[5]),g&1&&_(t,"class",d[0])},i:ss,o:ss,d(d){d&&x(t),m()}}}let dd=100,yh=2;function md(i,t,e){let{class:s=""}=t,{fillPercent:n}=t,{circleThickness:r=.05}=t,{circleFillGap:o=.05}=t,{waveHeight:h=.05}=t,{waveAnimateTime:a=18e3}=t,{waveHeightScaling:l=!0}=t,{waveColor:u="#178BCA"}=t,{waveOffset:c=0}=t;const m=`fill-gauge-${Math.floor(Math.random()*100)}`;let d=0,g=0,T=V=>0,S=0,M=dd*yh,O=V=>0,E=V=>0,F=V=>0,G=V=>[],U=[],Z=V=>"",j="",W=0;function H(){d=this.offsetWidth,g=this.offsetHeight,e(4,d),e(5,g)}return i.$$set=V=>{"class"in V&&e(0,s=V.class),"fillPercent"in V&&e(1,n=V.fillPercent),"circleThickness"in V&&e(10,r=V.circleThickness),"circleFillGap"in V&&e(11,o=V.circleFillGap),"waveHeight"in V&&e(12,h=V.waveHeight),"waveAnimateTime"in V&&e(2,a=V.waveAnimateTime),"waveHeightScaling"in V&&e(13,l=V.waveHeightScaling),"waveColor"in V&&e(3,u=V.waveColor),"waveOffset"in V&&e(14,c=V.waveOffset)},i.$$.update=()=>{i.$$.dirty&12288&&e(15,T=l?Fe().range([0,h,0]).domain([0,50,100]):Fe().range([h,h]).domain([0,100])),i.$$.dirty&32770&&e(16,S=50*T(ur(n,0,1)*100)),i.$$.dirty&16&&e(17,O=Fe().range([0,d*4]).domain([0,1])),i.$$.dirty&65536&&e(18,E=Fe().range([0,S]).domain([0,1])),i.$$.dirty&65536&&e(6,F=Fe().range([100+S,-S]).domain([0,1])),i.$$.dirty&524288&&e(20,U=G(yh)),i.$$.dirty&475136&&e(21,Z=cd().x(V=>O(V.x)).y0(V=>E(Math.sin(Math.PI*2*c*-1+V.y*2*Math.PI))).y1(V=>100+S+20)),i.$$.dirty&3145728&&e(7,j=Z(U))},e(19,G=V=>{let tt=[];for(let z=0;z<=40*V;z++)tt.push({x:z/(40*V),y:z/40});return tt}),e(8,W=100-M),[s,n,a,u,d,g,F,j,W,m,r,o,h,l,c,T,S,O,E,G,U,Z,H]}class gd extends Ve{constructor(t){super(),Oe(this,t,md,fd,De,{class:0,fillPercent:1,circleThickness:10,circleFillGap:11,waveHeight:12,waveAnimateTime:2,waveHeightScaling:13,waveColor:3,waveOffset:14})}}function _h(i,t){let e;if(t===void 0)for(const s of i)s!=null&&(e<s||e===void 0&&s>=s)&&(e=s);else{let s=-1;for(let n of i)(n=t(n,++s,i))!=null&&(e<n||e===void 0&&n>=n)&&(e=n)}return e}function pd(i,t){let e;if(t===void 0)for(const s of i)s!=null&&(e>s||e===void 0&&s>=s)&&(e=s);else{let s=-1;for(let n of i)(n=t(n,++s,i))!=null&&(e>n||e===void 0&&n>=n)&&(e=n)}return e}function sr(i,t){let e=0;if(t===void 0)for(let s of i)(s=+s)&&(e+=s);else{let s=-1;for(let n of i)(n=+t(n,++s,i))&&(e+=n)}return e}function Kl(i,t){return i.sourceLinks.length?i.depth:t-1}function Ks(i){return function(){return i}}function wh(i,t){return xn(i.source,t.source)||i.index-t.index}function xh(i,t){return xn(i.target,t.target)||i.index-t.index}function xn(i,t){return i.y0-t.y0}function nr(i){return i.value}function vd(i){return i.index}function bd(i){return i.nodes}function yd(i){return i.links}function Mh(i,t){const e=i.get(t);if(!e)throw new Error("missing: "+t);return e}function Sh({nodes:i}){for(const t of i){let e=t.y0,s=e;for(const n of t.sourceLinks)n.y0=e+n.width/2,e+=n.width;for(const n of t.targetLinks)n.y1=s+n.width/2,s+=n.width}}function _d(){let i=0,t=0,e=1,s=1,n=24,r=8,o,h=vd,a=Kl,l,u,c=bd,f=yd,m=6;function d(){const b={nodes:c.apply(null,arguments),links:f.apply(null,arguments)};return g(b),T(b),S(b),M(b),F(b),Sh(b),b}d.update=function(b){return Sh(b),b},d.nodeId=function(b){return arguments.length?(h=typeof b=="function"?b:Ks(b),d):h},d.nodeAlign=function(b){return arguments.length?(a=typeof b=="function"?b:Ks(b),d):a},d.nodeSort=function(b){return arguments.length?(l=b,d):l},d.nodeWidth=function(b){return arguments.length?(n=+b,d):n},d.nodePadding=function(b){return arguments.length?(r=o=+b,d):r},d.nodes=function(b){return arguments.length?(c=typeof b=="function"?b:Ks(b),d):c},d.links=function(b){return arguments.length?(f=typeof b=="function"?b:Ks(b),d):f},d.linkSort=function(b){return arguments.length?(u=b,d):u},d.size=function(b){return arguments.length?(i=t=0,e=+b[0],s=+b[1],d):[e-i,s-t]},d.extent=function(b){return arguments.length?(i=+b[0][0],e=+b[1][0],t=+b[0][1],s=+b[1][1],d):[[i,t],[e,s]]},d.iterations=function(b){return arguments.length?(m=+b,d):m};function g({nodes:b,links:k}){for(const[N,p]of b.entries())p.index=N,p.sourceLinks=[],p.targetLinks=[];const w=new Map(b.map((N,p)=>[h(N,p,b),N]));for(const[N,p]of k.entries()){p.index=N;let{source:P,target:I}=p;typeof P!="object"&&(P=p.source=Mh(w,P)),typeof I!="object"&&(I=p.target=Mh(w,I)),P.sourceLinks.push(p),I.targetLinks.push(p)}if(u!=null)for(const{sourceLinks:N,targetLinks:p}of b)N.sort(u),p.sort(u)}function T({nodes:b}){for(const k of b)k.value=k.fixedValue===void 0?Math.max(sr(k.sourceLinks,nr),sr(k.targetLinks,nr)):k.fixedValue}function S({nodes:b}){const k=b.length;let w=new Set(b),N=new Set,p=0;for(;w.size;){for(const P of w){P.depth=p;for(const{target:I}of P.sourceLinks)N.add(I)}if(++p>k)throw new Error("circular link");w=N,N=new Set}}function M({nodes:b}){const k=b.length;let w=new Set(b),N=new Set,p=0;for(;w.size;){for(const P of w){P.height=p;for(const{source:I}of P.targetLinks)N.add(I)}if(++p>k)throw new Error("circular link");w=N,N=new Set}}function O({nodes:b}){const k=_h(b,p=>p.depth)+1,w=(e-i-n)/(k-1),N=new Array(k);for(const p of b){const P=Math.max(0,Math.min(k-1,Math.floor(a.call(null,p,k))));p.layer=P,p.x0=i+P*w,p.x1=p.x0+n,N[P]?N[P].push(p):N[P]=[p]}if(l)for(const p of N)p.sort(l);return N}function E(b){const k=pd(b,w=>(s-t-(w.length-1)*o)/sr(w,nr));for(const w of b){let N=t;for(const p of w){p.y0=N,p.y1=N+p.value*k,N=p.y1+o;for(const P of p.sourceLinks)P.width=P.value*k}N=(s-N+o)/(w.length+1);for(let p=0;p<w.length;++p){const P=w[p];P.y0+=N*(p+1),P.y1+=N*(p+1)}V(w)}}function F(b){const k=O(b);o=Math.min(r,(s-t)/(_h(k,w=>w.length)-1)),E(k);for(let w=0;w<m;++w){const N=Math.pow(.99,w),p=Math.max(1-N,(w+1)/m);U(k,N,p),G(k,N,p)}}function G(b,k,w){for(let N=1,p=b.length;N<p;++N){const P=b[N];for(const I of P){let J=0,$=0;for(const{source:ot,value:Pt}of I.targetLinks){let dt=Pt*(I.layer-ot.layer);J+=tt(ot,I)*dt,$+=dt}if(!($>0))continue;let xt=(J/$-I.y0)*k;I.y0+=xt,I.y1+=xt,H(I)}l===void 0&&P.sort(xn),Z(P,w)}}function U(b,k,w){for(let N=b.length,p=N-2;p>=0;--p){const P=b[p];for(const I of P){let J=0,$=0;for(const{target:ot,value:Pt}of I.sourceLinks){let dt=Pt*(ot.layer-I.layer);J+=z(I,ot)*dt,$+=dt}if(!($>0))continue;let xt=(J/$-I.y0)*k;I.y0+=xt,I.y1+=xt,H(I)}l===void 0&&P.sort(xn),Z(P,w)}}function Z(b,k){const w=b.length>>1,N=b[w];W(b,N.y0-o,w-1,k),j(b,N.y1+o,w+1,k),W(b,s,b.length-1,k),j(b,t,0,k)}function j(b,k,w,N){for(;w<b.length;++w){const p=b[w],P=(k-p.y0)*N;P>1e-6&&(p.y0+=P,p.y1+=P),k=p.y1+o}}function W(b,k,w,N){for(;w>=0;--w){const p=b[w],P=(p.y1-k)*N;P>1e-6&&(p.y0-=P,p.y1-=P),k=p.y0-o}}function H({sourceLinks:b,targetLinks:k}){if(u===void 0){for(const{source:{sourceLinks:w}}of k)w.sort(xh);for(const{target:{targetLinks:w}}of b)w.sort(wh)}}function V(b){if(u===void 0)for(const{sourceLinks:k,targetLinks:w}of b)k.sort(xh),w.sort(wh)}function tt(b,k){let w=b.y0-(b.sourceLinks.length-1)*o/2;for(const{target:N,width:p}of b.sourceLinks){if(N===k)break;w+=p+o}for(const{source:N,width:p}of k.targetLinks){if(N===b)break;w-=p}return w}function z(b,k){let w=k.y0-(k.targetLinks.length-1)*o/2;for(const{source:N,width:p}of k.targetLinks){if(N===b)break;w+=p+o}for(const{target:N,width:p}of b.sourceLinks){if(N===k)break;w-=p}return w}return d}function Ch(i,t,e){var h;const s=i.slice();s[18]=t[e],s[23]=e;const n=(h=s[0].getNode(s[18].id))==null?void 0:h.data;s[19]=n;const r=Math.max(s[18].y1-s[18].y0,1);s[20]=r;const o=Math.min(s[2],s[20])*.8;return s[21]=o,s}function Eh(i,t,e){var o,h;const s=i.slice();s[18]=t[e],s[23]=e;const n=(o=s[0].getNode(s[18].source.id))==null?void 0:o.data;s[24]=n;const r=(h=s[0].getNode(s[18].target.id))==null?void 0:h.data;return s[25]=r,s}function Th(i){let t,e,s=i[24].details.name+"",n,r=" -> ",o,h=i[25].details.name+"",a,l,u;return{c(){t=vt("g"),e=vt("title"),n=q(s),o=q(r),a=q(h),l=vt("path"),this.h()},l(c){t=bt(c,"g",{class:!0});var f=R(t);e=bt(f,"title",{});var m=R(e);n=Y(m,s),o=Y(m,r),a=Y(m,h),m.forEach(x),l=bt(f,"path",{class:!0,d:!0}),R(l).forEach(x),f.forEach(x),this.h()},h(){_(l,"class","opacity-40 fill-neon-pink group-hover:fill-neon-blue"),_(l,"d",u=i[7](i[18])),_(t,"class","sankey-link group")},m(c,f){ft(c,t,f),y(t,e),y(e,n),y(e,o),y(e,a),y(t,l)},p(c,f){f&9&&s!==(s=c[24].details.name+"")&&Ot(n,s),f&9&&h!==(h=c[25].details.name+"")&&Ot(a,h),f&8&&u!==(u=c[7](c[18]))&&_(l,"d",u)},d(c){c&&x(t)}}}function kh(i){let t,e,s=i[19].details.name+"",n,r,o,h,a,l,u;return l=new Fa({props:{id:i[18].id,data:i[1],x:i[18].y0+i[20]/2-i[21]/2,y:i[18].x0+i[2]/2-i[21]/2,size:i[21],class:"drop-shadow-md group-hover:drop-shadow-lg"}}),{c(){t=vt("g"),e=vt("title"),n=q(s),r=vt("rect"),Qt(l.$$.fragment),this.h()},l(c){t=bt(c,"g",{class:!0});var f=R(t);e=bt(f,"title",{});var m=R(e);n=Y(m,s),m.forEach(x),r=bt(f,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,rx:!0,ry:!0}),R(r).forEach(x),Zt(l.$$.fragment,f),f.forEach(x),this.h()},h(){_(r,"class","fill-neon-pink group-hover:fill-neon-blue"),_(r,"x",o=i[18].y0),_(r,"y",h=i[18].x0),_(r,"height",i[2]),_(r,"width",a=i[20]),_(r,"rx","5"),_(r,"ry","5"),_(t,"class","sankey-node group")},m(c,f){ft(c,t,f),y(t,e),y(e,n),y(t,r),$t(l,t,null),u=!0},p(c,f){(!u||f&9)&&s!==(s=c[19].details.name+"")&&Ot(n,s),(!u||f&8&&o!==(o=c[18].y0))&&_(r,"x",o),(!u||f&8&&h!==(h=c[18].x0))&&_(r,"y",h),(!u||f&4)&&_(r,"height",c[2]),(!u||f&8&&a!==(a=c[20]))&&_(r,"width",a);const m={};f&8&&(m.id=c[18].id),f&2&&(m.data=c[1]),f&12&&(m.x=c[18].y0+c[20]/2-c[21]/2),f&12&&(m.y=c[18].x0+c[2]/2-c[21]/2),f&12&&(m.size=c[21]),l.$set(m)},i(c){u||(Q(l.$$.fragment,c),u=!0)},o(c){st(l.$$.fragment,c),u=!1},d(c){c&&x(t),te(l)}}}function wd(i){let t,e,s,n,r=i[3].links,o=[];for(let u=0;u<r.length;u+=1)o[u]=Th(Eh(i,r,u));let h=i[3].nodes,a=[];for(let u=0;u<h.length;u+=1)a[u]=kh(Ch(i,h,u));const l=u=>st(a[u],1,1,()=>{a[u]=null});return{c(){t=vt("g"),e=vt("g");for(let u=0;u<o.length;u+=1)o[u].c();s=vt("g");for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){t=bt(u,"g",{class:!0});var c=R(t);e=bt(c,"g",{class:!0});var f=R(e);for(let d=0;d<o.length;d+=1)o[d].l(f);f.forEach(x),s=bt(c,"g",{class:!0});var m=R(s);for(let d=0;d<a.length;d+=1)a[d].l(m);m.forEach(x),c.forEach(x),this.h()},h(){_(e,"class","sankey-links"),_(s,"class","sankey-nodes"),_(t,"class","sankey-layer")},m(u,c){ft(u,t,c),y(t,e);for(let f=0;f<o.length;f+=1)o[f].m(e,null);y(t,s);for(let f=0;f<a.length;f+=1)a[f].m(s,null);n=!0},p(u,[c]){if(c&137){r=u[3].links;let f;for(f=0;f<r.length;f+=1){const m=Eh(u,r,f);o[f]?o[f].p(m,c):(o[f]=Th(m),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=r.length}if(c&15){h=u[3].nodes;let f;for(f=0;f<h.length;f+=1){const m=Ch(u,h,f);a[f]?(a[f].p(m,c),Q(a[f],1)):(a[f]=kh(m),a[f].c(),Q(a[f],1),a[f].m(s,null))}for(Je(),f=h.length;f<a.length;f+=1)l(f);Xe()}},i(u){if(!n){for(let c=0;c<h.length;c+=1)Q(a[c]);n=!0}},o(u){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)st(a[c]);n=!1},d(u){u&&x(t),ln(o,u),ln(a,u)}}}function xd(i,t,e){let s,n,r,o,h,{graph:a}=t,{data:l}=t;const{data:u,width:c,height:f}=Zh("LayerCake");K(i,u,E=>e(15,o=E)),K(i,c,E=>e(14,r=E)),K(i,f,E=>e(16,h=E));let{nodeHeight:m=40}=t,{linkWidth:d=E=>.9}=t,{nodePadding:g=10}=t,{nodeId:T=E=>E.id}=t,{nodeAlign:S=Kl}=t,{iterations:M=200}=t;function O(E){let F=E.source.x1,G=E.target.x0,U=E.y0-E.width/2*d(E),Z=E.y0+E.width/2*d(E),j=E.y1-E.width/2*d(E),W=E.y1+E.width/2*d(E),H=F+(G-F)/2,V=Ul();return V.moveTo(U,F),V.bezierCurveTo(U,H,j,H,j,G),V.lineTo(W,G),V.bezierCurveTo(W,H,Z,H,Z,F),V.lineTo(U,F),V.toString()}return i.$$set=E=>{"graph"in E&&e(0,a=E.graph),"data"in E&&e(1,l=E.data),"nodeHeight"in E&&e(2,m=E.nodeHeight),"linkWidth"in E&&e(8,d=E.linkWidth),"nodePadding"in E&&e(9,g=E.nodePadding),"nodeId"in E&&e(10,T=E.nodeId),"nodeAlign"in E&&e(11,S=E.nodeAlign),"iterations"in E&&e(12,M=E.iterations)},i.$$.update=()=>{i.$$.dirty&89604&&e(13,s=_d().nodeAlign(S).nodeWidth(m).nodePadding(g).nodeId(T).size([h,r]).iterations(M)),i.$$.dirty&40960&&e(3,n=s(o)),i.$$.dirty&16384},[a,l,m,n,u,c,f,O,d,g,T,S,M,s,r,o,h]}class Md extends Ve{constructor(t){super(),Oe(this,t,xd,wd,De,{graph:0,data:1,nodeHeight:2,linkWidth:8,nodePadding:9,nodeId:10,nodeAlign:11,iterations:12})}}function Sd(i){return i===0?!0:i}function Ye(i){return Sd(i)?Array.isArray(i)?t=>i.map(e=>typeof e!="function"?t[e]:e(t)):typeof i!="function"?t=>t[i]:i:null}function Cd(i){const t={};for(const e of i){if(Object(e)!==e)throw new TypeError("iterable for fromEntries should yield objects");const{"0":s,"1":n}=e;Object.defineProperty(t,s,{configurable:!0,enumerable:!0,writable:!0,value:n})}return t}function rr(i,t={}){return Cd(Object.entries(i).filter(([e,s])=>s!==void 0&&t[e]===void 0))}function Ed(i,t,{sort:e=!1}={}){if(!Array.isArray(i))throw new TypeError(`The first argument of calcUniques() must be an array. You passed in a ${typeof i}. If you got this error using the <LayerCake> component, consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(t)||t===void 0||t===null)throw new TypeError("The second argument of calcUniques() must be an object with field names as keys as accessor functions as values.");const s={},n=Object.keys(t),r=n.length;let o,h,a,l,u,c,f;const m=i.length;for(o=0;o<r;o+=1){for(f=new Set,l=n[o],u=t[l],h=0;h<m;h+=1)if(c=u(i[h]),Array.isArray(c)){const g=c.length;for(a=0;a<g;a+=1)f.add(c[a])}else f.add(c);const d=Array.from(f);s[l]=e===!0?d.sort():d}return s}function Td(i,t){if(!Array.isArray(i))throw new TypeError(`The first argument of calcExtents() must be an array. You passed in a ${typeof i}. If you got this error using the <LayerCake> component, consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(t)||t===void 0||t===null)throw new TypeError("The second argument of calcExtents() must be an object with field names as keys as accessor functions as values.");const e={},s=Object.keys(t),n=s.length;let r,o,h,a,l,u,c,f;const m=i.length;for(r=0;r<n;r+=1){for(a=s[r],c=t[a],l=null,u=null,o=0;o<m;o+=1)if(f=c(i[o]),Array.isArray(f)){const d=f.length;for(h=0;h<d;h+=1)f[h]!==!1&&f[h]!==void 0&&f[h]!==null&&Number.isNaN(f[h])===!1&&((l===null||f[h]<l)&&(l=f[h]),(u===null||f[h]>u)&&(u=f[h]))}else f!==!1&&f!==void 0&&f!==null&&Number.isNaN(f)===!1&&((l===null||f<l)&&(l=f),(u===null||f>u)&&(u=f));e[a]=[l,u]}return e}function kd(i){return typeof i.bandwidth=="function"||Pd(Object.keys(i),["domain","range","unknown","copy"])?"ordinal":"other"}function Pd(i,t){return i.length!==t.length?!1:i.every(e=>t.includes(e))}function zd(i,t,e){const s=Object.keys(e).reduce((r,o)=>{const h=kd(e[o]);return r[h]||(r[h]={}),r[h][o]=t[o],r},{ordinal:!1,other:!1});let n={};return s.ordinal&&(n=Ed(i,s.ordinal)),s.other&&(n={...n,...Td(i,s.other)}),n}function Rd(i=[],t){return Array.isArray(t)===!0?t.map((e,s)=>e===null?i[s]:e):i}function Js(i){return function([e,s]){return typeof s=="function"&&(s=s(e[i])),e?Rd(e[i],s):s}}const is={x:Fe,y:Fe,z:Fe,r:ec};function Vd(i){return i.constant?"symlog":i.base?"log":i.exponent?i.exponent()===.5?"sqrt":"pow":"other"}function Ph(i){return i}function Od(i){return t=>Math.log(i*t)}function Dd(i){return t=>i*Math.exp(t)}function Nd(i){return t=>Math.sign(t)*Math.log1p(Math.abs(t/i))}function Ld(i){return t=>Math.sign(t)*Math.expm1(Math.abs(t))*i}function Xs(i){return function(e){return e<0?-Math.pow(-e,i):Math.pow(e,i)}}function Fd(i){const t=Vd(i);if(t==="log"){const e=Math.sign(i.domain()[0]);return{lift:Od(e),ground:Dd(e),scaleType:t}}return t==="pow"?{lift:Xs(1),ground:Xs(1/1),scaleType:t}:t==="sqrt"?{lift:Xs(.5),ground:Xs(1/.5),scaleType:t}:t==="symlog"?{lift:Nd(1),ground:Ld(1),scaleType:t}:{lift:Ph,ground:Ph,scaleType:t}}function Ad(i,t){if(typeof i.range!="function")throw new Error("Scale method `range` must be a function");if(typeof i.domain!="function")throw new Error("Scale method `domain` must be a function");if(!Array.isArray(t))return i.domain();i.domain().length!==2&&console.warn("[LayerCake] The scale is expected to have a domain of length 2 to use padding. Are you sure you want to use padding? Your scale's domain is:",i.domain()),i.range().length!==2&&console.warn("[LayerCake] The scale is expected to have a range of length 2 to use padding. Are you sure you want to use padding? Your scale's range is:",i.range());const{lift:e,ground:s}=Fd(i),n=i.domain()[0],r=Object.prototype.toString.call(n)==="[object Date]",[o,h]=i.domain().map(m=>e(r?m.getTime():m)),[a,l]=i.range(),u=t[0]||0,c=t[1]||0,f=(h-o)/(Math.abs(l-a)-u-c);return[o-u*f,c*f+h].map(m=>s(r?new Date(m):m))}function Bd(i,t,e,s,n){let r,o;return n===!0?(r=0,o=100):(r=i==="r"?1:0,o=i==="y"?e:i==="r"?25:t),s===!0?[o,r]:[r,o]}function Id(i,t,e,s,n,r){return n?typeof n=="function"?n({width:t,height:e}):n:Bd(i,t,e,s,r)}function Qs(i){return function([e,s,n,r,o,h,a,l,u,c]){if(s===null)return null;const f=Id(i,a,l,h,u,c),m=e===is[i]?e():e.copy();return m.domain(n),(!m.interpolator||typeof m.interpolator=="function"&&m.interpolator().name.startsWith("identity"))&&m.range(f),r&&m.domain(Ad(m,r)),(o===!0||typeof o=="number")&&(typeof m.nice=="function"?m.nice(typeof o=="number"?o:void 0):console.error(`[Layer Cake] You set \`${i}Nice: true\` but the ${i}Scale does not have a \`.nice\` method. Ignoring...`)),m}}function Zs([i,t]){return e=>{const s=i(e);return Array.isArray(s)?s.map(n=>t(n)):t(s)}}function $s([i]){if(typeof i=="function"){if(typeof i.range=="function")return i.range();console.error("[LayerCake] Your scale doesn't have a `.range` method?")}return null}const Ud=i=>({element:i[0]&4,width:i[0]&256,height:i[0]&512,aspectRatio:i[0]&1024,containerWidth:i[0]&128,containerHeight:i[0]&64}),zh=i=>({element:i[2],width:i[8],height:i[9],aspectRatio:i[10],containerWidth:i[7],containerHeight:i[6]});function Rh(i){let t,e,s;const n=i[90].default,r=wi(n,i,i[89],zh);return{c(){t=A("div"),r&&r.c(),this.h()},l(o){t=B(o,"DIV",{class:!0});var h=R(t);r&&r.l(h),h.forEach(x),this.h()},h(){_(t,"class","layercake-container svelte-vhzpsp"),kr(()=>i[92].call(t)),Yt(t,"position",i[5]),Yt(t,"top",i[5]==="absolute"?"0":null),Yt(t,"right",i[5]==="absolute"?"0":null),Yt(t,"bottom",i[5]==="absolute"?"0":null),Yt(t,"left",i[5]==="absolute"?"0":null),Yt(t,"pointer-events",i[4]===!1?"none":null)},m(o,h){ft(o,t,h),r&&r.m(t,null),i[91](t),e=Pr(t,i[92].bind(t)),s=!0},p(o,h){r&&r.p&&(!s||h[0]&1988|h[2]&134217728)&&Mi(r,n,o,o[89],s?Ci(n,o[89],h,Ud):Si(o[89]),zh),h[0]&32&&Yt(t,"position",o[5]),h[0]&32&&Yt(t,"top",o[5]==="absolute"?"0":null),h[0]&32&&Yt(t,"right",o[5]==="absolute"?"0":null),h[0]&32&&Yt(t,"bottom",o[5]==="absolute"?"0":null),h[0]&32&&Yt(t,"left",o[5]==="absolute"?"0":null),h[0]&16&&Yt(t,"pointer-events",o[4]===!1?"none":null)},i(o){s||(Q(r,o),s=!0)},o(o){st(r,o),s=!1},d(o){o&&x(t),r&&r.d(o),i[91](null),e()}}}function Hd(i){let t,e,s=(i[3]===!0||typeof window<"u")&&Rh(i);return{c(){s&&s.c(),t=ro()},l(n){s&&s.l(n),t=ro()},m(n,r){s&&s.m(n,r),ft(n,t,r),e=!0},p(n,r){n[3]===!0||typeof window<"u"?s?(s.p(n,r),r[0]&8&&Q(s,1)):(s=Rh(n),s.c(),Q(s,1),s.m(t.parentNode,t)):s&&(Je(),st(s,1,1,()=>{s=null}),Xe())},i(n){e||(Q(s),e=!0)},o(n){st(s),e=!1},d(n){s&&s.d(n),n&&x(t)}}}function jd(i,t,e){let s,n,r,o,h,a,l,u,c,f,m,d,g,T,S,M,O,E,F,G,U,Z,j,W,H,V,tt,z,b,k,w,N,p,P,I,J,$,xt,ot,Pt,dt,{$$slots:Bt={},$$scope:jt}=t,{ssr:Wt=!1}=t,{pointerEvents:St=!0}=t,{position:mt="relative"}=t,{percentRange:zt=!1}=t,{width:at=void 0}=t,{height:ut=void 0}=t,{containerWidth:gt=at||100}=t,{containerHeight:Rt=ut||100}=t,{element:Nt=void 0}=t,{x:ct=void 0}=t,{y:It=void 0}=t,{z:Tt=void 0}=t,{r:Gt=void 0}=t,{data:ee=[]}=t,{xDomain:ie=void 0}=t,{yDomain:_t=void 0}=t,{zDomain:pt=void 0}=t,{rDomain:ue=void 0}=t,{xNice:be=!1}=t,{yNice:ye=!1}=t,{zNice:L=!1}=t,{rNice:X=!1}=t,{xPadding:Vt=void 0}=t,{yPadding:Ct=void 0}=t,{zPadding:Et=void 0}=t,{rPadding:qt=void 0}=t,{xScale:wt=is.x}=t,{yScale:kt=is.y}=t,{zScale:ce=is.z}=t,{rScale:_e=is.r}=t,{xRange:fe=void 0}=t,{yRange:se=void 0}=t,{zRange:de=void 0}=t,{rRange:me=void 0}=t,{xReverse:we=!1}=t,{yReverse:ne=typeof kt.bandwidth!="function"}=t,{zReverse:xe=!1}=t,{rReverse:re=!1}=t,{padding:Me={}}=t,{extents:oe={}}=t,{flatData:Se=void 0}=t,{custom:he={}}=t,ae=!1;$h(()=>{ae=!0});const nt={},Lt=it(zt);K(i,Lt,v=>e(128,xt=v));const ai=it(gt);K(i,ai,v=>e(7,$=v));const ui=it(Rt);K(i,ui,v=>e(6,J=v));const _s=it(rr(oe));K(i,_s,v=>e(127,I=v));const ws=it(ee);K(i,ws,v=>e(126,P=v));const Vi=it(Se||ee);K(i,Vi,v=>e(125,p=v));const xs=it(Me);K(i,xs,v=>e(124,N=v));const ci=it(Ye(ct));K(i,ci,v=>e(123,w=v));const fi=it(Ye(It));K(i,fi,v=>e(122,k=v));const di=it(Ye(Tt));K(i,di,v=>e(121,b=v));const mi=it(Ye(Gt));K(i,mi,v=>e(120,z=v));const Ms=it(ie);K(i,Ms,v=>e(119,tt=v));const Ss=it(_t);K(i,Ss,v=>e(118,V=v));const Cs=it(pt);K(i,Cs,v=>e(117,H=v));const Es=it(ue);K(i,Es,v=>e(116,W=v));const Oi=it(be);K(i,Oi,v=>e(115,j=v));const Di=it(ye);K(i,Di,v=>e(114,Z=v));const Ni=it(L);K(i,Ni,v=>e(113,U=v));const Li=it(X);K(i,Li,v=>e(112,G=v));const Fi=it(we);K(i,Fi,v=>e(111,F=v));const Ai=it(ne);K(i,Ai,v=>e(110,E=v));const Bi=it(xe);K(i,Bi,v=>e(109,O=v));const Ii=it(re);K(i,Ii,v=>e(108,M=v));const Ui=it(Vt);K(i,Ui,v=>e(107,S=v));const Hi=it(Ct);K(i,Hi,v=>e(106,T=v));const ji=it(Et);K(i,ji,v=>e(105,g=v));const Wi=it(qt);K(i,Wi,v=>e(104,d=v));const Ts=it(fe);K(i,Ts,v=>e(103,m=v));const ks=it(se);K(i,ks,v=>e(102,f=v));const Ps=it(de);K(i,Ps,v=>e(101,c=v));const zs=it(me);K(i,zs,v=>e(100,u=v));const Gi=it(wt);K(i,Gi,v=>e(99,l=v));const qi=it(kt);K(i,qi,v=>e(98,a=v));const Yi=it(ce);K(i,Yi,v=>e(97,h=v));const Ki=it(_e);K(i,Ki,v=>e(96,o=v));const Rs=it(nt);K(i,Rs,v=>e(94,n=v));const Vs=it(he);K(i,Vs,v=>e(95,r=v));const Zr=Mt([ci,fi,di,mi],([v,Le,Ce,Ft])=>{const Ze={};return v&&(Ze.x=v),Le&&(Ze.y=Le),Ce&&(Ze.z=Ce),Ft&&(Ze.r=Ft),Ze}),$r=Mt([xs,ai,ui],([v])=>Object.assign({top:0,right:0,bottom:0,left:0},v)),to=Mt([ai,ui,$r],([v,Le,Ce])=>{const Ft={};return Ft.top=Ce.top,Ft.right=v-Ce.right,Ft.bottom=Le-Ce.bottom,Ft.left=Ce.left,Ft.width=Ft.right-Ft.left,Ft.height=Ft.bottom-Ft.top,Ft.width<=0&&ae===!0&&console.warn("[LayerCake] Target div has zero or negative width. Did you forget to set an explicit width in CSS on the container?"),Ft.height<=0&&ae===!0&&console.warn("[LayerCake] Target div has zero or negative height. Did you forget to set an explicit height in CSS on the container?"),Ft}),We=Mt([to],([v])=>v.width);K(i,We,v=>e(8,ot=v));const Ge=Mt([to],([v])=>v.height);K(i,Ge,v=>e(9,Pt=v));const Ne=Mt([Vi,Zr,_s,Gi,qi,Ki,Yi],([v,Le,Ce,Ft,Ze,Pa,za])=>{const Ra={x:Ft,y:Ze,r:Pa,z:za},An=rr(Le,Ce),Va=Object.fromEntries(Object.keys(An).map(Bn=>[Bn,Ra[Bn]]));return Object.keys(An).length>0?{...zd(v,An,Va),...Ce}:{}}),eo=Mt([Ne,Ms],Js("x")),io=Mt([Ne,Ss],Js("y")),so=Mt([Ne,Cs],Js("z")),no=Mt([Ne,Es],Js("r")),On=Mt([Gi,Ne,eo,Ui,Oi,Fi,We,Ge,Ts,Lt],Qs("x")),ya=Mt([ci,On],Zs),Dn=Mt([qi,Ne,io,Hi,Di,Ai,We,Ge,ks,Lt],Qs("y")),_a=Mt([fi,Dn],Zs),Nn=Mt([Yi,Ne,so,ji,Ni,Bi,We,Ge,Ps,Lt],Qs("z")),wa=Mt([di,Nn],Zs),Ln=Mt([Ki,Ne,no,Wi,Li,Ii,We,Ge,zs,Lt],Qs("r")),xa=Mt([mi,Ln],Zs),Ma=Mt([On],$s),Sa=Mt([Dn],$s),Ca=Mt([Nn],$s),Ea=Mt([Ln],$s),Fn=Mt([We,Ge],([v,Le])=>v/Le);K(i,Fn,v=>e(10,dt=v));function Ta(v){hn[v?"unshift":"push"](()=>{Nt=v,e(2,Nt)})}function ka(){gt=this.clientWidth,Rt=this.clientHeight,e(0,gt),e(1,Rt)}return i.$$set=v=>{"ssr"in v&&e(3,Wt=v.ssr),"pointerEvents"in v&&e(4,St=v.pointerEvents),"position"in v&&e(5,mt=v.position),"percentRange"in v&&e(51,zt=v.percentRange),"width"in v&&e(52,at=v.width),"height"in v&&e(53,ut=v.height),"containerWidth"in v&&e(0,gt=v.containerWidth),"containerHeight"in v&&e(1,Rt=v.containerHeight),"element"in v&&e(2,Nt=v.element),"x"in v&&e(54,ct=v.x),"y"in v&&e(55,It=v.y),"z"in v&&e(56,Tt=v.z),"r"in v&&e(57,Gt=v.r),"data"in v&&e(58,ee=v.data),"xDomain"in v&&e(59,ie=v.xDomain),"yDomain"in v&&e(60,_t=v.yDomain),"zDomain"in v&&e(61,pt=v.zDomain),"rDomain"in v&&e(62,ue=v.rDomain),"xNice"in v&&e(63,be=v.xNice),"yNice"in v&&e(64,ye=v.yNice),"zNice"in v&&e(65,L=v.zNice),"rNice"in v&&e(66,X=v.rNice),"xPadding"in v&&e(67,Vt=v.xPadding),"yPadding"in v&&e(68,Ct=v.yPadding),"zPadding"in v&&e(69,Et=v.zPadding),"rPadding"in v&&e(70,qt=v.rPadding),"xScale"in v&&e(71,wt=v.xScale),"yScale"in v&&e(72,kt=v.yScale),"zScale"in v&&e(73,ce=v.zScale),"rScale"in v&&e(74,_e=v.rScale),"xRange"in v&&e(75,fe=v.xRange),"yRange"in v&&e(76,se=v.yRange),"zRange"in v&&e(77,de=v.zRange),"rRange"in v&&e(78,me=v.rRange),"xReverse"in v&&e(79,we=v.xReverse),"yReverse"in v&&e(80,ne=v.yReverse),"zReverse"in v&&e(81,xe=v.zReverse),"rReverse"in v&&e(82,re=v.rReverse),"padding"in v&&e(83,Me=v.padding),"extents"in v&&e(84,oe=v.extents),"flatData"in v&&e(85,Se=v.flatData),"custom"in v&&e(86,he=v.custom),"$$scope"in v&&e(89,jt=v.$$scope)},i.$$.update=()=>{i.$$.dirty[1]&8388608&&ct&&e(87,nt.x=ct,nt),i.$$.dirty[1]&16777216&&It&&e(87,nt.y=It,nt),i.$$.dirty[1]&33554432&&Tt&&e(87,nt.z=Tt,nt),i.$$.dirty[1]&67108864&&Gt&&e(87,nt.r=Gt,nt),i.$$.dirty[1]&268435456&&ie&&e(87,nt.xDomain=ie,nt),i.$$.dirty[1]&536870912&&_t&&e(87,nt.yDomain=_t,nt),i.$$.dirty[1]&1073741824&&pt&&e(87,nt.zDomain=pt,nt),i.$$.dirty[2]&1&&ue&&e(87,nt.rDomain=ue,nt),i.$$.dirty[2]&8192&&fe&&e(87,nt.xRange=fe,nt),i.$$.dirty[2]&16384&&se&&e(87,nt.yRange=se,nt),i.$$.dirty[2]&32768&&de&&e(87,nt.zRange=de,nt),i.$$.dirty[2]&65536&&me&&e(87,nt.rRange=me,nt),i.$$.dirty[1]&1048576&&et(Lt,xt=zt,xt),i.$$.dirty[0]&1&&et(ai,$=gt,$),i.$$.dirty[0]&2&&et(ui,J=Rt,J),i.$$.dirty[2]&4194304&&et(_s,I=rr(oe),I),i.$$.dirty[1]&134217728&&et(ws,P=ee,P),i.$$.dirty[1]&134217728|i.$$.dirty[2]&8388608&&et(Vi,p=Se||ee,p),i.$$.dirty[2]&2097152&&et(xs,N=Me,N),i.$$.dirty[1]&8388608&&et(ci,w=Ye(ct),w),i.$$.dirty[1]&16777216&&et(fi,k=Ye(It),k),i.$$.dirty[1]&33554432&&et(di,b=Ye(Tt),b),i.$$.dirty[1]&67108864&&et(mi,z=Ye(Gt),z),i.$$.dirty[1]&268435456&&et(Ms,tt=ie,tt),i.$$.dirty[1]&536870912&&et(Ss,V=_t,V),i.$$.dirty[1]&1073741824&&et(Cs,H=pt,H),i.$$.dirty[2]&1&&et(Es,W=ue,W),i.$$.dirty[2]&2&&et(Oi,j=be,j),i.$$.dirty[2]&4&&et(Di,Z=ye,Z),i.$$.dirty[2]&8&&et(Ni,U=L,U),i.$$.dirty[2]&16&&et(Li,G=X,G),i.$$.dirty[2]&131072&&et(Fi,F=we,F),i.$$.dirty[2]&262144&&et(Ai,E=ne,E),i.$$.dirty[2]&524288&&et(Bi,O=xe,O),i.$$.dirty[2]&1048576&&et(Ii,M=re,M),i.$$.dirty[2]&32&&et(Ui,S=Vt,S),i.$$.dirty[2]&64&&et(Hi,T=Ct,T),i.$$.dirty[2]&128&&et(ji,g=Et,g),i.$$.dirty[2]&256&&et(Wi,d=qt,d),i.$$.dirty[2]&8192&&et(Ts,m=fe,m),i.$$.dirty[2]&16384&&et(ks,f=se,f),i.$$.dirty[2]&32768&&et(Ps,c=de,c),i.$$.dirty[2]&65536&&et(zs,u=me,u),i.$$.dirty[2]&512&&et(Gi,l=wt,l),i.$$.dirty[2]&1024&&et(qi,a=kt,a),i.$$.dirty[2]&2048&&et(Yi,h=ce,h),i.$$.dirty[2]&4096&&et(Ki,o=_e,o),i.$$.dirty[2]&16777216&&et(Vs,r=he,r),i.$$.dirty[2]&33554432&&et(Rs,n=nt,n),i.$$.dirty[2]&67108864&&Na("LayerCake",s)},e(88,s={activeGetters:Zr,width:We,height:Ge,percentRange:Lt,aspectRatio:Fn,containerWidth:ai,containerHeight:ui,x:ci,y:fi,z:di,r:mi,custom:Vs,data:ws,xNice:Oi,yNice:Di,zNice:Ni,rNice:Li,xReverse:Fi,yReverse:Ai,zReverse:Bi,rReverse:Ii,xPadding:Ui,yPadding:Hi,zPadding:ji,rPadding:Wi,padding:$r,flatData:Vi,extents:Ne,xDomain:eo,yDomain:io,zDomain:so,rDomain:no,xRange:Ma,yRange:Sa,zRange:Ca,rRange:Ea,config:Rs,xScale:On,xGet:ya,yScale:Dn,yGet:_a,zScale:Nn,zGet:wa,rScale:Ln,rGet:xa}),[gt,Rt,Nt,Wt,St,mt,J,$,ot,Pt,dt,Lt,ai,ui,_s,ws,Vi,xs,ci,fi,di,mi,Ms,Ss,Cs,Es,Oi,Di,Ni,Li,Fi,Ai,Bi,Ii,Ui,Hi,ji,Wi,Ts,ks,Ps,zs,Gi,qi,Yi,Ki,Rs,Vs,We,Ge,Fn,zt,at,ut,ct,It,Tt,Gt,ee,ie,_t,pt,ue,be,ye,L,X,Vt,Ct,Et,qt,wt,kt,ce,_e,fe,se,de,me,we,ne,xe,re,Me,oe,Se,he,nt,s,jt,Bt,Ta,ka]}class Wd extends Ve{constructor(t){super(),Oe(this,t,jd,Hd,De,{ssr:3,pointerEvents:4,position:5,percentRange:51,width:52,height:53,containerWidth:0,containerHeight:1,element:2,x:54,y:55,z:56,r:57,data:58,xDomain:59,yDomain:60,zDomain:61,rDomain:62,xNice:63,yNice:64,zNice:65,rNice:66,xPadding:67,yPadding:68,zPadding:69,rPadding:70,xScale:71,yScale:72,zScale:73,rScale:74,xRange:75,yRange:76,zRange:77,rRange:78,xReverse:79,yReverse:80,zReverse:81,rReverse:82,padding:83,extents:84,flatData:85,custom:86},null,[-1,-1,-1,-1,-1])}}const Gd=i=>({element:i&1}),Vh=i=>({element:i[0]}),qd=i=>({element:i&1}),Oh=i=>({element:i[0]});function Yd(i){let t,e,s,n,r;const o=i[12].defs,h=wi(o,i,i[11],Oh),a=i[12].default,l=wi(a,i,i[11],Vh);return{c(){t=vt("svg"),e=vt("defs"),h&&h.c(),s=vt("g"),l&&l.c(),this.h()},l(u){t=bt(u,"svg",{class:!0,viewBox:!0,width:!0,height:!0});var c=R(t);e=bt(c,"defs",{});var f=R(e);h&&h.l(f),f.forEach(x),s=bt(c,"g",{class:!0,transform:!0});var m=R(s);l&&l.l(m),m.forEach(x),c.forEach(x),this.h()},h(){_(s,"class","layercake-layout-svg_g"),_(s,"transform",n="translate("+i[7].left+", "+i[7].top+")"),_(t,"class","layercake-layout-svg svelte-u84d8d"),_(t,"viewBox",i[4]),_(t,"width",i[5]),_(t,"height",i[6]),Yt(t,"z-index",i[2]),Yt(t,"pointer-events",i[3]===!1?"none":null)},m(u,c){ft(u,t,c),y(t,e),h&&h.m(e,null),y(t,s),l&&l.m(s,null),i[13](s),i[14](t),r=!0},p(u,[c]){h&&h.p&&(!r||c&2049)&&Mi(h,o,u,u[11],r?Ci(o,u[11],c,qd):Si(u[11]),Oh),l&&l.p&&(!r||c&2049)&&Mi(l,a,u,u[11],r?Ci(a,u[11],c,Gd):Si(u[11]),Vh),(!r||c&128&&n!==(n="translate("+u[7].left+", "+u[7].top+")"))&&_(s,"transform",n),(!r||c&16)&&_(t,"viewBox",u[4]),(!r||c&32)&&_(t,"width",u[5]),(!r||c&64)&&_(t,"height",u[6]),c&4&&Yt(t,"z-index",u[2]),c&8&&Yt(t,"pointer-events",u[3]===!1?"none":null)},i(u){r||(Q(h,u),Q(l,u),r=!0)},o(u){st(h,u),st(l,u),r=!1},d(u){u&&x(t),h&&h.d(u),l&&l.d(u),i[13](null),i[14](null)}}}function Kd(i,t,e){let s,n,r,{$$slots:o={},$$scope:h}=t,{element:a=void 0}=t,{innerElement:l=void 0}=t,{zIndex:u=void 0}=t,{pointerEvents:c=void 0}=t,{viewBox:f=void 0}=t;const{containerWidth:m,containerHeight:d,padding:g}=Zh("LayerCake");K(i,m,M=>e(5,s=M)),K(i,d,M=>e(6,n=M)),K(i,g,M=>e(7,r=M));function T(M){hn[M?"unshift":"push"](()=>{l=M,e(1,l)})}function S(M){hn[M?"unshift":"push"](()=>{a=M,e(0,a)})}return i.$$set=M=>{"element"in M&&e(0,a=M.element),"innerElement"in M&&e(1,l=M.innerElement),"zIndex"in M&&e(2,u=M.zIndex),"pointerEvents"in M&&e(3,c=M.pointerEvents),"viewBox"in M&&e(4,f=M.viewBox),"$$scope"in M&&e(11,h=M.$$scope)},[a,l,u,c,f,s,n,r,m,d,g,h,o,T,S]}class Jd extends Ve{constructor(t){super(),Oe(this,t,Kd,Yd,De,{element:0,innerElement:1,zIndex:2,pointerEvents:3,viewBox:4})}}function Xd(i){let t,e;return t=new Md({props:{graph:i[0],data:i[1]}}),{c(){Qt(t.$$.fragment)},l(s){Zt(t.$$.fragment,s)},m(s,n){$t(t,s,n),e=!0},p(s,n){const r={};n&1&&(r.graph=s[0]),n&2&&(r.data=s[1]),t.$set(r)},i(s){e||(Q(t.$$.fragment,s),e=!0)},o(s){st(t.$$.fragment,s),e=!1},d(s){te(t,s)}}}function Qd(i){let t,e;return t=new Jd({props:{$$slots:{default:[Xd]},$$scope:{ctx:i}}}),{c(){Qt(t.$$.fragment)},l(s){Zt(t.$$.fragment,s)},m(s,n){$t(t,s,n),e=!0},p(s,n){const r={};n&7&&(r.$$scope={dirty:n,ctx:s}),t.$set(r)},i(s){e||(Q(t.$$.fragment,s),e=!0)},o(s){st(t.$$.fragment,s),e=!1},d(s){te(t,s)}}}function Zd(i){let t,e,s,n,r,o,h,a;return h=new Wd({props:{data:JSON.parse(JSON.stringify(Dh(i[0]))),$$slots:{default:[Qd]},$$scope:{ctx:i}}}),{c(){t=A("div"),e=A("div"),s=A("span"),n=q("bcked.com"),r=ht(),o=A("div"),Qt(h.$$.fragment),this.h()},l(l){t=B(l,"DIV",{class:!0});var u=R(t);e=B(u,"DIV",{class:!0});var c=R(e);s=B(c,"SPAN",{});var f=R(s);n=Y(f,"bcked.com"),f.forEach(x),c.forEach(x),r=lt(u),o=B(u,"DIV",{class:!0});var m=R(o);Zt(h.$$.fragment,m),m.forEach(x),u.forEach(x),this.h()},h(){_(e,"class","absolute flex inset-0 text-2xl justify-center items-center text-neon-pink/50"),_(o,"class","h-full w-full min-h-[300px] sm:min-h-[350px] lg:min-h-[300px]"),_(t,"class","relative w-full h-full items-center")},m(l,u){ft(l,t,u),y(t,e),y(e,s),y(s,n),y(t,r),y(t,o),$t(h,o,null),a=!0},p(l,[u]){const c={};u&1&&(c.data=JSON.parse(JSON.stringify(Dh(l[0])))),u&7&&(c.$$scope={dirty:u,ctx:l}),h.$set(c)},i(l){a||(Q(h.$$.fragment,l),a=!0)},o(l){st(h.$$.fragment,l),a=!1},d(l){l&&x(t),te(h)}}}function Dh(i){let t={nodes:[],links:[]};return i.forEachNode(e=>{var s,n,r;(r=(n=(s=e==null?void 0:e.data)==null?void 0:s.history)==null?void 0:n.at(-1))!=null&&r.mcap&&t.nodes.push({id:e.id,name:e.id,value:e.data.history.at(-1).mcap})}),i.forEachLink(e=>{var s,n,r;(r=(n=(s=e==null?void 0:e.data)==null?void 0:s.history)==null?void 0:n.at(-1))!=null&&r.value&&t.links.push({source:e.fromId,target:e.toId,value:e.data.history.at(-1).value})}),t}function $d(i,t,e){let{graph:s}=t,{data:n}=t;return i.$$set=r=>{"graph"in r&&e(0,s=r.graph),"data"in r&&e(1,n=r.data)},[s,n]}class Jl extends Ve{constructor(t){super(),Oe(this,t,$d,Zd,De,{graph:0,data:1})}}class t0{constructor(t){Ji(this,"_instances",{});this.classes=t}get instances(){return Object.keys(this.classes).map(t=>this.getInstance(t))}getInstance(t){const e=this.classes[t];if(!e)throw new Error(`No proxy implementation for: ${t}.`);if(e.name in this._instances)return this._instances[e.name];const s=new e;return this._instances[e.name]=s,s}}const e0=2048;function i0(i,t,e){return el(i,s=>(t+e(s)).length<=e0)}function Xl(i,t){return function(){return i.apply(t,arguments)}}const{toString:Ql}=Object.prototype,{getPrototypeOf:Gr}=Object,qr=(i=>t=>{const e=Ql.call(t);return i[e]||(i[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),je=i=>(i=i.toLowerCase(),t=>qr(t)===i),Pn=i=>t=>typeof t===i,{isArray:Ri}=Array,ms=Pn("undefined");function s0(i){return i!==null&&!ms(i)&&i.constructor!==null&&!ms(i.constructor)&&Qe(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const Zl=je("ArrayBuffer");function n0(i){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(i):t=i&&i.buffer&&Zl(i.buffer),t}const r0=Pn("string"),Qe=Pn("function"),$l=Pn("number"),Yr=i=>i!==null&&typeof i=="object",o0=i=>i===!0||i===!1,sn=i=>{if(qr(i)!=="object")return!1;const t=Gr(i);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},h0=je("Date"),l0=je("File"),a0=je("Blob"),u0=je("FileList"),c0=i=>Yr(i)&&Qe(i.pipe),f0=i=>{const t="[object FormData]";return i&&(typeof FormData=="function"&&i instanceof FormData||Ql.call(i)===t||Qe(i.toString)&&i.toString()===t)},d0=je("URLSearchParams"),m0=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function bs(i,t,{allOwnKeys:e=!1}={}){if(i===null||typeof i>"u")return;let s,n;if(typeof i!="object"&&(i=[i]),Ri(i))for(s=0,n=i.length;s<n;s++)t.call(null,i[s],s,i);else{const r=e?Object.getOwnPropertyNames(i):Object.keys(i),o=r.length;let h;for(s=0;s<o;s++)h=r[s],t.call(null,i[h],h,i)}}function ta(i,t){t=t.toLowerCase();const e=Object.keys(i);let s=e.length,n;for(;s-- >0;)if(n=e[s],t===n.toLowerCase())return n;return null}const ea=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),ia=i=>!ms(i)&&i!==ea;function wr(){const{caseless:i}=ia(this)&&this||{},t={},e=(s,n)=>{const r=i&&ta(t,n)||n;sn(t[r])&&sn(s)?t[r]=wr(t[r],s):sn(s)?t[r]=wr({},s):Ri(s)?t[r]=s.slice():t[r]=s};for(let s=0,n=arguments.length;s<n;s++)arguments[s]&&bs(arguments[s],e);return t}const g0=(i,t,e,{allOwnKeys:s}={})=>(bs(t,(n,r)=>{e&&Qe(n)?i[r]=Xl(n,e):i[r]=n},{allOwnKeys:s}),i),p0=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),v0=(i,t,e,s)=>{i.prototype=Object.create(t.prototype,s),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:t.prototype}),e&&Object.assign(i.prototype,e)},b0=(i,t,e,s)=>{let n,r,o;const h={};if(t=t||{},i==null)return t;do{for(n=Object.getOwnPropertyNames(i),r=n.length;r-- >0;)o=n[r],(!s||s(o,i,t))&&!h[o]&&(t[o]=i[o],h[o]=!0);i=e!==!1&&Gr(i)}while(i&&(!e||e(i,t))&&i!==Object.prototype);return t},y0=(i,t,e)=>{i=String(i),(e===void 0||e>i.length)&&(e=i.length),e-=t.length;const s=i.indexOf(t,e);return s!==-1&&s===e},_0=i=>{if(!i)return null;if(Ri(i))return i;let t=i.length;if(!$l(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=i[t];return e},w0=(i=>t=>i&&t instanceof i)(typeof Uint8Array<"u"&&Gr(Uint8Array)),x0=(i,t)=>{const s=(i&&i[Symbol.iterator]).call(i);let n;for(;(n=s.next())&&!n.done;){const r=n.value;t.call(i,r[0],r[1])}},M0=(i,t)=>{let e;const s=[];for(;(e=i.exec(t))!==null;)s.push(e);return s},S0=je("HTMLFormElement"),C0=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,s,n){return s.toUpperCase()+n}),Nh=(({hasOwnProperty:i})=>(t,e)=>i.call(t,e))(Object.prototype),E0=je("RegExp"),sa=(i,t)=>{const e=Object.getOwnPropertyDescriptors(i),s={};bs(e,(n,r)=>{t(n,r,i)!==!1&&(s[r]=n)}),Object.defineProperties(i,s)},T0=i=>{sa(i,(t,e)=>{if(Qe(i)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const s=i[e];if(Qe(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},k0=(i,t)=>{const e={},s=n=>{n.forEach(r=>{e[r]=!0})};return Ri(i)?s(i):s(String(i).split(t)),e},P0=()=>{},z0=(i,t)=>(i=+i,Number.isFinite(i)?i:t),or="abcdefghijklmnopqrstuvwxyz",Lh="0123456789",na={DIGIT:Lh,ALPHA:or,ALPHA_DIGIT:or+or.toUpperCase()+Lh},R0=(i=16,t=na.ALPHA_DIGIT)=>{let e="";const{length:s}=t;for(;i--;)e+=t[Math.random()*s|0];return e};function V0(i){return!!(i&&Qe(i.append)&&i[Symbol.toStringTag]==="FormData"&&i[Symbol.iterator])}const O0=i=>{const t=new Array(10),e=(s,n)=>{if(Yr(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[n]=s;const r=Ri(s)?[]:{};return bs(s,(o,h)=>{const a=e(o,n+1);!ms(a)&&(r[h]=a)}),t[n]=void 0,r}}return s};return e(i,0)},C={isArray:Ri,isArrayBuffer:Zl,isBuffer:s0,isFormData:f0,isArrayBufferView:n0,isString:r0,isNumber:$l,isBoolean:o0,isObject:Yr,isPlainObject:sn,isUndefined:ms,isDate:h0,isFile:l0,isBlob:a0,isRegExp:E0,isFunction:Qe,isStream:c0,isURLSearchParams:d0,isTypedArray:w0,isFileList:u0,forEach:bs,merge:wr,extend:g0,trim:m0,stripBOM:p0,inherits:v0,toFlatObject:b0,kindOf:qr,kindOfTest:je,endsWith:y0,toArray:_0,forEachEntry:x0,matchAll:M0,isHTMLForm:S0,hasOwnProperty:Nh,hasOwnProp:Nh,reduceDescriptors:sa,freezeMethods:T0,toObjectSet:k0,toCamelCase:C0,noop:P0,toFiniteNumber:z0,findKey:ta,global:ea,isContextDefined:ia,ALPHABET:na,generateString:R0,isSpecCompliantForm:V0,toJSONObject:O0};function rt(i,t,e,s,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),s&&(this.request=s),n&&(this.response=n)}C.inherits(rt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:C.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const ra=rt.prototype,oa={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{oa[i]={value:i}});Object.defineProperties(rt,oa);Object.defineProperty(ra,"isAxiosError",{value:!0});rt.from=(i,t,e,s,n,r)=>{const o=Object.create(ra);return C.toFlatObject(i,o,function(a){return a!==Error.prototype},h=>h!=="isAxiosError"),rt.call(o,i.message,t,e,s,n),o.cause=i,o.name=i.name,r&&Object.assign(o,r),o};const D0=null;function xr(i){return C.isPlainObject(i)||C.isArray(i)}function ha(i){return C.endsWith(i,"[]")?i.slice(0,-2):i}function Fh(i,t,e){return i?i.concat(t).map(function(n,r){return n=ha(n),!e&&r?"["+n+"]":n}).join(e?".":""):t}function N0(i){return C.isArray(i)&&!i.some(xr)}const L0=C.toFlatObject(C,{},null,function(t){return/^is[A-Z]/.test(t)});function zn(i,t,e){if(!C.isObject(i))throw new TypeError("target must be an object");t=t||new FormData,e=C.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,T){return!C.isUndefined(T[g])});const s=e.metaTokens,n=e.visitor||u,r=e.dots,o=e.indexes,a=(e.Blob||typeof Blob<"u"&&Blob)&&C.isSpecCompliantForm(t);if(!C.isFunction(n))throw new TypeError("visitor must be a function");function l(d){if(d===null)return"";if(C.isDate(d))return d.toISOString();if(!a&&C.isBlob(d))throw new rt("Blob is not supported. Use a Buffer instead.");return C.isArrayBuffer(d)||C.isTypedArray(d)?a&&typeof Blob=="function"?new Blob([d]):Buffer.from(d):d}function u(d,g,T){let S=d;if(d&&!T&&typeof d=="object"){if(C.endsWith(g,"{}"))g=s?g:g.slice(0,-2),d=JSON.stringify(d);else if(C.isArray(d)&&N0(d)||(C.isFileList(d)||C.endsWith(g,"[]"))&&(S=C.toArray(d)))return g=ha(g),S.forEach(function(O,E){!(C.isUndefined(O)||O===null)&&t.append(o===!0?Fh([g],E,r):o===null?g:g+"[]",l(O))}),!1}return xr(d)?!0:(t.append(Fh(T,g,r),l(d)),!1)}const c=[],f=Object.assign(L0,{defaultVisitor:u,convertValue:l,isVisitable:xr});function m(d,g){if(!C.isUndefined(d)){if(c.indexOf(d)!==-1)throw Error("Circular reference detected in "+g.join("."));c.push(d),C.forEach(d,function(S,M){(!(C.isUndefined(S)||S===null)&&n.call(t,S,C.isString(M)?M.trim():M,g,f))===!0&&m(S,g?g.concat(M):[M])}),c.pop()}}if(!C.isObject(i))throw new TypeError("data must be an object");return m(i),t}function Ah(i){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function Kr(i,t){this._pairs=[],i&&zn(i,this,t)}const la=Kr.prototype;la.append=function(t,e){this._pairs.push([t,e])};la.toString=function(t){const e=t?function(s){return t.call(this,s,Ah)}:Ah;return this._pairs.map(function(n){return e(n[0])+"="+e(n[1])},"").join("&")};function F0(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function aa(i,t,e){if(!t)return i;const s=e&&e.encode||F0,n=e&&e.serialize;let r;if(n?r=n(t,e):r=C.isURLSearchParams(t)?t.toString():new Kr(t,e).toString(s),r){const o=i.indexOf("#");o!==-1&&(i=i.slice(0,o)),i+=(i.indexOf("?")===-1?"?":"&")+r}return i}class A0{constructor(){this.handlers=[]}use(t,e,s){return this.handlers.push({fulfilled:t,rejected:e,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){C.forEach(this.handlers,function(s){s!==null&&t(s)})}}const Bh=A0,ua={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},B0=typeof URLSearchParams<"u"?URLSearchParams:Kr,I0=typeof FormData<"u"?FormData:null,U0=(()=>{let i;return typeof navigator<"u"&&((i=navigator.product)==="ReactNative"||i==="NativeScript"||i==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),H0=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Pe={isBrowser:!0,classes:{URLSearchParams:B0,FormData:I0,Blob},isStandardBrowserEnv:U0,isStandardBrowserWebWorkerEnv:H0,protocols:["http","https","file","blob","url","data"]};function j0(i,t){return zn(i,new Pe.classes.URLSearchParams,Object.assign({visitor:function(e,s,n,r){return Pe.isNode&&C.isBuffer(e)?(this.append(s,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function W0(i){return C.matchAll(/\w+|\[(\w*)]/g,i).map(t=>t[0]==="[]"?"":t[1]||t[0])}function G0(i){const t={},e=Object.keys(i);let s;const n=e.length;let r;for(s=0;s<n;s++)r=e[s],t[r]=i[r];return t}function ca(i){function t(e,s,n,r){let o=e[r++];const h=Number.isFinite(+o),a=r>=e.length;return o=!o&&C.isArray(n)?n.length:o,a?(C.hasOwnProp(n,o)?n[o]=[n[o],s]:n[o]=s,!h):((!n[o]||!C.isObject(n[o]))&&(n[o]=[]),t(e,s,n[o],r)&&C.isArray(n[o])&&(n[o]=G0(n[o])),!h)}if(C.isFormData(i)&&C.isFunction(i.entries)){const e={};return C.forEachEntry(i,(s,n)=>{t(W0(s),n,e,0)}),e}return null}const q0={"Content-Type":void 0};function Y0(i,t,e){if(C.isString(i))try{return(t||JSON.parse)(i),C.trim(i)}catch(s){if(s.name!=="SyntaxError")throw s}return(e||JSON.stringify)(i)}const Rn={transitional:ua,adapter:["xhr","http"],transformRequest:[function(t,e){const s=e.getContentType()||"",n=s.indexOf("application/json")>-1,r=C.isObject(t);if(r&&C.isHTMLForm(t)&&(t=new FormData(t)),C.isFormData(t))return n&&n?JSON.stringify(ca(t)):t;if(C.isArrayBuffer(t)||C.isBuffer(t)||C.isStream(t)||C.isFile(t)||C.isBlob(t))return t;if(C.isArrayBufferView(t))return t.buffer;if(C.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let h;if(r){if(s.indexOf("application/x-www-form-urlencoded")>-1)return j0(t,this.formSerializer).toString();if((h=C.isFileList(t))||s.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return zn(h?{"files[]":t}:t,a&&new a,this.formSerializer)}}return r||n?(e.setContentType("application/json",!1),Y0(t)):t}],transformResponse:[function(t){const e=this.transitional||Rn.transitional,s=e&&e.forcedJSONParsing,n=this.responseType==="json";if(t&&C.isString(t)&&(s&&!this.responseType||n)){const o=!(e&&e.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(h){if(o)throw h.name==="SyntaxError"?rt.from(h,rt.ERR_BAD_RESPONSE,this,null,this.response):h}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Pe.classes.FormData,Blob:Pe.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};C.forEach(["delete","get","head"],function(t){Rn.headers[t]={}});C.forEach(["post","put","patch"],function(t){Rn.headers[t]=C.merge(q0)});const Jr=Rn,K0=C.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),J0=i=>{const t={};let e,s,n;return i&&i.split(`
`).forEach(function(o){n=o.indexOf(":"),e=o.substring(0,n).trim().toLowerCase(),s=o.substring(n+1).trim(),!(!e||t[e]&&K0[e])&&(e==="set-cookie"?t[e]?t[e].push(s):t[e]=[s]:t[e]=t[e]?t[e]+", "+s:s)}),t},Ih=Symbol("internals");function Zi(i){return i&&String(i).trim().toLowerCase()}function nn(i){return i===!1||i==null?i:C.isArray(i)?i.map(nn):String(i)}function X0(i){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=e.exec(i);)t[s[1]]=s[2];return t}function Q0(i){return/^[-_a-zA-Z]+$/.test(i.trim())}function hr(i,t,e,s,n){if(C.isFunction(s))return s.call(this,t,e);if(n&&(t=e),!!C.isString(t)){if(C.isString(s))return t.indexOf(s)!==-1;if(C.isRegExp(s))return s.test(t)}}function Z0(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,s)=>e.toUpperCase()+s)}function $0(i,t){const e=C.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(i,s+e,{value:function(n,r,o){return this[s].call(this,t,n,r,o)},configurable:!0})})}class Vn{constructor(t){t&&this.set(t)}set(t,e,s){const n=this;function r(h,a,l){const u=Zi(a);if(!u)throw new Error("header name must be a non-empty string");const c=C.findKey(n,u);(!c||n[c]===void 0||l===!0||l===void 0&&n[c]!==!1)&&(n[c||a]=nn(h))}const o=(h,a)=>C.forEach(h,(l,u)=>r(l,u,a));return C.isPlainObject(t)||t instanceof this.constructor?o(t,e):C.isString(t)&&(t=t.trim())&&!Q0(t)?o(J0(t),e):t!=null&&r(e,t,s),this}get(t,e){if(t=Zi(t),t){const s=C.findKey(this,t);if(s){const n=this[s];if(!e)return n;if(e===!0)return X0(n);if(C.isFunction(e))return e.call(this,n,s);if(C.isRegExp(e))return e.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Zi(t),t){const s=C.findKey(this,t);return!!(s&&this[s]!==void 0&&(!e||hr(this,this[s],s,e)))}return!1}delete(t,e){const s=this;let n=!1;function r(o){if(o=Zi(o),o){const h=C.findKey(s,o);h&&(!e||hr(s,s[h],h,e))&&(delete s[h],n=!0)}}return C.isArray(t)?t.forEach(r):r(t),n}clear(t){const e=Object.keys(this);let s=e.length,n=!1;for(;s--;){const r=e[s];(!t||hr(this,this[r],r,t,!0))&&(delete this[r],n=!0)}return n}normalize(t){const e=this,s={};return C.forEach(this,(n,r)=>{const o=C.findKey(s,r);if(o){e[o]=nn(n),delete e[r];return}const h=t?Z0(r):String(r).trim();h!==r&&delete e[r],e[h]=nn(n),s[h]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return C.forEach(this,(s,n)=>{s!=null&&s!==!1&&(e[n]=t&&C.isArray(s)?s.join(", "):s)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const s=new this(t);return e.forEach(n=>s.set(n)),s}static accessor(t){const s=(this[Ih]=this[Ih]={accessors:{}}).accessors,n=this.prototype;function r(o){const h=Zi(o);s[h]||($0(n,o),s[h]=!0)}return C.isArray(t)?t.forEach(r):r(t),this}}Vn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);C.freezeMethods(Vn.prototype);C.freezeMethods(Vn);const Ie=Vn;function lr(i,t){const e=this||Jr,s=t||e,n=Ie.from(s.headers);let r=s.data;return C.forEach(i,function(h){r=h.call(e,r,n.normalize(),t?t.status:void 0)}),n.normalize(),r}function fa(i){return!!(i&&i.__CANCEL__)}function ys(i,t,e){rt.call(this,i??"canceled",rt.ERR_CANCELED,t,e),this.name="CanceledError"}C.inherits(ys,rt,{__CANCEL__:!0});function tm(i,t,e){const s=e.config.validateStatus;!e.status||!s||s(e.status)?i(e):t(new rt("Request failed with status code "+e.status,[rt.ERR_BAD_REQUEST,rt.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}const em=Pe.isStandardBrowserEnv?function(){return{write:function(e,s,n,r,o,h){const a=[];a.push(e+"="+encodeURIComponent(s)),C.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),C.isString(r)&&a.push("path="+r),C.isString(o)&&a.push("domain="+o),h===!0&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){const s=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function im(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function sm(i,t){return t?i.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):i}function da(i,t){return i&&!im(t)?sm(i,t):t}const nm=Pe.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let s;function n(r){let o=r;return t&&(e.setAttribute("href",o),o=e.href),e.setAttribute("href",o),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return s=n(window.location.href),function(o){const h=C.isString(o)?n(o):o;return h.protocol===s.protocol&&h.host===s.host}}():function(){return function(){return!0}}();function rm(i){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return t&&t[1]||""}function om(i,t){i=i||10;const e=new Array(i),s=new Array(i);let n=0,r=0,o;return t=t!==void 0?t:1e3,function(a){const l=Date.now(),u=s[r];o||(o=l),e[n]=a,s[n]=l;let c=r,f=0;for(;c!==n;)f+=e[c++],c=c%i;if(n=(n+1)%i,n===r&&(r=(r+1)%i),l-o<t)return;const m=u&&l-u;return m?Math.round(f*1e3/m):void 0}}function Uh(i,t){let e=0;const s=om(50,250);return n=>{const r=n.loaded,o=n.lengthComputable?n.total:void 0,h=r-e,a=s(h),l=r<=o;e=r;const u={loaded:r,total:o,progress:o?r/o:void 0,bytes:h,rate:a||void 0,estimated:a&&o&&l?(o-r)/a:void 0,event:n};u[t?"download":"upload"]=!0,i(u)}}const hm=typeof XMLHttpRequest<"u",lm=hm&&function(i){return new Promise(function(e,s){let n=i.data;const r=Ie.from(i.headers).normalize(),o=i.responseType;let h;function a(){i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}C.isFormData(n)&&(Pe.isStandardBrowserEnv||Pe.isStandardBrowserWebWorkerEnv)&&r.setContentType(!1);let l=new XMLHttpRequest;if(i.auth){const m=i.auth.username||"",d=i.auth.password?unescape(encodeURIComponent(i.auth.password)):"";r.set("Authorization","Basic "+btoa(m+":"+d))}const u=da(i.baseURL,i.url);l.open(i.method.toUpperCase(),aa(u,i.params,i.paramsSerializer),!0),l.timeout=i.timeout;function c(){if(!l)return;const m=Ie.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders()),g={data:!o||o==="text"||o==="json"?l.responseText:l.response,status:l.status,statusText:l.statusText,headers:m,config:i,request:l};tm(function(S){e(S),a()},function(S){s(S),a()},g),l=null}if("onloadend"in l?l.onloadend=c:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(c)},l.onabort=function(){l&&(s(new rt("Request aborted",rt.ECONNABORTED,i,l)),l=null)},l.onerror=function(){s(new rt("Network Error",rt.ERR_NETWORK,i,l)),l=null},l.ontimeout=function(){let d=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const g=i.transitional||ua;i.timeoutErrorMessage&&(d=i.timeoutErrorMessage),s(new rt(d,g.clarifyTimeoutError?rt.ETIMEDOUT:rt.ECONNABORTED,i,l)),l=null},Pe.isStandardBrowserEnv){const m=(i.withCredentials||nm(u))&&i.xsrfCookieName&&em.read(i.xsrfCookieName);m&&r.set(i.xsrfHeaderName,m)}n===void 0&&r.setContentType(null),"setRequestHeader"in l&&C.forEach(r.toJSON(),function(d,g){l.setRequestHeader(g,d)}),C.isUndefined(i.withCredentials)||(l.withCredentials=!!i.withCredentials),o&&o!=="json"&&(l.responseType=i.responseType),typeof i.onDownloadProgress=="function"&&l.addEventListener("progress",Uh(i.onDownloadProgress,!0)),typeof i.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",Uh(i.onUploadProgress)),(i.cancelToken||i.signal)&&(h=m=>{l&&(s(!m||m.type?new ys(null,i,l):m),l.abort(),l=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const f=rm(u);if(f&&Pe.protocols.indexOf(f)===-1){s(new rt("Unsupported protocol "+f+":",rt.ERR_BAD_REQUEST,i));return}l.send(n||null)})},rn={http:D0,xhr:lm};C.forEach(rn,(i,t)=>{if(i){try{Object.defineProperty(i,"name",{value:t})}catch{}Object.defineProperty(i,"adapterName",{value:t})}});const am={getAdapter:i=>{i=C.isArray(i)?i:[i];const{length:t}=i;let e,s;for(let n=0;n<t&&(e=i[n],!(s=C.isString(e)?rn[e.toLowerCase()]:e));n++);if(!s)throw s===!1?new rt(`Adapter ${e} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(C.hasOwnProp(rn,e)?`Adapter '${e}' is not available in the build`:`Unknown adapter '${e}'`);if(!C.isFunction(s))throw new TypeError("adapter is not a function");return s},adapters:rn};function ar(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new ys(null,i)}function Hh(i){return ar(i),i.headers=Ie.from(i.headers),i.data=lr.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),am.getAdapter(i.adapter||Jr.adapter)(i).then(function(s){return ar(i),s.data=lr.call(i,i.transformResponse,s),s.headers=Ie.from(s.headers),s},function(s){return fa(s)||(ar(i),s&&s.response&&(s.response.data=lr.call(i,i.transformResponse,s.response),s.response.headers=Ie.from(s.response.headers))),Promise.reject(s)})}const jh=i=>i instanceof Ie?i.toJSON():i;function zi(i,t){t=t||{};const e={};function s(l,u,c){return C.isPlainObject(l)&&C.isPlainObject(u)?C.merge.call({caseless:c},l,u):C.isPlainObject(u)?C.merge({},u):C.isArray(u)?u.slice():u}function n(l,u,c){if(C.isUndefined(u)){if(!C.isUndefined(l))return s(void 0,l,c)}else return s(l,u,c)}function r(l,u){if(!C.isUndefined(u))return s(void 0,u)}function o(l,u){if(C.isUndefined(u)){if(!C.isUndefined(l))return s(void 0,l)}else return s(void 0,u)}function h(l,u,c){if(c in t)return s(l,u);if(c in i)return s(void 0,l)}const a={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:h,headers:(l,u)=>n(jh(l),jh(u),!0)};return C.forEach(Object.keys(i).concat(Object.keys(t)),function(u){const c=a[u]||n,f=c(i[u],t[u],u);C.isUndefined(f)&&c!==h||(e[u]=f)}),e}const ma="1.3.3",Xr={};["object","boolean","number","function","string","symbol"].forEach((i,t)=>{Xr[i]=function(s){return typeof s===i||"a"+(t<1?"n ":" ")+i}});const Wh={};Xr.transitional=function(t,e,s){function n(r,o){return"[Axios v"+ma+"] Transitional option '"+r+"'"+o+(s?". "+s:"")}return(r,o,h)=>{if(t===!1)throw new rt(n(o," has been removed"+(e?" in "+e:"")),rt.ERR_DEPRECATED);return e&&!Wh[o]&&(Wh[o]=!0,console.warn(n(o," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(r,o,h):!0}};function um(i,t,e){if(typeof i!="object")throw new rt("options must be an object",rt.ERR_BAD_OPTION_VALUE);const s=Object.keys(i);let n=s.length;for(;n-- >0;){const r=s[n],o=t[r];if(o){const h=i[r],a=h===void 0||o(h,r,i);if(a!==!0)throw new rt("option "+r+" must be "+a,rt.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new rt("Unknown option "+r,rt.ERR_BAD_OPTION)}}const Mr={assertOptions:um,validators:Xr},Ke=Mr.validators;let Mn=class{constructor(t){this.defaults=t,this.interceptors={request:new Bh,response:new Bh}}request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=zi(this.defaults,e);const{transitional:s,paramsSerializer:n,headers:r}=e;s!==void 0&&Mr.assertOptions(s,{silentJSONParsing:Ke.transitional(Ke.boolean),forcedJSONParsing:Ke.transitional(Ke.boolean),clarifyTimeoutError:Ke.transitional(Ke.boolean)},!1),n!==void 0&&Mr.assertOptions(n,{encode:Ke.function,serialize:Ke.function},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o;o=r&&C.merge(r.common,r[e.method]),o&&C.forEach(["delete","get","head","post","put","patch","common"],d=>{delete r[d]}),e.headers=Ie.concat(o,r);const h=[];let a=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(e)===!1||(a=a&&g.synchronous,h.unshift(g.fulfilled,g.rejected))});const l=[];this.interceptors.response.forEach(function(g){l.push(g.fulfilled,g.rejected)});let u,c=0,f;if(!a){const d=[Hh.bind(this),void 0];for(d.unshift.apply(d,h),d.push.apply(d,l),f=d.length,u=Promise.resolve(e);c<f;)u=u.then(d[c++],d[c++]);return u}f=h.length;let m=e;for(c=0;c<f;){const d=h[c++],g=h[c++];try{m=d(m)}catch(T){g.call(this,T);break}}try{u=Hh.call(this,m)}catch(d){return Promise.reject(d)}for(c=0,f=l.length;c<f;)u=u.then(l[c++],l[c++]);return u}getUri(t){t=zi(this.defaults,t);const e=da(t.baseURL,t.url);return aa(e,t.params,t.paramsSerializer)}};C.forEach(["delete","get","head","options"],function(t){Mn.prototype[t]=function(e,s){return this.request(zi(s||{},{method:t,url:e,data:(s||{}).data}))}});C.forEach(["post","put","patch"],function(t){function e(s){return function(r,o,h){return this.request(zi(h||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}Mn.prototype[t]=e(),Mn.prototype[t+"Form"]=e(!0)});const on=Mn;class Qr{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(r){e=r});const s=this;this.promise.then(n=>{if(!s._listeners)return;let r=s._listeners.length;for(;r-- >0;)s._listeners[r](n);s._listeners=null}),this.promise.then=n=>{let r;const o=new Promise(h=>{s.subscribe(h),r=h}).then(n);return o.cancel=function(){s.unsubscribe(r)},o},t(function(r,o,h){s.reason||(s.reason=new ys(r,o,h),e(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}static source(){let t;return{token:new Qr(function(n){t=n}),cancel:t}}}const cm=Qr;function fm(i){return function(e){return i.apply(null,e)}}function dm(i){return C.isObject(i)&&i.isAxiosError===!0}const Sr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Sr).forEach(([i,t])=>{Sr[t]=i});const mm=Sr;function ga(i){const t=new on(i),e=Xl(on.prototype.request,t);return C.extend(e,on.prototype,t,{allOwnKeys:!0}),C.extend(e,t,null,{allOwnKeys:!0}),e.create=function(n){return ga(zi(i,n))},e}const Dt=ga(Jr);Dt.Axios=on;Dt.CanceledError=ys;Dt.CancelToken=cm;Dt.isCancel=fa;Dt.VERSION=ma;Dt.toFormData=zn;Dt.AxiosError=rt;Dt.Cancel=Dt.CanceledError;Dt.all=function(t){return Promise.all(t)};Dt.spread=fm;Dt.isAxiosError=dm;Dt.mergeConfig=zi;Dt.AxiosHeaders=Ie;Dt.formToJSON=i=>ca(C.isHTMLForm(i)?new FormData(i):i);Dt.HttpStatusCode=mm;Dt.default=Dt;const gm=Dt;class pa{constructor(t){Ji(this,"api");this.baseURL=t,this.api=gm.create({baseURL:t})}async fetchJson(t){return(await this.api.get(t,{headers:{accept:"application/json"}})).data}}class pm{constructor(){Ji(this,"api");this.api=new pa("https://coins.llama.fi")}getPriceRoute(t,e="4h"){return`/prices/current/${t}?searchWidth=${e}`}async _getPrices(t){const e=Object.fromEntries(t.map(({id:o,token:h})=>[`${h.chain}:${h.address}`,o])),s=this.getPriceRoute(Object.keys(e).join(",")),r=(await this.api.fetchJson(s)).coins??{};return Object.fromEntries(Object.entries(e).map(([o,h])=>[h,r[o]]).map(([o,h])=>[o,h?{usd:h.price,timestamp:new Date(h.timestamp>1775369079?h.timestamp:Date.now()).toISOString(),source:this.api.baseURL+s}:null]))}async getPrices(t){const e=i0(t,this.api.baseURL,n=>this.getPriceRoute(n.map(({token:r})=>`${r.chain}:${r.address}`).join(","))),s=await Promise.all(e.map(n=>this._getPrices(n)));return $i.merge({},...s)}async getPrice(t){return(await this.getPrices([t]))[t.id]}}const vm=2048,bm=30;class ym{constructor(){Ji(this,"api");this.api=new pa("https://api.dexscreener.com")}getPriceRoute(t){return`/latest/dex/tokens/${t}`}async _getPrices(t){const e=Object.fromEntries(t.map(l=>[`${l.token.chain}:${l.token.address}`,l])),s=this.getPriceRoute(Object.keys(e).join(",")),o=((await this.api.fetchJson(s)).pairs??[]).filter(l=>l.baseToken.address in e),h=$i.groupBy(o,"baseToken.address");return Object.fromEntries(Object.entries(h).map(([l,u])=>[e[l].id,e[l].token.chain,u]).map(([l,u,c])=>[l,c.filter(f=>f.chainId==u)]).map(([l,u])=>[l,{usd:au($i.map(u,"priceUsd")),timestamp:new Date().toISOString(),source:this.api.baseURL+s}]))}async getPrices(t){const e=el(t,n=>(this.api.baseURL+this.getPriceRoute($i.map(n,"token.address").join(","))).length<=vm&&n.length<=bm),s=await Promise.all(e.map(n=>this._getPrices(n)));return $i.merge({},...s)}async getPrice(t){return(await this.getPrices([t]))[t.id]}}class _m extends t0{constructor(){super({defillama:pm,dexscreener:ym})}async getPrices(t){let e={};for(const s of this.instances)if(e={...e,...await s.getPrices(t.filter(({id:n})=>!e[n]))},t.every(({id:n})=>e[n]))break;return e}async getPrice(t){return(await this.getPrices([t]))[t.id]}}function Gh(i,t,e){const s=i.slice();return s[32]=t[e],s}function qh(i,t,e){const s=i.slice();return s[35]=t[e],s}function Yh(i){let t,e,s;return e=new gd({props:{fillPercent:i[35].value,class:"h-full w-full",waveColor:"#FFDDDD",waveAnimateTime:2e3,waveHeight:.1,waveHeightScaling:!0}}),{c(){t=A("div"),Qt(e.$$.fragment),this.h()},l(n){t=B(n,"DIV",{class:!0});var r=R(t);Zt(e.$$.fragment,r),r.forEach(x),this.h()},h(){_(t,"class","absolute top-0 left-0 h-full w-full")},m(n,r){ft(n,t,r),$t(e,t,null),s=!0},p(n,r){const o={};r[0]&128&&(o.fillPercent=n[35].value),e.$set(o)},i(n){s||(Q(e.$$.fragment,n),s=!0)},o(n){st(e.$$.fragment,n),s=!1},d(n){n&&x(t),te(e)}}}function wm(i){let t=i[35].value+"",e;return{c(){e=q(t)},l(s){e=Y(s,t)},m(s,n){ft(s,e,n)},p(s,n){n[0]&128&&t!==(t=s[35].value+"")&&Ot(e,t)},d(s){s&&x(e)}}}function xm(i){let t=ti(i[35].value)+"",e;return{c(){e=q(t)},l(s){e=Y(s,t)},m(s,n){ft(s,e,n)},p(s,n){n[0]&128&&t!==(t=ti(s[35].value)+"")&&Ot(e,t)},d(s){s&&x(e)}}}function Mm(i){let t=Xt(i[35].value)+"",e;return{c(){e=q(t)},l(s){e=Y(s,t)},m(s,n){ft(s,e,n)},p(s,n){n[0]&128&&t!==(t=Xt(s[35].value)+"")&&Ot(e,t)},d(s){s&&x(e)}}}function Sm(i){let t=i[35].value+"",e;return{c(){e=q(t)},l(s){e=Y(s,t)},m(s,n){ft(s,e,n)},p(s,n){n[0]&128&&t!==(t=s[35].value+"")&&Ot(e,t)},d(s){s&&x(e)}}}function Kh(i){let t,e,s,n,r=i[35].name+"",o,h,a,l,u=i[35].type=="percent"&&typeof i[35].value=="number"&&Yh(i);function c(d,g){return d[35].type=="standard"?Sm:d[35].type=="currency"&&typeof d[35].value=="number"?Mm:d[35].type=="percent"&&typeof d[35].value=="number"?xm:wm}let f=c(i),m=f(i);return{c(){t=A("div"),u&&u.c(),e=ht(),s=A("dl"),n=A("dt"),o=q(r),h=A("dd"),m.c(),a=ht(),this.h()},l(d){t=B(d,"DIV",{class:!0});var g=R(t);u&&u.l(g),e=lt(g),s=B(g,"DL",{class:!0});var T=R(s);n=B(T,"DT",{class:!0});var S=R(n);o=Y(S,r),S.forEach(x),h=B(T,"DD",{class:!0});var M=R(h);m.l(M),M.forEach(x),T.forEach(x),a=lt(g),g.forEach(x),this.h()},h(){_(n,"class","text-sm font-medium text-gray-500 truncate"),_(h,"class","mt-1 text-3xl font-semibold text-gray-900"),_(s,"class","relative"),_(t,"class","relative px-4 py-5 bg-gray-50 sm:shadow sm:rounded-lg overflow-hidden sm:p-6")},m(d,g){ft(d,t,g),u&&u.m(t,null),y(t,e),y(t,s),y(s,n),y(n,o),y(s,h),m.m(h,null),y(t,a),l=!0},p(d,g){d[35].type=="percent"&&typeof d[35].value=="number"?u?(u.p(d,g),g[0]&128&&Q(u,1)):(u=Yh(d),u.c(),Q(u,1),u.m(t,e)):u&&(Je(),st(u,1,1,()=>{u=null}),Xe()),(!l||g[0]&128)&&r!==(r=d[35].name+"")&&Ot(o,r),f===(f=c(d))&&m?m.p(d,g):(m.d(1),m=f(d),m&&(m.c(),m.m(h,null)))},i(d){l||(Q(u),l=!0)},o(d){st(u),l=!1},d(d){d&&x(t),u&&u.d(),m.d()}}}function Jh(i){var ue,be,ye;let t,e,s,n,r,o,h,a,l,u=i[2].name+"",c,f,m=ba*va+"",d,g,T,S,M,O,E,F,G=Xt(i[4].underlying.usd)+"",U,Z,j,W,H,V,tt=((ye=(be=(ue=i[6])==null?void 0:ue.history)==null?void 0:be.at(-1))!=null&&ye.mcap?Xt(i[6].history.at(-1).mcap):"UNK")+"",z,b,k,w,N,p,P,I,J,$,xt,ot,Pt,dt=i[2].name+"",Bt,jt,Wt,St,mt,zt,at,ut,gt,Rt,Nt,ct,It,Tt=i[2].name+"",Gt,ee,ie,_t,pt;return w=new Bl({props:{data:i[5].length?[...new Set(i[5].flatMap(i[16]))].sort().map(i[17]):[{date:new Date().toISOString(),value:0}]}}),mt=new Jl({props:{graph:an(un(i[1],i[3],"down"),i[3]),data:i[0]}}),_t=new il({props:{data:i[0],columns:[{id:"name",title:"Name",class:"font-medium",link:!0},{id:"share",title:"%",class:""},{id:"price",title:"Price",class:"hidden lg:table-cell"},{id:"amount",title:"Amount",class:"hidden sm:table-cell"},{id:"underlying-usd",title:"Backing",class:""},{id:"underlying-ratio",title:"Mcap Ratio",class:""}],rows:i[5].map(i[18]).map(i[19]),sort:[{by:"share"}],class:""}}),{c(){t=A("div"),e=A("div"),s=A("div"),n=A("div"),r=A("h2"),o=q("Backing History"),h=ht(),a=A("p"),l=q("View "),c=q(u),f=q("'s backing history of up to the last "),d=q(m),g=q(" days."),T=ht(),S=A("div"),M=A("dl"),O=A("dt"),E=q("Current Backing"),F=A("dd"),U=q(G),Z=ht(),j=A("dl"),W=A("dt"),H=q("Current Market Cap"),V=A("dd"),z=q(tt),b=ht(),k=A("div"),Qt(w.$$.fragment),N=ht(),p=A("div"),P=A("div"),I=A("div"),J=A("h2"),$=q("Underlying Chain"),xt=ht(),ot=A("p"),Pt=q("View the full chain of "),Bt=q(dt),jt=q("'s underlying assets."),Wt=ht(),St=A("div"),Qt(mt.$$.fragment),zt=ht(),at=A("div"),ut=A("div"),gt=A("h2"),Rt=q("Underlying Assets"),Nt=ht(),ct=A("p"),It=q("List of "),Gt=q(Tt),ee=q("'s underlying assets."),ie=ht(),Qt(_t.$$.fragment),this.h()},l(L){t=B(L,"DIV",{class:!0});var X=R(t);e=B(X,"DIV",{class:!0});var Vt=R(e);s=B(Vt,"DIV",{class:!0});var Ct=R(s);n=B(Ct,"DIV",{class:!0});var Et=R(n);r=B(Et,"H2",{class:!0});var qt=R(r);o=Y(qt,"Backing History"),qt.forEach(x),h=lt(Et),a=B(Et,"P",{class:!0});var wt=R(a);l=Y(wt,"View "),c=Y(wt,u),f=Y(wt,"'s backing history of up to the last "),d=Y(wt,m),g=Y(wt," days."),wt.forEach(x),Et.forEach(x),T=lt(Ct),S=B(Ct,"DIV",{class:!0});var kt=R(S);M=B(kt,"DL",{});var ce=R(M);O=B(ce,"DT",{class:!0});var _e=R(O);E=Y(_e,"Current Backing"),_e.forEach(x),F=B(ce,"DD",{class:!0});var fe=R(F);U=Y(fe,G),fe.forEach(x),ce.forEach(x),Z=lt(kt),j=B(kt,"DL",{class:!0});var se=R(j);W=B(se,"DT",{class:!0});var de=R(W);H=Y(de,"Current Market Cap"),de.forEach(x),V=B(se,"DD",{class:!0});var me=R(V);z=Y(me,tt),me.forEach(x),se.forEach(x),kt.forEach(x),Ct.forEach(x),b=lt(Vt),k=B(Vt,"DIV",{class:!0});var we=R(k);Zt(w.$$.fragment,we),we.forEach(x),Vt.forEach(x),N=lt(X),p=B(X,"DIV",{class:!0});var ne=R(p);P=B(ne,"DIV",{class:!0});var xe=R(P);I=B(xe,"DIV",{class:!0});var re=R(I);J=B(re,"H2",{class:!0});var Me=R(J);$=Y(Me,"Underlying Chain"),Me.forEach(x),xt=lt(re),ot=B(re,"P",{class:!0});var oe=R(ot);Pt=Y(oe,"View the full chain of "),Bt=Y(oe,dt),jt=Y(oe,"'s underlying assets."),oe.forEach(x),re.forEach(x),xe.forEach(x),Wt=lt(ne),St=B(ne,"DIV",{class:!0});var Se=R(St);Zt(mt.$$.fragment,Se),Se.forEach(x),ne.forEach(x),X.forEach(x),zt=lt(L),at=B(L,"DIV",{class:!0});var he=R(at);ut=B(he,"DIV",{class:!0});var ae=R(ut);gt=B(ae,"H2",{class:!0});var nt=R(gt);Rt=Y(nt,"Underlying Assets"),nt.forEach(x),Nt=lt(ae),ct=B(ae,"P",{class:!0});var Lt=R(ct);It=Y(Lt,"List of "),Gt=Y(Lt,Tt),ee=Y(Lt,"'s underlying assets."),Lt.forEach(x),ae.forEach(x),ie=lt(he),Zt(_t.$$.fragment,he),he.forEach(x),this.h()},h(){_(r,"class","text-3xl tracking-tight font-bold text-gray-900"),_(a,"class","mt-4 text-lg text-gray-500"),_(n,"class","max-w-3xl mx-auto text-center"),_(O,"class","text-sm font-medium text-gray-500 truncate"),_(F,"class","mt-1 text-3xl font-semibold text-gray-900"),_(W,"class","text-sm font-medium text-gray-500 truncate"),_(V,"class","mt-1 text-3xl font-semibold text-gray-900"),_(j,"class","text-right"),_(S,"class","flex mt-6 items-center justify-between"),_(s,"class","px-4 pt-5 sm:px-6 sm:pt-6"),_(k,"class","mt-6 h-full overflow-hidden"),_(e,"class","flex flex-col bg-gray-50 shadow sm:rounded-lg overflow-hidden"),_(J,"class","text-3xl tracking-tight font-bold text-gray-900"),_(ot,"class","mt-4 text-lg text-gray-500"),_(I,"class","max-w-3xl mx-auto text-center"),_(P,"class","px-4 pt-5 sm:px-6 sm:pt-6"),_(St,"class","mt-6 h-full justify-center"),_(p,"class","flex flex-col bg-gray-50 shadow sm:rounded-lg overflow-hidden"),_(t,"class","grid grid-cols-1 gap-4 lg:grid-cols-2 shadow-none"),_(gt,"class","text-3xl tracking-tight font-bold text-gray-900"),_(ct,"class","mt-4 text-lg text-gray-500"),_(ut,"class","max-w-3xl mx-auto text-center px-4 py-5 sm:p-6"),_(at,"class","bg-gray-50 shadow sm:rounded-lg overflow-hidden sm:mx-0 divide-y divide-gray-200")},m(L,X){ft(L,t,X),y(t,e),y(e,s),y(s,n),y(n,r),y(r,o),y(n,h),y(n,a),y(a,l),y(a,c),y(a,f),y(a,d),y(a,g),y(s,T),y(s,S),y(S,M),y(M,O),y(O,E),y(M,F),y(F,U),y(S,Z),y(S,j),y(j,W),y(W,H),y(j,V),y(V,z),y(e,b),y(e,k),$t(w,k,null),y(t,N),y(t,p),y(p,P),y(P,I),y(I,J),y(J,$),y(I,xt),y(I,ot),y(ot,Pt),y(ot,Bt),y(ot,jt),y(p,Wt),y(p,St),$t(mt,St,null),ft(L,zt,X),ft(L,at,X),y(at,ut),y(ut,gt),y(gt,Rt),y(ut,Nt),y(ut,ct),y(ct,It),y(ct,Gt),y(ct,ee),y(at,ie),$t(_t,at,null),pt=!0},p(L,X){var qt,wt,kt;(!pt||X[0]&4)&&u!==(u=L[2].name+"")&&Ot(c,u),(!pt||X[0]&16)&&G!==(G=Xt(L[4].underlying.usd)+"")&&Ot(U,G),(!pt||X[0]&64)&&tt!==(tt=((kt=(wt=(qt=L[6])==null?void 0:qt.history)==null?void 0:wt.at(-1))!=null&&kt.mcap?Xt(L[6].history.at(-1).mcap):"UNK")+"")&&Ot(z,tt);const Vt={};X[0]&96&&(Vt.data=L[5].length?[...new Set(L[5].flatMap(L[16]))].sort().map(L[17]):[{date:new Date().toISOString(),value:0}]),w.$set(Vt),(!pt||X[0]&4)&&dt!==(dt=L[2].name+"")&&Ot(Bt,dt);const Ct={};X[0]&10&&(Ct.graph=an(un(L[1],L[3],"down"),L[3])),X[0]&1&&(Ct.data=L[0]),mt.$set(Ct),(!pt||X[0]&4)&&Tt!==(Tt=L[2].name+"")&&Ot(Gt,Tt);const Et={};X[0]&1&&(Et.data=L[0]),X[0]&114&&(Et.rows=L[5].map(L[18]).map(L[19])),_t.$set(Et)},i(L){pt||(Q(w.$$.fragment,L),Q(mt.$$.fragment,L),Q(_t.$$.fragment,L),pt=!0)},o(L){st(w.$$.fragment,L),st(mt.$$.fragment,L),st(_t.$$.fragment,L),pt=!1},d(L){L&&x(t),te(w),te(mt),L&&x(zt),L&&x(at),te(_t)}}}function Xh(i){var ue,be,ye;let t,e,s,n,r,o,h,a,l,u=i[2].name+"",c,f,m=ba*va+"",d,g,T,S,M,O,E,F,G=Xt(i[4].derivative.usd)+"",U,Z,j,W,H,V,tt=((ye=(be=(ue=i[6])==null?void 0:ue.history)==null?void 0:be.at(-1))!=null&&ye.mcap?Xt(i[6].history.at(-1).mcap):"UNK")+"",z,b,k,w,N,p,P,I,J,$,xt,ot,Pt,dt=i[2].name+"",Bt,jt,Wt,St,mt,zt,at,ut,gt,Rt,Nt,ct,It,Tt=i[2].name+"",Gt,ee,ie,_t,pt;return w=new Bl({props:{data:i[9].length?[...new Set(i[9].flatMap(i[20]))].sort().map(i[21]):[{date:new Date().toISOString(),value:0}]}}),mt=new Jl({props:{graph:an(un(i[1],i[3],"up"),i[3]),data:i[0]}}),_t=new il({props:{data:i[0],columns:[{id:"name",title:"Name",class:"font-medium",link:!0},{id:"share",title:"%",class:""},{id:"price",title:"Price",class:"hidden lg:table-cell"},{id:"amount",title:"Amount",class:"hidden sm:table-cell"},{id:"derivative-usd",title:"Backing",class:""},{id:"derivative-ratio",title:"Mcap Ratio",class:""}],rows:i[9].map(i[22]).map(i[23]),sort:[{by:"share"}],class:""}}),{c(){t=A("div"),e=A("div"),s=A("div"),n=A("div"),r=A("h2"),o=q("History of Derivative Mcap Ratio"),h=ht(),a=A("p"),l=q("View "),c=q(u),f=q("'s derivative history of up to the last "),d=q(m),g=q(" days."),T=ht(),S=A("div"),M=A("dl"),O=A("dt"),E=q(`Current Derivative Mcap Ratio
								`),F=A("dd"),U=q(G),Z=ht(),j=A("dl"),W=A("dt"),H=q("Current Market Cap"),V=A("dd"),z=q(tt),b=ht(),k=A("div"),Qt(w.$$.fragment),N=ht(),p=A("div"),P=A("div"),I=A("div"),J=A("h2"),$=q("Derivative Chain"),xt=ht(),ot=A("p"),Pt=q("View the full chain of "),Bt=q(dt),jt=q("'s derivative assets."),Wt=ht(),St=A("div"),Qt(mt.$$.fragment),zt=ht(),at=A("div"),ut=A("div"),gt=A("h2"),Rt=q("Derivative Assets"),Nt=ht(),ct=A("p"),It=q("List of "),Gt=q(Tt),ee=q("'s derivative assets."),ie=ht(),Qt(_t.$$.fragment),this.h()},l(L){t=B(L,"DIV",{class:!0});var X=R(t);e=B(X,"DIV",{class:!0});var Vt=R(e);s=B(Vt,"DIV",{class:!0});var Ct=R(s);n=B(Ct,"DIV",{class:!0});var Et=R(n);r=B(Et,"H2",{class:!0});var qt=R(r);o=Y(qt,"History of Derivative Mcap Ratio"),qt.forEach(x),h=lt(Et),a=B(Et,"P",{class:!0});var wt=R(a);l=Y(wt,"View "),c=Y(wt,u),f=Y(wt,"'s derivative history of up to the last "),d=Y(wt,m),g=Y(wt," days."),wt.forEach(x),Et.forEach(x),T=lt(Ct),S=B(Ct,"DIV",{class:!0});var kt=R(S);M=B(kt,"DL",{});var ce=R(M);O=B(ce,"DT",{class:!0});var _e=R(O);E=Y(_e,`Current Derivative Mcap Ratio
								`),_e.forEach(x),F=B(ce,"DD",{class:!0});var fe=R(F);U=Y(fe,G),fe.forEach(x),ce.forEach(x),Z=lt(kt),j=B(kt,"DL",{class:!0});var se=R(j);W=B(se,"DT",{class:!0});var de=R(W);H=Y(de,"Current Market Cap"),de.forEach(x),V=B(se,"DD",{class:!0});var me=R(V);z=Y(me,tt),me.forEach(x),se.forEach(x),kt.forEach(x),Ct.forEach(x),b=lt(Vt),k=B(Vt,"DIV",{class:!0});var we=R(k);Zt(w.$$.fragment,we),we.forEach(x),Vt.forEach(x),N=lt(X),p=B(X,"DIV",{class:!0});var ne=R(p);P=B(ne,"DIV",{class:!0});var xe=R(P);I=B(xe,"DIV",{class:!0});var re=R(I);J=B(re,"H2",{class:!0});var Me=R(J);$=Y(Me,"Derivative Chain"),Me.forEach(x),xt=lt(re),ot=B(re,"P",{class:!0});var oe=R(ot);Pt=Y(oe,"View the full chain of "),Bt=Y(oe,dt),jt=Y(oe,"'s derivative assets."),oe.forEach(x),re.forEach(x),xe.forEach(x),Wt=lt(ne),St=B(ne,"DIV",{class:!0});var Se=R(St);Zt(mt.$$.fragment,Se),Se.forEach(x),ne.forEach(x),X.forEach(x),zt=lt(L),at=B(L,"DIV",{class:!0});var he=R(at);ut=B(he,"DIV",{class:!0});var ae=R(ut);gt=B(ae,"H2",{class:!0});var nt=R(gt);Rt=Y(nt,"Derivative Assets"),nt.forEach(x),Nt=lt(ae),ct=B(ae,"P",{class:!0});var Lt=R(ct);It=Y(Lt,"List of "),Gt=Y(Lt,Tt),ee=Y(Lt,"'s derivative assets."),Lt.forEach(x),ae.forEach(x),ie=lt(he),Zt(_t.$$.fragment,he),he.forEach(x),this.h()},h(){_(r,"class","text-3xl tracking-tight font-bold text-gray-900"),_(a,"class","mt-4 text-lg text-gray-500"),_(n,"class","max-w-3xl mx-auto text-center"),_(O,"class","text-sm font-medium text-gray-500 truncate"),_(F,"class","mt-1 text-3xl font-semibold text-gray-900"),_(W,"class","text-sm font-medium text-gray-500 truncate"),_(V,"class","mt-1 text-3xl font-semibold text-gray-900"),_(j,"class","text-right"),_(S,"class","flex mt-6 items-center justify-between"),_(s,"class","px-4 pt-5 sm:px-6 sm:pt-6"),_(k,"class","mt-6 h-full overflow-hidden"),_(e,"class","flex flex-col bg-gray-50 shadow sm:rounded-lg overflow-hidden"),_(J,"class","text-3xl tracking-tight font-bold text-gray-900"),_(ot,"class","mt-4 text-lg text-gray-500"),_(I,"class","max-w-3xl mx-auto text-center"),_(P,"class","px-4 pt-5 sm:px-6 sm:pt-6"),_(St,"class","mt-6 h-full justify-center"),_(p,"class","flex flex-col bg-gray-50 shadow sm:rounded-lg overflow-hidden"),_(t,"class","grid grid-cols-1 gap-4 lg:grid-cols-2 shadow-none"),_(gt,"class","text-3xl tracking-tight font-bold text-gray-900"),_(ct,"class","mt-4 text-lg text-gray-500"),_(ut,"class","max-w-3xl mx-auto text-center px-4 py-5 sm:p-6"),_(at,"class","bg-gray-50 shadow sm:rounded-lg overflow-hidden sm:mx-0 divide-y divide-gray-200")},m(L,X){ft(L,t,X),y(t,e),y(e,s),y(s,n),y(n,r),y(r,o),y(n,h),y(n,a),y(a,l),y(a,c),y(a,f),y(a,d),y(a,g),y(s,T),y(s,S),y(S,M),y(M,O),y(O,E),y(M,F),y(F,U),y(S,Z),y(S,j),y(j,W),y(W,H),y(j,V),y(V,z),y(e,b),y(e,k),$t(w,k,null),y(t,N),y(t,p),y(p,P),y(P,I),y(I,J),y(J,$),y(I,xt),y(I,ot),y(ot,Pt),y(ot,Bt),y(ot,jt),y(p,Wt),y(p,St),$t(mt,St,null),ft(L,zt,X),ft(L,at,X),y(at,ut),y(ut,gt),y(gt,Rt),y(ut,Nt),y(ut,ct),y(ct,It),y(ct,Gt),y(ct,ee),y(at,ie),$t(_t,at,null),pt=!0},p(L,X){var qt,wt,kt;(!pt||X[0]&4)&&u!==(u=L[2].name+"")&&Ot(c,u),(!pt||X[0]&16)&&G!==(G=Xt(L[4].derivative.usd)+"")&&Ot(U,G),(!pt||X[0]&64)&&tt!==(tt=((kt=(wt=(qt=L[6])==null?void 0:qt.history)==null?void 0:wt.at(-1))!=null&&kt.mcap?Xt(L[6].history.at(-1).mcap):"UNK")+"")&&Ot(z,tt);const Vt={};X[0]&576&&(Vt.data=L[9].length?[...new Set(L[9].flatMap(L[20]))].sort().map(L[21]):[{date:new Date().toISOString(),value:0}]),w.$set(Vt),(!pt||X[0]&4)&&dt!==(dt=L[2].name+"")&&Ot(Bt,dt);const Ct={};X[0]&10&&(Ct.graph=an(un(L[1],L[3],"up"),L[3])),X[0]&1&&(Ct.data=L[0]),mt.$set(Ct),(!pt||X[0]&4)&&Tt!==(Tt=L[2].name+"")&&Ot(Gt,Tt);const Et={};X[0]&1&&(Et.data=L[0]),X[0]&594&&(Et.rows=L[9].map(L[22]).map(L[23])),_t.$set(Et)},i(L){pt||(Q(w.$$.fragment,L),Q(mt.$$.fragment,L),Q(_t.$$.fragment,L),pt=!0)},o(L){st(w.$$.fragment,L),st(mt.$$.fragment,L),st(_t.$$.fragment,L),pt=!1},d(L){L&&x(t),te(w),te(mt),L&&x(zt),L&&x(at),te(_t)}}}function Cm(i){let t,e;return t=new Ha({props:{class:"h-6 w-6 text-blue-500","aria-hidden":"true"}}),{c(){Qt(t.$$.fragment)},l(s){Zt(t.$$.fragment,s)},m(s,n){$t(t,s,n),e=!0},i(s){e||(Q(t.$$.fragment,s),e=!0)},o(s){st(t.$$.fragment,s),e=!1},d(s){te(t,s)}}}function Em(i){let t,e;return t=new Ka({props:{class:"h-6 w-6 text-green-500","aria-hidden":"true"}}),{c(){Qt(t.$$.fragment)},l(s){Zt(t.$$.fragment,s)},m(s,n){$t(t,s,n),e=!0},i(s){e||(Q(t.$$.fragment,s),e=!0)},o(s){st(t.$$.fragment,s),e=!1},d(s){te(t,s)}}}function Tm(i){let t,e;return t=new Ga({props:{class:"h-6 w-6 text-red-500","aria-hidden":"true"}}),{c(){Qt(t.$$.fragment)},l(s){Zt(t.$$.fragment,s)},m(s,n){$t(t,s,n),e=!0},i(s){e||(Q(t.$$.fragment,s),e=!0)},o(s){st(t.$$.fragment,s),e=!1},d(s){te(t,s)}}}function Qh(i){let t,e,s,n,r,o,h=i[32].html+"",a,l;const u=[Tm,Em,Cm],c=[];function f(m,d){return m[32].type=="doubt"?0:m[32].type=="praise"?1:m[32].type=="addition"?2:-1}return~(s=f(i))&&(n=c[s]=u[s](i)),{c(){t=A("div"),e=A("div"),n&&n.c(),r=ht(),o=A("dl"),a=ht(),this.h()},l(m){t=B(m,"DIV",{class:!0});var d=R(t);e=B(d,"DIV",{class:!0});var g=R(e);n&&n.l(g),g.forEach(x),r=lt(d),o=B(d,"DL",{class:!0});var T=R(o);T.forEach(x),a=lt(d),d.forEach(x),this.h()},h(){_(e,"class","flex-shrink-0 mr-4"),_(o,"class","flex-1"),_(t,"class","relative flex")},m(m,d){ft(m,t,d),y(t,e),~s&&c[s].m(e,null),y(t,r),y(t,o),o.innerHTML=h,y(t,a),l=!0},p(m,d){let g=s;s=f(m),s!==g&&(n&&(Je(),st(c[g],1,1,()=>{c[g]=null}),Xe()),~s?(n=c[s],n||(n=c[s]=u[s](m),n.c()),Q(n,1),n.m(e,null)):n=null),(!l||d[0]&1024)&&h!==(h=m[32].html+"")&&(o.innerHTML=h)},i(m){l||(Q(n),l=!0)},o(m){st(n),l=!1},d(m){m&&x(t),~s&&c[s].d()}}}function km(i){let t,e,s,n,r,o,h,a,l,u,c,f,m,d,g,T=i[2].name+"",S,M,O,E,F;t=new Ba({props:{title:i[8].title,description:i[8].description,openGraph:{title:i[8].title,description:i[8].description,url:i[8].url,type:"website",images:[i[8].image]},twitter:{site:"@bcked_com",title:i[8].title,description:i[8].description,image:i[8].image.url,imageAlt:i[8].image.alt}}});let G=i[7],U=[];for(let z=0;z<G.length;z+=1)U[z]=Kh(qh(i,G,z));const Z=z=>st(U[z],1,1,()=>{U[z]=null});let j=i[5].length>0&&Jh(i),W=i[9].length>0&&Xh(i),H=i[10],V=[];for(let z=0;z<H.length;z+=1)V[z]=Qh(Gh(i,H,z));const tt=z=>st(V[z],1,1,()=>{V[z]=null});return{c(){Qt(t.$$.fragment),e=ht(),s=A("div"),n=A("div"),r=A("div");for(let z=0;z<U.length;z+=1)U[z].c();o=ht(),j&&j.c(),h=ht(),W&&W.c(),a=ht(),l=A("div"),u=A("div"),c=A("h2"),f=q("Praise and Doubts"),m=ht(),d=A("p"),g=q("Any praise and doubts the community has about "),S=q(T),M=q("'s backing."),O=ht(),E=A("div");for(let z=0;z<V.length;z+=1)V[z].c();this.h()},l(z){Zt(t.$$.fragment,z),e=lt(z),s=B(z,"DIV",{class:!0});var b=R(s);n=B(b,"DIV",{class:!0});var k=R(n);r=B(k,"DIV",{class:!0});var w=R(r);for(let $=0;$<U.length;$+=1)U[$].l(w);w.forEach(x),o=lt(k),j&&j.l(k),h=lt(k),W&&W.l(k),a=lt(k),l=B(k,"DIV",{class:!0});var N=R(l);u=B(N,"DIV",{class:!0});var p=R(u);c=B(p,"H2",{class:!0});var P=R(c);f=Y(P,"Praise and Doubts"),P.forEach(x),m=lt(p),d=B(p,"P",{class:!0});var I=R(d);g=Y(I,"Any praise and doubts the community has about "),S=Y(I,T),M=Y(I,"'s backing."),I.forEach(x),p.forEach(x),O=lt(N),E=B(N,"DIV",{class:!0});var J=R(E);for(let $=0;$<V.length;$+=1)V[$].l(J);J.forEach(x),N.forEach(x),k.forEach(x),b.forEach(x),this.h()},h(){_(r,"class","grid grid-cols-2 gap-[0.1rem] sm:gap-4 md:grid-cols-4 shadow sm:shadow-none"),_(c,"class","text-3xl tracking-tight font-bold text-gray-900"),_(d,"class","mt-4 text-lg text-gray-500"),_(u,"class","max-w-3xl mx-auto text-center"),_(E,"class","mt-6 space-y-10 sm:space-y-0 sm:grid sm:grid-cols-2 sm:gap-x-6 sm:gap-y-12 lg:grid-cols-3 lg:gap-x-8"),_(l,"class","px-4 py-5 bg-gray-50 shadow sm:rounded-lg overflow-hidden sm:p-6"),_(n,"class","max-w-7xl mx-auto space-y-4 sm:px-6 lg:px-8"),_(s,"class","py-10")},m(z,b){$t(t,z,b),ft(z,e,b),ft(z,s,b),y(s,n),y(n,r);for(let k=0;k<U.length;k+=1)U[k].m(r,null);y(n,o),j&&j.m(n,null),y(n,h),W&&W.m(n,null),y(n,a),y(n,l),y(l,u),y(u,c),y(c,f),y(u,m),y(u,d),y(d,g),y(d,S),y(d,M),y(l,O),y(l,E);for(let k=0;k<V.length;k+=1)V[k].m(E,null);F=!0},p(z,b){const k={};if(b[0]&256&&(k.title=z[8].title),b[0]&256&&(k.description=z[8].description),b[0]&256&&(k.openGraph={title:z[8].title,description:z[8].description,url:z[8].url,type:"website",images:[z[8].image]}),b[0]&256&&(k.twitter={site:"@bcked_com",title:z[8].title,description:z[8].description,image:z[8].image.url,imageAlt:z[8].image.alt}),t.$set(k),b[0]&128){G=z[7];let w;for(w=0;w<G.length;w+=1){const N=qh(z,G,w);U[w]?(U[w].p(N,b),Q(U[w],1)):(U[w]=Kh(N),U[w].c(),Q(U[w],1),U[w].m(r,null))}for(Je(),w=G.length;w<U.length;w+=1)Z(w);Xe()}if(z[5].length>0?j?(j.p(z,b),b[0]&32&&Q(j,1)):(j=Jh(z),j.c(),Q(j,1),j.m(n,h)):j&&(Je(),st(j,1,1,()=>{j=null}),Xe()),z[9].length>0?W?(W.p(z,b),b[0]&512&&Q(W,1)):(W=Xh(z),W.c(),Q(W,1),W.m(n,a)):W&&(Je(),st(W,1,1,()=>{W=null}),Xe()),(!F||b[0]&4)&&T!==(T=z[2].name+"")&&Ot(S,T),b[0]&1024){H=z[10];let w;for(w=0;w<H.length;w+=1){const N=Gh(z,H,w);V[w]?(V[w].p(N,b),Q(V[w],1)):(V[w]=Qh(N),V[w].c(),Q(V[w],1),V[w].m(E,null))}for(Je(),w=H.length;w<V.length;w+=1)tt(w);Xe()}},i(z){if(!F){Q(t.$$.fragment,z);for(let b=0;b<G.length;b+=1)Q(U[b]);Q(j),Q(W);for(let b=0;b<H.length;b+=1)Q(V[b]);F=!0}},o(z){st(t.$$.fragment,z),U=U.filter(Boolean);for(let b=0;b<U.length;b+=1)st(U[b]);st(j),st(W),V=V.filter(Boolean);for(let b=0;b<V.length;b+=1)st(V[b]);F=!1},d(z){te(t,z),z&&x(e),z&&x(s),ln(U,z),j&&j.d(),W&&W.d(),ln(V,z)}}}let va=3,ba=10;function Pm(i,t,e){let s,n,r,o,h,a,l,u,c,f,m,d,g,T,S,M,O,E,F;K(i,La,p=>e(15,F=p));let{data:G}=t,U;const Z=new _m;async function j(){u.contracts&&await Z.getPrice(u.contracts)}$h(async()=>{await j();const p=setInterval(async()=>{await j()},5e3);return()=>{clearInterval(p)}});let W=[];const H=p=>Ds.map(p.data.history,"timestamp"),V=p=>{var J;const P=(J=Ns(u.history,p))==null?void 0:J.mcap,I=P?uo(Ds.sum(f.map($=>Ns($.data.history,p).value))/P,4):0;return{date:p,value:I*100}},tt=p=>({linkedNode:U.getNode(p.toId),linkData:p.data}),z=({linkedNode:p,linkData:P})=>{var I,J,$,xt,ot,Pt,dt,Bt,jt,Wt,St,mt,zt,at,ut,gt,Rt,Nt,ct,It,Tt;return{name:{text:p==null?void 0:p.data.details.name,value:p==null?void 0:p.data.details.name,icon:p==null?void 0:p.id},"name-path":{text:`${Os}/assets/${p==null?void 0:p.id}`,value:`${Os}/assets/${p==null?void 0:p.id}`},price:{text:($=(J=(I=p==null?void 0:p.data.history)==null?void 0:I.at(-1))==null?void 0:J.price)!=null&&$.usd?Xt(((Pt=(ot=(xt=p==null?void 0:p.data.history)==null?void 0:xt.at(-1))==null?void 0:ot.price)==null?void 0:Pt.usd)??0):"UNK",value:(jt=(Bt=(dt=p==null?void 0:p.data.history)==null?void 0:dt.at(-1))==null?void 0:Bt.price)==null?void 0:jt.usd},amount:{text:(St=(Wt=P.history)==null?void 0:Wt.at(-1))!=null&&St.amount?lo(P.history.at(-1).amount):"UNK",value:(zt=(mt=P.history)==null?void 0:mt.at(-1))==null?void 0:zt.amount},share:(ut=(at=P.history)==null?void 0:at.at(-1))!=null&&ut.value?{text:ti(P.history.at(-1).value/O.underlying.usd),value:P.history.at(-1).value/O.underlying.usd}:{text:"UNK",value:void 0},"underlying-usd":(Rt=(gt=P.history)==null?void 0:gt.at(-1))!=null&&Rt.value?{text:Xt(P.history.at(-1).value),value:P.history.at(-1).value}:{text:"UNK",value:void 0},"underlying-ratio":(ct=(Nt=P.history)==null?void 0:Nt.at(-1))!=null&&ct.value&&((Tt=(It=u==null?void 0:u.history)==null?void 0:It.at(-1))!=null&&Tt.mcap)?{text:ti(P.history.at(-1).value/(u==null?void 0:u.history.at(-1).mcap)),value:P.history.at(-1).value/(u==null?void 0:u.history.at(-1).mcap)}:{text:"UNK",value:void 0}}},b=p=>Ds.map(p.data.history,"timestamp"),k=p=>{var J;const P=(J=Ns(u.history,p))==null?void 0:J.mcap,I=P?uo(Ds.sum(m.map($=>Ns($.data.history,p).value))/P,4):0;return{date:p,value:I*100}},w=p=>({linkedNode:U.getNode(p.fromId),linkData:p.data}),N=({linkedNode:p,linkData:P})=>{var I,J,$,xt,ot,Pt,dt,Bt,jt,Wt,St,mt,zt,at,ut,gt,Rt,Nt;return{name:{text:p==null?void 0:p.data.details.name,value:p==null?void 0:p.data.details.name,icon:p==null?void 0:p.id},"name-path":{text:`${Os}/assets/${p==null?void 0:p.id}`,value:`${Os}/assets/${p==null?void 0:p.id}`},price:{text:($=(J=(I=p==null?void 0:p.data.history)==null?void 0:I.at(-1))==null?void 0:J.price)!=null&&$.usd?Xt(p==null?void 0:p.data.history.at(-1).price.usd):"UNK",value:(Pt=(ot=(xt=p==null?void 0:p.data.history)==null?void 0:xt.at(-1))==null?void 0:ot.price)==null?void 0:Pt.usd},amount:{text:(Bt=(dt=P.history)==null?void 0:dt.at(-1))!=null&&Bt.amount?lo(P.history.at(-1).amount):"UNK",value:(Wt=(jt=P.history)==null?void 0:jt.at(-1))==null?void 0:Wt.amount},share:(mt=(St=P.history)==null?void 0:St.at(-1))!=null&&mt.value?{text:ti(P.history.at(-1).value/O.derivative.usd),value:P.history.at(-1).value/O.derivative.usd}:{text:"UNK",value:void 0},"derivative-usd":(at=(zt=P.history)==null?void 0:zt.at(-1))!=null&&at.value?{text:Xt(P.history.at(-1).value),value:P.history.at(-1).value}:{text:"UNK",value:void 0},"derivative-ratio":(gt=(ut=P.history)==null?void 0:ut.at(-1))!=null&&gt.value&&((Nt=(Rt=u==null?void 0:u.history)==null?void 0:Rt.at(-1))!=null&&Nt.mcap)?{text:ti(P.history.at(-1).value/u.history.at(-1).mcap),value:P.history.at(-1).value/u.history.at(-1).mcap}:{text:"UNK",value:void 0}}};return i.$$set=p=>{"data"in p&&e(0,G=p.data)},i.$$.update=()=>{var p,P,I;i.$$.dirty[0]&1&&e(11,{assetsPrice:s,assetsBacking:n,assetsStats:r,graphData:o,comments:h}=G,r,(e(14,o),e(0,G)),(e(10,h),e(0,G))),i.$$.dirty[0]&16384&&e(1,U=Aa(o)),i.$$.dirty[0]&32768&&e(3,a=F.params.id),i.$$.dirty[0]&10&&e(13,l=U.getNode(a)),i.$$.dirty[0]&8192&&e(6,u=l.data),i.$$.dirty[0]&10&&e(12,c=(U.getLinks(a)??[]).filter(J=>{var $;return($=J.data.history.at(-1))==null?void 0:$.amount})),i.$$.dirty[0]&4104&&e(5,f=c.filter(J=>J.fromId==a)),i.$$.dirty[0]&4104&&e(9,m=c.filter(J=>J.fromId!=a)),i.$$.dirty[0]&64&&e(2,{details:d,issuer:g,chain:T,icon:S,contracts:M}=u,d),i.$$.dirty[0]&2056&&e(4,O=r[a]),i.$$.dirty[0]&112&&e(7,W=[(I=(P=(p=u==null?void 0:u.history)==null?void 0:p.at(-1))==null?void 0:P.price)!=null&&I.usd?{name:"Price",value:u.history.at(-1).price.usd,type:"currency"}:{name:"Price",value:"UNK",type:"standard"},{name:"Backing Assets",value:f.length,type:"standard"},O.underlying.ratio?{name:"Backing Ratio",value:O.underlying.ratio,type:"percent"}:{name:"Backing Ratio",value:"N/A",type:"standard"},O.underlying.count>0?{name:"Backing Uniformity",value:O.underlying.uniformity,type:"percent"}:{name:"Backing Uniformity",value:"N/A",type:"standard"}]),i.$$.dirty[0]&28&&e(8,E={title:`${d.name} (${d.symbol}) Backing, History, Chain`,description:`${d.name} is backed ${O.underlying.ratio?`to ${ti(O.underlying.ratio)} `:""}
			with ${Xt(O.underlying.usd)} by ${O.underlying.count} ${O.underlying.count==1?"asset":"assets"}. Learn more ...`,url:`${ao}/assets/${a}`,image:{url:`${ao}/previews/assets/${a}.jpg`,width:1200,height:630,alt:`Preview of ${d.name}'s backing view.`}})},[G,U,d,a,O,f,u,W,E,m,h,r,c,l,o,F,H,V,tt,z,b,k,w,N]}class Hm extends Ve{constructor(t){super(),Oe(this,t,Pm,km,De,{data:0},null,[-1,-1])}}export{Hm as default};
