import{S as A,i as k,s as $,k as w,y as T,l as j,m as B,z as C,h as _,n as D,b as O,A as S,g as V,d as I,B as L}from"../chunks/index.6847575b.js";import{b as p}from"../chunks/paths.ca312000.js";import{T as P}from"../chunks/table.d2784af3.js";import{c as q,f as z}from"../chunks/string-formatting.ca7775a2.js";import{n as E}from"../chunks/index.4679d6cd.js";import{l as N}from"../chunks/lodash.default.76769d5d.js";function F(a){let n,e,i;return e=new P({props:{data:a[0],columns:[{id:"rank",title:"#",class:""},{id:"name",title:"Name",class:"font-medium",link:!0},{id:"numAssets",title:"Assets",class:"hidden sm:table-cell"},{id:"tvl",title:"Total Value Locked (TVL)",class:""}],rows:Object.values(a[3]).map(a[4]).filter(v).sort(a[5]).map(a[6]),sort:[{by:"tvl"}],class:"sm:rounded-lg"}}),{c(){n=w("div"),T(e.$$.fragment),this.h()},l(t){n=j(t,"DIV",{class:!0});var r=B(n);C(e.$$.fragment,r),r.forEach(_),this.h()},h(){D(n,"class","w-full pt-8")},m(t,r){O(t,n,r),S(e,n,null),i=!0},p(t,[r]){const l={};r&1&&(l.data=t[0]),r&14&&(l.rows=Object.values(t[3]).map(t[4]).filter(v).sort(t[5]).map(t[6])),e.$set(l)},i(t){i||(V(e.$$.fragment,t),i=!0)},o(t){I(e.$$.fragment,t),i=!1},d(t){t&&_(n),L(e)}}}const v=a=>a.tvl;function G(a,n,e){let i,t,r,l,f,d,{data:u}=n;const g=s=>{const m=l.nodes.filter(o=>{var c;return((c=o.data.chain)==null?void 0:c.id)==s.id}).filter(o=>!o.data.details.tags.includes("lp"));return{...s,numAssets:m.length,tvl:N.sumBy(m,o=>{var c,h;return((h=(c=o.data.history)==null?void 0:c.at(-1))==null?void 0:h.mcap)??0})}},b=(s,m)=>q(s.tvl,m.tvl),y=(s,m)=>{var o;return{rank:{text:m+1,value:m},name:{text:s.name,value:s.name,icon:`${p}/${(o=d[s.id])==null?void 0:o.href}`},"name-path":{text:`${p}/chains/${s.id}`,value:`${p}/chains/${s.id}`},numAssets:{text:s.numAssets,value:s.numAssets},tvl:{text:z(s.tvl),value:s.tvl}}};return a.$$set=s=>{"data"in s&&e(0,u=s.data)},a.$$.update=()=>{a.$$.dirty&1&&e(1,{assetsPrice:i,assetsBacking:t,assetsStats:r,graphData:l,chainsDetails:f,chainsIcons:d}=u,l,(e(3,f),e(0,u)),(e(2,d),e(0,u))),a.$$.dirty&2&&E(l)},[u,l,d,f,g,b,y]}class U extends A{constructor(n){super(),k(this,n,G,F,$,{data:0})}}export{U as default};
