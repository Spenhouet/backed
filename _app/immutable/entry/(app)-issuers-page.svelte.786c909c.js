import{S as A,i as k,s as $,k as w,y as T,l as j,m as B,z as D,h as _,n as I,b as O,A as S,g as V,d as C,B as L}from"../chunks/index.467a0851.js";import{b as d}from"../chunks/paths.ea2e500e.js";import{T as P}from"../chunks/table.92e0d453.js";import{c as q,f as z}from"../chunks/string-formatting.ca7775a2.js";import{n as E}from"../chunks/index.4679d6cd.js";import{l as N}from"../chunks/lodash.default.76769d5d.js";function F(e){let n,a,i;return a=new P({props:{data:e[0],columns:[{id:"rank",title:"#",class:""},{id:"name",title:"Name",class:"font-medium",link:!0},{id:"numAssets",title:"Assets",class:"hidden sm:table-cell"},{id:"tvl",title:"Total Value Locked (TVL)",class:""}],rows:Object.values(e[3]).map(e[4]).filter(v).sort(e[5]).map(e[6]),sort:[{by:"tvl"}],class:""}}),{c(){n=w("div"),T(a.$$.fragment),this.h()},l(t){n=j(t,"DIV",{class:!0});var l=B(n);D(a.$$.fragment,l),l.forEach(_),this.h()},h(){I(n,"class","w-full pt-8")},m(t,l){O(t,n,l),S(a,n,null),i=!0},p(t,[l]){const r={};l&1&&(r.data=t[0]),l&14&&(r.rows=Object.values(t[3]).map(t[4]).filter(v).sort(t[5]).map(t[6])),a.$set(r)},i(t){i||(V(a.$$.fragment,t),i=!0)},o(t){C(a.$$.fragment,t),i=!1},d(t){t&&_(n),L(a)}}}const v=e=>e.tvl;function G(e,n,a){let i,t,l,r,f,u,{data:c}=n;const g=s=>{const m=r.nodes.filter(o=>o.data.details.issuer==s.id).filter(o=>!o.data.details.tags.includes("lp"));return{...s,numAssets:m.length,tvl:N.sumBy(m,o=>{var p,h;return((h=(p=o.data.history)==null?void 0:p.at(-1))==null?void 0:h.mcap)??0})}},b=(s,m)=>q(s.tvl,m.tvl),y=(s,m)=>{var o;return{rank:{text:m+1,value:m},name:{text:s.name,value:s.name,icon:`${d}/${(o=u[s.id])==null?void 0:o.href}`},"name-path":{text:`${d}/issuers/${s.id}`,value:`${d}/issuers/${s.id}`},numAssets:{text:s.numAssets,value:s.numAssets},tvl:{text:z(s.tvl),value:s.tvl}}};return e.$$set=s=>{"data"in s&&a(0,c=s.data)},e.$$.update=()=>{e.$$.dirty&1&&a(1,{assetsPrice:i,assetsBacking:t,assetsStats:l,graphData:r,issuersDetails:f,issuersIcons:u}=c,r,(a(3,f),a(0,c)),(a(2,u),a(0,c))),e.$$.dirty&2&&E(r)},[c,r,u,f,g,b,y]}class U extends A{constructor(n){super(),k(this,n,G,F,$,{data:0})}}export{U as default};
